(function(e){function t(t){for(var l,s,n=t[0],r=t[1],c=t[2],u=0,d=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],l=!0,s=1;s<a.length;s++){var n=a[s];0!==i[n]&&(l=!1)}l&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var l={},s={app:0},i={app:0},o=[];function n(e){return r.p+"js/"+({}[e]||e)+"."+{"chunk-02d63040":"c893cdec","chunk-08b88974":"56f1b6df","chunk-099984e3":"d6222cc6","chunk-0f651f2e":"e794b19f","chunk-10a1a70d":"985e3200","chunk-19ba4bf2":"0db6fd3b","chunk-6b48098c":"1593e3f3","chunk-7411b55b":"4f5dcc11","chunk-771e01b8":"07170c0a","chunk-cac7f58c":"f88f4c4a","chunk-d2275cf8":"46cbf1e7","chunk-e87ce730":"edc49fb3","chunk-edc075ee":"eb05d85a","chunk-fe9ce984":"f8842367"}[e]+".js"}function r(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a={"chunk-02d63040":1,"chunk-08b88974":1,"chunk-099984e3":1,"chunk-0f651f2e":1,"chunk-10a1a70d":1,"chunk-19ba4bf2":1,"chunk-6b48098c":1,"chunk-7411b55b":1,"chunk-771e01b8":1,"chunk-cac7f58c":1,"chunk-d2275cf8":1,"chunk-e87ce730":1,"chunk-edc075ee":1,"chunk-fe9ce984":1};s[e]?t.push(s[e]):0!==s[e]&&a[e]&&t.push(s[e]=new Promise((function(t,a){for(var l="css/"+({}[e]||e)+"."+{"chunk-02d63040":"a1bd13eb","chunk-08b88974":"47c65f00","chunk-099984e3":"e740ad01","chunk-0f651f2e":"22b35e68","chunk-10a1a70d":"7e223196","chunk-19ba4bf2":"6b893266","chunk-6b48098c":"55571095","chunk-7411b55b":"593f5b46","chunk-771e01b8":"e4519674","chunk-cac7f58c":"3f341377","chunk-d2275cf8":"2958afd9","chunk-e87ce730":"3aba6ea7","chunk-edc075ee":"047958c1","chunk-fe9ce984":"7a8a807a"}[e]+".css",i=r.p+l,o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var c=o[n],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===l||u===i))return t()}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){c=d[n],u=c.getAttribute("data-href");if(u===l||u===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var l=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=l,delete s[e],m.parentNode.removeChild(m),a(o)},m.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){s[e]=0})));var l=i[e];if(0!==l)if(l)t.push(l[2]);else{var o=new Promise((function(t,a){l=i[e]=[t,a]}));t.push(l[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=n(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=i[e];if(0!==a){if(a){var l=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+l+": "+s+")",d.name="ChunkLoadError",d.type=l,d.request=s,a[1](d)}i[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},r.m=e,r.c=l,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(a,l,function(t){return e[t]}.bind(null,l));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0235":function(e,t,a){"use strict";var l=a("e5e4"),s=a.n(l);s.a},"04ad":function(e,t,a){},"054d":function(e,t,a){"use strict";var l=a("947b"),s=a.n(l);s.a},"0574":function(e,t,a){"use strict";var l=a("fc89"),s=a.n(l);s.a},"07e2":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"counter-sign"},[a("h3",{staticClass:"dialog_tit"},[e._v("总体评审意见")]),a("el-radio-group",{attrs:{disabled:""},model:{value:e.countersignParam.agreeType,callback:function(t){e.$set(e.countersignParam,"agreeType",t)},expression:"countersignParam.agreeType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("通过")]),a("el-radio",{attrs:{label:"0"}},[e._v("不通过")])],1),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",disabled:""},model:{value:e.countersignParam.auditOpinion,callback:function(t){e.$set(e.countersignParam,"auditOpinion",t)},expression:"countersignParam.auditOpinion"}}),a("h3",{staticClass:"dialog_tit"},[e._v("总体评审附件")]),a("div",[""!=e.countersignParam.auditFileId?a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportReport?feaAuditid="+e.countersignParam.auditFileId+"&token="+e.token}},[e._v("总体评审附件")]):e._e()])],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn3},on:{click:e.saveAudtiInfo}},[e._v("不同意")]),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("同意")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){return{isAuto:!1,itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,loadingBtn2:!1,loadingBtn3:!1,countersignParam:{id:"",agreeType:"",auditOpinion:"",auditFileId:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",userSpecialityArr:[],token:"",userId:"",itemSpeciality:"",tempIsBatch:!1}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10),this.userId=this.$route.query.iscUserId,this.token=sessionStorage.getItem("token")},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,this.loadingBtn3=!0,Object(m["e"])(t).then((function(t){if("0"==t.data.status){var a={itemId:e.tempItemId,isBatchPackage:e.tempIsBatch};Object(u["O"])(a).then((function(t){if(e.loadingBtn3=!1,e.loadingBtn1=!1,t.data.successful)e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}});else{var a=t.data.resultHint;e.$message.error(a)}}))}else e.loadingBtn1=!1,e.loadingBtn3=!1,e.$message.error(t.data.message)}))},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.tempItemId=t.itemId;var l={};1==t.isBatchPackage?(l.isBatchPackage=!0,a.tempIsBatch=!0):(l.isBatchPackage=!1,a.tempIsBatch=!1),a.countersignParam.id=t.feaAuditid,l.itemId=t.itemId,Object(u["Mb"])(l).then((function(e){console.log(e);var t=e.data.resultValue;a.countersignParam.agreeType=t.isAudit+"",a.countersignParam.auditOpinion=t.auditAdvice,a.countersignParam.auditFileId=t.fileId}));var s=[];null!=t&&s.push(t),a.tableDataShow=a.getShowDateTable(s,a.dictMap,a.columnTypeMapDict)}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("e965"),a("faaa"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"7c48570d",null);t["default"]=g.exports},"0838":function(e,t,a){"use strict";a.r(t);var l,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix order_cont"},[a("div",[a("div",{staticClass:"right_btn query_btns"},[e._v(" 显示 "),a("el-input",{staticStyle:{width:"60px","margin-right":"10px"},attrs:{clearable:"",size:"small"},on:{focus:e.clearNum},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" - "),a("el-input",{staticStyle:{width:"60px","margin-right":"10px"},attrs:{clearable:"",size:"small"},on:{focus:e.clearNum},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}}),e._v(" 条 "),a("el-input",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{clearable:"",size:"small",placeholder:"输入关键字"},on:{focus:e.clearSearch},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.up3}},[e._v("上移")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.down3}},[e._v("下移")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.PlacedTop}},[e._v("置顶")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.PlacedDown}},[e._v("置底")])],1)]),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.unsigns,"highlight-current-row":"",height:e.tableHeight,"header-cell-style":{background:"#359691",color:"#fff"}},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"grandSort",label:"排序号"}}),a("el-table-column",{attrs:{type:"index",width:"120",index:e.indexMethod,label:"本级序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"order_inp",staticStyle:{width:"80px","text-align":"center"},attrs:{size:"mini"},on:{change:function(a){return e.onChangeOrder(t.row.localCode,t.$index+1)}},model:{value:t.row.localCode,callback:function(a){e.$set(t.row,"localCode",a)},expression:"scope.row.localCode"}})]}}])}),a("el-table-column",{attrs:{prop:"itemName",label:"项目名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"code",label:"项目编码"}}),a("el-table-column",{attrs:{prop:"deptCode",label:"所属单位","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"specClass",label:"专业类别"}}),a("el-table-column",{attrs:{prop:"stockScore",label:"评分"}})],1),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.submitOrder}},[e._v("确 定")]),a("el-button",[a("router-link",{attrs:{to:"/storageManagement"}},[e._v("取 消")])],1)],1)],1)},i=[],o=(a("4de4"),a("4160"),a("caad"),a("a15b"),a("fb6a"),a("a434"),a("a9e3"),a("d3b7"),a("ac1f"),a("2532"),a("841c"),a("159b"),a("ade3")),n=a("2909"),r=a("5530"),c=a("2f62"),u=a("7e1e"),d=(l={props:["orderData","acitve","tableHeight"],name:"orderComponent",data:function(){return{start:"",end:"",search:"",userRole:"",isShow:"",selectCode:"",isDisabled:!0,getTableData:{pageIndex:1,pageSize:10,itemName:"",voltLevel:"",apprStatus:"",deptCode:"",speciality:"",itemType:""},liData:[]}},watch:{orderData:function(e,t){var a=this;console.log("orderData",e),a.getTable()},acitve:function(e,t){this.isDisabled=!0,this.start="",this.end="",this.search=""}},created:function(){},computed:Object(r["a"])({},Object(c["b"])(["roles","userCity"]),{unsigns:function(){var e=this;return this.search?(console.log("search"),this.liData.filter((function(t){return t.itemName.toLowerCase().includes(e.search.toLowerCase())}))):this.start&&!this.end?this.liData.slice(this.start-1):this.start&&this.end?this.liData.slice(this.start-1,this.end):!this.start&&this.end?this.liData.slice(0,this.end):this.liData}}),components:{},mounted:function(){var e=this;console.log("userCity",e.userCity),e.userRole=e.userCity,console.log(e.userRole),console.log("orderDataorderDataorderDataorderData",e.orderData),e.getTable()}},Object(o["a"])(l,"created",(function(){})),Object(o["a"])(l,"methods",{clearSearch:function(){this.start="",this.end=""},clearNum:function(){this.search=""},handleCurrentChange:function(e){console.log("触发选择了",e.localCode),console.log(e),this.selectCode=e.localCode},setCurrent:function(e){console.log(e),this.$refs.singleTable.setCurrentRow(e),this.selectCode=e.localCode},indexMethod:function(e){return e+1},submitOrder:function(){var e=this,t={prjCmStItemNumVos:[]};e.liData.forEach((function(e,a){var l=e.localCode;t.prjCmStItemNumVos.push({itemId:e.itemId,serialNum:l})})),Object(u["kd"])(t).then((function(t){t.data.successful&&(e.$message({showClose:!0,message:"保存成功",type:"success"}),e.$router.push({path:"/storageManagement"}))}))},getTable:function(){var e=this;e.liData=Object(n["a"])(e.orderData),console.log(e.liData),e.liData.forEach((function(t,a){e.$set(t,"localCode",a+1)})),console.log("liDataliDataliDataliData",e.liData)},showInp:function(e){this.isShow=e},PrefixInteger:function(e,t){return(Array(t).join("0")+e).slice(-t)},PlacedTop:function(){var e=this;""!=this.selectCode?this.changeOrder(1,this.selectCode).then((function(t){e.setCurrent(e.liData[0])})):this.$message({showClose:!0,message:"请选择要移动的数据",type:"warning"})},PlacedDown:function(){var e=this;""!=this.selectCode?(this.changeOrder(this.liData.length+1,this.selectCode).then((function(t){e.setCurrent(e.liData[e.liData.length-1])})),console.log(this.liData.length)):this.$message({showClose:!0,message:"请选择要移动的数据",type:"warning"})},up3:function(){var e=this;console.log(this.selectCode),""!=this.selectCode?this.changeOrder(this.selectCode-1,this.selectCode).then((function(t){e.setCurrent(t)})):this.$message({showClose:!0,message:"请选择要移动的数据",type:"warning"})},down3:function(){var e=this;""!=this.selectCode?this.changeOrder(this.selectCode+1,this.selectCode).then((function(t){e.setCurrent(t)})):this.$message({showClose:!0,message:"请选择要移动的数据",type:"warning"})},onChangeOrder:function(e,t){var a=this;this.changeOrder(e,t).then((function(e){a.setCurrent(e)}))},changeOrder:function(e,t){var a=this;return new Promise((function(l,s){var i=a;i.isDisabled=!1,e=Number(e),console.log("val",e,"index",t),e<1&&(e=1),e>i.liData.length&&(e=i.liData.length);var o=i.liData.splice(t-1,1)[0];i.liData.splice(e-1,0,o),i.liData.forEach((function(e,t){var a=[];e.localCode=t+1,a[0]=e.grandSort.substring(0,2),a[1]=e.grandSort.substring(2,6),a[2]=e.grandSort.substring(6,9),a[3]=e.grandSort.substring(9,11),console.log(a),"sheng"==i.userRole?a[1]=i.PrefixInteger(e.localCode,4):"shi"==i.userRole?a[2]=i.PrefixInteger(e.localCode,3):a[3]=i.PrefixInteger(e.localCode,2),e.grandSort=a.join(""),console.log(e.grandSort)})),i.isShow="",l(a.liData[e-1]),console.log(a.liData)}))}}),l),m=d,p=(a("1428"),a("3ced"),a("2877")),h=Object(p["a"])(m,s,i,!1,null,"c3ac51f6",null);t["default"]=h.exports},"08cd":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("router-view")],1)},s=[],i=(a("2f62"),a("3d01")),o=a("71c2"),n={name:"layout",data:function(){return{}},components:{pageHeader:o["a"],naver:i["a"]},mounted:function(){},methods:{}},r=n,c=(a("8f2c"),a("e5b8"),a("2877")),u=Object(c["a"])(r,l,s,!1,null,"69918faa",null);t["a"]=u.exports},"09a4":function(e,t,a){},"0e12":function(e,t,a){},"0e47":function(e,t,a){},"0f83":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container plan-review"},[a("div",{staticClass:"btns query_btns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showReviewDia}},[e._v("评审计划审查意见")])],1),a("div",{staticClass:"template_main"},[a("div",{staticClass:"template_left"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.timeListloading,expression:"timeListloading"}],ref:"tableLeft",staticClass:"plan-table",attrs:{data:e.colTimeList,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"current-change":e.handleChangeColTimeList}},[a("el-table-column",{attrs:{label:"评审计划汇总列表",prop:"jhps"}})],1)],1),a("div",{staticClass:"template_right"},[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,width:"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":20,"page-sizes":[10,20,30,50],layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"planDrawer",class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])])])]),a("el-dialog",{staticClass:"review-dialog",attrs:{visible:e.dialogReviewVisible,title:"可研计划审查意见","close-on-click-modal":!1,"custom-class":"cus-dialog","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogReviewVisible=t}}},[a("div",{staticClass:"review"},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{model:e.advice,"label-width":"0",size:"small"}},[a("el-form-item",[a("el-radio-group",{model:{value:e.advice.agreeType,callback:function(t){e.$set(e.advice,"agreeType",t)},expression:"advice.agreeType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("同意")]),a("el-radio",{attrs:{label:"2"}},[e._v("不同意")])],1),a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStFeaAudit/uploadFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadAdviceSuccess,multiple:!1,"show-file-list":!0,limit:1,"file-list":e.fileList,accept:".doc,.docx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传评审计划审查意见")])],1)],1),a("el-form-item",[a("el-input",{attrs:{type:"textarea"},model:{value:e.advice.checkAdvice,callback:function(t){e.$set(e.advice,"checkAdvice",t)},expression:"advice.checkAdvice"}})],1),a("el-form-item",{attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]),a("el-button",{on:{click:function(t){e.dialogReviewVisible=!1}}},[e._v("取消")])],1)],1)],1)]),a("el-dialog",{attrs:{visible:e.itemShow,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.itemShow=t}}},[a("item-dialog",{attrs:{itemId:e.tempItemId}})],1)],1)},s=[],i=(a("4160"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2bb5"),r=a("c2b4"),c=a("7e1e"),u=a("2f62"),d={name:"planSummary",data:function(){return{isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,dialogReviewVisible:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,dialogFormVisible2:!1,form:{time1:"",time2:""},options:[],value:"",formLabelWidth:"120px",input:"",colTimeList:[],tableData:[],tableLabel:[],tableDataShow:[],selectPlanId:{},columnTypeMap:new Map,param:{itemName:"",deptCode:"",auditPlanStatus:"",specialClass:"",itemType:"",voltLevel:"",filter:""},tempItemId:"",itemShow:!1,currentColTime:"",curItemName:"",showUpdatePlaneTime:!1,updateForm:{planStartDate:"",planEndDate:""},auditPlanId:"",timeListloading:!1,tableDataLoading:!1,advice:{agreeType:"2",checkAdvice:""},fileList:[],tableHeight:"",userId:"",token:""}},components:{"item-dialog":n["default"],ItemAddCom:r["default"]},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getColTimeList(),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},computed:Object(o["a"])({},Object(u["b"])([])),methods:{changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(c["nb"])(s).then((function(e){if(e.data.successful){var t=l.getShowDateTable(e.data.resultValue,l.dictMap,l.columnTypeMap);a(t)}}))},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},showReviewDia:function(){var e=this;""==e.currentColTime||0==e.currentColTime.length?this.$message({showClose:!0,message:"请选择提交批次",type:"warning"}):e.dialogReviewVisible=!0},uploadAdviceSuccess:function(e){var t=this;if(e.successful)t.advice.auditFileId=e.resultValue.auditFileId,this.$message({showClose:!0,message:"上传成功",type:"success"});else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},submitForm:function(){var e=this,t=this;this.$confirm("是否确定提交意见?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.advice.auditFileId;""!=a&&void 0!=a&&null!=a||(t.advice.auditFileId="");var l=new FormData;l.append("cTotalTime",t.currentColTime),l.append("agreeType",t.advice.agreeType),l.append("checkAdvice",t.advice.checkAdvice),l.append("auditFileId",t.advice.auditFileId),Object(c["Hd"])(l).then((function(a){a.data.successful?(e.$message({showClose:!0,message:"保存意见成功",type:"success"}),t.getColTimeList(),t.advice={agreeType:"",checkAdvice:""},t.fileList=[],t.dialogReviewVisible=!1):e.$message({showClose:!0,message:"保存意见失败",type:"error"})}))})).catch((function(){}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},handleChangeColTimeList:function(e){var t=this;t.currentColTime!=e.jhps&&(t.currentColTime=e.jhps,t.getTable(t.currentPage,t.currentNum))},getColTimeList:function(){var e=this,t=this;t.timeListloading=!0,Object(c["pb"])("6").then((function(a){if(console.log(a),t.timeListloading=!1,a.data.successful){var l=a.data.resultValue;t.colTimeList=[],l.forEach((function(e){var a={};a.jhps=e,t.colTimeList.push(a)})),l.length>0&&(t.currentColTime=l[0]),t.getTable(1,t.currentNum)}else e.$message({showClose:!0,message:"获取评审计划信息列表失败",type:"error"})}))},showItemInfo:function(e){var t=this;t.tempItemId=e.itemId,this.$router.push({path:"/itemInfo",query:{itemId:t.tempItemId,oldPath:t.$route.path}})},handleSelectionChange:function(e){var t=this;t.selectPlanId={ids:[]},e.forEach((function(e){t.selectPlanId.ids.push(e.auditPlanId)}))},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.tableDataLoading=!0;var l="cTotalTimeStr=1&itemPhaseDet=6";""!=a.currentColTime&&(l+="&cTotalTime="+a.currentColTime);for(var s=0,o=Object.entries(a.param);s<o.length;s++){var n=Object(i["a"])(o[s],2),r=n[0],u=n[1];"pageIndex"!=r&&"pageSize"!=r&&""!=u&&(console.log(r+":"+u),l+="&"+r+"="+u)}var d={};d.pageIndex=e,d.pageSize=t,d.filter=l,Object(c["Sb"])(d).then((function(e){if(a.tableDataLoading=!1,console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}a.loading=!1})).catch((function(e){console.log(e)}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p}s.push(r)}return s},beforeUploadReport:function(e){if(e.name){var t=e.name.split(".")[1];return"doc"==t||"docx"==t||(this.$message.warning("文件格式不正确,只能上传doc,docx文件!"),!1)}return this.$message.warning("文件格式不正确,只能上传doc,docx文件!"),!1}}},m=d,p=(a("0574"),a("8881"),a("2877")),h=Object(p["a"])(m,l,s,!1,null,"891d5b2c",null);t["default"]=h.exports},"0f8b":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"approval-container"},[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"150"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"experts-confirm"},[a("el-form",{staticClass:"demo-form-inline reject-form",attrs:{model:e.form,"label-width":"20%"}},[a("el-form-item",{attrs:{label:"专家:"}},[a("el-input",{staticClass:"reject-name",attrs:{type:"textarea",disabled:""},model:{value:e.rejectName,callback:function(t){e.rejectName=t},expression:"rejectName"}})],1),a("el-form-item",{attrs:{label:"不参加原因:"}},[a("el-input",{staticClass:"reject-reason",attrs:{type:"textarea",disabled:""},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:function(t){return e.chooseExperts(1,5)}}},[e._v("再次选择")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)]),a("el-dialog",{staticClass:"online diy_dialog",attrs:{width:"80%",title:"选择评审专家",visible:e.showExpectDialog,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showExpectDialog=t}}},[e._v(" 专家名称： "),a("el-input",{staticStyle:{width:"270px",display:"inline-block"},attrs:{size:"small",placeholder:"请输入专家名称"},model:{value:e.leaderExpertName,callback:function(t){e.leaderExpertName=t},expression:"leaderExpertName"}}),e._v(" 专家专业： "),a("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.professionalExpert,callback:function(t){e.professionalExpert=t},expression:"professionalExpert"}},e._l(e.professionalList,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.searchExperts}},[e._v("检索")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectExpert1",staticStyle:{"margin-top":"10px"},attrs:{data:this.expertShowTable,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleCurrentExpert1}},[a("el-table-column",{attrs:{label:"选择",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.expertId},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.selectProfessorArr,callback:function(t){e.selectProfessorArr=t},expression:"selectProfessorArr"}})]}}])}),e._l(e.expertLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.expertCurrentPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.totalExpertNum},on:{"size-change":e.handleSizeExpert1,"current-change":e.handleCurrentExpert1}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.selectExpect}},[e._v("提 交")]),a("el-button",{on:{click:e.cancleSelectExpert}},[e._v("取 消")])],1)],1),a("el-dialog",{staticClass:"diy_dialog",attrs:{title:"选择专家结果",width:"80%","close-on-click-modal":!1,visible:e.showSelectExpertResult2},on:{"update:visible":function(t){e.showSelectExpertResult2=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{data:this.selectProfessorArrShow,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleCurrentExpert1}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.expertLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sureBtn1,expression:"sureBtn1"}],attrs:{type:"primary"},on:{click:e.submitSelectExpert}},[e._v("确 认")]),a("el-button",{on:{click:e.cancleShowSelectExpertResult}},[e._v("取 消")])],1)])],1)],1)},s=[],i=(a("99af"),a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){return{professionalExpert:"",professionalList:[],rejectName:"",isLeader:"",rejectReason:"",itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:"",itemPhaseDet:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",auditPlanId:"",saveParams:[],userSpecialityArr:[],tempIsBatch:!1,professorArr:[],selectProfessorArr:[],groupLeaderName:"",selectProfessorArrShow:[],expertLabel:{},expertShowTable:[],expertDictMap:new Map,expertColumnMap:new Map,expertTableData:[],expertCurrentPage:1,expertCurrentNum:5,leaderExpertName:"",showExpectDialog:!1,showSelectExpertResult2:!1,sureBtn1:!1,totalExpertNum:""}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10),this.getNotJoinReason(),this.getExpertMajorDict()},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},getRowKeys:function(e){return e.expertId},getExpertMajorDict:function(){var e=this,t=this;Object(u["sb"])({codeValue:"professional"}).then((function(a){if(a.data.successful)for(var l=a.data.resultValue,s=0;s<l.length;s++){var i=l[s];"professional"!=i.codeValue&&"0007"!=i.codeValue&&"0008"!=i.codeValue&&"0006"!=i.codeValue&&t.professionalList.push(i)}else e.$message.error("查询专家专业失败")}))},cancleSelectExpert:function(){var e=this;e.selectProfessorArr=[],e.showExpectDialog=!1},cancleShowSelectExpertResult:function(){var e=this;e.selectProfessorArrShow=[],e.selectProfessorArr=[],e.showSelectExpertResult2=!1},getWorkItemStatus:function(){var e=this,t=e.$route.query.processInstID,a={};a.processInstID=t,Object(u["oc"])(a).then((function(t){if(t.data.successful){console.log(t);var a=t.data.resultValue;e.rejectReason=a[a.length-1].auditDesc}}))},getNotJoinReason:function(){var e=this,t=e.$route.query.processInstID,a={};a.processInstId=t,Object(u["Ob"])(a).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.rejectName=a.expertName,e.rejectReason=a.notJoinReason}}))},handleSizeExpert1:function(e){this.expertCurrentNum=e,this.chooseExperts(this.expertCurrentPage,e)},handleCurrentExpert1:function(e){this.expertCurrentPage=e,this.chooseExperts(e,this.expertCurrentNum)},searchExperts:function(){this.chooseExperts(this.expertCurrentPage,this.expertCurrentNum)},chooseExperts:function(e,t){var a=this,l={processId:a.$route.query.processInstID,index:e,pageSize:t,expertName:a.leaderExpertName,professional:a.professionalExpert};Object(u["zb"])(l).then((function(e){if(e.data.successful){a.isLeader=e.data.resultValue.isLeader,a.totalExpertNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.expertLabel=a.getLabelList(t),a.expertDictMap=a.getDictArr(t),a.expertColumnMap=a.getColumnTypeArr(t),a.expertTableData=e.data.resultValue.tableData,a.expertShowTable=a.getShowDateTable(a.expertTableData,a.expertDictMap,a.expertColumnMap),a.showExpectDialog=!0}}))},getCurrentRow:function(e){var t=this;t.selectProfessorArr=e.expertId,t.groupLeaderName=e.userName,t.selectProfessorArrShow=[],t.selectProfessorArrShow=t.selectProfessorArrShow.concat(e)},selectExpect:function(){var e=this,t=e.selectProfessorArr;if(""==t||void 0==t)return e.$message({showClose:!0,message:"请选择",type:"warning"}),!1;e.showSelectExpertResult2=!0},submitSelectExpert:function(){var e=this,t={user:this.$route.query.iscUserId,processInstID:this.$route.query.processInstID};this.loadingBtn1=!0,Object(m["h"])(t).then((function(a){console.log(a),0==a.data.status?Object(u["Ab"])({processInstId:t.processInstID}).then((function(t){if(console.log(a),t.data.successful){var l=t.data.resultValue;e.createProcessAgainByExpert(e.isLeader,e.selectProfessorArrShow[0],l)}})):e.loadingBtn1=!1}))},createProcessAgainByExpert:function(e,t,a){var l=this,s=this,i=this.$route.query.iscUserId,o={user:i,processDefName:"expert_selection",processInstName:"",processInstDesc:""};o.itemId=s.tempItemId,o.processInstName=s.tempItemName+"-专家确认",o.processInstDesc=s.tempItemName+"-专家确认",Object(m["d"])(o).then((function(o){if(0==o.data.status){var n=o.data.data.workItem.workItemID,r=o.data.data.processInstID,c={user:i,workItemID:n,activityDefID:"ZJQR",participants:[]};c.participants.push(t.userName),Object(m["a"])(c).then((function(o){if(0==o.data.status){var n={user:i,workItemID:c.workItemID};Object(m["e"])(n).then((function(o){if(0==o.data.status){var n={processInstID:r,userId:i,itemId:s.tempItemId,workItemID:c.workItemID,isLeader:e,expertId:t.expertId,itemPhaseDet:"10",totalNum:a};1==s.tempIsBatch?n.isBatchPackage=!0:n.isBatchPackage=!1,Object(u["v"])(n).then((function(a){if(a.data.successful){var i=[],o={};o.expertId=t.expertId,o.expertName=t.userName,o.isLeader=e,o.itemId=s.tempItemId,o.isBatchPackage=n.isBatchPackage,i.push(o),Object(u["vd"])(i).then((function(e){l.loadingBtn1=!1,e.data.successful?l.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}):s.$message({showClose:!0,message:"操作失败",type:"error"})}))}else l.$message.error("操作失败"),l.loadingBtn1=!1}))}else l.loadingBtn1=!1}))}else l.loadingBtn1=!1}))}else l.loadingBtn1=!1}))},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemIds=t.itemId,a.auditItemParam.itemPhaseDet=t.itemPhaseDet,a.tempItemName=t.itemName,a.tempItemId=t.itemId,a.tempIsBatch=t.isBatchPackage;var l=[];null!=t&&l.push(t),a.tableDataShow=a.getShowDateTable(l,a.dictMap,a.columnTypeMapDict)}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("447c"),a("7e07"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"755bf0e2",null);t["default"]=g.exports},"13a6":function(e,t,a){},"13f8":function(e,t,a){},1404:function(e,t,a){},1418:function(e,t,a){},1428:function(e,t,a){"use strict";var l=a("e465"),s=a.n(l);s.a},1584:function(e,t,a){},"15a4":function(e,t,a){},"15dc":function(e,t,a){},"164e":function(e,t,a){"use strict";var l=a("2000"),s=a.n(l);s.a},1748:function(e,t,a){"use strict";var l=a("6df2"),s=a.n(l);s.a},"18f9":function(e,t,a){},1904:function(e,t,a){"use strict";var l=a("8a2a"),s=a.n(l);s.a},"194f":function(e,t,a){"use strict";var l=a("95a7"),s=a.n(l);s.a},"1a5d":function(e,t,a){var l={"./404.vue":["8cdb"],"./feasible/analysis.vue":["ef00"],"./feasible/evaluationExperts.vue":["ddfa","chunk-edc075ee"],"./feasible/experts.vue":["ceab"],"./feasible/expertsChoose.vue":["70c0","chunk-cac7f58c"],"./feasible/expertsConfirm.vue":["491e","chunk-10a1a70d"],"./feasible/feasibilityReview.vue":["7411","chunk-d2275cf8"],"./feasible/groupLeader.vue":["cba0","chunk-19ba4bf2"],"./feasible/online.vue":["5e2e","chunk-08b88974"],"./feasible/plan.vue":["ddbf"],"./feasible/planAssessment.vue":["2600","chunk-0f651f2e"],"./feasible/planIssued.vue":["5214"],"./feasible/planReview.vue":["0f83"],"./feasible/planReview815.vue":["1ef9","chunk-fe9ce984"],"./feasible/planSummary.vue":["2c70"],"./feasible/queryBatch.vue":["68bf","chunk-7411b55b"],"./feasible/reviewBatch.vue":["8203","chunk-02d63040"],"./feasible/reviewFileUpload.vue":["c03a","chunk-771e01b8"],"./feasible/signReviewComments.vue":["81b6","chunk-6b48098c"],"./feasible/specialPlan.vue":["84f6"],"./home/index.vue":["7abe"],"./login/index.vue":["9ed6"],"./login/isc.vue":["71cc"],"./page403/index.vue":["40d4"],"./project/compile.vue":["2670"],"./project/hasSubmitPlan.vue":["735f"],"./project/item.vue":["2bb5"],"./project/itemAdd.vue":["7248"],"./project/itemAddCom.vue":["c2b4"],"./project/itemAddCommon.vue":["5d4c"],"./project/itemAddLG.vue":["4615"],"./project/itemCheck.vue":["494b"],"./project/itemEdit.vue":["c64d"],"./project/itemInfo.vue":["f564"],"./project/itemKY.vue":["94a4"],"./project/planHookUp.vue":["0d06","chunk-e87ce730"],"./project/planHookUpApproval.vue":["7c08","chunk-099984e3"],"./project/project.vue":["529e"],"./project/projectApproval.vue":["7513"],"./project/projectSubmitApproval.vue":["856d"],"./projectReserve/orderComponent.vue":["0838"],"./projectReserve/reserveAnalysis.vue":["2b80"],"./projectReserve/storageManagement.vue":["9d46"],"./projectReserve/storageOrder.vue":["6e7d"],"./projectReserve/storageTable.vue":["f516"],"./requirements/demand.vue":["3b00"],"./requirements/questions.vue":["bc85"],"./right.vue":["7a14"],"./template/templateConfiguration.vue":["86a7"],"./todo/index.vue":["e3b4"],"./todolist/collectCommentsApproval.vue":["acb6"],"./todolist/countersignatureApproval.vue":["07e2"],"./todolist/expertsAgainApproval.vue":["0f8b"],"./todolist/expertsConfirmApproval.vue":["da49"],"./todolist/perfectFileApproval.vue":["ca0a"],"./todolist/planAssessAgainApproval.vue":["b2ec"],"./todolist/planAssessmentApproval.vue":["eca2"],"./todolist/reviewCommentsApproval.vue":["fe39"],"./todolist/uploadFileApproval.vue":["cce6"]};function s(e){if(!a.o(l,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=l[e],s=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(s)}))}s.keys=function(){return Object.keys(l)},s.id="1a5d",e.exports=s},"1b16":function(e,t,a){},"1c01":function(e,t,a){"use strict";var l=a("1c5c"),s=a.n(l);s.a},"1c5c":function(e,t,a){},"1d66":function(e,t,a){},2e3:function(e,t,a){},2190:function(e,t,a){},"223d":function(e,t,a){"use strict";(function(e){a("4de4"),a("c975");var t,l=a("5530"),s=(a("96cf"),a("1da1")),i=a("a18c"),o=a("4360"),n=(a("bc3a"),a("08cd")),r=a("5f87"),c=(a("2f62"),a("5c96"),a("70c3"));window.localStorage.clear();var u={router:[{path:"/",isOpen:!1,component:"layout",name:"首页",children:[{path:"/",name:"储备中心概览",component:"home/index"}]},{path:"/questions",component:"layout",name:"项目需求管理",meta:{role:["1","1-1","1-2"]},isOpen:!0,children:[{path:"/questions",component:"requirements/questions",name:"问题库管理",meta:{role:["1-1"]}},{path:"/demand",component:"requirements/demand",name:"需求库管理",meta:{role:["1-2"]}}]},{path:"/projecta",component:"layout",name:"项目立项管理",isOpen:!0,children:[{path:"/project/0/1",component:"layout",name:"项目立项",isOpen:!0,children:[{path:"/project/0/01",component:"project/project",name:"电网基建",meta:{role:["2-1-1"]}},{path:"/project/0/02",component:"project/project",name:"电网小型基建",meta:{role:["2-1-2"]}},{path:"/project/0/04",component:"project/project",name:"生产技改",meta:{role:["2-1-3"]}},{path:"/project/0/06",component:"project/project",name:"生产大修",meta:{role:["2-1-4"]}},{path:"/project/0/03",component:"project/project",name:"电力营销投入",meta:{role:["2-1-5"]}},{path:"/project/0/10",component:"project/project",name:"电网信息化投入",meta:{role:["2-1-6"]}},{path:"/project/0/16",component:"project/project",name:"生产辅助大修",meta:{role:["2-1-7"]}},{path:"/project/0/12",component:"project/project",name:"教育培训",meta:{role:["2-1-8"]}},{path:"/project/0/09",component:"project/project",name:"研究开发",meta:{role:["2-1-12"]}},{path:"/project/0/13",component:"project/project",name:"股权投资",meta:{role:["2-1-13"]}},{path:"/project/0/08",component:"project/project",name:"零星购置",meta:{role:["2-1-14"]}},{path:"/project/0/15",component:"project/project",name:"生产辅助技改",meta:{role:["2-1-15"]}},{path:"/project/0/11",component:"project/project",name:"管理咨询",meta:{role:["2-1-16"]}},{path:"/project/0/17",component:"project/project",name:"其他资本性",meta:{role:["2-1-1"]}},{path:"/project/0/18",component:"project/project",name:"其他成本性",meta:{role:["2-1-4"]}}]},{path:"/itemCheck",component:"project/itemCheck",isOpen:!1,name:"立项审核",meta:{role:["2-2"]}},{path:"/itemKY",component:"project/itemKY",isOpen:!1,name:"立项项目库",meta:{role:["2-4"]}},{path:"/planHookUp",component:"project/planHookUp",isOpen:!1,name:"评审计划挂接",meta:{role:["2-4"]}}]},{path:"/analysis",component:"layout",name:"可研评审管理",meta:{role:["3","3-1","3-2","3-3","3-4","3-1-1","3-1-2","3-1-3","3-1-4","3-2-1","3-2-2","3-2-3","3-1-5"]},isOpen:!0,children:[{path:"/plan/reviewBatch",component:"feasible/reviewBatch",name:"评审批次管理",meta:{role:["3-1-1"]}},{path:"/plan/queryBatch",component:"feasible/reviewBatch",name:"评审批次查询",meta:{role:["3-1-1"]}},{path:"/plan",component:"layout",name:"评审计划管理",isOpen:!0,meta:{role:["3-1","3-1-1","3-1-2","3-1-3","3-1-4","3-1-5"]},children:[{path:"/plan/planAssessment",component:"feasible/planAssessment",name:"评审计划编制",meta:{role:["3-1-1"]}},{path:"/plan/planReview815",component:"feasible/planReview815",name:"评审计划审查",meta:{role:["3-1-3"]}}]},{path:"/online",component:"layout",name:"可研评审管理",isOpen:!0,meta:{role:["3-2","3-2-1","3-2-2","3-2-3","3-2-4","3-2-5","3-2-6"]},children:[{path:"/online/0",component:"feasible/expertsChoose",name:"专家选择",meta:{role:["3-2-1"]}},{path:"/online/1",component:"feasible/expertsConfirm",name:"专家确认",meta:{role:["3-2-2"]}},{path:"/online/2",component:"feasible/feasibilityReview",name:"可研评审",meta:{role:["3-2-3"]}},{path:"/online/3",component:"feasible/signReviewComments",name:"会签评审意见",meta:{role:["3-2-4"]}},{path:"/online/4",component:"feasible/reviewFileUpload",name:"评审文件上传",meta:{role:["3-2-5"]}}]},{path:"/plan/4",component:"feasible/specialPlan",name:"零星项目审核",meta:{role:["3-5"]}},{path:"/analysis",component:"feasible/analysis",name:"可研评审分析",meta:{role:["3-3"]}},{path:"/experts",component:"feasible/experts",name:"评审专家库",meta:{role:["3-4"]}}]},{path:"/storageManagement",component:"layout",name:"项目储备管理",isOpen:!0,meta:{role:["4","4-1","4-2","4-3-px"]},children:[{path:"/storageManagement",component:"projectReserve/storageManagement",name:"储备库管理",meta:{role:["4-1"]}},{path:"/storageOrder",component:"projectReserve/storageOrder",name:"分级排序",meta:{role:["4-3-px"]}},{path:"/reserveAnalysis",component:"projectReserve/reserveAnalysis",name:"储备分析",meta:{role:["4-2"]}}]},{path:"/templateConfiguration",component:"layout",name:"模版配置",isOpen:!0,meta:{role:["5","5-1","5-2","5-3","5-4","5-5","5-1-1","5-1-2","5-1-3","5-2-1","5-2-2","5-3-1","5-3-2","5-3-3","5-3-4","5-4-1","5-5-1"]},children:[{path:"/templateConfiguration/1",component:"template/templateConfiguration",name:"项目需求",isOpen:!0,meta:{role:["5-1","5-1-1","5-1-2","5-1-3"]},children:[{path:"/templateConfiguration/1/1",component:"template/templateConfiguration",name:"战略导向需求模版",isOpen:!0,meta:{role:["5-1-1"]}},{path:"/templateConfiguration/1/2",component:"template/templateConfiguration",name:"市场导向需求模版",isOpen:!0,meta:{role:["5-1-2"]}},{path:"/templateConfiguration/1/3",component:"template/templateConfiguration",name:"问题导向需求模版",isOpen:!0,meta:{role:["5-1-3"]}}]},{path:"/templateConfiguration/2",component:"template/templateConfiguration",name:"可研编制",meta:{role:["5-2","5-2-1","5-2-2"]},isOpen:!0,children:[{path:"/templateConfiguration/2/1",component:"template/templateConfiguration",name:"可研报告模版",isOpen:!0,meta:{role:["5-2-1"]}},{path:"/templateConfiguration/2/2",component:"template/templateConfiguration",name:"项目建议书模版",isOpen:!0,meta:{role:["5-2-2"]}}]},{path:"/templateConfiguration/3",component:"template/templateConfiguration",name:"可研评审",meta:{role:["5-3","5-3-1","5-3-2","5-3-3","5-3-4"]},isOpen:!0,children:[{path:"/templateConfiguration/3/1",component:"template/templateConfiguration",name:"项目建议书审查意见模版",isOpen:!0,meta:{role:["5-3-1"]}},{path:"/templateConfiguration/3/2",component:"template/templateConfiguration",name:"评审计划模版",isOpen:!0,meta:{role:["5-3-2"]}},{path:"/templateConfiguration/3/3",component:"template/templateConfiguration",name:"可研评审专家模版",isOpen:!0,meta:{role:["5-3-3"]}},{path:"/templateConfiguration/3/4",component:"template/templateConfiguration",name:"可研评审意见模版",isOpen:!0,meta:{role:["5-3-4"]}}]},{path:"/templateConfiguration/4",component:"template/templateConfiguration",name:"可研批复",meta:{role:["5-4","5-4-1"]},isOpen:!0,children:[{path:"/templateConfiguration/4/1",component:"template/templateConfiguration",name:"可研批复意见模版",isOpen:!0,meta:{role:["5-4-1"]}}]},{path:"/templateConfiguration/5",component:"template/templateConfiguration",name:"储备监督检查",meta:{role:["5-5","5-5-1"]},isOpen:!0,children:[{path:"/templateConfiguration/5/1",component:"template/templateConfiguration",name:"监督检查意见模版",isOpen:!0,meta:{role:["5-5-1"]}}]}]}]},d=["/login"];function m(a,s){t=f(t),i["c"].addRoutes(t),console.log("routerrouter",i["c"]),e.antRouter=t,o["a"].dispatch("permission/setBackRoutes",t),s(Object(l["a"])({},a,{replace:!0}))}function p(e,t){localStorage.setItem(e,JSON.stringify(t))}function h(e){return JSON.parse(window.localStorage.getItem(e))}function f(e){var t=e.filter((function(e){return e.component&&("layout"===e.component?e.component=n["a"]:e.component=c(e.component)),e.children&&e.children.length&&(e.children=f(e.children)),!0}));return t}i["c"].beforeEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a,l,s){var n,c,f,g,b,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),n=sessionStorage.getItem("token"),console.log(n),c=Object(r["f"])("path",window.location.href),n&&"undefined"!=n?(console.log("hasToken",n),"/login"===a.path||"/isclogin"===a.path?c&&c.length?"projectApproval"==c||"projectSubmitApproval"==c||"planAssessmentApproval"==c||"planAssessAgainApproval"==c||"expertsConfirmApproval"==c||"expertsAgainApproval"==c||"reviewCommentsApproval"==c||"collectCommentsApproval"==c||"countersignatureApproval"==c||"perfectFileApproval"==c||"uploadFileApproval"==c?(f=Object(r["f"])("processInstID",window.location.href),g=Object(r["f"])("workItemID",window.location.href),b=Object(r["f"])("activityInstID",window.location.href),v=Object(r["f"])("iscUserId",window.location.href),s({path:c,query:{path:c,processInstID:f,workItemID:g,activityInstID:b,iscUserId:v}})):s({path:c,query:{path:c}}):s({path:"/"}):0===o["a"].getters.roles.length?o["a"].getters.isIscLogin?o["a"].dispatch("user/iscGetInfo").then((function(e){t?s():(h("router")?(e=h("router"),console.log(e),m(a,s)):(console.log("beforeEach  res"),t=e,p("router",t),m(a,s)),s(a))})).catch((function(e){console.log(e)})):o["a"].getters.isSimulateLogin?(console.log("permissiongetinfo"),o["a"].dispatch("user/simulateGetInfo").then((function(e){var t=e.data.role;o["a"].dispatch("permission/generateRoutes",{roles:t}).then((function(){console.log("addRoutes",o["a"].getters.addRoutes),i["c"].addRoutes(o["a"].getters.addRoutes),s(a)}))})).catch((function(e){console.log(e)}))):o["a"].dispatch("user/getInfo").then((function(e){t?s():(h("router")?(t=h("router"),console.log(t),m(a,s)):(console.log("beforeEach  getRouter"),t=u.router,p("router",t),m(a,s)),s(a),console.log(i["c"].options.routes))})).catch((function(e){console.log(e)})):(console.log(a,i["c"]),console.log("路由已生成"),s())):(console.log("notoken"),-1!==d.indexOf(a.path)?s():(console.log("sdfsdfsdfdfsdf",o["a"].getters.isIscLogin),o["a"].getters.isIscLogin||o["a"].getters.isSimulateLogin?"/isclogin"==a.path?s():s("/isclogin"):s("/login?redirect=".concat(a.path))));case 5:case"end":return e.stop()}}),e)})));return function(t,a,l){return e.apply(this,arguments)}}())}).call(this,a("c8ba"))},"22a2":function(e,t,a){},"25c6":function(e,t,a){},2670:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compile-wrapper"},[a("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("年份")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},on:{change:e.selectItem},model:{value:e.param.ghYear,callback:function(t){e.$set(e.param,"ghYear",t)},expression:"param.ghYear"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.voltLevel,callback:function(t){e.$set(e.param,"voltLevel",t)},expression:"param.voltLevel"}},e._l(e.selectParamDict.get("voltLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目来源")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemSource,callback:function(t){e.$set(e.param,"itemSource",t)},expression:"param.itemSource"}},e._l(e.selectParamDict.get("itemSource"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("专项类别")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.speciality,callback:function(t){e.$set(e.param,"speciality",t)},expression:"param.speciality"}},e._l(e.selectParamDict.get("speciality"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStOnAuditPlan/planImportExcel",headers:{userId:e.userId,token:e.token},"on-success":e.uploadSuccess,multiple:!1,"show-file-list":!1,accept:".xls,.xlsx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入计划")])],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportTmp}},[e._v("导出计划")]),a("el-button",{attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/export?templateType=7&token="+e.token}},[e._v("导出计划模版")])]),a("el-button",{attrs:{type:"primary",size:"small",loading:e.editLoading},on:{click:e.editSomePlan}},[e._v("批量编辑评审计划")]),a("el-button",{attrs:{type:"primary",size:"small",loading:e.statusLoading},on:{click:e.changeFeaStatus}},[e._v("提交")])],1)]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","row-class-name":e.tableRowClassName,"highlight-current-row":!1,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:e.isChildren,width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"150"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left",label:t.dispName,"show-overflow-tooltip":!0,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()})),a("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isChild?void 0:[a("span",{staticClass:"blue",on:{click:function(a){return e.showSubmitPlan(t.row)}}},[e._v("编辑评审计划")])]}}],null,!0)})],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)]),a("el-dialog",{staticClass:"compile-dialog",attrs:{visible:e.dialogFormVisible,"close-on-click-modal":!1,"custom-class":"cus-dialog","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("编辑评审计划")])])]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"lableFormQuestion1",attrs:{model:e.planLabel,inline:!0,"label-position":"right"}},[a("div",{staticClass:"border-dash"},e._l(e.planLabel,(function(t,l){return"DATE"==t.dispType?a("el-form-item",{key:t.colDname,class:"DATE"==t.dispType?"el-form-item-date":"",attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["DATE"==t.dispType&&"planStartDate"==t.colDname?a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":e.pickerOptionsStart},on:{change:e.changeStartDate},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"DATE"==t.dispType&&"planEndDate"==t.colDname?a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":e.pickerOptionsEnd},on:{change:e.changeEndDate},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1):e._e()})),1),e._l(e.planLabel,(function(t,l){return"DATE"!=t.dispType?a("el-form-item",{key:t.colDname,class:"DATE"==t.dispType?"":"el-form-item-input",attrs:{label:t.dispName,"label-width":e.formLabelWidth1,prop:l+".value",rules:t.rule}},["test"==t.dispType&&"questionCode"!=t.colDname?a("el-input",{staticClass:"diy",attrs:{placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"string"==t.dispType||null==t.dispType?a("el-input",{attrs:{autocomplete:"off",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1):e._e()}))],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancelSumbmitPlan()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitPlan()}}},[e._v("保 存")])],1)],2)],1)},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=(a("2bb5"),a("a960")),c=a("c2b4"),u=a("7e1e"),d=a("73fc"),m={name:"Compile",data:function(){var e=this;return{editLoading:!1,statusLoading:!1,submitLoading:!1,isEdit:!1,editData:{itemId:[]},timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,userId:"",token:"",createOrg:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"createOrg"},deptArr:[],showQuery:!1,isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"33%",formLabelWidth1:"50%",input:"",tableData:[],tableLabel:[],param:{createOrg:"",index:1,itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",itemPhase:1,itemPhaseDet:"26",ghYear:"",itemSource:""},dictMap:new Map,selectParamDict:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"",tableHeightTab:"",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()<=a}},auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},created:function(){this.tableHeight=window.innerHeight-270},mounted:function(){this.getItemLabel(),this.getSpecialityIds(),this.getTable(1,20),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token"),console.log("compile")},computed:Object(o["a"])({},Object(n["b"])([])),watch:{createOrg:function(){this.param.createOrg=this.createOrg,this.getTable(this.currentPage,this.currentNum)}},methods:{tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(u["nb"])(s).then((function(e){if(e.data.successful){var t=e.data.resultValue;t.forEach((function(e){e.isChild=!0}));var s=l.getShowDateTable(t,l.dictMap,l.columnTypeMap);a(s)}}))},isChildren:function(e){return!e.isChild},editSomePlan:function(){var e=this;e.isEdit=!0,e.editData.itemId.length>0?(e.dialogFormVisible=!0,e.editLoading=!0,Object(u["gc"])().then((function(t){if(e.editLoading=!1,console.log("response",t),t.data.successful){e.pleanTableLabel=t.data.resultValue.items,e.pleanTableLabel.forEach((function(t){e.$set(t,"value","")}));var a={};for(var l in e.pleanTableLabel){var s=t.data.resultValue.items[l];if(a[l]=s,1==s.isMandatory){var i=new Object;i.required=!0,i.message=s.dispName+"不能为空",i.trigger="blur",a[l].rule=i}else{var o=new Object;o.required=!1,a[l].rule=o}if("mgtUserTel"==s.colDname||"actUserTel"==s.colDname){var n=new Object;n.required=!1,n.validator=e.validaMobile,n.message="手机号格式不正确",n.trigger="blur",a[l].rule=n}}e.planLabel=a}e.loading=!1})).catch((function(e){console.log(e)}))):e.$message({showClose:!0,message:"请选择至少一条数据进行编辑",type:"warning"})},validaMobile:function(e,t,a){var l=/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/;t?l.test(t)?a():a(new Error("手机号格式不正确")):a()},getItemLabel:function(){var e=this;Object(u["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.selectParamDict.set("speciality",t.data.resultValue.specialityList),e.$forceUpdate()}}))},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},exportTmp:function(){var e=this;if(e.delData.ids.length){var t=e.delData;t.ids=t.ids.toString(),window.location.href=e.GLOBALURL+"/prjStOnAuditPlan/planToExcel?ids="+t.ids+"&token="+e.token}else e.$message({showClose:!0,message:"请选择至少一条数据",type:"warning"})},getValue:function(e){this.createOrg=e},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t-50,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t-50,this.isShowQuery=!1,this.showQuery=!1)},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},changeFeaStatus:function(){var e=this,t=this;if(0==t.saveParams.length)return this.$message({showClose:!0,message:"请选择要提交的项目",type:"warning"}),!1;for(var a=0;a<t.saveParams.length;a++)if(0==t.saveParams[a].havePlan)return this.$message({showClose:!0,message:"所选的项目中有未提交计划的数据",type:"warning"}),!1;console.log(t.saveParams),t.statusLoading=!0,Object(u["m"])(t.saveParams).then((function(a){t.statusLoading=!1,a.data.successful?(e.$message.success("提交评审计划成功"),t.getTable(t.currentPage,t.currentNum),t.saveParams=[],t.$refs.itemTable.clearSelection()):e.$message.error("提交评审计划失败·")}))},getRowKeys:function(e){return e.itemId},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1==t.havePlan?"success-row":""},uploadSuccess:function(e){var t=this;if(this.fileUploadLoading=!1,e.successful)this.$message({showClose:!0,message:"上传成功",type:"success"}),t.tzkeVisible1=!1,t.fileList=[],this.currentPage=1,this.getTable(1,t.currentNum);else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},changeStartDate:function(e){null!=e&&(null!=this.planLabel.planEndDate&&(this.maxDate=this.planLabel.planEndDate),this.minDate=e)},changeEndDate:function(e){null!=e&&(this.maxDate=e)},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},resetItem:function(){var e=this;e.param={createOrg:"",index:1,itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",feaStatus:0,ghYear:""},this.getTable(1,e.currentNum)},cancelSumbmitPlan:function(){var e=this;e.dialogFormVisible=!1,e.minDate="",e.maxDate=""},submitPlan:function(){var e=this,t=this;t.$refs["lableFormQuestion1"].validate((function(a){if(!a)return console.log("error submit!!"),!1;var l={items:[]},s={},i=t.editData;i.itemId=i.itemId.toString(),Object.keys(t.planLabel).forEach((function(e){console.log(e,t.planLabel[e]),s[t.planLabel[e].colDname]=t.planLabel[e].value})),1==t.isEdit?s["itemId"]=i.itemId:(s["itemId"]=t.tempItemId,""!=t.auditPlanId&&(s["auditPlanId"]=t.auditPlanId)),l.items.push(s),t.dialogFormVisible=!1,t.submitLoading=!0,Object(u["Jd"])(l).then((function(a){console.log(a),t.submitLoading=!1,a.data.successful?(e.$message({showClose:!0,message:"保存成功",type:"success"}),t.getTable(t.currentPage,t.currentNum),e.$refs.itemTable.clearSelection(),t.minDate="",t.maxDate=""):e.$message({showClose:!0,message:"保存失败",type:"error"}),t.loading=!1})),t.loading=!1}))},showSubmitPlan:function(e){var t=this;t.dialogFormVisible=!0,t.tempItemId=e.itemId,Object(u["gc"])().then((function(a){if(console.log("response",a),a.data.successful){t.pleanTableLabel=a.data.resultValue.items,t.pleanTableLabel.forEach((function(e){t.$set(e,"value","")}));var l={};for(var s in t.pleanTableLabel){var i=a.data.resultValue.items[s];if(l[s]=i,1==i.isMandatory){var o=new Object;o.required=!0,o.message=i.dispName+"不能为空",o.trigger="blur",l[s].rule=o}else{var n=new Object;n.required=!1,l[s].rule=n}if("mgtUserTel"==i.colDname||"actUserTel"==i.colDname){var r=new Object;r.required=!1,r.validator=t.validaMobile,r.message="手机号格式不正确",r.trigger="blur",l[s].rule=r}}1==e.havePlan&&Object(u["hb"])(e.itemId).then((function(e){if(e.data.successful){var a=e.data.resultValue;for(var s in l){var i=l[s];if(i.value=a[i.colDname],"planEndDate"==i.colDname||"planStartDate"==i.colDname){var o=a[i.colDname];i.value=t.formartDate(o)}else i.value=a[i.colDname];l[s]=i}t.auditPlanId=a.auditPlanId}})),t.planLabel=l}t.loading=!1})).catch((function(e){console.log(e)}))},updateItem:function(){this.dialogFormVisible1=!0},handleSelectionChange:function(e){var t=this;t.editData={itemId:[]},t.saveParams=[],t.delData={ids:[]},e.forEach((function(e,a){t.delData.ids.push(e.itemId),t.editData.itemId.push(e.itemId)})),e.forEach((function(e){var a={};a.itemId=e.itemId,a.auditPlanId=e.auditPlanId,a.havePlan=e.havePlan,t.saveParams.push(a)}))},del:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({showClose:!0,message:"删除成功",type:"success"})})).catch((function(){e.$message({type:"warning",message:"已取消删除"})}))},submitForm:function(e){var t=this,a=this;a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={items:[]};console.log(a.lableList);var s={};a.lableList.forEach((function(e,t){s[e.colDname]=e.value})),l.items.push(s),a.dialogFormVisible=!1,a.loading=!0,Object(u["pd"])(l).then((function(e){console.log(e),e.data.successful?(t.$message({showClose:!0,message:"添加成功",type:"success"}),a.getTable(a.currentPage,a.currentNum)):t.$message({showClose:!0,message:"添加失败",type:"error"}),a.loading=!1}))}))},showDialog:function(){var e=this;e.dialogFormVisible=!0,e.dialogLoading=!0,Object(u["ac"])().then((function(t){console.log(t),t.data.successful&&(t.data.resultValue.items.forEach((function(e,t){e.value=""})),e.lableList=t.data.resultValue.items),e.dialogLoading=!1}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.loading=!0,a.param.index=e,a.param.pageSize=t,Object(u["Hc"])(a.param).then((function(e){console.log("response",e),e.data.successful&&(a.totalNum=e.data.resultValue.totalNum,a.tableLabel=e.data.resultValue.tableLable,a.dictMap=a.getDictArr(a.tableLabel),a.saveLabel=a.getLabelList(a.tableLabel),a.columnTypeMap=a.getColumnTypeArr(a.tableLabel),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)),a.loading=!1})).catch((function(e){console.log(e)}))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];if(null!=s.codeList){if("speciality"==s.colDname){for(var i=[],o=0;o<s.codeList.length;o++)for(var n=0;n<t.userSpecialityArr.length;n++)s.codeList[o].codeValue==t.userSpecialityArr[n]&&i.push(s.codeList[o]);s.codeList=i}a.set(s.colDname,s.codeList)}}return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p;"createOrg"==m&&(r["createOrg"]=p)}s.push(r)}return s}}},p=m,h=(a("d37d"),a("a81a"),a("2877")),f=Object(h["a"])(p,l,s,!1,null,"7b84874d",null);t["default"]=f.exports},"29a9":function(e,t,a){"use strict";var l=a("6943"),s=a.n(l);s.a},"2a66":function(e,t,a){},"2b80":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("div",{staticClass:"picker"},[e._v(" 选择时间 "),a("el-date-picker",{attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1),a("div",{staticClass:"chartleft"},[a("div",{staticClass:"chart_box"},[a("div",{staticClass:"chart2"},[a("h3",{staticClass:"chart_title"},[e._v("项目批复分析")]),a("chart",{attrs:{option:e.option02}})],1),a("div",{staticClass:"chart2"},[a("h3",{staticClass:"chart_title"},[e._v("项目出库分析")]),a("chart",{attrs:{option:e.option03}})],1)]),a("div",{staticClass:"chart1"},[a("h3",{staticClass:"chart_title"},[e._v("未挂接批复文件项目")]),a("chart",{attrs:{option:e.option01}})],1),a("div",{staticClass:"chart1"},[a("h3",{staticClass:"chart_title"},[e._v("各单位储备项目")]),a("chart",{attrs:{option:e.option05}})],1),a("div",{staticClass:"chart1"},[a("h3",{staticClass:"chart_title"},[e._v("未出库项目")]),a("chart",{attrs:{option:e.option06}})],1)]),a("div",{staticClass:"chartright"},[a("div",{staticStyle:{"margin-left":"30px"}},[e._v(" 项目专项： "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.changeValue},model:{value:e.specValue,callback:function(t){e.specValue=t},expression:"specValue"}},e._l(e.specList,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1),a("div",{staticClass:"rightborder"},[a("div",{staticClass:"chart1",staticStyle:{"margin-bottom":"20px"}},[a("h3",{staticClass:"chart_title"},[e._v("未挂接批复文件项目")]),a("chart",{attrs:{option:e.option07}})],1),a("div",{staticClass:"chart1"},[a("h3",{staticClass:"chart_title"},[e._v("未出库项目")]),a("chart",{attrs:{option:e.option04}})],1)])])])])])},s=[],i=(a("4160"),a("d3b7"),a("159b"),a("7a14")),o=a("e9b1"),n=a("7e1e"),r=a("3eba");a("94b1"),a("007d"),a("627c");var c={name:"questions",data:function(){return{specValue:"",dates:[],specList:[],option01:{},option02:{},option04:{},option05:{},option03:{},option06:{},option07:{},region:"电网基建"}},components:{right:i["default"],chart:o["a"]},mounted:function(){var e=this,t=new Date,a=new Date;a.setMonth(t.getMonth()-1),this.dates=[a,t],this.getOrgAnalyze(),this.getPfAnalyze(),this.getckAnalyze(),this.getUnStatusAnalyze(),this.getUnStockAnalyze(),this.getSpecList().then((function(){e.getItemunCKAnalyze(),e.getItemunPfAnalyze()}))},methods:{changeValue:function(){this.getItemunCKAnalyze(),this.getItemunPfAnalyze()},changeDate:function(){this.getOrgAnalyze(),this.getPfAnalyze(),this.getckAnalyze(),this.getUnStatusAnalyze(),this.getUnStockAnalyze(),this.getItemunCKAnalyze(),this.getItemunPfAnalyze()},getSpecList:function(){var e=this;return new Promise((function(t,a){Object(n["Ed"])().then((function(l){l.data.successful?(e.specList=l.data.resultValue,e.specValue=l.data.resultValue[0].codeValue,t()):a(l.data.resultHint)}))}))},getItemunPfAnalyze:function(){var e=this;Object(n["Ac"])({startTime:e.dates[0],endTime:e.dates[1],spec:e.specValue}).then((function(t){if(t.data.successful){var a=[],l=[],s=[];t.data.resultValue.forEach((function(e){l.push(e.deptName),s.push(e.num)})),s.forEach((function(e){a.push(Math.max.apply(Math,s))})),e.option07={color:["#3ac3c7"],title:{text:"未批复项目分析",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{trigger:"axis"},xAxis:{axisLabel:{show:!0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:a,animation:!1,tooltip:{show:!1}},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f7c739"},{offset:1,color:"#f7c739"}])}}}]}}}))},getItemunCKAnalyze:function(){var e=this;Object(n["zc"])({startTime:e.dates[0],endTime:e.dates[1],spec:e.specValue}).then((function(t){if(t.data.successful){var a=[],l=[],s=[];t.data.resultValue.forEach((function(e){l.push(e.deptName),s.push(e.num)})),s.forEach((function(e){a.push(Math.max.apply(Math,s))})),e.option04={color:["#3ac3c7"],title:{text:"未批复项目分析",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{trigger:"axis"},xAxis:{axisLabel:{show:!0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:a,animation:!1,tooltip:{show:!1}},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#f7c739"},{offset:1,color:"#f7c739"}])}}}]}}}))},getUnStockAnalyze:function(){var e=this;Object(n["Pd"])({startTime:e.dates[0],endTime:e.dates[1]}).then((function(t){if(t.data.successful){var a=[],l=[],s=[];t.data.resultValue.forEach((function(e){s.push(e.specialityName),l.push(e.num)})),l.forEach((function(e){a.push(Math.max.apply(Math,l))})),console.log(l,s),e.option06={color:["#3ac3c7"],title:{text:"未批复项目分析",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{trigger:"axis"},xAxis:{axisLabel:{show:!0,rotate:40,textStyle:{color:"#747474"}},data:s},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:a,animation:!1,tooltip:{show:!1}},{name:"",type:"bar",data:l,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5ed9c3"},{offset:1,color:"#33bfc8"}])}}}]}}}))},getUnStatusAnalyze:function(){var e=this;Object(n["Od"])({startTime:e.dates[0],endTime:e.dates[1]}).then((function(t){if(t.data.successful){var a=[],l=[],s=[];t.data.resultValue.forEach((function(e){l.push(e.specialityName),s.push(e.num)})),s.forEach((function(e){a.push(Math.max.apply(Math,s))})),e.option01={color:["#3ac3c7"],title:{text:"未批复项目分析",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{trigger:"axis"},xAxis:{axisLabel:{show:!0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:a,animation:!1,tooltip:{show:!1}},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5ed9c3"},{offset:1,color:"#33bfc8"}])}}}]}}}))},getckAnalyze:function(){var e=this;Object(n["q"])({startTime:e.dates[0],endTime:e.dates[1]}).then((function(t){if(t.data.successful){var a=[];a.push({name:"已出库",value:t.data.resultValue.outStorage},{name:"未出库",value:t.data.resultValue.inStorage}),console.log(a),e.option03={color:["#2cddd4","#f7c739"],title:{text:"项目出库分析",show:!1,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",top:"middle",left:"right",data:["已出库","未出库"]},series:[{name:"",type:"pie",radius:["30%","60%"],center:["50%","60%"],data:a.sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#a1a1a1"},labelLine:{lineStyle:{color:"#d4d4d4"},smooth:.2,length:10,length2:20},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}}))},getPfAnalyze:function(){var e=this;Object(n["Dc"])({startTime:e.dates[0],endTime:e.dates[1]}).then((function(t){if(t.data.successful){var a=[];a.push({name:"已批复",value:t.data.resultValue.isapproved},{name:"未批复",value:t.data.resultValue.unapproved}),e.option02={color:["#2cddd4","#73a0fa"],title:{text:"项目批复分析",show:!1,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",top:"middle",left:"right",data:["已批复","未批复"]},series:[{name:"",type:"pie",radius:["30%","60%"],center:["50%","60%"],data:a.sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#a1a1a1"},labelLine:{lineStyle:{color:"#d4d4d4"},smooth:.2,length:10,length2:20},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}}))},getOrgAnalyze:function(){var e=this;Object(n["Cc"])({startTime:e.dates[0],endTime:e.dates[1]}).then((function(t){if(t.data.successful){var a=[],l=[],s=[];t.data.resultValue.forEach((function(e){l.push(e.deptName),s.push(e.num)})),s.forEach((function(e){a.push(Math.max.apply(Math,s))})),e.option05={color:["#3ac3c7"],title:{text:"未出库项目",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{trigger:"axis"},xAxis:{axisLabel:{show:!0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:a,animation:!1,tooltip:{show:!1}},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5ed9c3"},{offset:1,color:"#33bfc8"}])}}}]}}}))}}},u=c,d=(a("93eb"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"cb9afa8a",null);t["default"]=m.exports},"2bb5":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v(e._s(e.itemName))])])]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"lableFormQuestion",attrs:{model:e.itemLabel,"label-position":"right"}},[e._l(e.itemLabel,(function(t,l){return 3!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["DATE"==t.dispType?a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择日期",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1):e._e(),"dropdown"==t.dispType?a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemDictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1):e._e(),"text"==t.dispType?a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"diy",attrs:{type:"textarea",placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1):e._e(),"number"==t.dispType?a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"请输入内容",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1):e._e(),""==t.dispType||null==t.dispType?a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{autocomplete:"off",size:"mini",placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1):e._e()],1):e._e()})),a("el-form-item",{attrs:{prop:"filename",label:"可研报告文件"}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjCmFeaPrep/downloadReport?itemId="+e.feaReportId+"&token="+e.token}},[e._v(e._s(e.reportFileName))])])],2)],2)},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),o=a("7e1e"),n={name:"itemDialog",data:function(){return{token:"",formLabelWidth:"120px",itemLabel:{},insertParam:Object,itemDictMap:new Map,itemTableDataShow:[],DialogTitle:"",dialogLoading:!1,reportFileName:"",itemName:"",feaReportId:""}},props:{itemId:{type:String}},watch:{itemId:function(e){this.updateItem(e)}},mounted:function(){this.token=sessionStorage.getItem("token"),this.updateItem(this.itemId)},methods:{formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},downloadReport:function(){var e=this;e.loading=!0,Object(o["J"])({itemId:e.feaReportId}).then((function(t){var a=e.reportFileName;e.loading=!1,console.log("download res",t);var l=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),s=document.createElement("a"),i=window.URL.createObjectURL(l);s.href=i,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}))},updateItem:function(e){var t=this;t.DialogTitle="项目",t.dialogFormVisible=!0,t.dialogLoading=!0,Object(o["Hb"])(e).then((function(a){if(console.log("response",a),a.data.successful){var l=a.data.resultValue.tableLable;t.itemLabel=t.getLabelList(l),t.itemDictMap=t.getDictArr(l);var s=a.data.resultValue.tableData;for(var i in t.itemLabel)null==s[t.itemLabel[i].colDname]?t.itemLabel[i].value="":"DATE"==t.itemLabel[i].dispType?(console.log(s[t.itemLabel[i].colDname]),t.itemLabel[i].value=t.formartDate(s[t.itemLabel[i].colDname])):t.itemLabel[i].value=s[t.itemLabel[i].colDname]+"";"1"==s.itemType?(t.childItemDataShow=!0,null!=s.childrenItemList&&s.childrenItemList.length>0&&(t.childItemShowTableData=t.getShowDateTable(s.childrenItemList,t.dictMap))):t.childItemDataShow=!1,t.reportFileName=s.feaReportName,t.feaReportId=e}t.dialogLoading=!1})).catch((function(e){console.log(e),t.dialogLoading=!1}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t){for(var a=[],l=0;l<e.length;l++){for(var s=e[l],o=new Object,n=0,r=Object.entries(s);n<r.length;n++){var c=Object(i["a"])(r[n],2),u=c[0],d=c[1];if(console.log(u+":"+d),t.has(u))for(var m=t.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(o[u]=h.codeName)}else o[u]=d}a.push(o)}return a},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e){a[l]=e[l];var s=e[l];if(1==s.isMandatory){var i=new Object;i.required=!0,i.message=s.dispName+"不能为空",i.trigger="blur",a[l].rule=i}else{var o=new Object;o.required=!1,a[l].rule=o}}return a}}},r=n,c=(a("dd76"),a("2877")),u=Object(c["a"])(r,l,s,!1,null,"e7192e38",null);t["default"]=u.exports},"2be5":function(e,t,a){},"2bf0":function(e,t,a){"use strict";var l=a("3d43"),s=a.n(l);s.a},"2c28":function(e,t,a){},"2c70":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container plan-summary"},[a("div",{staticClass:"btns query_btns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.updateHZByCtotalTime}},[e._v("提交")])],1),a("div",{staticClass:"template_main"},[a("div",{staticClass:"template_left"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.timeListloading,expression:"timeListloading"}],staticClass:"plan-table",attrs:{data:e.colTimeList,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,height:e.tableHeight},on:{"current-change":e.handleChangeColTimeList}},[a("el-table-column",{attrs:{label:"评审计划汇总列表",prop:"jhps"}})],1)],1),a("div",{staticClass:"template_right"},[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoding,expression:"tableDataLoding"}],attrs:{data:e.tableDataShow,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":e.tableRowClassName,"cell-class-name":"column","highlight-current-row":!0,height:e.tableHeight,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{"min-width":"220",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,width:"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isChild?void 0:[a("span",{staticClass:"blue",on:{click:function(a){return e.showUpdataPlaneTimeDialog(t.row)}}},[e._v("编辑")])]}}],null,!0)})],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"planDrawer",class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])])])]),a("el-dialog",{attrs:{title:e.curItemName,"close-on-click-modal":!1,visible:e.showUpdatePlaneTime,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showUpdatePlaneTime=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"form",attrs:{model:e.updateForm,"label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"计划评审开始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.pickerOptionsStart},on:{change:e.changeStartDate},model:{value:e.updateForm.planStartDate,callback:function(t){e.$set(e.updateForm,"planStartDate",t)},expression:"updateForm.planStartDate"}})],1)],1),a("el-form-item",{attrs:{label:"计划评审结束时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.pickerOptionsEnd},on:{change:e.changeEndDate},model:{value:e.updateForm.planEndDate,callback:function(t){e.$set(e.updateForm,"planEndDate",t)},expression:"updateForm.planEndDate"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showUpdatePlaneTime=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updataPlaneTime()}}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{visible:e.itemShow,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.itemShow=t}}},[a("item-dialog",{attrs:{itemId:e.tempItemId}})],1)],1)},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),o=a("2bb5"),n=(a("7a14"),a("c2b4")),r=a("7e1e"),c={name:"planSummary",data:function(){var e=this;return{childIds:[],isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,dialogFormVisible2:!1,form:{time1:"",time2:""},options:[],value:"",formLabelWidth:"120px",input:"",colTimeList:[],tableData:[],tableLabel:[],tableDataShow:[],selectPlanId:{},columnTypeMap:new Map,param:{itemName:"",deptCode:"",auditPlanStatus:"",specialClass:"",itemType:"",voltLevel:"",filter:""},tempItemId:"",itemShow:!1,currentColTime:"",curItemName:"",showUpdatePlaneTime:!1,updateForm:{planStartDate:"",planEndDate:""},auditPlanId:"",timeListloading:!1,tableDataLoding:!1,tableHeight:"",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()<=a}}}},components:{"item-dialog":o["default"],ItemAddCom:n["default"]},mounted:function(){this.getColTimeList()},created:function(){this.tableHeight=window.innerHeight-220},methods:{changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(r["nb"])(s).then((function(e){if(e.data.successful){var t=e.data.resultValue;t.forEach((function(e){e.isChild=!0}));var s=l.getShowDateTable(e.data.resultValue,l.dictMap,l.columnTypeMap);a(s)}}))},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 2==t.auditPlanStatus?"success-row":""},changeStartDate:function(e){null!=e&&(null!=this.updateForm.planEndDate&&(this.maxDate=this.updateForm.planEndDate),this.minDate=e)},changeEndDate:function(e){null!=e&&(this.maxDate=e)},updateHZByCtotalTime:function(){var e=this,t=this,a=new FormData;if(""==t.currentColTime||null==t.currentColTime)return this.$message({showClose:!0,message:"请选择时间批次",type:"warning"}),!1;this.$confirm("是否提交评审计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.append("cTotalTime",t.currentColTime),Object(r["Ud"])(a).then((function(a){a.data.successful?(e.$message({showClose:!0,message:"提交成功",type:"success"}),t.getColTimeList()):e.$message({showClose:!0,message:"提交失败",type:"error"})}))})).catch((function(){}))},updataPlaneTime:function(){var e=this,t=this,a={};a.planStartDate=t.updateForm.planStartDate,a.planEndDate=t.updateForm.planEndDate,a.auditPlanId=t.auditPlanId,Object(r["Rd"])(a).then((function(a){t.tableDataLoding=!1,console.log(a),a.data.successful?(e.$message({showClose:!0,message:"修改成功",type:"success"}),t.getTable(t.currentPage,t.currentNum),t.showUpdatePlaneTime=!1):e.$message({showClose:!0,message:"修改失败",type:"error"})}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},showUpdataPlaneTimeDialog:function(e){var t=this;t.showUpdatePlaneTime=!0,t.curItemName=e.itemName,t.auditPlanId=e.auditPlanId,t.tempItemId=e.itemId,t.$set(t.updateForm,"planStartDate",e.planStartDate),t.$set(t.updateForm,"planEndDate",e.planEndDate),t.changeStartDate(e.planStartDate),t.changeEndDate(e.planEndDate);var a={parentItemId:e.itemId};Object(r["nb"])(a).then((function(e){if(e.data.successful){var a=e.data.resultValue;a.forEach((function(e){t.childIds.push(e.auditPlanId)})),t.auditPlanId=t.auditPlanId+","+t.childIds.toString(),console.log(t.auditPlanId)}}))},handleChangeColTimeList:function(e){var t=this;t.currentColTime!=e.jhps&&(t.currentColTime=e.jhps,t.getTable(t.currentPage,t.currentNum))},getColTimeList:function(){var e=this,t=this;t.timeListloading=!0,Object(r["pb"])("5").then((function(a){if(t.timeListloading=!1,console.log(a),a.data.successful){var l=a.data.resultValue;t.colTimeList=[],l.forEach((function(e){var a={};a.jhps=e,t.colTimeList.push(a)})),l.length>0&&(t.currentColTime=l[0]),t.getTable(1,t.currentNum)}else e.$message({showClose:!0,message:"获取评审计划信息列表失败",type:"error"})}))},showItemInfo:function(e){var t=this;t.tempItemId=e.itemId,this.$router.push({path:"/itemInfo",query:{itemId:t.tempItemId,oldPath:t.$route.path}})},handleSelectionChange:function(e){var t=this;t.selectPlanId={ids:[]},e.forEach((function(e){t.selectPlanId.ids.push(e.auditPlanId)}))},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.tableDataLoding=!0;var l="cTotalTimeStr=1&itemPhaseDet=5";""!=a.currentColTime&&(l+="&cTotalTime="+a.currentColTime);for(var s=0,o=Object.entries(a.param);s<o.length;s++){var n=Object(i["a"])(o[s],2),c=n[0],u=n[1];"pageIndex"!=c&&"pageSize"!=c&&""!=u&&(console.log(c+":"+u),l+="&"+c+"="+u)}var d={};d.pageIndex=e,d.pageSize=t,d.filter=l,Object(r["Sb"])(d).then((function(e){if(a.tableDataLoding=!1,console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}a.loading=!1})).catch((function(e){console.log(e)}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p}s.push(r)}return s}}},u=c,d=(a("9e74"),a("f5d1"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"dbbe1cc6",null);t["default"]=m.exports},3075:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABECAMAAACBFyr8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0OTU0MDMzYS03MTIwLTBlNGEtYTRkYS02YzFlOTExNGJlZjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDczQjFGRkU3RDVDMTFFQUEzNkZFQjJGMjkyNkM5N0QiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDczQjFGRkQ3RDVDMTFFQUEzNkZFQjJGMjkyNkM5N0QiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMEU4RjE4NTMwMTFFQUI2REQ5REU5NEEwNzhDMUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjQxMEU4RjI4NTMwMTFFQUI2REQ5REU5NEEwNzhDMUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7//HSbAAABhlBMVEX////9//77/v7+///4/fzs+fjy+/vk9/b5/f0moJf8/v79/v70/Pv6/v33/fz2/Pzz+/vw+/pRs6z1/Pzn+Pfx+/rt+vmzs7Oampro+Pfr6+vs+fnv+vlmvLbl9/a/v7/p+Pfr+fiMjIzu+vmo2dX19fXw+vrq+fh9fX1ubm5dXV3m9/anp6fLy8vg4ODj9/bW1tbl9PP4/f2339y03tvl+Pfc8O5JSUny+/rx+fjd9fMto5pJr6hQsqvg9vQvpJsooZj6/f3Z9PL5/PyQz8rv+/phurNZtq9LsKmu3NjV8vHn9/YpoZhzwrzs+via087i9vXb7+4noJe239z1+/rm+Pff9fTz/PuZ0s4ypZ3q9vXv+Pfn9/czMzOg1dFxwbtFrab3/PyX0s0poZnx+vpMsamMzcj7/v1ArKR+xsH8/v1eubK/4+BSs6zq+Pd/x8Le9fR6xb/p+Pg2p5/w+Pj0+/vh9vVlvLXU7Ovr+fn7/f1Aq6O94uCc1ND+//6m2NTa9PLw+vlqJBV2AAAEK0lEQVR42sRZZ3faSBQdJMBqgGTUEASBsEDIYGPHa6c7vffuOE7ZTdm+m2xJb/88I1SMQM2WhN8HfDRg3fPKvTPvDQChhqJoxjD4F0zFIBxJQCPJzFQgoX8kUsCgFRAC+jkNB4kCViyVy+UiViDSRzQcxIpUnmkzHFXCEDIzhYhiJbpdbZbRE99oCJmukxCQKGQpjm9UluFjsUYVCySabkQJGFEmx/5JGM9kjithaSJaEa115nkLpdGmMAJNM6IIVs63GvX/7DWWp4uwdnZgKBpZNawUMlX2EuYsLnbaVLaARLehakSTDYsU7RzbIbdXj7FVhiplo1tk2bBJ0erUz4yuH1qsVNtcPrLRFDWUDTIM0oxomeMrP5RcX5y8u8g2mrnIVuVrDF3OYmFKZeiaSYrKS/c3F08eOnZ9cSay1dlKk2dg6oMhbVI056tJEIHkmHKgUpkpHJLiQDI0IyGlApTK1rVqZX45KWY3oZO+iNukeE0kpiWVmr9SObpWbyWoZSwPETO+EcUgKRozVJJ6Wa/SWSQTqGsPTySq0DO5vCeincLmfJPche4/+oA7dvzISjiipWt5qGvMbvz4Ed+YdezoYfxWGOKIrj3dDeD7jZ83Rx5X15+HII7oGrJTsF8/frp27QX+i2vx7OVgRCuFUNeu7pgUB/8wc/eXa3UfHohohNTcmu5NvFAdwA9Bsp6k/sQPXuGPV/ZDe7sjRCOkdKvBYmNvE8SurqmgvybLsomoCeOI/zzxquwwRBLJUrXGu4l/XZAViCR0RVHRLZe7C2O/wfe5ny88MD5vHwxENGLK5TivLIky6CnQL8X2baAFIqKnby5FUIAMglE1L0AYVU0cAEFwAEF/axCAeOoKjkdDzNK8Fyv6st6TJVVYE1THaVHxRrwxtwT+PQeL9v7c0EIQi7T3di+tKWqvK6iCaJeuruqSJ+IX/HfwZlvo8N35CMSuCEtFUrZ03cyf0AMO+qSPm9F99MnjgiLKck/TBUmSh4gSdFDtSvHz6FOr8N2wVoV+fwAkkxXDCpK12LVq8bEzcc4YGOyAnnWF7rBCe2bViL24fLQ1586yFx+B2tc000O7TJWeP2JcXRVlSdE1U0217ZJRxHiIAXvHggRkm4ujBaPGRIyzP/70m9dq2P4Y0NuE2vn11cnF1fXz6Z1z9uOHj86OWZRzToyz3MqR4/iYRTrLuc+r2FTOq86ZHLZVyZ7J/RHT6jt8uwB3b9VIrrfy73Tc/eOdxPrHoG5ulCaJ9cjBHWsKc4CwrtyteWwhPiBxIGTyEKh5KU1XAmZWX1OaIPnP5f5Oa0rmO3v8n+W5dCaBY/NV2lGPHKyClKadbprYM+RKi8qmNtF1z8lNzfuc9px8D+4Cxu87nqV/3wGmf6cD9uDeag/u5sD07x/BHtyxWrCJvem7AAMAJ7OLkRdGl7QAAAAASUVORK5CYII="},"31df":function(e,t,a){},3656:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABECAMAAACBFyr8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0OTU0MDMzYS03MTIwLTBlNGEtYTRkYS02YzFlOTExNGJlZjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDczQjFGRkE3RDVDMTFFQUEzNkZFQjJGMjkyNkM5N0QiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDczQjFGRjk3RDVDMTFFQUEzNkZFQjJGMjkyNkM5N0QiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQxMEU4RjE4NTMwMTFFQUI2REQ5REU5NEEwNzhDMUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjQxMEU4RjI4NTMwMTFFQUI2REQ5REU5NEEwNzhDMUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7CukP8AAABdFBMVEX////9//77/v7+///4/fzs+fjy+/vk9/b5/f39/v78/v4moJf0/Pvr6+uampr6/v2/v7/3/fz2/Pzz+/vw+/r1/Pzn+PduwLrx+/qzs7Pt+vnr+fjs+fnp+Pfo+Pfv+vldXV3l9/bu+vlmvLbw+vpDraUzMzPq+fhubm719fXLy8uMjIzg4ODm9/Z9fX0noJfj9/bW1tb4/f1/x8Ku3Nhovbbx+fjl+Pey3dp9xsGnp6fy+/o0pp7d9fNJSUn6/f3p9fQ1p57g9vRFrqaMzcjZ9PLm+PdRs6z0+vrf9fTV8vFHr6f3/Pvh8vHi9vVLsKkooZjv+/qGysViurR6xb+EycQypZ3n9/bn9/dju7QvpJvp+Pg/q6Ph9vVIr6fw+vn2+/uZ0s4so5q239yb08/3/Pzt9/by+fnt+fnf8fD0+/ve9fT7/v3s+vhzwrxGrqZrvrj1+/o+qqL4/Pzx+vq339w8qqLa9PJXta7z/Puk19NnvLZ1c9SZAAAELklEQVR42tSZh5faRhCHhSQ4dQQq1oomMD5EObg7+xLfnX3uTuLeEpfETnFJcUnv/3xGQgcnkNBKCPll3gMknrTf29mZ3+7OEkQKRlFUzjH4JTIx4LEsB8YCNBNgLseRRQasSLK5LLpJ5bgiU9I0rVxiilwW3cyxJFMWDLWtFoQS43Rz5V0EoPLlOUqrVNtKmVm9Zym2WBIaJbjartdMQ6DBs6tFUixTNvKsc8nV9LwKnuVW61mKY4R2zbs2NyoNz7NxstnLZ0xjyZJi6oev/9CstQoaQ2J71oE52UziW5EW2p3NSQvMQ72q4g/mJJlpfCsLalW/OG2D7ej5Nm6agFq5ySwISgHbjHa1vnn2aDN3m50WZpqAejC0pqgNs5rHtkpN3/zkiq+d8od109AwPOvIFS2oZqWuN9ewbfPWxbNXrvlbelP30iRC8xz10FSDTSNlqlhp4qiHYrLppOm+lyYLBxPUQ1MraSnD9ka9GqV5jno06qmJEfd5ZJpApApT9UhhMFvNzuLBzJG0Um2mqbnCGswmGhPqWSAW8mupyvy5Rws1bwVEgq1sVMIHM5DIfv0FP7E7z07FZqqgeYUQzQskXub/+OnYoe1c4OMjX4ZrXhDx1yc//nzk9vyZS/E9S4Zq3gzx2xe7u7vv+F3fM49HSdLkLWhe0GD6id//Mh67k75njvNH77pb8IXE6b3UDWb+PZ7AZh3rJ94f/fPqA7CvwohIsq1hl+gdyLIMt+IAPutAH4gBSOZqraU4jl1A/OYv3ys3xj+ffjT5ZyD3gYRsSepbcCtLHlGSg9Ok1hBokl1A5I/73rh3er4VaHuvjwjC+UQRCcLIG45fsYknR5dn5jHw6lDaIhBygdFEYr8hMGQMIs/vfOz7pydbe7LYRQfIDRcZ3Cutw8cOI5KmQuMQT59w7TMI29s3iQcnps+LB/3uno26SHLvIIDQOoJvMXRhoJSWI0q2ZA8Isb9uWUPoMuF51b1apo9Tr/7r9+qgL8ny3tBCoigD0RI9omiFEI2Y4zgbOV1bhBhBvd4WIUJXo4lxY3U+O7bGUSnayHakJ4LIdeLm47wCjPOg2xsOB86NhbzIQUHEbQzNmSEG6aoki31r6AWKJR1aALGAo6sYRFBQeSLd0widi1XqO6y54879IGKS2Qp3frx05vz8y0lm5DLuGuAUf2Hn2IwlWXXEWOf8fn3Ez9jo+vPYazk97lpuOWOyXq/CmtzZYC1ak6e6C8DYd6S703HqSRF7q3R3c9tXMfaPae5Y3T1yOXKPnNquHLcO4FYe9lNAFnXcWkdK1RXses4SFaQ/E9esklbJXiesyyWsBBqm/jRp7XFc7eTiVTsh2vITpVLi1lcTVXRpoVVfoob8f6iTZ38W4J53/JbheUf2Zzrv4dwq+7O57M8f38MZq4fFfO4/AQYA5gmMf4qdfYoAAAAASUVORK5CYII="},3825:function(e,t,a){"use strict";var l=a("7f62"),s=a.n(l);s.a},3828:function(e,t,a){"use strict";var l=a("d5cf"),s=a.n(l);s.a},"3a4c":function(e,t,a){},"3b00":function(e,t,a){"use strict";a.r(t);var l,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!1},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("需求名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键词"},on:{change:e.selectItem},model:{value:e.getTableData.dmdName,callback:function(t){e.$set(e.getTableData,"dmdName",t)},expression:"getTableData.dmdName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("年份")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},on:{change:e.selectItem},model:{value:e.getTableData.createDate,callback:function(t){e.$set(e.getTableData,"createDate",t)},expression:"getTableData.createDate"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属部门")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.selectItem},model:{value:e.getTableData.orgDept,callback:function(t){e.$set(e.getTableData,"orgDept",t)},expression:"getTableData.orgDept"}},e._l(e.dictMap.get("orgDept"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),e.$store.state.app.isHideMenu?a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.parentSave}},[e._v("选择")])],1):a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showDialog(null)}}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",size:"small",loading:e.delLoading},on:{click:e.del}},[e._v("删除")]),a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStDmd/importFile","on-success":e.uploadSuccess,headers:{userId:e.uid,token:e.token},multiple:!1,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入")])],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportTmp}},[e._v("导出")]),a("el-button",{attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/export?templateType=1&token="+e.token}},[e._v("导出模版")])])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"demandTable",attrs:{data:this.tableShowData,height:e.tableHeight,border:"","row-key":e.getRowKeys,"header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{"reserve-selection":!0,type:"selection",width:"45"}}),e._l(e.tableLabel,(function(t,l){return"dmdName"!=t.colDname&&"fileName"!=t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"dmdName"==t.colDname?a("el-table-column",{attrs:{"min-width":"250",align:"left",label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.dmdName))])]}}])}):"fileName"==t.colDname?a("el-table-column",{attrs:{"min-width":"180",align:"left",prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.fileName?[a("a",{attrs:{href:e.GLOBALURL+"/prjStDmd/downloadAccessory?dmdId="+t.row.dmdId+"&token="+e.token}},[e._v(e._s(t.row.fileName))])]:void 0}}],null,!0)}):e._e()})),a("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.userId==t.row.userNo?a("el-upload",{ref:"uploadFile",staticClass:"upload",attrs:{"on-exceed":e.exceed,action:e.GLOBALURL+"/prjStDmd/uploadAccessory",headers:{userId:e.userId,token:e.token},data:{dmdId:t.row.dmdId},"before-upload":e.beforeupload,"on-error":e.errorUpload,"on-success":e.uploadSuccessAttachment,multiple:!1,"show-file-list":!1}},[""==t.row.fileName||null==t.row.fileName?a("el-button",{staticClass:"blue",attrs:{type:"text"}},[e._v("上传附件")]):a("el-button",{staticClass:"blue",attrs:{type:"text"}},[e._v("覆盖附件")])],1):a("span",[""==t.row.fileName||null==t.row.fileName?a("span",{staticStyle:{color:"gray",padding:"0 10px"}},[e._v("上传附件")]):a("span",{staticStyle:{color:"gray",padding:"0 10px"}},[e._v("覆盖附件")])]),""!=t.row.fileName&&null!=t.row.fileName&&e.userId==t.row.userNo?a("span",{staticClass:"blue",on:{click:function(a){return e.delFile(t.row)}}},[e._v("删除附件")]):e._e(),""!=t.row.fileName&&null!=t.row.fileName&&e.userId!=t.row.userNo?a("span",{staticStyle:{color:"gray",padding:"0 10px"}},[e._v("删除附件")]):e._e()]}}])})],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.getTableData.pageSize,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),a("el-dialog",{attrs:{title:e.dialogTit,"close-on-click-modal":!1,width:"900px",visible:e.dialogFormVisible},on:{close:function(t){return e.cancel("lableForm")},"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"lableForm",attrs:{model:e.lableList,inline:!0,"label-position":"right"}},[e._l(e.lableList,(function(t,l){return a("el-form-item",{attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:{required:e.isRequired(t.isMandatory),message:t.dispName+"不能为空",trigger:"blur"}}},["text"==t.dispType?a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"string"==t.dispType?a("el-input",{attrs:{autocomplete:"off"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(t.codeList,(function(e){return a("el-option",{key:e.codeId,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"date"==t.dispType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1)})),e.showDownload?a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"下载附件"}},[a("a",{attrs:{href:e.GLOBALURL+"/prjStDmd/downloadAccessory?dmdId="+e.downloadId+"&token="+e.token}},[e._v(e._s(e.fileName))])]):e._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel("lableForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitForm("lableForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],o=(a("4160"),a("4ec9"),a("4fad"),a("b64b"),a("d3b7"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),n=a("ade3"),r=a("5530"),c=a("a960"),u=a("7e1e"),d=a("2f62"),m=a("73fc"),p={name:"questions",data:function(){return{delLoading:!1,submitLoading:!1,parentData:[],deptCode:"",fileName:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],isShowQuery:!1,downloadId:"",showDownload:!1,tableHeight:"",dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:{},totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,dialogTit:"",form:{},options:[],value:"",formLabelWidth:"120px",input:"",tableData:[],tableLabel:[],getTableData:{pageIndex:1,pageSize:20,dmdName:"",orgNo:"",orgDept:"",createDate:""},dictMap:new Map,tempId:"",isShowFilter:!1,tableShowData:[],columnTypeMap:new Map,param:{},token:"",userId:"",tempUserNo:""}},computed:Object(r["a"])({},Object(d["b"])(["uid"])),components:{querys:m["a"],SelectTree:c["a"]},watch:{deptCode:function(){this.getTableData.orgNo=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){console.log("配置地址",this.$store.state.app.workflowurl),console.log("isCollapse",this.$store.state.app.isCollapse),this.token=sessionStorage.getItem("token"),this.userId=sessionStorage.getItem("userId"),this.getTable(1,20)},methods:(l={delFile:function(e){var t=this;Object(u["x"])({dmdId:e.dmdId}).then((function(e){e.data.successful?(t.$message.success("删除附件成功"),t.getTable(t.currentPage,t.currentNum)):t.$message.error("删除附件失败")}))},uploadFileSubmit:function(e){this.$refs.uploadFile.submit()},parentSave:function(){console.log(this.parentData),parent.getChildValue(this.parentData)},getValue:function(e){this.deptCode=e,console.log(e)},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0):(this.tableHeight=t,this.isShowQuery=!1)},dateFormat:function(e,t){var l=a("c1df"),s=e[t.property];return console.log("date",e),s?l(s).format("YYYY-MM-DD"):""},cancel:function(e){this.dialogFormVisible=!1,this.resetForm(e)},resetForm:function(e){this.$refs[e].resetFields()},getRowKeys:function(e){return e.dmdId},isRequired:function(e){return console.log(e),!(!e||1!=e)},switchFilter:function(){this.isShowFilter=!this.isShowFilter}},Object(n["a"])(l,"isRequired",(function(e){return console.log(e),!(!e||1!=e)})),Object(n["a"])(l,"changeProbName",(function(e){e||this.getTable()})),Object(n["a"])(l,"uploadSuccess",(function(e,t,a){var l=this;e.successful?(l.$message({showClose:!0,message:"导入成功",type:"success"}),l.getTable(l.currentPage,l.currentNum)):l.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:e.resultHint,type:"error"})})),Object(n["a"])(l,"handleSelectionChange",(function(e){var t=this;t.delData={ids:[]},t.parentData=[],e.forEach((function(e,a){t.delData.ids.push(e.dmdId),t.parentData.push({dmdCode:e.dmdCode,dmdId:e.dmdId})}))})),Object(n["a"])(l,"exportTmp",(function(){var e=this,t=e.delData;t.ids=t.ids.toString(),window.location.href=e.GLOBALURL+"/prjStDmd/export?ids="+t.ids+"&token="+e.token})),Object(n["a"])(l,"del",(function(){var e=this,t=this;t.delData.ids.length?this.$confirm("此操作将永久删除"+t.delData.ids.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,t.delLoading=!0,Object(u["B"])(t.delData).then((function(a){console.log(a),t.delLoading=!1,t.$refs.demandTable.clearSelection(),a.data.successful?(e.$message({showClose:!0,message:"删除成功",type:"success"}),t.getTable(t.currentPage,t.currentNum)):e.$message({showClose:!0,message:a.data.resultHint,dangerouslyUseHTMLString:!0,type:"error"}),t.loading=!1}))})).catch((function(){e.$message(Object(n["a"])({type:"info",message:"已取消删除"},"type","warning"))})):this.$message({showClose:!0,message:"未选择任何数据",type:"warning"})})),Object(n["a"])(l,"submitForm",(function(e){var t=this,a=this;if(""!=a.tempUserNo&&a.userId!=a.tempUserNo)return this.$message.warning("你不是创建者，没有权利修改此项"),!1;console.log(a.tempId),a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={items:[]};console.log(a.lableList);var s={};a.tempId.length&&(s["dmdId"]=a.tempId),Object.keys(a.lableList).forEach((function(e){s[a.lableList[e].colDname]=a.lableList[e].value})),l.items.push(s),console.log("subdata",l),a.dialogFormVisible=!1,a.loading=!0,a.submitLoading=!0,Object(u["pd"])(l).then((function(e){console.log(e),a.submitLoading=!1,e.data.successful?(t.$message({showClose:!0,message:"操作成功",type:"success"}),a.getTable(a.currentPage,a.currentNum)):t.$message({showClose:!0,message:"操作失败",type:"error"}),a.loading=!1}))}))})),Object(n["a"])(l,"showDialog",(function(e){var t=this;t.dialogFormVisible=!0,t.dialogLoading=!0,t.showDownload=!1,e?(t.dialogTit="编辑需求",t.tempId=e.dmdId,t.fileName=e.fileName,e.tmplFileId?(t.showDownload=!0,t.downloadId=e.dmdId):t.showDownload=!1,t.tempUserNo=e.userNo):(t.dialogTit="新增需求",t.tempId="",t.tempUserNo=""),Object(u["ac"])().then((function(a){if(console.log(a),a.data.successful){a.data.resultValue.items.forEach((function(e,t){e.value=""}));var l={},s=function(s){e&&(t.tableData.forEach((function(t,l){t.dmdId==e.dmdId&&(console.log(t),a.data.resultValue.items[s].value=t[a.data.resultValue.items[s].colDname])})),console.log(e[a.data.resultValue.items[s].colDname])),l[s]=a.data.resultValue.items[s]};for(var i in a.data.resultValue.items)s(i);t.lableList=l}t.dialogLoading=!1}))})),Object(n["a"])(l,"selectItem",(function(){this.currentPage=1,this.getTable(1,this.currentNum)})),Object(n["a"])(l,"handleSizeChange",(function(e){this.currentNum=e,this.getTable(this.currentPage,e)})),Object(n["a"])(l,"handleCurrentChange",(function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)})),Object(n["a"])(l,"getTable",(function(e,t){var a=this;a.loading=!0,a.getTableData.pageIndex=e,a.getTableData.pageSize=t,Object(u["Tb"])(a.getTableData).then((function(e){if(console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum,a.tableLabel=e.data.resultValue.tableLable;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),console.log(a.dictMap),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableShowData=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}a.loading=!1})).catch((function(e){console.log(e)}))})),Object(n["a"])(l,"getLabelList",(function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a})),Object(n["a"])(l,"getDictArr",(function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t})),Object(n["a"])(l,"getColumnTypeArr",(function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t})),Object(n["a"])(l,"getShowDateTable",(function(e,t,a){for(var l=this,s=[],i=0;i<e.length;i++){for(var n=e[i],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(o["a"])(u[c],2),m=d[0],p=d[1];if("feaStatus"==m&&(r["feaStatusT"]=p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){console.log("columnTypeMap",m),r[m+"Rel"]=p;var b=l.formartDate(p,m);r[m]=b}else r[m]=p;"orgNo"==m&&(r["orgNo"]=p)}s.push(r)}return s})),Object(n["a"])(l,"formartDate",(function(e,t){if(e){var a=new Date(e),l=a.getFullYear(),s=a.getMonth()+1,i=a.getDate();return"year"==t?l:l+"-"+this.add0(s)+"-"+this.add0(i)}return""})),Object(n["a"])(l,"add0",(function(e){return e<10?"0"+e:e})),Object(n["a"])(l,"beforeupload",(function(){this.loading=!0})),Object(n["a"])(l,"errorUpload",(function(){this.loading=!1,this.$message({message:"上传失败",type:"error"})})),Object(n["a"])(l,"uploadSuccessAttachment",(function(e,t,a){var l=this;console.log("uploadSuccessAttachment"),l.uploading=!1,l.fileList=a,console.log(l.fileList),e.successful?(l.$message({showClose:!0,message:"上传成功",type:"success"}),l.getTable(l.currentPage,l.currentNum)):l.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:e.resultHint,type:"error"})})),Object(n["a"])(l,"exceed",(function(){this.$message({showClose:!0,message:"只能上传一个文件",type:"warning"})})),l)},h=p,f=(a("49a0"),a("2877")),g=Object(f["a"])(h,s,i,!1,null,"35c24c87",null);t["default"]=g.exports},"3b06":function(e,t,a){"use strict";var l=a("09a4"),s=a.n(l);s.a},"3ced":function(e,t,a){"use strict";var l=a("b285"),s=a.n(l);s.a},"3d01":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu",style:{width:e.isCollapse?"64px":"220px"}},[a("el-menu",{ref:"elMenu",staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex==e.$route.path?e.activeIndex:e.$route.path,"background-color":"#fff","unique-opened":!0,"text-color":"#333",collapse:e.isCollapse,"active-text-color":"#369692"},on:{select:e.handleSelect}},e._l(e.permission_routes,(function(t){return a("span",[t.hidden||t.isOpen||!e.notHttp(t.path)?t.hidden||t.isOpen||e.notHttp(t.path)?!t.hidden&&t.isOpen?a("el-submenu",{attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont"},["项目需求管理"==t.name?a("i",[e._v("")]):"项目立项管理"==t.name?a("i",[e._v("")]):"可研评审管理"==t.name?a("i",[e._v("")]):"项目储备管理"==t.name?a("i",[e._v("")]):"模版配置"==t.name?a("i",[e._v("")]):e._e()]),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return a("span",[t.children?a("el-submenu",{attrs:{index:t.path}},[a("template",{slot:"title"},[a("span",{staticStyle:{"padding-left":"0px"}},[a("i",{staticClass:"iconfont"}),e._v(" "+e._s(t.name)+" ")])]),t.isOpen?a("div",{attrs:{index:t.path}},e._l(t.children,(function(t){return e.notHttp(t.path)?a("el-menu-item",{attrs:{index:t.path}},[a("span",{staticStyle:{"padding-left":"15px"}},[a("i",{staticClass:"iconfont"}),e._v(e._s(t.name)+" ")])]):a("a",{staticClass:"el-menu-item",attrs:{target:"_blank",href:t.path}},[a("i",{staticClass:"iconfont"}),e._v(e._s(t.name)+" ")])})),1):e._e()],2):!t.children&&e.notHttp(t.path)?a("el-menu-item",{attrs:{index:t.path}},[a("template",{slot:"title"},[a("span",{staticStyle:{"padding-left":"4px"}},[a("i",{staticClass:"iconfont"}),e._v(e._s(t.name)+" ")])])],2):t.children||e.notHttp(t.path)?e._e():a("a",{staticClass:"el-menu-item",attrs:{target:"_blank",href:t.path}},[a("i",{staticClass:"iconfont"}),e._v(e._s(t.name)+" ")])],1)}))],2):e._e():a("a",{staticClass:"el-menu-item",attrs:{href:t.path,target:"_blank"}},e._l(t.children,(function(t){return a("span",[e._v(" "+e._s(t.name)+" ")])})),0):a("el-menu-item",{attrs:{index:t.path}},[e._l(t.children,(function(t){return["储备中心概览"==t.name?a("i",{staticClass:"iconfont"},[e._v("")]):e._e(),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.name)+" ")])]}))],2)],1)})),0),a("div",{staticClass:"split",on:{click:e.toggleIsCollapse}})],1)},s=[],i=a("b39f"),o=i["a"],n=(a("45cf"),a("85ad"),a("2877")),r=Object(n["a"])(o,l,s,!1,null,"2c700cf0",null);t["a"]=r.exports},"3d13":function(e,t,a){"use strict";var l=a("8a6b"),s=a.n(l);s.a},"3d43":function(e,t,a){},4059:function(e,t,a){"use strict";var l=a("68e0"),s=a.n(l);s.a},"40d4":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container403"},[e._v(" 欢迎项目精准储备管理系统(SG-PRS) ")])},s=[],i=a("5530"),o=a("2f62"),n={name:"Dashboard",computed:Object(i["a"])({},Object(o["b"])(["name"]))},r=n,c=(a("5551"),a("2877")),u=Object(c["a"])(r,l,s,!1,null,"05fdd28d",null);t["default"]=u.exports},4245:function(e,t,a){},4360:function(e,t,a){"use strict";var l=a("2b0e"),s=a("2f62"),i=(a("b0c0"),{isHideMenu:function(e){return e.app.isHideMenu},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},loginname:function(e){return e.user.loginname},pwd:function(e){return e.user.pwd},user:function(e){return e.user.user},roles:function(e){return e.user.roles},permission_routes:function(e){return e.permission.routes},addRoutes:function(e){return e.permission.addRoutes},isCollapse:function(e){return e.app.isCollapse},isIscLogin:function(e){return e.user.isIscLogin},isSimulateLogin:function(e){return e.user.isSimulateLogin},key:function(e){return e.user.key},uid:function(e){return e.user.uid},iscUrl:function(e){return e.user.iscUrl},userCity:function(e){return e.user.userCity},pathChangeActive:function(e){return e.itemadd.pathChangeActive}}),o=i,n=(a("4160"),a("c975"),a("d3b7"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("5f87")),r=a("a18c"),c=a("5c96"),u=a("7e1e"),d={isIscLogin:!0,isSimulateLogin:!1,token:Object(n["d"])(),name:"",locationUrl:"",avatar:"",iscUrl:"http://192.168.1.242:8989",uid:Object(n["e"])(),roles:[],pwd:Object(n["c"])(),key:Object(n["a"])(),userCity:"",iscUserId:n["g"],loginName:n["h"],workflowtype:0},m={SET_LOCATIONURL:function(e,t){e.locationUrl=t},SET_TOKEN:function(e,t){e.token=t},SET_ISCUSERID:function(e,t){e.iscUserId=t},SET_LOGINNAME:function(e,t){e.loginName=t},SET_KEY:function(e,t){e.key=t},SET_NAME:function(e,t){e.name=t},SET_UID:function(e,t){e.uid=t},SET_AVATAR:function(e,t){e.avatar=t},SET_PWD:function(e,t){e.pwd=t},SET_USER:function(e,t){e.user=t},SET_USER_PHOTO:function(e,t){e.user.photo=t},SET_ROLES:function(e,t){e.roles=t},SET_CITY:function(e,t){e.userCity=t}},p={setLocationUrl:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_LOCATIONURL",t),e()}))},setInfo:function(e,t){var a=e.commit,l=t.iscUserId,s=t.loginName;return new Promise((function(e,t){a("SET_ISCUSERID",l),a("SET_LOGINNAME",s),Object(n["t"])(l),Object(n["u"])(s),e()}))},setKey:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_KEY",t),Object(n["p"])(t),e()}))},login:function(e,t){var a=e.commit,l=t.username,s=t.password;return new Promise((function(e,t){Object(u["Bc"])({userName:l.trim(),password:s}).then((function(s){var i=s.data;if(console.log(s),i.successful){var o=i.resultValue.items[0].id;console.log("logindata",i),a("SET_NAME",l),Object(n["q"])(l),console.log(o),a("SET_TOKEN",o),Object(n["r"])(o),a("SET_UID",o),Object(n["s"])(o),sessionStorage.setItem("token",o),sessionStorage.setItem("userId",o),e()}else{var r=i.resultHint;c["MessageBox"].confirm(r,"错误",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}),t(s.error)}})).catch((function(e){t(e)}))}))},simulateLogin:function(e){var t=e.commit;e.state;return new Promise((function(e,a){console.log("第三种登录"),Object(u["lc"])({ticket:sessionStorage.getItem("ticket"),iscUserId:sessionStorage.getItem("iscUserId"),loginName:sessionStorage.getItem("loginName")}).then((function(a){var l=a.data;l.successful&&(t("SET_UID",l.resultValue.items[0].id),console.log("_password",l.resultValue.items[0]),t("SET_TOKEN",l.resultValue.items[0]._password),Object(n["r"])(l.resultValue.items[0]._password),sessionStorage.setItem("username",l.resultValue.items[0].name),sessionStorage.setItem("token",l.resultValue.items[0]._password),sessionStorage.setItem("userId",l.resultValue.items[0].id),e())})).catch((function(e){a(e)}))}))},simulateGetInfo:function(e){var t=e.commit;e.state;return console.log("第三种登录"),new Promise((function(e,a){console.log("localStorage:",sessionStorage.getItem("iscUserId"),sessionStorage.getItem("loginName")),Object(u["lc"])({ticket:sessionStorage.getItem("ticket"),iscUserId:sessionStorage.getItem("iscUserId"),loginName:sessionStorage.getItem("loginName")}).then((function(a){var l=a.data,s={data:{role:["normal"]}};if(l.successful){var i=l.resultValue.items[0].city;t("SET_CITY",i),t("SET_NAME",sessionStorage.getItem("username"));var o=l.resultValue.items[0].privilegeList;o.forEach((function(e,t){console.log(e),s.data.role.push(e.code)})),console.log("privilegeList",s),t("SET_ROLES",s.data.role),e(s)}})).catch((function(e){a(e)}))}))},iscLogin:function(e){var t=e.commit;e.state;return new Promise((function(e,a){Object(u["Md"])({ticket:sessionStorage.getItem("ticket"),iscUserId:sessionStorage.getItem("iscUserId"),loginName:sessionStorage.getItem("loginName")}).then((function(l){if(l.data.successful){var s=l.data;t("SET_TOKEN",s.resultValue.token),t("SET_UID",s.resultValue.userInfo.id),Object(n["r"])(s.resultValue.token),sessionStorage.setItem("token",s.resultValue.token),sessionStorage.setItem("userId",s.resultValue.userInfo.id),sessionStorage.setItem("username",s.resultValue.userInfo.name),sessionStorage.setItem("role",s.resultValue.role),sessionStorage.setItem("purchaseRoleMap",window.JSON.stringify(s.resultValue.userInfo.purchaseRoleMap)),sessionStorage.setItem("electronicRoleMap",window.JSON.stringify(s.resultValue.userInfo.electronicRoleMap)),sessionStorage.setItem("specRoleMap",window.JSON.stringify(s.resultValue.userInfo.specRoleMap)),sessionStorage.setItem("iscOrgRoleIds",window.JSON.stringify(s.resultValue.userInfo.iscOrgRoleIds)),sessionStorage.setItem("iscOrg",window.JSON.stringify(s.resultValue.userInfo.iscOrg)),e()}else{var i=l.data.resultHint;c["MessageBox"].confirm(i,"错误",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}),a(l.resultHint)}}))}))},iscGetInfo:function(e){var t=e.commit;e.state;return new Promise((function(e,a){console.log("第二种登录"),Object(u["mc"])().then((function(a){var l={data:{role:["normal"]}};if(a.data.successful){var s=a.data;t("SET_NAME",sessionStorage.getItem("username"));var i=s.resultValue.city;t("SET_CITY",i);var o=s.resultValue.router;console.log("iscroleData",l),e(o)}}))}))},getInfo:function(e){var t=e.commit,a=e.state;return new Promise((function(e,l){Object(u["kc"])({userId:sessionStorage.getItem("token")}).then((function(a){console.log("getUserInfo",a);var l=a.data,s={data:{role:["normal"]}};if(l.successful){var i=l.resultValue.items[0].city;t("SET_CITY",i),t("SET_NAME",Object(n["b"])());var o=l.resultValue.items[0].privilegeList;o.forEach((function(e,t){console.log(e),s.data.role.push(e.code)})),console.log("privilegeList",s),t("SET_ROLES",s.data.role),e(s)}})).catch((function(e){l(e)})),console.log("LoginVerifyRequest",a.token)}))},logout:function(e){var t=e.commit,a=e.state;return new Promise((function(e,l){a.isIscLogin||a.isSimulateLogin?(console.log("isclogin"),Object(u["Nd"])().then((function(l){if(console.log(l),l.data.successful){t("SET_KEY",""),t("SET_TOKEN",""),t("SET_ROLES",[]),t("SET_UID",""),Object(n["m"])(),Object(n["i"])(),Object(n["l"])(),Object(n["k"])(),Object(r["d"])(),Object(n["j"])(),Object(n["n"])(),Object(n["o"])();var s=a.locationUrl;-1!=s.indexOf("?")&&(s=s.split("?")[0]);var i=a.iscUrl+"/isc_sso/logout?service="+s+"&username="+l.data.resultValue.username+"&iscUserId="+l.data.resultValue.iscUserId;console.log(i),sessionStorage.clear(),e(i)}}))):(console.log("第一种登录退出"),sessionStorage.clear(),t("SET_TOKEN",""),t("SET_ROLES",[]),t("SET_UID",""),Object(n["l"])(),Object(n["k"])(),Object(r["d"])(),Object(n["j"])(),Object(n["m"])(),e())}))},resetToken:function(e){var t=e.commit;return new Promise((function(e){t("SET_TOKEN",""),Object(n["l"])(),Object(n["k"])(),Object(n["j"])(),e()}))}},h={namespaced:!0,state:d,mutations:m,actions:p},f=(a("99af"),a("caad"),a("45fc"),a("2532"),a("5530"));function g(e,t){return!t.meta||!t.meta.role||e.some((function(e){return t.meta.role.includes(e)}))}function b(e,t){var a=[];return e.forEach((function(e){var l=Object(f["a"])({},e);g(t,l)&&(l.children&&(l.children=b(l.children,t)),a.push(l))})),a}var v={routes:[],addRoutes:[]},w={SET_ROUTES:function(e,t){e.addRoutes=t,e.routes=r["b"].concat(t)},SET_ROUTESDYN:function(e,t){e.routes=t}},y={setBackRoutes:function(e,t){var a=e.commit;a("SET_ROUTESDYN",t)},generateRoutes:function(e,t){var a=e.commit;return new Promise((function(e){var l;t=t.roles,l=t.includes("admin")?r["a"]||[]:b(r["a"],t),a("SET_ROUTES",l),e(l)}))}},D={namespaced:!0,state:v,mutations:w,actions:y},C={workflowurl:"",bmUrl:"",isCollapse:!1,isHideMenu:!1},I={SET_ISCOLLAPSE:function(e,t){e.isCollapse=t},SET_HIDEMENU:function(e,t){e.isHideMenu=t},SET_WORKFLOWURL:function(e,t){e.workflowurl=t},SET_BMURL:function(e,t){e.bmUrl=t}},L={setBmUrl:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_BMURL",t)})).catch((function(e){reject(e)}))},setworkflowurl:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_WORKFLOWURL",t)})).catch((function(e){reject(e)}))},setIscollapse:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_ISCOLLAPSE",t)})).catch((function(e){reject(e)}))},setHideMenu:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_HIDEMENU",t)})).catch((function(e){reject(e)}))}},S={namespaced:!0,state:C,mutations:I,actions:L},T={pathChangeActive:!1,addItemParams:{itemId:"",specClass:"",specClassName:""},isSaved:!1},k={},_={SET_PARTHCHANGEACTIE:function(e,t){e.pathChangeActive=t},setItemParams:function(e,t){e.addItemParams=t},setItemParamStatus:function(e,t){e.isSaved=t}},N={setPathChangeActive:function(e,t){var a=e.commit;return new Promise((function(e,l){a("SET_PARTHCHANGEACTIE",t)})).catch((function(e){reject(e)}))},setItemParams:function(e,t){e.addItemParams=t},setItemParamStatus:function(e,t){var a=e.commit;a("setItemParamStatus",t)}},x={namespaced:!0,state:T,mutations:_,actions:N,getters:k},j=a("9ff1");l["default"].use(s["a"]);var O=new s["a"].Store({modules:{permission:D,user:h,app:S,itemadd:x,treeList:j["a"]},getters:o});t["a"]=O},"43c3":function(e,t,a){},"447c":function(e,t,a){"use strict";var l=a("758e"),s=a.n(l);s.a},"452c":function(e,t,a){},"45b7":function(e,t,a){},"45cf":function(e,t,a){"use strict";var l=a("3a4c"),s=a.n(l);s.a},4608:function(e,t,a){},4615:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main addpage",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("span",{staticClass:"color_tip"},[e._v(e._s(e.title))])]),a("div",{staticStyle:{height:"calc(100vh - 150px)",overflow:"auto",background:"#dff1f1"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"saveForm",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabel,"label-position":"right",inline:!0}},e._l(e.tableLabel,(function(t,l){return 3!=t.showType&&7!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["DATE"==t.dispType?a("el-date-picker",{staticClass:"diy_long",staticStyle:{width:"300px!important"},attrs:{type:t.colLimit,"value-format":t.isDispDetail,placeholder:"选择日期"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType&&"speciality"!=t.colDname&&"itemClass1"!=t.colDname&&"itemClass2"!=t.colDname&&"itemClass3"!=t.colDname&&"fragmentaryType"!=t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"dropdown"==t.dispType&&"fragmentaryType"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:"请选择零星购置专项类型",clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.LGTypeArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass1"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow1},on:{change:function(a){return e.changeItemClass2(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr1,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass2"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow2},on:{change:function(a){return e.changeItemClass3(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr2,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass3"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow3},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr3,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"cascadeDropdown"==t.dispType&&"gdAssetType"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow1},on:{change:function(a){return e.getCascadeLabel2(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.cascadeLabel,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType&&"assetType2"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:0==e.cascadeLabel2.length},on:{change:function(a){return e.getCascadeLabel3(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.cascadeLabel2,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType&&"assetType3"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:0==e.cascadeLabel3},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.cascadeLabel3,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{type:"textarea",placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-button",{staticClass:"diy_right",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.showQuestionList(t)}}},[e._v("关联问题或需求")]):e._e(),"text"==t.dispType&&"questionCode"!=t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t.textMask},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType&&"quantity"!=t.colDname?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,precision:0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType&&"quantity"==t.colDname?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,precision:0,change:e.changeQuantity(t.value)},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),"erectItemCode"==t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{id:"ifremVal",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium"},on:{click:e.showNewItemName}},[e._v("自动命名")]):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium"},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e()],1):e._e()})),1),e.showChildren?a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("子项目列表")])]):e._e(),e.showChildren?a("el-table",{staticStyle:{width:"100%",heigth:"auto"},attrs:{data:e.childrenShowData,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.childrenLable,(function(t,l){return 1==t.showType&&"itemCont"!=t.colDname&&"questionCode"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName}}):"itemCont"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.itemCont?[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.itemCont))]),a("p",[e._v(e._s(e.formatStr(t.row.itemCont)))])])]:void 0}}],null,!0)}):"questionCode"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.questionCode?[t.row.questionCode.length<20?a("p",[e._v(" "+e._s(t.row.questionCode)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.questionCode))]),a("p",[e._v(e._s(e.formatStr(t.row.questionCode)))])])]:void 0}}],null,!0)}):e._e()}))],2):e._e()],1),a("div",{staticClass:"save_btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveItem("saveForm")}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancle}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resert}},[e._v("重置")])],1),a("el-dialog",{staticClass:"bmiframe",attrs:{visible:e.newItemName,"close-on-click-modal":!1,width:"1000px","custom-class":"cus-dialog","modal-append-to-body":""},on:{"update:visible":function(t){e.newItemName=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("生成项目名称")])])]),a("iframe",{attrs:{name:"my-iframe",id:"name-iframe",src:e.getNameUrl,frameborder:"0",width:"100%",height:"750",scrolling:"none"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getBM}},[e._v("获取项目名称")])],1)],2),a("el-dialog",{staticClass:"question_dialog",attrs:{width:"70%",title:e.questionTitle,"close-on-click-modal":!1,visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"btns"},[a("el-input",{staticClass:"proname",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.probName,callback:function(t){e.probName=t},expression:"probName"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getChildTableList}},[e._v("检索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.questionShowData,"max-height":"350px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleQuestionSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._l(e.questionLabelList,(function(t,l){return"createDate"!=t.colDname&&"isCancel"!=t.colDname&&"probDesc"!=t.colDname&&"probRemark"!=t.colDname&&"dmdDesc"!=t.colDname&&"dmdRemark"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"probDesc"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probDesc?[t.row.probDesc.length<10?a("p",[e._v(" "+e._s(t.row.probDesc)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.probDesc)))])])]:void 0}}],null,!0)}):"probRemark"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probRemark?[t.row.probRemark.length<10?a("p",[e._v(" "+e._s(t.row.probRemark)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.probRemark)))])])]:void 0}}],null,!0)}):"dmdDesc"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdDesc)))])])]}}])}):"dmdRemark"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdRemark)))])])]}}])}):"isCancel"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName}}):"createDate"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.dateFormat,prop:t.colDname,label:t.dispName}}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":5,layout:"total, prev, pager, next, jumper",total:e.questionListTotalNum},on:{"current-change":e.handleCurrentWTChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleSubmitInnerTable}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitQuestioinCode}},[e._v("保 存")])],1)],1)],1)])])},s=[],i=(a("99af"),a("4160"),a("a630"),a("c975"),a("a15b"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=a("7e1e"),u={data:function(){return{deptName:"",deptArr:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},itemForm:{},itemInfo:{},getNameUrl:"/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?openType=1&appID=00&applyID=2",newItemName:!1,specClass:"",specClassName:"",tableData:[],tableLabel:{},dictMap:new Map,tempId:"",columnMap:new Map,title:"",totalLableArr:[],dialogLoading:!1,formLabelWidth:"140px",innerVisible:!1,questionTitle:"",questionLabelList:[],questionTableData:[],questionListTotalNum:0,questionDictMap:new Map,questionShowData:[],selectedQuestionCode:[],currentPage:1,loading:!1,probName:"",specEnabled:!0,parentItemId:null,itemClassArr:[],itemClassArr1:[],itemClassArr2:[],itemClassArr3:[],itemClassShow3:!1,itemClassShow2:!1,itemClassShow1:!1,childTableData:[],childrenShowData:[],childrenLable:{},childrenDictMap:new Map,childrenColumnMap:new Map,showChildren:!1,deptCodeT:"",LGTypeArr:[],cascadeLabel:[],cascadeLabel2:[],cascadeLabel3:[]}},created:function(){this.tableHeight=window.innerHeight-320+"px"},mounted:function(){var e=this;window.onresize=function(){return function(){e.tableHeight=window.innerHeight-320+"px"}()},this.specClass=this.$route.query.specClass,this.specClassName=this.$route.query.specClassName,this.tempItemId=this.$route.query.itemId,this.oldPath=this.$route.query.oldPath,this.parentItemId=this.$route.query.parentItemId,null==this.tempItemId?this.title=this.specClassName+"新增":this.title=this.specClassName+"修改",this.getLgTypeArr(),this.getLabel()},computed:Object(o["a"])({},Object(n["c"])({addItemParams:function(e){return e.itemadd.addItemParams}})),components:{SelectTree:r["a"]},methods:{getLgTypeArr:function(){var e=this;Object(c["Cb"])().then((function(t){t.data.successful&&(e.LGTypeArr=t.data.resultValue)}))},getValue1:function(e){this.setValue("conDept",e),console.log(this.valueId)},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuantity:function(e){var t=this;e>1&&t.setValue("lxItemType","1")},clearValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e){l.value="";break}}},changeItemClass1:function(){var e=this,t={speciality:e.specClass};Object(c["ob"])(t).then((function(t){if(t.data.successful)if(e.itemClassArr=t.data.resultValue[0].idLevel2,e.itemClassArr1=t.data.resultValue[0].idLevel2,0==e.itemClassArr1.length)e.itemClassShow1=!0;else if(e.itemClassShow1=!1,null!=e.tempItemId){var a=e.getValue("itemClass1"),l=e.getValue("itemClass2");e.changeItemClass2(a,!0),e.changeItemClass3(l,!0)}}))},changeItemClass2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("itemClass2"),a.clearValue("itemClass3"));for(var l=0;l<a.itemClassArr.length;l++){var s=a.itemClassArr[l];if(s.typeCode==e){a.itemClassArr2=s.idLevel3,0==a.itemClassArr2.length?(a.itemClassShow2=!0,a.itemClassShow3=!0):(a.itemClassShow2=!1,a.itemClassShow3=!1);break}}},changeItemClass3:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||a.clearValue("itemClass3");for(var l=0;l<a.itemClassArr.length;l++)for(var s=a.itemClassArr[l],i=s.idLevel3,o=0;o<i.length;o++){var n=i[o];n.typeCode==e&&(a.itemClassArr3=n.idLevel4,0==a.itemClassArr3.length?a.itemClassShow3=!0:a.itemClassShow3=!1)}},getCascadeLabel:function(e,t){var a=this,l=new FormData;l.append("parentId",e),Object(c["kb"])({parentId:e}).then((function(e){if(e.data.successful&&(console.log(e),a.cascadeLabel=e.data.resultValue,null!=a.tempItemId)){var t=a.getValue("assetType2"),l=a.getValue("gdAssetType");a.getCascadeLabel2(l,!0),a.getCascadeLabel3(t,!0)}}))},getCascadeLabel2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("assetType2"),a.clearValue("assetType3")),a.cascadeLabel2=[],a.cascadeLabel3=[];for(var l=0;l<a.cascadeLabel.length;l++){var s=a.cascadeLabel[l];if(s.codeValue==e){a.cascadeLabel2=s.childList;break}}},getCascadeLabel3:function(e,t){var a=this;a.cascadeLabel3=[],"undefined"!=typeof t&&0!=t||a.clearValue("assetType3");for(var l=0;l<a.cascadeLabel2.length;l++){var s=a.cascadeLabel2[l];s.codeValue==e&&(a.cascadeLabel3=s.childList)}},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},getShowDateTable:function(e,t){for(var a=[],l=0;l<e.length;l++){for(var s=e[l],o=new Object,n=0,r=Object.entries(s);n<r.length;n++){var c=Object(i["a"])(r[n],2),u=c[0],d=c[1];if(t.has(u))for(var m=t.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(o[u]=h.codeName)}else o[u]=d}a.push(o)}return a},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDay();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},resert:function(){var e=this;if(null!=e.tempItemId)Object(c["Gb"])(e.tempItemId).then((function(t){if(t.data.successful){var a=t.data.resultValue.items[0];for(var l in e.tableLabel)null==a[e.tableLabel[l].colDname]?e.tableLabel[l].value="":e.tableLabel[l].value=a[e.tableLabel[l].colDname]+""}})).catch((function(e){console.log(e)}));else for(var t in e.tableLabel)e.tableLabel[t].value=""},saveItem:function(e){var t=this,a=this;a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={},s="",i="";for(var o in null!=a.tempItemId?(l["itemId"]=a.itemId,s="修改成功",i="修改失败"):null!=a.parentItemId?(l["parentId"]=a.parentItemId,s="新增下级成功",i="新增下级失败"):(s="添加成功",i="添加失败"),a.tableLabel){var n=a.tableLabel[o];l[n.colDname]=n.value}null==a.tempItemId&&""==l["itemName"]&&(l["itemName"]=document.getElementById("ifremVal").value),l["speciality"]=a.specClass,null!=a.tempItemId&&(l["itemId"]=a.tempItemId),a.dialogLoading=!0,null==a.parentItemId?Object(c["id"])(l).then((function(e){a.dialogLoading=!1,console.log(e),e.data.successful?(t.$message({showClose:!0,message:s,type:"success"}),a.itemId="",a.$router.push({path:a.oldPath})):t.$message({showClose:!0,message:i,type:"error"}),a.loading=!1})):Object(c["jd"])(l).then((function(e){a.dialogLoading=!1,console.log(e),e.data.successful?(t.$message({showClose:!0,message:s,type:"success"}),a.$router.push({path:a.oldPath})):t.$message({showClose:!0,message:i,type:"error"}),a.loading=!1}))}))},cancle:function(){var e=this;this.$router.push({path:e.oldPath})},handleCurrentWTChange:function(e){console.log("当前页: ".concat(e));var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if("itemSource"==l.colDname){l.value.length>0?(t.innerVisible=!0,"1"==l.value?(t.questionTitle="问题库列表",t.getXQList(e,5)):(t.questionTitle="需求库列表",t.getWTList(e,5))):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getLabel:function(){var e=this,t=this;if(t.dialogLoading=!0,null!=t.tempItemId){var a={index:1,pageSize:10};a.speciality=t.specClass,a.itemId=t.tempItemId,Object(c["Tc"])(a).then((function(a){if(t.dialogLoading=!1,a.data.successful){var l=a.data.resultValue.tableLable,s=a.data.resultValue.tableData[0];for(var i in t.tableLabel=t.getLabelList(l),t.dictMap=t.getDictArr(l),t.tableLabel)null==s[t.tableLabel[i].colDname]?(t.tableLabel[i].value="","number"==t.tableLabel[i].dispType&&(t.tableLabel[i].value=0)):"DATE"==t.tableLabel[i].dispType?t.tableLabel[i].value=t.formartDate(s[t.tableLabel[i].colDname]):t.tableLabel[i].value=s[t.tableLabel[i].colDname]+"";t.changeItemClass1(),t.getCascadeLabel("1001");var o=a.data.resultValue.tableDataList;t.childrenLable=l,"undefined"==typeof o||0==o.length?t.showChildren=!1:(t.showChildren=!0,t.childrenDictMap=t.getDictArr(t.childrenLable),t.childrenColumnMap=t.getColumnTypeArr(t.childrenLable),t.childrenShowData=t.getShowDateTable(o,t.childrenDictMap,t.childrenColumnMap));var n=t.getValue("conDept");""!=n&&(t.deptCodeT=n,Object(c["rb"])({deptCode:n}).then((function(a){if(a.data.successful){var l=a.data.resultValue;t.deptName=l}else e.$message.error("查询部门id失败")}))),t.getTreeDeptCode()}}))}else{var l={};l.speciality=t.specClass,Object(c["Yc"])(l).then((function(a){if(t.dialogLoading=!1,a.data.successful){var l=a.data.resultValue.tableLable;for(var s in t.tableLabel=t.getLabelList(l),t.dictMap=t.getDictArr(l),t.changeItemClass1(),t.getCascadeLabel("1001"),t.tableLabel)"number"==t.tableLabel[s].dispType&&(t.tableLabel[s].value=0);Object(c["jc"])().then((function(a){if(a.data.successful){var l=a.data.resultValue;t.setValue("conDept",l),Object(c["rb"])({deptCode:l}).then((function(a){if(a.data.successful){var l=a.data.resultValue;t.deptName=l}else e.$message.error("查询部门id失败")}))}})),t.getTreeDeptCode()}else t.$message.error("查询配置新增信息失败")}))}},cancleSubmitInnerTable:function(){var e=this;e.probName="",e.innerVisible=!1},getChildTableList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?(e.innerVisible=!0,"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5)):(e.questionTitle="需求库列表",e.getWTList(1,5))):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e)return l.value}},setValue:function(e,t){var a=this;for(var l in a.tableLabel){var s=a.tableLabel[l];s.colDname==e&&(s.value=t)}},showNewItemName:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),t.B08="A",Object(c["I"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.setValue("itemName",a)}else t.resultHit}))},showNewItemNameJsp:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),t.B08="A",e.getNameUrl="/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?appID=00&applyID=123123123123&iscUserId=&loginName=sx_test",Object(c["Z"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.getNameUrl+=a,e.getNameUrl=encodeURI(encodeURI(e.getNameUrl)),e.newItemName=!0}else t.resultHit}))},getBM:function(){var e=document.getElementById("name-iframe"),t=e.contentWindow||e.contentDocument,a=t.document.getElementById("prjName").value;if(a){for(var l in document.getElementById("ifremVal").value=a,this.tableLabel)"itemName"==this.tableLabel[l].colDname&&(this.tableLabel[l].value=a);this.newItemName=!1}else this.$message({showClose:!0,message:"请先生成项目名称",type:"error"})},handleQuestionSelectionChange:function(e){var t=this,a=1;for(var l in t.tableLabel){var s=t.tableLabel[l];if("itemSource"==s.colDname){a="1"==s.value?1:2;break}}t.selectedQuestionCode=[],e.forEach((function(e){1==a?t.selectedQuestionCode.push(e.probCode):t.selectedQuestionCode.push(e.dmdCode)}))},submitQuestioinCode:function(){var e=this;if(e.probName="",e.selectedQuestionCode.length>0){for(var t in e.tableLabel){var a=e.tableLabel[t];if("questionCode"==a.colDname){if(a.value.length>0){var l=a.value.split(",");e.selectedQuestionCode=e.selectedQuestionCode.concat(l)}var s=new Set(e.selectedQuestionCode),i=Array.from(s),o=i.join(",");a.value=o;break}}e.selectedQuestionCode=[],e.innerVisible=!1}else e.$message({showClose:!0,message:"请选择问题或需求",type:"warning"})},getXQList:function(e,t){var a=this;a.loading=!0,Object(c["Vb"])({pageIndex:e,pageSize:t,probName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},getWTList:function(e,t){var a=this;a.loading=!0,Object(c["Tb"])({pageIndex:e,pageSize:t,dmdName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},showQuestionList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5),e.innerVisible=!0):"2"==a.value?(e.questionTitle="需求库列表",e.getWTList(1,5),e.innerVisible=!0):this.$message({showClose:!0,message:"项目来源为其他时,不需要选择问题或需求列表",type:"warning"}):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},makeItemName:function(){var e=this;e.newItemName=!1,console.log("生成项目名:"+e.newItemNameNo+";"+e.newItemNameTime)},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];null!=s.codeList&&("9"!=t.specClass&&"11"!=t.specClass||"itemClass"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"3"!=t.codeValue&&e.push(t)})),s.codeList=e}(),null!=t.parentItemId&&"itemType"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"1"!=t.codeValue&&e.push(t)})),s.codeList=e}(),a.set(s.colDname,s.codeList))}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},isNumber:function(e,t,a){var l=/^\d+(\.\d+)?$/;l.test(t)?t.toString().indexOf(".")>0&&t.toString().split(".")[1].length>2?a(new Error("数字只精确到小数点后两位")):a():a(new Error("只能输入数字且不能为负值"))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e){var s=e[l];if(null!=t.tempItemId||"ghYear"!=s.colDname&&"ghInvest"!=s.colDname){a[l]=e[l];var i=[];if(1==s.isMandatory){var o=new Object;o.required=!0,o.message=s.dispName+"不能为空","dropdown"==s.dispType?o.trigger="change":o.trigger="blur",i.push(o)}if("number"==s.dispType){var n=new Object;n.validator=t.isNumber,n.trigger="blur",i.push(n)}a[l].rule=i}}return a}}},d=u,m=(a("92c7"),a("29a9"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,"1cae1090",null);t["default"]=p.exports},4678:function(e,t,a){var l={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=i(e);return a(t)}function i(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=i,e.exports=s,s.id="4678"},4780:function(e,t,a){},"494b":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("年份")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},on:{change:e.selectItem},model:{value:e.param.ghYear,callback:function(t){e.$set(e.param,"ghYear",t)},expression:"param.ghYear"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.voltLevel,callback:function(t){e.$set(e.param,"voltLevel",t)},expression:"param.voltLevel"}},e._l(e.selectParamDict.get("voltLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目来源")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemSource,callback:function(t){e.$set(e.param,"itemSource",t)},expression:"param.itemSource"}},e._l(e.selectParamDict.get("itemSource"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),e.$store.state.user.workflowtype?a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.changeFeaStatus}},[e._v("审核")])],1):e._e()]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":e.tableRowClassName,"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"110"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),a("el-dialog",{staticClass:"check-dialog",attrs:{visible:e.dialogFormVisible,title:"审核","close-on-click-modal":!1,"custom-class":"cus-dialog","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",[a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-radio-group",{staticClass:"group",model:{value:e.auditItemParam.audited,callback:function(t){e.$set(e.auditItemParam,"audited",t)},expression:"auditItemParam.audited"}},[a("el-radio",{attrs:{label:"1"}},[e._v("同意")]),a("el-radio",{attrs:{label:"0"}},[e._v("不同意")])],1)],1),a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form,"label-width":"46px"}},[a("el-form-item",{attrs:{label:"原因"}},[a("el-input",{staticClass:"elinput",attrs:{type:"textarea",placeholder:""},model:{value:e.auditItemParam.auditAdvice,callback:function(t){e.$set(e.auditItemParam,"auditAdvice",t)},expression:"auditItemParam.auditAdvice"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("提交")])],1)])],1)},s=[],i=(a("4160"),a("baa5"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m={name:"questions",data:function(){var e=this;return{timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:""},showQuery:!1,isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",pageIndex:1,itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,selectParamDict:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"",tableHeightTab:"",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()<=a}},auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.currentPage=1,this.getTable(1,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-190},mounted:function(){this.getItemLabel(),this.getSpecialityIds(),this.getTableWithTitle(1,20)},computed:Object(o["a"])({},Object(n["b"])([])),methods:{getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getItemLabel:function(){var e=this;Object(u["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.$forceUpdate()}}))},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeFeaStatus:function(){var e=this;e.dialogFormVisible=!0},saveAudtiInfo:function(){var e=this,t=this;if(t.loadingBtn1=!0,""==t.auditItemParam.itemIds)return this.$message.warning("请选择一个项目"),t.loadingBtn1=!1,!1;Object(u["g"])(t.auditItemParam).then((function(a){t.loadingBtn1=!1,a.data.successful?(t.auditItemParam={},t.getTable(t.currentPage,t.currentNum),t.$refs.itemTable.clearSelection(),e.$message.success("提交审核成功"),t.dialogFormVisible=!1):e.$message.error("提交审核失败")}))},changeQuery:function(e,t){e?(this.tableHeight=t+30,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t+30,this.isShowQuery=!1,this.showQuery=!1)},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},getRowKeys:function(e){return e.itemId},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1==t.havePlan?"success-row":""},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},handleSelectionChange:function(e){var t=this;t.auditItemParam.itemIds="";var a="";e.forEach((function(e){a+=","+e.itemId})),t.auditItemParam.itemIds=a.substr(1)},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTableWithTitle:function(e,t){var a=this,l=this;if(l.loading=!0,l.param.pageIndex=e,l.param.pageSize=t,l.param.itemPhaseDet="2",""==this.specClass){var s=l.$route.path;l.specClass=s.substr(s.lastIndexOf("/")+1,s.length)}l.param.speciality=l.specClass;var i={};i.speciality=l.specClass,Object(u["Wc"])(i).then((function(e){l.loading=!1,e.data.successful?(l.tableLabel=e.data.resultValue,l.dictMap=l.getDictArr(l.tableLabel),l.columnTypeMapDict=l.getColumnTypeArr(l.tableLabel),Object(u["Rc"])(l.param).then((function(e){e.data.successful?(l.tableData=e.data.resultValue.prjStItemBaseList,l.totalNum=e.data.resultValue.total,l.tableDataShow=l.getShowDateTable(l.tableData,l.dictMap,l.columnTypeMapDict)):a.$message.error("查询列表出错")}))):a.$message.error("查询表头信息出错")}))},getTable:function(e,t){var a=this;a.loading=!0,a.param.pageIndex=e,a.param.pageSize=t,a.param.itemPhaseDet="2",Object(u["Rc"])(a.param).then((function(e){a.loading=!1,a.tableData=e.data.resultValue.prjStItemBaseList,a.totalNum=e.data.resultValue.total,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMapDict)}))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];if(null!=s.codeList){if("speciality"==s.colDname){for(var i=[],o=0;o<s.codeList.length;o++)for(var n=0;n<t.userSpecialityArr.length;n++)s.codeList[o].codeValue==t.userSpecialityArr[n]&&i.push(s.codeList[o]);s.codeList=i}a.set(s.colDname,s.codeList)}}return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p;"deptCode"==m&&(r["deptCode"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var v=l.getShowDateTable(n.children,t,a);r.children=v}s.push(r)}return s}}},p=m,h=(a("e138"),a("1c01"),a("2877")),f=Object(h["a"])(p,l,s,!1,null,"1ba2947a",null);t["default"]=f.exports},"49a0":function(e,t,a){"use strict";var l=a("1404"),s=a.n(l);s.a},"49d4":function(e,t,a){"use strict";var l=a("1584"),s=a.n(l);s.a},"4d49":function(e,t,a){"use strict";var l=a("71b6"),s=a.n(l);s.a},"4f55":function(e,t,a){},5205:function(e,t,a){"use strict";var l=a("13a6"),s=a.n(l);s.a},5214:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container plan-issued"},[a("div",{staticClass:"btns query_btns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitXD}},[e._v("下达")])],1),a("div",{staticClass:"template_main"},[a("div",{staticClass:"template_left"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.timeListloading,expression:"timeListloading"}],staticClass:"plan-table",attrs:{data:e.colTimeList,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"current-change":e.handleChangeColTimeList}},[a("el-table-column",{attrs:{label:"评审计划汇总列表",prop:"jhps"}})],1)],1),a("div",{staticClass:"template_right"},[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{attrs:{data:e.tableDataShow,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,height:e.tableHeight,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,width:"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):3==t.showType?a("el-table-column",{attrs:{label:t.dispName,width:"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isChild?void 0:[a("el-select",{staticClass:"elselect",attrs:{placeholder:""},model:{value:t.row.auditType,callback:function(a){e.$set(t.row,"auditType",a)},expression:"scope.row.auditType"}},e._l(e.dictMap.get("auditType"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)]}}],null,!0)}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":20,"page-sizes":[10,20,,30,50],layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"planDrawer",class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])])])]),a("el-dialog",{attrs:{visible:e.itemShow,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.itemShow=t}}},[a("item-dialog",{attrs:{itemId:e.tempItemId}})],1)],1)},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),o=a("2bb5"),n=a("c2b4"),r=a("7e1e"),c=a("f36f"),u={name:"planSummary",data:function(){return{isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,dataLoading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,dialogFormVisible2:!1,form:{time1:"",time2:""},options:[],value:"",formLabelWidth:"120px",input:"",colTimeList:[],tableData:[],tableLabel:[],tableDataShow:[],selectPlanId:{},columnTypeMap:new Map,dictMap:new Map,param:{itemName:"",deptCode:"",auditPlanStatus:"",specialClass:"",itemType:"",voltLevel:"",filter:""},tempItemId:"",itemShow:!1,currentColTime:"",curItemName:"",showUpdatePlaneTime:!1,updateForm:{planStartDate:"",planEndDate:""},auditPlanId:"",timeListloading:!1,tableHeight:""}},components:{"item-dialog":o["default"],ItemAddCom:n["default"]},mounted:function(){this.getColTimeList()},created:function(){this.tableHeight=window.innerHeight-220},methods:{changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(r["nb"])(s).then((function(e){if(e.data.successful){var t=e.data.resultValue;t.forEach((function(e){e.isChild=!0}));var s=l.getShowDateTable(e.data.resultValue,l.dictMap,l.columnTypeMap);a(s)}}))},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},submitXD:function(){var e=this,t=this,a=[],l=[];if(t.tableDataShow.forEach((function(e){var t={};t.auditPlanId=e.auditPlanId,t.itemId=e.itemId,t.auditType=e.auditType,a.push(t);var s={};s.content=e.itemName+"项目，评审计划已经下达，评审时间: "+e.planStartDate+" —— "+e.planEndDate,s.noticeUser=e.createor,l.push(s)})),""==t.currentColTime)return this.$message({showClose:!0,message:"请先选择需要下达的评审计划",type:"warning"}),!1;t.$confirm("确认下达评审计划？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(a),Object(r["Xd"])(a).then((function(a){a.data.successful?(e.$message({showClose:!0,message:"下达成功",type:"success"}),t.getColTimeList(),t.showUpdatePlaneTime=!1,e.$message({showClose:!0,message:"下达成功",type:"success"}),t.getColTimeList(),t.showUpdatePlaneTime=!1,Object(c["g"])(l).then((function(e){console.log(e)}))):e.$message({showClose:!0,message:"下达失败",type:"error"})}))})).catch((function(){}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},handleChangeColTimeList:function(e){var t=this;t.currentColTime!=e.jhps&&(t.currentColTime=e.jhps,t.getTable(t.currentPage,t.currentNum))},getColTimeList:function(){var e=this,t=this;t.timeListloading=!0,Object(r["pb"])("8").then((function(a){if(t.timeListloading=!1,console.log(a),a.data.successful){var l=a.data.resultValue;t.colTimeList=[],l.forEach((function(e){var a={};a.jhps=e,t.colTimeList.push(a)})),l.length>0&&(t.currentColTime=l[0]),t.currentPage=1,t.getTable(1,t.currentNum)}else e.$message({showClose:!0,message:"获取评审计划信息列表失败",type:"error"})}))},handleSelectionChange:function(e){var t=this;t.selectPlanId={ids:[]},e.forEach((function(e){t.selectPlanId.ids.push(e.auditPlanId)}))},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this,l="cTotalTimeStr=1&itemPhaseDet=8";""!=a.currentColTime&&(l+="&cTotalTime="+a.currentColTime);for(var s=0,o=Object.entries(a.param);s<o.length;s++){var n=Object(i["a"])(o[s],2),c=n[0],u=n[1];"pageIndex"!=c&&"pageSize"!=c&&""!=u&&(console.log(c+":"+u),l+="&"+c+"="+u)}var d={};d.pageIndex=e,d.pageSize=t,d.filter=l,Object(r["Sb"])(d).then((function(e){if(console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}})).catch((function(e){console.log(e)}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p}r["auditType"]="1",s.push(r)}return s}}},d=u,m=(a("a665"),a("ffde"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,"f2626fbc",null);t["default"]=p.exports},"529e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"container"},[l("div",{staticClass:"main ",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[l("div",{staticClass:"main_container"},[l("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[l("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("项目名称")]),l("div",{staticClass:"query_select"},[l("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("所属单位")]),l("div",{staticClass:"query_select"},[l("select-tree",{on:{getValue:e.getValue}})],1)]),l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("年份")]),l("div",{staticClass:"query_select"},[l("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},on:{change:e.selectItem},model:{value:e.param.ghYear,callback:function(t){e.$set(e.param,"ghYear",t)},expression:"param.ghYear"}})],1)]),l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("电压等级")]),l("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?l("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.voltLevel,callback:function(t){e.$set(e.param,"voltLevel",t)},expression:"param.voltLevel"}},e._l(e.selectParamDict.get("voltLevel"),(function(e){return l("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("项目层级")]),l("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?l("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return l("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("项目来源")]),l("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?l("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemSource,callback:function(t){e.$set(e.param,"itemSource",t)},expression:"param.itemSource"}},e._l(e.selectParamDict.get("itemSource"),(function(e){return l("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),"08"==e.specClass?l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("零星购置")]),l("div",{staticClass:"query_select",attrs:{size:"small"}},[l("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.fragmentaryTypeId,callback:function(t){e.$set(e.param,"fragmentaryTypeId",t)},expression:"param.fragmentaryTypeId"}},e._l(e.selectParamDict.get("specClass"),(function(e){return l("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)]):e._e(),"06"==e.specClass?l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("专业类别")]),l("div",{staticClass:"query_select",attrs:{size:"small"}},[l("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:function(t){return e.changeChildList(e.param.itemClass1)}},model:{value:e.param.itemClass1,callback:function(t){e.$set(e.param,"itemClass1",t)},expression:"param.itemClass1"}},e._l(e.selectParamDict.get("itemClass123List"),(function(e){return l("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)]):e._e(),"06"==e.specClass?l("div",{staticClass:"query_tab"},[l("div",{staticClass:"query_label"},[e._v("专业细分")]),l("div",{staticClass:"query_select",attrs:{size:"small"}},[l("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:"",disabled:!e.isParentChanged},on:{change:e.selectItem},model:{value:e.param.itemClass2,callback:function(t){e.$set(e.param,"itemClass2",t)},expression:"param.itemClass2"}},e._l(e.selectParamDict.get("itemClass123ListChild"),(function(e){return l("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)]):e._e()]),l("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[l("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow.addBtn,expression:"buttonShow.addBtn"}],attrs:{type:"primary",size:"small"},on:{click:e.showDialog}},[e._v("新增 ")]),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDialogEdit}},[e._v("修改")]),l("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/stBaseItem/importExcel",data:{speciality:e.specClass},headers:{userId:e.userId,token:e.token},"on-success":e.uploadItemInfoSuccess,accept:".xlsx,.xls","show-file-list":!1}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入")])],1),l("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow.exportBtn,expression:"buttonShow.exportBtn"}],attrs:{type:"primary",size:"small"},on:{click:e.exportItemFile}},[e._v(" 导出 ")]),l("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow.exportTitleBtn,expression:"buttonShow.exportTitleBtn"}],attrs:{type:"primary",size:"small"}},[l("a",{attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportExcelTemp?speciality="+e.specClass+"&token="+e.token}},[e._v("导出模版")])]),l("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow.delBtn,expression:"buttonShow.delBtn"}],attrs:{type:"primary",size:"small",loading:e.showLoadingBtn},on:{click:e.submitCheck}},[e._v("提交审核 ")]),l("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow.delBtn,expression:"buttonShow.delBtn"}],attrs:{type:"primary",size:"small"},on:{click:e.del}},[e._v("删除")]),l("el-button",{directives:[{name:"show",rawName:"v-show",value:e.buttonShow.addLowerBtn,expression:"buttonShow.addLowerBtn"}],attrs:{type:"primary",size:"small"},on:{click:e.addLowerLevel}},[e._v(" 新增下级 ")]),l("el-button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{type:"primary",size:"small"},on:{click:e.showBatchPackage}},[e._v("批量打包")]),l("el-button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{type:"primary",size:"small"},on:{click:e.showAdjustPackage}},[e._v("包调整")])],1)]),l("div",{staticClass:"table-item-box"},[l("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":e.tableRowClassName,"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"45"}}),l("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,a){return"itemName"==t.colDname||1!=t.showType&&3!=t.showType?"itemName"==t.colDname?l("el-table-column",{attrs:{label:t.dispName,"min-width":null!=t.dispLen?t.dispLen:220,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e.buttonShow.editBtn?l("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))]):l("span",{staticStyle:{color:"#333"}},[e._v(e._s(t.row.itemName))])]}}])}):e._e():l("el-table-column",{key:a,attrs:{"min-width":null!=t.dispLen?t.dispLen:220,prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}})}))],2),l("div",{staticClass:"page"},[l("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":20,"page-sizes":[10,20,30,50],layout:"sizes,total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),l("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?l("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),l("el-dialog",{staticClass:"dialog_height",attrs:{title:"包调整","close-on-click-modal":!1,"custom-class":"cus-dialog",width:"700px",visible:e.showAdjustPackageDialog,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showAdjustPackageDialog=t}}},[l("table",{staticClass:"top_tab",attrs:{width:"100%"}},[l("tr",[l("td",[l("el-form",{ref:"lableForm",attrs:{"label-width":"100px"}},[l("el-form-item",{attrs:{label:"项目包名称",inline:!0}},[l("el-input",{model:{value:e.packageItemParam.itemName,callback:function(t){e.$set(e.packageItemParam,"itemName",t)},expression:"packageItemParam.itemName"}})],1)],1)],1),l("td",[l("el-button",{attrs:{type:"primary",loading:e.packageItemLoading},on:{click:function(t){return e.getAllPackage(e.packageItemCurrentPage,e.packageItemCurrentNum)}}},[e._v(" 检索 ")])],1),l("td",[l("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.updatePackageItemName}},[e._v("提交")])],1)])]),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.packageItemArr,border:"","max-height":"230px","highlight-current-row":"","header-cell-style":{background:"#359691",color:"#fff"},"v-loading":e.packageItemLoading,"row-key":e.getSingleItemRowKey}},[l("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{label:t.row.itemId},nativeOn:{change:function(a){return e.getPackageItemCurrentRow(t.row)}},model:{value:e.packageItemParam.itemId,callback:function(t){e.$set(e.packageItemParam,"itemId",t)},expression:"packageItemParam.itemId"}})]}}])}),l("el-table-column",{attrs:{prop:"itemName","show-overflow-tooltip":!0,label:"项目名称"}}),l("el-table-column",{attrs:{prop:"createOrg","show-overflow-tooltip":!0,label:"所属单位"}})],1),l("div",{staticClass:"page"},[l("el-pagination",{attrs:{background:"","current-page":e.packageItemCurrentPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.packageItemTotalNum},on:{"size-change":e.handlePackageSizeChange,"current-change":e.handlePackageItemCurrentChange}})],1)],1),l("el-dialog",{staticClass:"dialog_height batch_dialog",attrs:{title:"批量打包","close-on-click-modal":!1,"custom-class":"cus-dialog",visible:e.DialogPackagVisible,"min-width":"800px","before-close":e.handlePackageClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.DialogPackagVisible=t}}},[l("div",{staticClass:"clearfix batch"},[l("div",{staticClass:"batch_left"},[e.treeList.length?e._e():l("div",{staticStyle:{"text-align":"center"}},[e._v("暂无数据")]),l("ul",{staticClass:"treelist"},e._l(e.treeList,(function(t,a){return l("li",{key:a},[l("el-radio",{attrs:{label:t.id},model:{value:e.packageBatchParam.parentId,callback:function(t){e.$set(e.packageBatchParam,"parentId",t)},expression:"packageBatchParam.parentId"}},[l("el-tooltip",{attrs:{placement:"top"}},[l("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.name))]),l("span",[e._v(e._s(e.formatStr(t.name)))])])],1),t.childList.length>0?l("span",{staticClass:"iconfont",on:{click:function(t){return e.clicklist(t)}}},[e._v("")]):e._e(),l("el-checkbox-group",{model:{value:e.packageBatchParam.childItemList,callback:function(t){e.$set(e.packageBatchParam,"childItemList",t)},expression:"packageBatchParam.childItemList"}},[l("ul",e._l(t.childList,(function(t,a){return l("li",{key:a},[l("el-checkbox",{attrs:{label:t.id}},[l("el-tooltip",{attrs:{placement:"top"}},[l("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.name))]),l("span",[e._v(e._s(e.formatStr(t.name)))])])],1)],1)})),0)])],1)})),0)]),l("div",{staticClass:"middle"},[l("img",{attrs:{src:a("3656")},on:{click:e.moveOutPackage}}),l("img",{attrs:{src:a("3075")},on:{click:e.moveInPackage}})]),l("div",{staticClass:"batch_right"},[l("el-table",{ref:"batchPackage",staticStyle:{width:"100%"},attrs:{data:e.singleItemList,border:"","max-height":"300px","min-height":"200px","header-cell-style":{background:"#359691",color:"#fff"},"row-key":e.getSingleItemRowKey,"v-loading":e.singleItemTableLoading},on:{"selection-change":e.handleSingleItemSelectionChange}},[l("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"45"}}),e._l(e.tableLabel,(function(t,a){return 1==t.showType&&"itemCont"!=t.colDname&&"questionCode"!=t.colDname?l("el-table-column",{key:a,attrs:{"min-width":"150",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemCont"==t.colDname?l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.itemCont?[t.row.itemCont.length<10?l("p",[e._v(" "+e._s(t.row.itemCont)+" ")]):l("el-tooltip",{attrs:{placement:"top"}},[l("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.itemCont))]),l("p",[e._v(e._s(e.formatStr(t.row.itemCont)))])])]:void 0}}],null,!0)}):"questionCode"==t.colDname?l("el-table-column",{attrs:{"min-width":"150",label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.questionCode?[t.row.questionCode.length<20?l("p",[e._v(" "+e._s(t.row.questionCode)+" ")]):l("el-tooltip",{attrs:{placement:"top"}},[l("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.questionCode))]),l("p",[e._v(e._s(e.formatStr(t.row.questionCode)))])])]:void 0}}],null,!0)}):3==t.showType?l("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:t.colDname,label:t.dispName}}):e._e()}))],2),l("div",{staticClass:"page"},[l("el-pagination",{attrs:{background:"","current-page":e.currentSinglePage,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.singleItemTotalNum},on:{"size-change":e.handleCurrentSignleItemSizeChange,"current-change":e.handleCurrentSingleItemTableChange}})],1)],1)]),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.handlePackageClose}},[e._v("关 闭")])],1)]),l("el-dialog",{attrs:{visible:e.tzkeVisible1,"close-on-click-modal":!1,"custom-class":"cus-dialog","v-loading":e.fileUploadLoading,"modal-append-to-body":!1},on:{"update:visible":function(t){e.tzkeVisible1=t}}},[l("template",{slot:"title"},[l("div",{staticStyle:{"font-size":"large"}},[l("span",[e._v("编制可研")])])]),l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-position":"right"}},[l("el-form-item",{attrs:{label:e.kyTitle}}),l("el-form-item",[l("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.GLOBALURL+"/prjCmFeaPrep/uploadReport",data:e.uploadReportData,headers:{userId:e.userId,token:e.token},"before-remove":e.beforeRemove,multiple:!1,"on-exceed":e.handleExceed,"file-list":e.fileList,"auto-upload":!1,"on-success":e.uploadSuccess,"show-file-list":!0,accept:".doc,.docx"}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1),l("el-form-item",[l("div",{staticClass:"diy2"},[l("el-button",{attrs:{type:"primary",size:"small"}},["上传可研报告"==e.kyTitle?l("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=4&codeValue="+e.specClass+"&token="+e.token}},[e._v("导出可研模版")]):e._e(),"上传项目建议书"==e.kyTitle?l("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=5&codeValue="+e.specClass+"&token="+e.token}},[e._v("导出可研模版")]):e._e()])],1)])],1),l("el-row"),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.cancalSubmitFeasibility}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary",loading:e.submitUploading},on:{click:e.submitUpload}},[e._v("提 交")])],1)],2)],1)},s=[],i=(a("99af"),a("4160"),a("a15b"),a("baa5"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),o=a("5530"),n=a("73fc"),r=a("a960"),c=a("c2b4"),u=(a("a18c"),a("2f62")),d=a("7e1e"),m=a("f36f"),p={name:"questions",data:function(){return{isParentChanged:!1,itemClassLists:[],itemClass123ListChild:"",submitUploading:!1,searchLoading:!1,submitLoading:!1,showLoadingBtn:!1,timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null,parentItemLevel:null},showQuery:!1,showDrawer:!1,tableHeightTab:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},isShowQuery:!1,checkList:["项目1"],radio:"",radiob:"1",radio2:"",DialogAdjustVisible:!1,DialogPackagVisible:!1,newDialogFormVisible:!1,dialogLoading:!1,loading:!1,delData:[],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"120px",input:"",lableList:[{value:""}],tableData:[],tableLabel:[],saveLabel:{},param:{deptCode:"",pageIndex:1,itemName:"",itemLevel:"",pageSize:20,speciality:"",voltLevel:"",itemSource:"",itemPhaseDet:"",ghYear:"",fragmentaryTypeId:"",isCreateor:"",itemClass1:"",itemClass2:""},insertParam:Object,dictMap:new Map,tableDataShow:[],DialogTitle:"",itemId:"",formInfo:Object,dialogQuestionList:!1,parentItemInfo:[],parentItemId:"",tzkeVisible1:!1,formInline:{user:""},fileList:[],uploadReportItemId:"",uploadReportData:{itemId:"",itemType:1},speciality:[],specClass:"",isShowFilter:!1,tableHeight:"",reportFileName:"",feaReportId:"",oldRoute:"",Newroute:"",fileUploadLoading:!1,probName:"",specEnabled:!0,buttonShow:{addBtn:!0,delBtn:!0,exportBtn:!0,exportTitleBtn:!0,editBtn:!0,addLowerBtn:!0,batchPackageBtn:!0,adjustPackageBtn:!0,kyAdjustBtn:!0},packageBatchParam:{parentId:"",childItemList:[]},treeList:[],singleItemList:[],singleItemTotalNum:0,currentSinglePage:1,currentSignleNum:5,moveInPackageIds:[],singleItemTableLoading:!1,packageItemArr:[],showAdjustPackageDialog:!1,packageItemLoading:!1,packageItemTotalNum:0,packageItemCurrentPage:1,packageItemCurrentNum:5,packageItemParam:{itemName:"",itemId:""},columnTypeMapDict:new Map,selectParamDict:new Map,kyTitle:"",bzkyArr:[],userId:"",adjustArr:[],submitCheckArr:[],exportItemArr:[],deptArr:[],deptCode:"",LGTypeArr:[],token:""}},components:{querys:n["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{$route:{handler:function(e,t){var a=this;console.log("路由变化"),a.specClassList(),a.showData.specClassName=a.$route.name,a.showData.oldPath=a.$route.path,a.showDrawer=!1,a.$refs.itemTable&&a.$refs.itemTable.clearSelection()},immediate:!0},specClass:function(e,t){console.log(e);var a=this;a.getTableWithTitle(1,20)},deptCode:function(){this.param.createOrg=this.deptCode,this.currentPage=1,this.getTable(1,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){var e=this;e.getItemLabel(),e.userId=sessionStorage.getItem("userId"),e.token=sessionStorage.getItem("token"),e.getTableWithTitle(1,20)},computed:Object(o["a"])({},Object(u["b"])(["roles"])),methods:{getAllItems:function(){this.currentPage=1,this.param.isCreateor="",this.getTable(1,20)},getMyItems:function(){this.param.isCreateor="1",this.currentPage=1,this.getTable(1,20)},getValue:function(e){this.deptCode=e,console.log("deptcode"+e)},showDialog:function(){this.$store.dispatch("itemadd/setPathChangeActive",!0),this.showData.itemId=null,this.showData.parentItemId=null,this.showData.parentItemLevel=null,this.showData.phash=1,this.showDrawer=!0,this.timer=(new Date).getTime()},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDialogEdit:function(){0==this.parentItemInfo.length?this.$message.warning("请选择一项"):this.parentItemInfo.length>1?this.$message.warning("只能选择一项"):this.userId!=this.parentItemInfo[0].createorT?this.$message.warning("非创建者没有权限修改"):(this.showData.parentItemId=null,this.showData.parentItemLevel=null,this.showData.itemId=this.parentItemInfo[0].itemId,this.showData.phash=1,this.showDrawer=!0,this.timer=(new Date).getTime())},showDetailDialog:function(e){this.showData.parentItemId=null,this.showData.parentItemLevel=null,this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getLgTypeArr:function(){var e=this;Object(d["Cb"])().then((function(t){t.data.successful&&(e.LGTypeArr=t.data.resultValue)}))},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 0==t.itemPhaseDet?"success-row":""},submitCheck:function(){var e=this,t=this,a="";if(0==t.submitCheckArr.length)return this.$message.warning("请选择一个项目"),!1;for(var l=0;l<t.submitCheckArr.length;l++){var s=t.submitCheckArr[l];if(a+=","+s.itemId,0==s.itemPhaseDet)return t.$message.warning("不能再次提交立项审核退回的项目，请在待办中操作"),!1}a&&(a=a.substr(1),t.showLoadingBtn=!0,Object(d["o"])({itemIds:a}).then((function(l){if(l.data.successful){var s=l.data.resultValue;if(s.result){if(0==e.$store.state.user.workflowtype){var i="",o=window.JSON.parse(sessionStorage.getItem("iscOrg")),n=window.JSON.parse(sessionStorage.getItem("specRoleMap")),r=window.JSON.parse(sessionStorage.getItem("purchaseRoleMap")),c=window.JSON.parse(sessionStorage.getItem("electronicRoleMap")),u=sessionStorage.getItem("userId");i=n[t.specClass];var p={user:u,orgIds:o.id,roleIds:i,processDefName:"project_approval",activityDefID:"audit",processInstName:"",processInstDesc:"",itemId:""};t.submitCheckArr.forEach((function(e){console.log("item foreach"+e.itemName),a+=","+e.itemId,"01"==t.specClass&&(i=c[e.specDetailClassT],p.roleIds=i),"08"==t.specClass&&(i=r[e.specClassT],p.roleIds=i),void 0==p.orgIds&&(p.orgIds=""),void 0==p.roleIds&&(p.roleIds="");var l={itemId:e.itemId};Object(d["Eb"])(l).then((function(a){if(a.data.successful)p.itemId=a.data.resultValue.itemId,p.processInstName=a.data.resultValue.itemName+"-项目立项审核",p.processInstDesc=a.data.resultValue.itemName+"-项目立项审核",Object(m["c"])(p).then((function(a){if(console.log("params foreach"+e.itemId),0==a.data.status){var l={processInstID:a.data.data,userId:u,itemId:e.itemId,type:0};Object(d["v"])(l).then((function(l){if(l.data.successful){var s={processInstID:a.processInstID,itemId:e.itemId,userId:u,isAudit:"",workItemId:"123",auditDesc:"立项申请",itemPhaseDet:"2"};Object(d["sd"])(s).then((function(a){if(l.data.successful)t.$message.success("提交立项审核成功"),t.getTable(t.currentPage,t.currentNum);else{t.showLoadingBtn=!1;var s=l.data.resultHint;t.$message.error(e.itemName+s)}}))}else{var i=l.data.resultHint;t.$message.error(e.itemName+i),t.showLoadingBtn=!1}}))}else t.showLoadingBtn=!1,t.$message.error(e.itemName+a.data.message)}));else{t.showLoadingBtn=!1;a.data.resultHint;t.$message.warning(e.itemName+"项目流程进行中，不能重复提交。")}}))}))}1==e.$store.state.user.workflowtype&&Object(d["d"])({itemIds:a}).then((function(a){t.showLoadingBtn=!1,a.data.successful?(t.submitCheckArr=[],t.$refs.itemTable.clearSelection(),t.getTable(t.currentPage,t.currentNum),e.$message.success("提交审核成功")):e.$message.error("提交项目申请报错")}))}else t.$message({showClose:!0,message:"不能选择包含上级的项目",type:"warning"}),t.showLoadingBtn=!1}else t.showLoadingBtn=!1})))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},showBZKY:function(){var e=this;if(0==e.bzkyArr.length)return this.$message({showClose:!0,message:"请选择一个项目",type:"warning"}),!1;if(e.bzkyArr.length>1)return this.$message({showClose:!0,message:"只能选择一个项目",type:"warning"}),!1;var t=e.bzkyArr[0];e.adjustStudy(t)},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},getItemLabel:function(){var e=this,t={speciality:""};"06"==e.specClass&&(t.speciality="06"),Object(d["Vc"])(t).then((function(t){if(console.log("response",t),t.data.successful){var a=t.data.resultValue;e.selectParamDict.set("voltLevel",a.voltCodeList),e.selectParamDict.set("itemLevel",a.itemLevelList),e.selectParamDict.set("itemSource",a.itemSourceList),e.selectParamDict.set("specClass",a.specClassList),a.itemClass123List&&(e.selectParamDict.set("itemClass123List",a.itemClass123List),e.itemClassLists=a.itemClass123List),e.$forceUpdate()}}))},changeChildList:function(e){if(e){this.isParentChanged=!0;for(var t=0;t<this.itemClassLists.length;t++)this.itemClassLists[t].codeValue==e&&(this.itemClassLists[t].children.length>0?(this.selectParamDict.set("itemClass123ListChild",this.itemClassLists[t].children),this.currentPage=1,this.getTable(1,this.currentNum)):(this.isParentChanged=!1,this.currentPage=1,this.getTable(1,this.currentNum)))}else this.isParentChanged=!1,this.currentPage=1,this.getTable(1,this.currentNum)},formartDate:function(e,t){var a=new Date(e),l=a.getFullYear(),s=a.getMonth()+1,i=a.getDate(),o=(a.getHours(),a.getMinutes(),a.getSeconds(),"");return"year"==t?o=l:"month"==t?o=l+"-"+this.add0(s):"date"==t&&(o=l+"-"+this.add0(s)+"-"+this.add0(i)),o},add0:function(e){return e<10?"0"+e:e},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,null==l.colType?"":l.colType)}return t},updatePackageItemName:function(){var e=this,t=this;if(""==t.packageItemParam.itemId)return this.$message({showClose:!0,message:"请选择一个项目包",type:"warning"}),!1;for(var a={ids:[],primarykey:[]},l=0;l<t.adjustArr.length;l++){var s=t.adjustArr[l];if(s.itemId==t.packageItemParam.itemId)return this.$message({showClose:!0,message:"所选项目中含有父级项目",type:"warning"}),t.$refs.itemTable.clearSelection(),t.adjustArr=[],!1;a.ids.push(s.itemId)}a.primarykey.push(t.packageItemParam.itemId),console.log(a),t.submitLoading=!0,Object(d["c"])(a).then((function(a){t.submitLoading=!1,a.data.successful?(e.$message.success("包调整成功"),t.adjustArr=[],t.$refs.itemTable.clearSelection(),t.packageItemParam.itemId="",t.currentPage=1,t.getTable(1,t.currentNum)):e.$message.error("包调整失败")}))},getPackageItemCurrentRow:function(e){var t=this;t.packageItemParam.itemId=e.itemId},handlePackageSizeChange:function(e){_this.packageItemCurrentNum=e,_this.getAllPackage(_this.packageItemCurrentPage,e)},handlePackageItemCurrentChange:function(e){var t=this;t.packageItemCurrentPage=e,t.getAllPackage(e,5)},getAllPackage:function(e,t){var a=this,l=this;l.packageItemLoading=!0;var s=[];Object(d["X"])({speciality:l.specClass,pageIndex:e,pageSize:t,itemName:l.packageItemParam.itemName,itemPhaseDet:"1,0"}).then((function(e){if(l.packageItemLoading=!1,e.data.successful){var t=e.data.resultValue.items;l.packageItemTotalNum=e.data.resultValue.itemCount;for(var i=function(e){var a=t[e];s.forEach((function(e){a.deptCode==e.codeValue&&(a.deptCode=e.codeName)}))},o=0;o<t.length;o++)i(o);l.packageItemArr=t}else a.$message.error("查询项目包列表失败")}))},showAdjustPackage:function(){var e=this;if(0==e.adjustArr.length)return this.$message({showClose:!0,message:"请选择要调整的项目",type:"warning"}),!1;for(var t=0;t<e.adjustArr.length;t++){var a=e.adjustArr[t];if(e.userId!=a.createorT)return this.$message({showClose:!0,message:"所选项目中含有不是创建者创建的项目，请重新选择",type:"warning"}),!1;if("02"==a.itemLevelT)return this.$message({showClose:!0,message:"项目包不能进行包调整，请重新选择",type:"warning"}),e.$refs.itemTable.clearSelection(),e.adjustArr=[],!1;if("03"==a.itemLevelT)return this.$message({showClose:!0,message:"单项项目不能进行包调整，请重新选择",type:"warning"}),e.$refs.itemTable.clearSelection(),e.adjustArr=[],!1;if(a.children&&a.children.length>0)return this.$message({showClose:!0,message:"含有单项项目的项目不能进行包调整，请重新选择",type:"warning"}),e.$refs.itemTable.clearSelection(),e.adjustArr=[],!1}e.showAdjustPackageDialog=!0,e.getAllPackage(1,5)},moveInPackage:function(){var e=this,t=this;if(""==t.packageBatchParam.parentId)return this.$message({showClose:!0,message:"请选择要移入的项目包",type:"warning"}),!1;if(0==t.moveInPackageIds.length)return this.$message({showClose:!0,message:"请选择要移入的项目",type:"warning"}),!1;var a={ids:[],primarykey:[]};a.ids=t.moveInPackageIds,a.primarykey.push(t.packageBatchParam.parentId),Object(d["Bd"])(a).then((function(a){a.data.successful?(t.$refs.batchPackage.clearSelection(),t.moveInPackageIds=[],e.$message.success("移入项目包成功"),t.showBatchPackage()):e.$message.error("移入项目包失败")}))},handleSingleItemSelectionChange:function(e){var t=this;t.moveInPackageIds=[],e.forEach((function(e){t.moveInPackageIds.push(e.itemId)}))},getSingleItemRowKey:function(e){return e.itemId},moveOutPackage:function(){var e=this,t=this,a={ids:[]};if(0==t.packageBatchParam.childItemList.length)return this.$message({showClose:!0,message:"请选择要移出的项目",type:"warning"}),!1;a.ids=t.packageBatchParam.childItemList,Object(d["Dd"])(a).then((function(a){a.data.successful?(e.$message.success("移出项目包成功"),t.packageBatchParam.childItemList=[],t.showBatchPackage()):e.$message.error("移出项目包失败")}))},handleCurrentSignleItemSizeChange:function(e){this.currentSingleNum=e,this.getSingleItem(this.currentSinglePage,e)},handleCurrentSingleItemTableChange:function(e){this.currentSinglePage=e,this.getSingleItem(e,this.currentSingleNum)},handlePackageClose:function(){this.DialogPackagVisible=!1,this.currentPage=1,this.getTable(1,this.currentNum)},showBatchPackage:function(){var e=this;e.getTreeList(),e.getSingleItem(1,5)},getTreeList:function(){var e=this,t=this;Object(d["ic"])({speciality:t.specClass}).then((function(a){a.data.successful?(console.log(a),t.treeList=a.data.resultValue,t.DialogPackagVisible=!0):e.$message.error("查询树形关系列表失败")}))},getSingleItem:function(e,t){var a=this,l=this;l.singleItemTableLoading=!0,Object(d["bc"])({speciality:l.specClass,pageIndex:e,pageSize:t,itemPhaseDet:"0,1"}).then((function(e){if(e.data.successful){l.singleItemTotalNum=e.data.resultValue.total;var t=e.data.resultValue.prjStItemBaseList;l.singleItemList=l.getShowDateTable(t,l.dictMap,l.columnTypeMapDict),l.DialogPackagVisible=!0}else a.$message.error("查询项目列表失败")}))},getBM:function(){var e=document.getElementById("name-iframe"),t=e.contentWindow||e.contentDocument,a=t.document.getElementById("prjName").value;window.frames["name-iframe"].pageForm.btnSure_onclick(window.event,(function(){a?(document.getElementById("ifremVal").value=a,this.tableLabel.forEach((function(e,t){"itemName"==e.colDname&&(e.value=a)})),this.newItemName=!1):this.$message({showClose:!0,message:"请先生成项目名称",type:"warning"})}))},getRowKeys:function(e){return e.itemId},beforeUploadKy:function(){this.fileUploadLoading=!0},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},switchFilter:function(){this.isShowFilter=!this.isShowFilter},showNewItemName:function(){this.newItemName=!0},uploadItemInfoSuccess:function(e){if(e.successful)this.$message({showClose:!0,message:"导入成功",type:"success"});else{var t=e.resultHint;this.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:t,type:"error"})}this.currentPage=1,this.getTable(1,this.currentNum)},uploadSuccess:function(e){var t=this;if(this.fileUploadLoading=!1,this.submitUploading=!1,e.successful)this.$message({showClose:!0,message:"上传成功",type:"success"}),t.tzkeVisible1=!1,t.fileList=[],this.getTable(t.currentPage,t.currentNum);else{var a=e.resultHint;this.$message({showClose:!0,message:a,dangerouslyUseHTMLString:!0,type:"error"})}},downloadReport:function(){var e=this;e.loading=!0,Object(d["J"])({itemId:e.feaReportId}).then((function(t){var a=e.fileList[0].name;e.loading=!1,console.log("download res",t);var l=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),s=document.createElement("a"),i=window.URL.createObjectURL(l);s.href=i,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}))},deleteReport:function(){var e=this,t=this,a=new FormData;a.append("itemId",t.uploadReportItemId),Object(d["F"])(a).then((function(a){if(a.data.successful)t.fileList=[],e.$message({showClose:!0,message:"删除可研报告成功",type:"success"}),t.getTable(t.currentPage,t.currentNum);else{var l=a.data.resultHint;e.$message({showClose:!0,message:l,dangerouslyUseHTMLString:!0,type:"error"})}t.loading=!1}))},exportReportTitleQ:function(){var e=this;e.loading=!0,Object(d["V"])().then((function(t){e.loading=!1,e.downloadCeb(t.data,"可研模版信息.ceb")}))},uploadReportFile:function(e){var t=this,a=e.file;t.loading=!0;var l=new FormData;l.append("file",a),l.append("itemId",t.uploadReportItemId),l.append("fileType",1),Object(d["Yd"])(l).then((function(e){t.loading=!1,e.data.successful&&t.$message({showClose:!0,message:"导入成功",type:"success"})})).catch((function(e){console.log(e)})),t.loading=!1},submitUpload:function(){this.submitUploading=!0,this.$refs.upload.submit()},cancalSubmitFeasibility:function(){var e=this;e.tzkeVisible1=!1,e.fileList=[]},upload:function(e){var t=this,a=e.file;t.loading=!0;var l=new FormData;l.append("file",a),Object(d["uc"])(l).then((function(e){t.loading=!1,e.data.successful&&t.$message({showClose:!0,message:"导入成功",type:"success"})})).catch((function(e){console.log(e)})),t.loading=!1},makeItemName:function(){var e=this;e.newItemName=!1,console.log("生成项目名:"+e.newItemNameNo+";"+e.newItemNameTime)},exportItemFile:function(){var e=this;e.loading=!0;var t={};t.speciality=e.specClass,t.itemIds=e.exportItemArr.join(","),t.itemPhaseDet="0,1",Object(d["S"])(t).then((function(t){e.$refs.itemTable.clearSelection(),e.loading=!1,e.download(t.data,"项目基本信息.xlsx")}))},download:function(e,t){console.log(e);var a=document.createElement("a"),l=new Blob([e],{type:"application/vnd.ms-excel"});a.style.display="none",a.href=URL.createObjectURL(l),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)},exportItemFile2:function(){var e=this;e.loading=!0,Object(d["T"])().then((function(t){e.loading=!1,e.download(t.data,"项目信息模版.xlsx")}))},clicklist:function(e){var t=e.target.nextSibling;""!=t.style.display?t.style.display="":t.style.display="none"},handleSelectionChange:function(e){var t=this;t.delData=[],t.parentItemInfo=[],t.bzkyArr=[],t.bzkyArr=t.bzkyArr.concat(e),t.parentItemInfo=t.parentItemInfo.concat(e),t.delData=t.delData.concat(e),t.adjustArr=[],t.adjustArr=t.adjustArr.concat(e),t.submitCheckArr=[],t.submitCheckArr=t.submitCheckArr.concat(e),t.exportItemArr=[],e.forEach((function(e){t.exportItemArr.push(e.itemId)}))},del:function(){var e=this,t=this;if(0==t.delData.length)return t.$message({showClose:!0,message:"请选择要删除的项目",type:"warning"}),!1;for(var a=0;a<t.delData.length;a++){var l=t.delData[a];if(l.itemPhaseDet>1)return t.$message({showClose:!0,message:"所选项目中含有已经进入审核流程的项目，请勿删除",type:"warning"}),!1;if(l.createorT!=t.userId)return t.$message({showClose:!0,message:"所选项目中含有不是创建者创建的项目，请检查后再删除",type:"warning"}),!1}this.$confirm("此操作将永久删除项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0;var a={ids:[]};t.delData.forEach((function(e){a.ids.push(e.itemId)})),Object(d["A"])(a).then((function(a){console.log(a),a.data.successful?(e.$message({showClose:!0,message:"删除成功",type:"success"}),t.getTable(t.currentPage,t.currentNum)):e.$message({showClose:!0,message:"删除失败",dangerouslyUseHTMLString:!0,type:"error"}),t.loading=!1}))})).catch((function(){e.$message({type:"warning",message:"已取消删除"})}))},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},resetItem:function(){var e=this;e.param={deptCode:"",pageIndex:1,itemName:"",itemType:"",pageSize:10,speciality:e.specClass,voltLevel:"",itemSource:"",itemPhase:"",ghYear:"",fragmentaryTypeId:""},this.getTable(e.currentPage,e.currentNum)},addLowerLevel:function(){var e=this,t=this;if(0==t.parentItemInfo.length)return this.$message({showClose:!0,message:"请选择一个项目",type:"warning"}),!1;if(t.parentItemInfo.length>1)return this.$message({showClose:!0,message:"只能选择一个项目",type:"warning"}),!1;if(this.userId!=this.parentItemInfo[0].createorT)return this.$message.warning("所选项目中含有不是创建者创建的项目，请重新选择"),!1;var a=t.parentItemInfo[0].itemId,l=t.parentItemInfo[0].itemLevelT;if(""==l)return this.$message({showClose:!0,message:"此项目项目层级为空，不能新增下级",type:"warning"}),!1;if("01"==t.parentItemInfo[0].itemLevelT)Object(d["tc"])({itemId:t.parentItemInfo[0].itemId}).then((function(s){if(s.data.successful){var i=s.data.resultValue;if(1==i)return e.$message({showClose:!0,message:"项目包下的项目不能新增下级",type:"warning"}),!1;t.showData.parentItemId=a,t.showData.parentItemLevel=l,t.showData.itemId=null,t.showData.phash=1,t.showDrawer=!0,t.timer=(new Date).getTime()}}));else{if("03"==t.parentItemInfo[0].itemLevelT)return this.$message({showClose:!0,message:"单体项目不能新增下级",type:"warning"}),!1;t.showData.parentItemId=a,t.showData.parentItemLevel=l,t.showData.itemId=null,t.showData.phash=1,t.showDrawer=!0,t.timer=(new Date).getTime()}},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTableWithTitle:function(e,t){var a=this,l=this;if(l.loading=!0,l.param.pageIndex=e,l.param.pageSize=t,l.param.itemPhaseDet="0,1",""==this.specClass){var s=l.$route.path;l.specClass=s.substr(s.lastIndexOf("/")+1,s.length)}l.param.speciality=l.specClass;var i={};i.speciality=l.specClass,Object(d["Wc"])(i).then((function(e){l.loading=!1,e.data.successful?(l.tableLabel=e.data.resultValue,l.showData.tableLabelArr=l.tableLabel,console.log(e.data.resultValue),l.dictMap=l.getDictArr(l.tableLabel),l.columnTypeMapDict=l.getColumnTypeArr(l.tableLabel),Object(d["Rc"])(l.param).then((function(e){e.data.successful?(l.tableData=e.data.resultValue.prjStItemBaseList,l.totalNum=e.data.resultValue.total,l.tableDataShow=l.getShowDateTable(l.tableData,l.dictMap,l.columnTypeMapDict)):a.$message.error("查询列表出错")}))):a.$message.error("查询表头信息出错")}))},getTable:function(e,t){var a=this;a.loading=!0,a.param.pageIndex=e,a.param.pageSize=t,a.param.itemPhaseDet="0,1",Object(d["Rc"])(a.param).then((function(e){a.showLoadingBtn=!1,a.loading=!1,a.tableData=e.data.resultValue.prjStItemBaseList,a.totalNum=e.data.resultValue.total,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMapDict)}))},getDictArr:function(e){var t=new Map;if("undefined"!=typeof e&&null!=e&&e.length>0)for(var a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&0!=l.codeList.length&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p),"applyId"==m&&(r["applyId"]=n.createor)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s},getLabelList:function(e){var t=this;for(var a in e.forEach((function(e){t.$set(e,"value","")})),e){t.saveLabel[a]=e[a];var l=e[a];if(1==l.isMandatory){var s=new Object;s.required=!0,s.message=l.dispName+"不能为空",s.trigger="blur",t.saveLabel[a].rule=s}else{var i=new Object;i.required=!1,t.saveLabel[a].rule=i}}},adjustStudy:function(e){var t=this;"3"==e.itemClassT?t.kyTitle="上传项目建议书":t.kyTitle="上传可研报告",t.uploadReportItemId=e.itemId,t.uploadReportData.itemId=e.itemId,t.loading=!0,t.fileList=[],Object(d["xd"])({itemId:e.itemId}).then((function(e){if(console.log("response",e),t.loading=!1,e.data.successful){var a=e.data.resultValue;if(a.length>0){var l={};l.name=a,l.url="",t.fileList.push(l)}t.getTable(t.currentPage,t.currentNum)}})).catch((function(e){console.log(e)})),t.tzkeVisible1=!0},handleExceed:function(e,t){var a=this;e.length>1&&a.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件")),t[0]=e[0],a.fileList[0]=e[0],this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e){return this.$confirm("确定移除 ".concat(e.name,"？"))},specClassList:function(){var e=this,t=e.$route.path;e.specClass=t.substr(t.lastIndexOf("/")+1,t.length),e.showData.specClass=e.specClass}}},h=p,f=(a("2bf0"),a("aff5"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"65ec7e9f",null);t["default"]=g.exports},"52c5":function(e,t,a){},5551:function(e,t,a){"use strict";var l=a("25c6"),s=a.n(l);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("d3b7"),a("96cf");var l=a("1da1"),s=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},["/login"==e.$route.path||"/isclogin"==e.$route.path||e.isHideMenu?e._e():a("naver"),a("layout")],1)},o=[],n=a("5530"),r=a("3d01"),c=a("71c2"),u=a("08cd"),d=a("2f62"),m={name:"App",components:{pageHeader:c["a"],naver:r["a"],layout:u["a"]},data:function(){return{key:""}},watch:{$route:function(e,t){this.Key=(new Date).getTime()}},computed:Object(n["a"])({},Object(d["b"])(["isHideMenu"])),mounted:function(){console.log("isHideMenu",this.isHideMenu)}},p=m,h=(a("7faf"),a("b0a0"),a("2877")),f=Object(h["a"])(p,i,o,!1,null,null,null),g=f.exports,b=a("a18c"),v=a("4360"),w=a("5c96"),y=a.n(w),D=a("bc3a"),C=a.n(D);a("0fae"),a("b29b"),a("df6a"),a("223d");function I(){return new Promise((function(e,t){C()({method:"get",baseURL:"",url:"url.json"}).then((function(t){v["a"].dispatch("app/setworkflowurl",t.data.workflowurl),v["a"].dispatch("app/setBmUrl",t.data.getBMUrl),s["default"].prototype.workflowurl=t.data.workflowurl,console.log("测试配置",s["default"].prototype.workflowurl),e()})).catch((function(e){console.log(e),t()}))}))}function L(){return S.apply(this,arguments)}function S(){return S=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:s["default"].prototype.GLOBALURL="http://192.168.1.239:9088",s["default"].use(y.a),s["default"].config.productionTip=!1,new s["default"]({router:b["c"],store:v["a"],render:function(e){return e(g)}}).$mount("#app");case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}L()},"5d4c":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main addpage",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("span",{staticClass:"color_tip"},[e._v(e._s(e.title))])]),a("div",{staticStyle:{height:"calc(100vh - 150px)",overflow:"auto",background:"#dff1f1"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"立项阶段",name:"first"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading1,expression:"dialogLoading1"}],ref:"saveFormLX",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabelLX,"label-position":"right",inline:!0,disabled:"1"!=e.phash}},e._l(e.tableLabelLX,(function(t,l){return 3!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType?a("el-date-picker",{staticClass:"diy_long",staticStyle:{width:"300px!important"},attrs:{type:t.colType,disabled:"1"==t.readOnly,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||!e.dictMap.has(t.colDname)||0==e.dictMap.get(t.colDname).length},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:t.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:"1"==t.readOnly},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",attrs:{disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t.textMask,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:0,precision:0,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType&&"string"!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},[null!=t.unit&&""!=t.unit?a("template",{slot:"append"},[e._v(e._s(t.unit))]):e._e()],2),"itemName"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{id:"ifremVal",disabled:"1"==t.readOnly,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e(),"text"==t.dispType&&"problemCode"!=t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{type:"textarea",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{type:"textarea",placeholder:t.dispName,disabled:!1},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-button",{staticClass:"diy_right",attrs:{type:"primary",disabled:"1"==t.readOnly},on:{click:function(t){return t.preventDefault(),e.showQuestionList(t)}}},[e._v("关联问题或需求")]):e._e()],1):e._e()})),1)],1),a("el-tab-pane",{attrs:{label:"可研阶段",name:"second"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"saveFormKY",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabelKY,"label-position":"right",inline:!0,disabled:"2"!=e.phash}},e._l(e.tableLabelKY,(function(t,l){return 3!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType?a("el-date-picker",{staticClass:"diy_long",staticStyle:{width:"300px!important"},attrs:{type:t.colType,disabled:"1"==t.readOnly,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||!e.dictMap.has(t.colDname)||0==e.dictMap.get(t.colDname).length},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:"1"==t.readOnly},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",attrs:{disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t.textMask,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,precision:0,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType&&"string"!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),"itemName"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{id:"ifremVal",disabled:"1"==t.readOnly,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemName}},[e._v("自动命名")]):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e(),"text"==t.dispType&&"questionCode"!=t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{type:"textarea",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{type:"textarea",placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-button",{staticClass:"diy_right",attrs:{type:"primary",disabled:"1"==t.readOnly},on:{click:function(t){return t.preventDefault(),e.showQuestionList(t)}}},[e._v("关联问题或需求")]):e._e()],1):e._e()})),1)],1),a("el-tab-pane",{attrs:{label:"储备阶段",name:"third"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading3,expression:"dialogLoading3"}],ref:"saveFormCB",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabelCB,"label-position":"right",inline:!0,disabled:"3"!=e.phash}},e._l(e.tableLabelCB,(function(t,l){return 3!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType?a("el-date-picker",{staticClass:"diy_long",staticStyle:{width:"300px!important"},attrs:{type:t.colType,disabled:"1"==t.readOnly,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||!e.dictMap.has(t.colDname)||0==e.dictMap.get(t.colDname).length},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:"1"==t.readOnly},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",attrs:{disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t.textMask,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,precision:0,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType&&"string"!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{autocomplete:"off",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),"itemName"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{id:"ifremVal",disabled:"1"==t.readOnly,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemName}},[e._v("自动命名")]):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e(),"text"==t.dispType&&"problemCode"!=t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{type:"textarea",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{type:"textarea",placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-button",{staticClass:"diy_right",attrs:{type:"primary",disabled:"1"==t.readOnly},on:{click:function(t){return t.preventDefault(),e.showQuestionList(t)}}},[e._v("关联问题或需求")]):e._e()],1):e._e()})),1)],1)],1),0!=e.phash?a("div",{staticClass:"save_btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveItem()}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancle}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resert}},[e._v("重置")])],1):e._e()],1),a("el-dialog",{staticClass:"bmiframe",attrs:{visible:e.newItemName,"close-on-click-modal":!1,width:"1000px","custom-class":"cus-dialog","modal-append-to-body":""},on:{"update:visible":function(t){e.newItemName=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("生成项目名称")])])]),a("iframe",{attrs:{name:"my-iframe",id:"name-iframe",src:e.getNameUrl,frameborder:"0",width:"100%",height:"750",scrolling:"none"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getBM}},[e._v("获取项目名称")])],1)],2),a("el-dialog",{staticClass:"question_dialog",attrs:{width:"70%",title:e.questionTitle,"close-on-click-modal":!1,visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"btns"},[a("el-input",{staticClass:"proname",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.probName,callback:function(t){e.probName=t},expression:"probName"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getChildTableList}},[e._v("检索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.questionShowData,"max-height":"350px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleQuestionSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._l(e.questionLabelList,(function(t,l){return"createDate"!=t.colDname&&"isCancel"!=t.colDname&&"probDesc"!=t.colDname&&"probRemark"!=t.colDname&&"dmdDesc"!=t.colDname&&"dmdRemark"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"probDesc"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probDesc?[t.row.probDesc.length<10?a("p",[e._v(" "+e._s(t.row.probDesc)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.probDesc)))])])]:void 0}}],null,!0)}):"probRemark"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probRemark?[t.row.probRemark.length<10?a("p",[e._v(" "+e._s(t.row.probRemark)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.probRemark)))])])]:void 0}}],null,!0)}):"dmdDesc"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdDesc)))])])]}}])}):"dmdRemark"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdRemark)))])])]}}])}):"isCancel"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName}}):"createDate"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.dateFormat,prop:t.colDname,label:t.dispName}}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":5,layout:"total, prev, pager, next, jumper",total:e.questionListTotalNum},on:{"current-change":e.handleCurrentWTChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleSubmitInnerTable}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitQuestioinCode}},[e._v("保 存")])],1)],1)],1)])])},s=[],i=(a("99af"),a("4160"),a("a630"),a("c975"),a("a15b"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("53ca")),o=a("3835"),n=a("5530"),r=a("2f62"),c=a("a960"),u=a("7e1e"),d={data:function(){return{deptName:"",deptArr:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},itemForm:{},itemInfo:{},getNameUrl:"/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?openType=1&appID=00&applyID=2",newItemName:!1,specClass:"",specClassName:"",dictMap:new Map,tempId:"",columnMap:new Map,title:"",totalLableArr:[],dialogLoading:!1,formLabelWidth:"140px",innerVisible:!1,questionTitle:"",questionLabelList:[],questionTableData:[],questionListTotalNum:0,questionDictMap:new Map,questionShowData:[],selectedQuestionCode:[],currentPage:1,loading:!1,probName:"",specEnabled:!0,parentItemId:null,itemClassArr:[],childTableData:[],childrenShowData:[],childrenLable:{},childrenDictMap:new Map,childrenColumnMap:new Map,showChildren:!1,deptCodeT:"",LGTypeArr:[],tableLabelArr:[],tabMap:new Map,tableData:[],tableLabel:{},tableLabelLX:{},tableLabelKY:{},tableLabelCB:{},activeTab:"first",phash:"",dialogLoading1:!1,dialogLoading2:!1,dialogLoading3:!1}},created:function(){this.tableHeight=window.innerHeight-320+"px"},mounted:function(){var e=this;window.onresize=function(){return function(){e.tableHeight=window.innerHeight-320+"px"}()},this.specClass=this.$route.query.specClass,this.specClassName=this.$route.query.specClassName,this.tempItemId=this.$route.query.itemId,this.oldPath=this.$route.query.oldPath,this.parentItemId=this.$route.query.parentItemId,this.tableLabelArr=this.$route.query.tableLabelArr,null==this.tempItemId?this.title=this.specClassName+"新增":this.title=this.specClassName+"修改",this.phash=this.$route.query.phash,this.getLabel()},computed:Object(n["a"])({},Object(r["c"])({addItemParams:function(e){return e.itemadd.addItemParams}})),components:{SelectTree:c["a"]},methods:{commonChange:function(e,t){var a=this;if("cascadeDropdown"==e.dispType&&null!=e.detailColDname){var l=e.detailColDname.split(",");if(l.length>0){for(var s=0;s<l.length;s++){var i=l[s];a.dictMap.set(i,new Array),a.setValue(i,null)}var o={};o.speciality=a.specClass,o.codeValue=t;o.groupCode=e.groupCode;Object(u["Uc"])(o).then((function(e){console.log(e),e.data.successful&&(a.dictMap.set(l[0],e.data.resultValue),a.setValue(l[0],e.data.resultValue,!0),a.$forceUpdate())}))}}switch(a.specClass){case"08":"quantity"==e.colDname&&t>1&&a.setValue("lxItemType","1")}},getValue1:function(e){this.setValue("conOrg",e),console.log(this.valueId)},clearValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e){l.value="";break}}},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},getShowDateTable:function(e,t){for(var a=[],l=0;l<e.length;l++){for(var s=e[l],i=new Object,n=0,r=Object.entries(s);n<r.length;n++){var c=Object(o["a"])(r[n],2),u=c[0],d=c[1];if(t.has(u))for(var m=t.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(i[u]=h.codeName)}else i[u]=d}a.push(i)}return a},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},formartDate:function(e,t){var a=new Date(e);return a},add0:function(e){return e<10?"0"+e:e},resert:function(){var e=this;if(null!=e.tempItemId)Object(u["Gb"])(e.tempItemId).then((function(t){if(t.data.successful){var a=t.data.resultValue.items[0];for(var l in e.tableLabel)null==a[e.tableLabel[l].colDname]?e.tableLabel[l].value="":e.tableLabel[l].value=a[e.tableLabel[l].colDname]+""}})).catch((function(e){console.log(e)}));else for(var t in e.tableLabel)e.tableLabel[t].value=""},saveItem:function(){var e=this,t=this,a="",l={};"1"==t.phash?(a="saveFormLX",l=t.tableLabelLX):"2"==t.phash?(a="saveFormKY",l=t.tableLabelKY):"3"==t.phash&&(fromName="saveFormCB",l=t.tableLabelCB),t.$refs[a].validate((function(a){if(!a)return console.log("error submit!!"),!1;var s={},i="保存成功",o="保存失败";for(var n in t.dialogLoading=!0,s["itemId"]=t.tempItemId,s["parentId"]=t.parentItemId,s["speciality"]=t.specClass,s["phash"]=t.phash,l){var r=l[n];s[r.colDname]=r.value}Object(u["yc"])(s).then((function(a){t.dialogLoading=!1,console.log(a),a.data.successful?(e.$message({showClose:!0,message:i,type:"success"}),t.itemId="",t.$router.push({path:t.oldPath})):e.$message({showClose:!0,message:o,type:"error"}),t.loading=!1}))}))},cancle:function(){var e=this;this.$router.push({path:e.oldPath})},handleCurrentWTChange:function(e){console.log("当前页: ".concat(e));var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if("itemSource"==l.colDname){l.value.length>0?(t.innerVisible=!0,"1"==l.value?(t.questionTitle="问题库列表",t.getXQList(e,5)):(t.questionTitle="需求库列表",t.getWTList(e,5))):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getLabel:function(){var e=this;if(e.dialogLoading=!0,null!=e.tempItemId){var t={index:1,pageSize:10};if(t.speciality=e.specClass,t.itemId=e.tempItemId,0==e.tableLabelArr.length){var a={};a.speciality=e.specClass,Object(u["Wc"])(a).then((function(t){if(t.data.successful){e.tableLabelArr=t.data.resultValue,e.setLableData();var a={};a.speciality=e.specClass,a.itemId=e.tempItemId,Object(u["Sc"])(a).then((function(t){if(t.data.successful){var a=t.data.resultValue.prjStItemBase,l=t.data.resultValue.prjStFea,s=t.data.resultValue.prjStStorage;e.setItemInfoData(e.tableLabelLX,a),e.setItemInfoData(e.tableLabelKY,l),e.setItemInfoData(e.tableLabelCB,s)}}))}}))}else{e.setLableData();var l={};l.speciality=e.specClass,l.itemId=e.tempItemId,Object(u["Sc"])(l).then((function(t){if(t.data.successful){var a=t.data.resultValue.prjStItemBase,l=t.data.resultValue.prjStFea,s=t.data.resultValue.prjStStorage;e.setItemInfoData(e.tableLabelLX,a),e.setItemInfoData(e.tableLabelKY,l),e.setItemInfoData(e.tableLabelCB,s)}}))}}else{var s={};if(s.speciality=e.specClass,0==e.tableLabelArr.length){var i={};i.speciality=e.specClass,Object(u["Wc"])(i).then((function(t){t.data.successful&&(e.tableLabelArr=t.data.resultValue,e.setLableData())}))}else e.setLableData()}},setItemInfoData:function(e,t){var a=this,l=function(l){null==t[e[l].colDname]?(e[l].value="","number"==e[l].dispType&&(e[l].value=0)):"date"==e[l].dispType?e[l].value=a.formartDate(t[e[l].colDname],e[l].colType):e[l].value=t[e[l].colDname]+"","deptDropdown"==e[l].dispType&&Object(u["rb"])({deptCode:e[l].value}).then((function(t){t.data.successful&&(e[l].deptName=t.data.resultValue,a.$forceUpdate())})),"cascadeDropdown"==e[l].dispType&&(console.log("*********"+l+"********"),a.commonChange(e[l],e[l].value))};for(var s in e)l(s)},setLableData:function(){for(var e=this,t=[],a=[],l=[],s=0;s<e.tableLabelArr.length;s++){var i=e.tableLabelArr[s];"1"==i.phase?t.push(i):"2"==i.phase?a.push(i):"3"==i.phase&&l.push(i)}e.tableLabelLX=e.getLabelList(t),e.tableLabelKY=e.getLabelList(a),e.tableLabelCB=e.getLabelList(l),e.dictMap=e.getDictArr(e.tableLabelArr),"08"==e.specClass&&Object(u["jc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;e.setValue("conDept",a.deptCode),e.deptName=a.deptName}})),e.dialogLoading=!1},cancleSubmitInnerTable:function(){var e=this;e.probName="",e.innerVisible=!1},getChildTableList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?(e.innerVisible=!0,"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5)):(e.questionTitle="需求库列表",e.getWTList(1,5))):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e)return l.value}},setValue:function(e,t,a){var l=this,s={};if("1"==l.phash?s=l.tableLabelLX:"2"==l.phash?s=l.tableLabelKY:"3"==l.phash&&(s=l.tableLabelCB),void 0!=Object(i["a"])(a)&&a)for(var o in s){var n=s[o];if(n.colDname==e){n.codeList=t;break}}else for(var r in s){var c=s[r];if(c.colDname==e){c.value=t;break}}},showNewItemName:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),t.B08="A",Object(u["I"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.setValue("itemName",a)}else t.resultHit}))},showNewItemNameJsp:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),t.B08="A",e.getNameUrl="/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?appID=00&applyID=123123123123&iscUserId=&loginName=sx_test",Object(u["Z"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.getNameUrl+=a,e.getNameUrl=encodeURI(encodeURI(e.getNameUrl)),e.newItemName=!0}else t.resultHit}))},getBM:function(){var e=document.getElementById("name-iframe"),t=e.contentWindow||e.contentDocument,a=t.document.getElementById("prjName").value;if(a){for(var l in document.getElementById("ifremVal").value=a,this.tableLabel)"itemName"==this.tableLabel[l].colDname&&(this.tableLabel[l].value=a);this.newItemName=!1}else this.$message({showClose:!0,message:"请先生成项目名称",type:"error"})},handleQuestionSelectionChange:function(e){var t=this,a=1;for(var l in t.tableLabel){var s=t.tableLabel[l];if("itemSource"==s.colDname){a="1"==s.value?1:2;break}}t.selectedQuestionCode=[],e.forEach((function(e){1==a?t.selectedQuestionCode.push(e.probCode):t.selectedQuestionCode.push(e.dmdCode)}))},submitQuestioinCode:function(){var e=this;if(e.probName="",e.selectedQuestionCode.length>0){for(var t in e.tableLabelLX){var a=e.tableLabelLX[t];if("problemCode"==a.colDname){if(null!=a.value&&a.value.length>0){var l=a.value.split(",");e.selectedQuestionCode=e.selectedQuestionCode.concat(l)}var s=new Set(e.selectedQuestionCode),i=Array.from(s),o=i.join(",");a.value=o;break}}e.selectedQuestionCode=[],e.innerVisible=!1}else e.$message({showClose:!0,message:"请选择问题或需求",type:"warning"})},getXQList:function(e,t){var a=this;a.loading=!0,Object(u["Vb"])({pageIndex:e,pageSize:t,probName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},getWTList:function(e,t){var a=this;a.loading=!0,Object(u["Tb"])({pageIndex:e,pageSize:t,dmdName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},showQuestionList:function(){var e=this;for(var t in e.tableLabelLX){var a=e.tableLabelLX[t];if("itemSource"==a.colDname){a.value.length>0&&null!=a.value?"01"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5),e.innerVisible=!0):"02"==a.value?(e.questionTitle="需求库列表",e.getWTList(1,5),e.innerVisible=!0):this.$message({showClose:!0,message:"项目来源为其他时,不需要选择问题或需求列表",type:"warning"}):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},makeItemName:function(){var e=this;e.newItemName=!1,console.log("生成项目名:"+e.newItemNameNo+";"+e.newItemNameTime)},getDictArr:function(e){var t=this,a=new Map;if("undefined"!=typeof e&&null!=e&&e.length>0)for(var l=0;l<e.length;l++){var s=e[l];null!=s.codeList?("9"!=t.specClass&&"11"!=t.specClass||"itemClass"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"3"!=t.codeValue&&e.push(t)})),s.codeList=e}(),null!=t.parentItemId&&"itemType"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"1"!=t.codeValue&&e.push(t)})),s.codeList=e}(),a.set(s.colDname,s.codeList)):"cascadeDropdown"==s.dispType&&a.set(s.colDname,new Array)}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},isNumber:function(e,t,a){null==t&&a();var l=/^\d+(\.\d+)?$/;l.test(t)?t.toString().indexOf(".")>0&&t.toString().split(".")[1].length>2?a(new Error("数字只精确到小数点后两位")):a():a(new Error("只能输入数字且不能为负值"))},getLabelList:function(e){var t=this;e.forEach((function(e){"dropdown"==e.displayType||"cascadeDropdown"==e.displayType?t.$set(e,"value",""):t.$set(e,"value",null)}));var a={};for(var l in e){var s=e[l];"undefined"!=typeof s.readOnly&&null!=s.readOnly&&""!=s.readOnly||(s.readOnly="0"),a[l]=e[l];var i=[];if(1==s.isMandatory){var o=new Object;o.required=!0,o.message=s.dispName+"不能为空","dropdown"==s.dispType?o.trigger="change":o.trigger="blur",i.push(o)}if("number"==s.dispType){var n=new Object;n.validator=t.isNumber,n.trigger="change",i.push(n)}if("undefined"!=typeof s.elCode&&null!=s.elCode&&""!=s.elCode){var r=new Object;r.required=!1,r.pattern=s.elCode,"undefined"!=typeof s.errorText&&""!=s.errorText&&null!=s.errorText?r.message=s.errorText:r.message=s.dispName+"格式不正确",r.trigger="change",i.push(r)}a[l].rule=i,null!=s.colDefault&&""!=s.colDefault&&"null"!=s.colDefault&&(a[l].value=s.colDefault)}return a}}},m=d,p=(a("5205"),a("dbdf"),a("2877")),h=Object(p["a"])(m,l,s,!1,null,"55e26e9e",null);t["default"]=h.exports},"5d94":function(e,t,a){},"5f87":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return c})),a.d(t,"p",(function(){return u})),a.d(t,"u",(function(){return d})),a.d(t,"t",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"s",(function(){return h})),a.d(t,"m",(function(){return f})),a.d(t,"i",(function(){return g})),a.d(t,"o",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"b",(function(){return w})),a.d(t,"d",(function(){return y})),a.d(t,"c",(function(){return D})),a.d(t,"q",(function(){return C})),a.d(t,"r",(function(){return I})),a.d(t,"l",(function(){return L})),a.d(t,"k",(function(){return S})),a.d(t,"j",(function(){return T})),a.d(t,"f",(function(){return k}));a("4d63"),a("ac1f"),a("25f0"),a("5319");var l=a("a78e"),s=a.n(l),i="vue_admin_template_token",o="vue_admin_template_pwd";function n(){return s.a.get("key")}function r(){return s.a.get("iscUserId")}function c(){return s.a.get("loginName")}function u(e){return s.a.set("key",e)}function d(e){return s.a.set("loginName",e)}function m(e){return s.a.set("iscUserId",e)}function p(){return s.a.get("uid")}function h(e){return s.a.set("uid",e)}function f(){return s.a.remove("uid")}function g(){return s.a.remove("key")}function b(){return s.a.remove("loginName")}function v(){return s.a.remove("iscUserId")}function w(){return s.a.get("nameKey",name)}function y(){return s.a.get(i)}function D(){return s.a.get(o)}function C(e){return s.a.set("nameKey",e)}function I(e){return s.a.set(i,e)}function L(){return s.a.remove(i)}function S(){return s.a.remove(o)}function T(){return s.a.remove("nameKey")}function k(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[,""])[1].replace(/\+/g,"%20"))||null}},"662a":function(e,t,a){},"67f0":function(e,t,a){"use strict";var l=a("9635"),s=a.n(l);s.a},"68e0":function(e,t,a){},6943:function(e,t,a){},"6df2":function(e,t,a){},"6e7d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("div",{staticClass:"order_btn"},[a("el-button",{attrs:{type:"primary",size:"small"}},[a("router-link",{attrs:{to:"/storageTable"}},[e._v("项目分级排序标准")])],1)],1),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabList,(function(t,l){return a("el-tab-pane",{key:"lay1"+l,attrs:{label:t.name,name:t.name}},["零星购置"==t.name?a("el-tabs",{on:{"tab-click":e.handleClick2},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},e._l(t.list,(function(e,t){return a("el-tab-pane",{key:"lay2"+t,attrs:{label:e.name,name:e.name}})})),1):e._e()],1)})),1),a("orderComponent",{attrs:{tableHeight:e.tableHeight,orderData:e.orderData,acitve:e.activeName}})],1)])])},s=[],i=(a("4160"),a("b0c0"),a("159b"),a("5530")),o=a("2f62"),n=a("0838"),r=a("7e1e"),c={name:"storageOrder",data:function(){return{lxData:[],activeName2:"",orderData:[],tabList:{},activeName:"",tableHeight:""}},components:{orderComponent:n["default"]},computed:Object(i["a"])({},Object(o["b"])(["roles"])),mounted:function(){var e=this;e.tableHeight=window.innerHeight-280,e.getTable()},created:function(){},methods:{submitTable:function(){var e=this,t=this;Object(r["Kd"])().then((function(a){console.log("response",a),a.data.successful?(e.$message({showClose:!0,message:"提交成功",type:"success"}),t.getTable(),t.$refs.storagetable.clearSelection()):e.$message({showClose:!0,message:a.data.resultHint,type:"error"}),t.loading=!1}))},handleClick:function(e){console.log(e),"零星购置"==this.activeName?(this.activeName2=this.tabList[e.index].list[0].name,this.orderData=this.tabList[e.index].list[0].list,this.tableHeight=window.innerHeight-320):(this.orderData=this.tabList[e.index].list,this.tableHeight=window.innerHeight-280)},handleClick2:function(e){this.orderData=this.lxData[e.index].list,this.activeName2=this.lxData[e.index].name,this.tableHeight=window.innerHeight-320},handleCurrentChange:function(e){console.log("触发选择了",e.localCode),console.log(e),this.selectCode=e.localCode},getTable:function(){var e=this;e.loading=!0,Object(r["Db"])().then((function(t){if(e.loading=!1,t.data.successful){var a=[];t.data.resultValue.forEach((function(t,l){t.list.length&&(a.push(t),"零星购置"==t.name&&(e.lxData=t.list,console.log("lxData",e.lxData)))})),e.tabList=a,console.log("arrarr",a),e.orderData=e.tabList[0].list,console.log(e.tabList),e.activeName=e.tabList[0].name}}))}}},u=c,d=(a("84c4"),a("a95b"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"28cc59d7",null);t["default"]=m.exports},"6ee6":function(e,t,a){},"70c3":function(e,t,a){a("d3b7"),e.exports=function(e){return function(){return a("1a5d")("./"+e+".vue")}}},"71b6":function(e,t,a){},"71c2":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"test_header",on:{click:e.logout}},[e._v("退出登录")]),a("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"right1"},[a("div",{staticClass:"right_container1"},[a("h3",[a("span",[e._v("5条")]),e._v("待办工作")]),a("ul",[a("li",[e._v("待办工作1")]),a("li",[e._v("待办工作2")]),a("li",[e._v("待办工作3")]),a("li",[e._v("待办工作")]),a("li",[e._v("待办工作")])])]),a("div",{staticClass:"right_container1"},[a("h3",[a("span",[e._v("4条")]),e._v("提醒")]),a("ul",[a("li",[e._v("问题销号提醒")]),a("li",[e._v("储备项目可研超时提醒")]),a("li",[e._v("储备项目出库提醒")]),a("li",[e._v("待办工作计划到期提醒")])])]),a("div",{staticClass:"right_container1"},[a("h3",[a("span",[e._v("5条")]),e._v("审计日志")]),a("ul",[a("li",[e._v("审计日志1")]),a("li",[e._v("审计日志2")]),a("li",[e._v("审计日志3")]),a("li",[e._v("审计日志4")]),a("li",[e._v("审计日志5")])])])])])],1)},s=[],i=a("5530"),o=a("2f62"),n=a("3d01"),r=a("7a14"),c={name:"pageHeader",components:{Right:r["default"],naver:n["a"]},data:function(){return{drawer:!1,direction:"rtl"}},computed:Object(i["a"])({},Object(o["b"])(["token","name","isIscLogin","isSimulateLogin"])),methods:{logout:function(){console.log("sdfsfsd"),this.isIscLogin||this.isSimulateLogin?this.$store.dispatch("user/logout").then((function(e){console.log(e),window.location.href=e})):(this.$store.dispatch("user/logout"),this.$router.push("/login"))},handleClose:function(e){e()}}},u=c,d=(a("8aa9"),a("c8b4"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"ac7d8280",null);t["a"]=m.exports},"71cc":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.iscLoading,expression:"iscLoading"}],staticClass:"isclogin-container",attrs:{"element-loading-text":"正在登录..."}},[e._v(" isclogin ")])},s=[],i=a("5530"),o=a("5f87"),n=a("2f62"),r={name:"isclogin",data:function(){return{iscLoading:!0}},computed:Object(i["a"])({},Object(n["b"])(["isIscLogin","isSimulateLogin","iscUrl"])),mounted:function(){var e=this;sessionStorage.clear(),console.log("清除了localStorage",sessionStorage);var t=Object(o["f"])("ticket",window.location.href),a=Object(o["f"])("iscUserId",window.location.href),l=Object(o["f"])("loginName",window.location.href);e.$store.dispatch("user/setLocationUrl",window.location.href);var s=sessionStorage;s.setItem("iscUserId",a),s.setItem("loginName",l),s.setItem("ticket",t),console.log("key",t,"iscUserId",a,"loginName",l),t&&t.length>1||a?(console.log("iscUserId"),e.$store.dispatch("user/setKey",t).then((function(){e.isIscLogin?(console.log("第二种登录"),e.$store.dispatch("user/iscLogin",e.$store.getters.key).then((function(){var t=Object(o["f"])("path",window.location.href);if(console.log("path"+t),t)if("projectApproval"==t||"projectSubmitApproval"==t||"planAssessmentApproval"==t||"planAssessAgainApproval"==t||"expertsConfirmApproval"==t||"expertsAgainApproval"==t||"reviewCommentsApproval"==t||"collectCommentsApproval"==t||"countersignatureApproval"==t||"perfectFileApproval"==t||"uploadFileApproval"==t){var a=Object(o["f"])("processInstID",window.location.href),l=Object(o["f"])("workItemID",window.location.href),s=Object(o["f"])("activityInstID",window.location.href),i=Object(o["f"])("iscUserId",window.location.href);e.$router.push({path:t,query:{path:t,processInstID:a,workItemID:l,activityInstID:s,iscUserId:i}})}else e.$router.push({path:t,query:{path:t}});else e.$router.push({path:e.redirect||"/"})}))):(console.log("第三种登录"),e.$store.dispatch("user/simulateLogin",e.$store.getters.key).then((function(){e.$router.push({path:e.redirect||"/"})})))}))):a&&l&&"null"!=l&&"null"!=a?e.isIscLogin?(console.log("第二种登录"),e.$store.dispatch("user/iscLogin").then((function(){e.$router.push({path:e.redirect||"/"})}))):(console.log("第三种登录"),e.$store.dispatch("user/simulateLogin").then((function(){e.$router.push({path:e.redirect||"/"})}))):window.location.href=e.iscUrl+"/isc_sso/login?service="+encodeURIComponent(window.location.href)},methods:{}},c=r,u=(a("930c"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,"f0fbd7c2",null);t["default"]=d.exports},"71d6":function(e,t,a){},"71e0":function(e,t,a){"use strict";var l=a("9d1c"),s=a.n(l);s.a},7248:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main addpage",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("span",{staticClass:"color_tip"},[e._v(e._s(e.title))])]),a("div",{staticStyle:{height:"calc(100vh - 150px)",overflow:"auto",background:"#dff1f1"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"saveForm",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabel,"label-position":"right",inline:!0}},e._l(e.tableLabel,(function(t,l){return 3!=t.showType&&7!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["DATE"==t.dispType?a("el-date-picker",{staticClass:"diy_long",staticStyle:{width:"300px!important"},attrs:{type:t.colLimit,"value-format":t.isDispDetail,placeholder:"选择日期"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType&&"speciality"!=t.colDname&&"itemClass1"!=t.colDname&&"itemClass2"!=t.colDname&&"itemClass3"!=t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),a("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"deptDropdown"==t.dispType,expression:"domain.dispType == 'deptDropdown'"}],attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion},on:{getValue:function(t){return e.getValue1(t)}}}),"dropdown"==t.dispType&&"itemClass1"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow1},on:{change:function(a){return e.changeItemClass2(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr1,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass2"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow2||3==e.specClass||4==e.specClass},on:{change:function(a){return e.changeItemClass3(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr2,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass3"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:e.itemClassShow3||3==e.specClass||4==e.specClass},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr3,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{type:"textarea",placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-button",{staticClass:"diy_right",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.showQuestionList(t)}}},[e._v("关联问题或需求")]):e._e(),"text"==t.dispType&&"questionCode"!=t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t.textMask},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,precision:0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),"erectItemCode"==t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{id:"ifremVal",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname&&5!=e.specClass&&6!=e.specClass&&7!=e.specClass?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium"},on:{click:e.showNewItemName}},[e._v("自动命名")]):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium"},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e()],1):e._e()})),1),e.showChildren?a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("子项目列表")])]):e._e(),e.showChildren?a("el-table",{staticStyle:{width:"100%",heigth:"auto"},attrs:{data:e.childrenShowData,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.childrenLable,(function(t,l){return 1==t.showType&&"itemCont"!=t.colDname&&"questionCode"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName}}):"itemCont"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.itemCont?[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.itemCont))]),a("p",[e._v(e._s(e.formatStr(t.row.itemCont)))])])]:void 0}}],null,!0)}):"questionCode"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.questionCode?[t.row.questionCode.length<20?a("p",[e._v(" "+e._s(t.row.questionCode)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.questionCode))]),a("p",[e._v(e._s(e.formatStr(t.row.questionCode)))])])]:void 0}}],null,!0)}):e._e()}))],2):e._e()],1),a("div",{staticClass:"save_btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveItem("saveForm")}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancle}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resert}},[e._v("重置")])],1),a("el-dialog",{staticClass:"bmiframe",attrs:{visible:e.newItemName,"close-on-click-modal":!1,width:"1000px","custom-class":"cus-dialog","modal-append-to-body":""},on:{"update:visible":function(t){e.newItemName=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("生成项目名称")])])]),a("iframe",{attrs:{name:"name-iframe",id:"name-iframe",src:e.getNameUrl,frameborder:"0",width:"100%",height:"750",scrolling:"none"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getBM}},[e._v("获取项目名称")])],1)],2),a("el-dialog",{staticClass:"question_dialog",attrs:{width:"70%",title:e.questionTitle,"close-on-click-modal":!1,visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"btns"},[a("el-input",{staticClass:"proname",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.probName,callback:function(t){e.probName=t},expression:"probName"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getChildTableList}},[e._v("检索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.questionShowData,"max-height":"350px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleQuestionSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._l(e.questionLabelList,(function(t,l){return"createDate"!=t.colDname&&"isCancel"!=t.colDname&&"probDesc"!=t.colDname&&"probRemark"!=t.colDname&&"dmdDesc"!=t.colDname&&"dmdRemark"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"probDesc"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probDesc?[t.row.probDesc.length<10?a("p",[e._v(" "+e._s(t.row.probDesc)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.probDesc)))])])]:void 0}}],null,!0)}):"probRemark"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probRemark?[t.row.probRemark.length<10?a("p",[e._v(" "+e._s(t.row.probRemark)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.probRemark)))])])]:void 0}}],null,!0)}):"dmdDesc"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdDesc)))])])]}}])}):"dmdRemark"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdRemark)))])])]}}])}):"isCancel"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName}}):"createDate"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.dateFormat,prop:t.colDname,label:t.dispName}}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":5,layout:"total, prev, pager, next, jumper",total:e.questionListTotalNum},on:{"current-change":e.handleCurrentWTChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleSubmitInnerTable}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitQuestioinCode}},[e._v("保 存")])],1)],1)],1)])])},s=[],i=(a("99af"),a("4160"),a("a630"),a("c975"),a("a15b"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=a("7e1e"),u={data:function(){return{deptName:"",deptCodeT:"",deptArr:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},itemForm:{},itemInfo:{},getNameUrl:"/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?openType=1&appID=00&applyID=2",newItemName:!1,specClass:"",specClassName:"",tableData:[],tableLabel:{},dictMap:new Map,tempId:"",columnMap:new Map,title:"",totalLableArr:[],dialogLoading:!1,formLabelWidth:"140px",innerVisible:!1,questionTitle:"",questionLabelList:[],questionTableData:[],questionListTotalNum:0,questionDictMap:new Map,questionShowData:[],selectedQuestionCode:[],currentPage:1,loading:!1,probName:"",specEnabled:!0,parentItemId:null,itemClassArr:[],itemClassArr1:[],itemClassArr2:[],itemClassArr3:[],itemClassShow3:!1,itemClassShow2:!1,itemClassShow1:!1,childTableData:[],childrenShowData:[],childrenLable:{},childrenDictMap:new Map,childrenColumnMap:new Map,showChildren:!1}},created:function(){this.tableHeight=window.innerHeight-320+"px"},mounted:function(){var e=this;window.onresize=function(){return function(){e.tableHeight=window.innerHeight-320+"px"}()},this.specClass=this.$route.query.specClass,this.specClassName=this.$route.query.specClassName,this.tempItemId=this.$route.query.itemId,this.oldPath=this.$route.query.oldPath,this.parentItemId=this.$route.query.parentItemId,null==this.tempItemId?this.title=this.specClassName+"新增":this.title=this.specClassName+"修改",this.getLabel()},computed:Object(o["a"])({},Object(n["c"])({addItemParams:function(e){return e.itemAdd.addItemParams}})),components:{SelectTree:r["a"]},methods:{getValue1:function(e){this.setValue("conDept",e),console.log(this.valueId)},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},clearValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e){l.value="";break}}},changeItemClass1:function(){var e=this,t={speciality:e.specClass};Object(c["ob"])(t).then((function(t){if(t.data.successful)if(e.itemClassArr=t.data.resultValue[0].idLevel2,e.itemClassArr1=t.data.resultValue[0].idLevel2,0==e.itemClassArr1.length)e.itemClassShow1=!0;else if(e.itemClassShow1=!1,null!=e.tempItemId){var a=e.getValue("itemClass1"),l=e.getValue("itemClass2");e.changeItemClass2(a,!0),e.changeItemClass3(l,!0)}}))},changeItemClass2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("itemClass2"),a.clearValue("itemClass3"));for(var l=0;l<a.itemClassArr.length;l++){var s=a.itemClassArr[l];if(s.typeCode==e){a.itemClassArr2=s.idLevel3,0==a.itemClassArr2.length?(a.itemClassShow2=!0,a.itemClassShow3=!0):(a.itemClassShow2=!1,a.itemClassShow3=!1);break}}},changeItemClass3:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||a.clearValue("itemClass3");for(var l=0;l<a.itemClassArr.length;l++)for(var s=a.itemClassArr[l],i=s.idLevel3,o=0;o<i.length;o++){var n=i[o];n.typeCode==e&&(a.itemClassArr3=n.idLevel4,0==a.itemClassArr3.length?a.itemClassShow3=!0:a.itemClassShow3=!1)}},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},getShowDateTable:function(e,t){for(var a=[],l=0;l<e.length;l++){for(var s=e[l],o=new Object,n=0,r=Object.entries(s);n<r.length;n++){var c=Object(i["a"])(r[n],2),u=c[0],d=c[1];if(t.has(u))for(var m=t.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(o[u]=h.codeName)}else o[u]=d}a.push(o)}return a},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDay();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},resert:function(){var e=this;if(null!=e.tempItemId)Object(c["Gb"])(e.tempItemId).then((function(t){if(t.data.successful){var a=t.data.resultValue.items[0];for(var l in e.tableLabel)null==a[e.tableLabel[l].colDname]?e.tableLabel[l].value="":e.tableLabel[l].value=a[e.tableLabel[l].colDname]+""}})).catch((function(e){console.log(e)}));else for(var t in e.tableLabel)e.tableLabel[t].value=""},saveItem:function(e){var t=this,a=this;a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={},s="",i="";for(var o in null!=a.tempItemId?(l["itemId"]=a.itemId,s="修改成功",i="修改失败"):null!=a.parentItemId?(l["parentId"]=a.parentItemId,s="新增下级成功",i="新增下级失败"):(s="添加成功",i="添加失败"),a.tableLabel){var n=a.tableLabel[o];l[n.colDname]=n.value}null==a.tempItemId&&""==l["itemName"]&&(l["itemName"]=document.getElementById("ifremVal").value),l["speciality"]=a.specClass,null!=a.tempItemId&&(l["itemId"]=a.tempItemId),a.dialogLoading=!0,null==a.parentItemId?Object(c["id"])(l).then((function(e){a.dialogLoading=!1,console.log(e),e.data.successful?(t.$message({showClose:!0,message:s,type:"success"}),a.itemId="",a.$router.push({path:a.oldPath})):t.$message({showClose:!0,message:i,type:"error"}),a.loading=!1})):Object(c["jd"])(l).then((function(e){a.dialogLoading=!1,console.log(e),e.data.successful?(t.$message({showClose:!0,message:s,type:"success"}),a.$router.push({path:a.oldPath})):t.$message({showClose:!0,message:i,type:"error"}),a.loading=!1}))}))},cancle:function(){var e=this;this.$router.push({path:e.oldPath})},handleCurrentWTChange:function(e){console.log("当前页: ".concat(e));var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if("itemSource"==l.colDname){l.value.length>0?(t.innerVisible=!0,"1"==l.value?(t.questionTitle="问题库列表",t.getXQList(e,5)):(t.questionTitle="需求库列表",t.getWTList(e,5))):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getLabel:function(){var e=this,t=this;if(t.dialogLoading=!0,null!=t.tempItemId){var a={index:1,pageSize:10};a.speciality=t.specClass,a.itemId=t.tempItemId,Object(c["Tc"])(a).then((function(a){if(t.dialogLoading=!1,a.data.successful){var l=a.data.resultValue.tableLable,s=a.data.resultValue.tableData[0];for(var i in t.tableLabel=t.getLabelList(l),t.dictMap=t.getDictArr(l),t.tableLabel)null==s[t.tableLabel[i].colDname]?(t.tableLabel[i].value="","number"==t.tableLabel[i].dispType&&(t.tableLabel[i].value=0)):"DATE"==t.tableLabel[i].dispType?t.tableLabel[i].value=t.formartDate(s[t.tableLabel[i].colDname]):t.tableLabel[i].value=s[t.tableLabel[i].colDname]+"";t.changeItemClass1();var o=a.data.resultValue.tableDataList;e.childrenLable=l,"undefined"==typeof o||0==o.length?t.showChildren=!1:(t.showChildren=!0,t.childrenDictMap=t.getDictArr(t.childrenLable),t.childrenColumnMap=t.getColumnTypeArr(t.childrenLable),t.childrenShowData=t.getShowDateTable(o,t.childrenDictMap,t.childrenColumnMap));var n=t.getValue("conDept");""!=n&&(t.deptCodeT=n,Object(c["rb"])({deptCode:n}).then((function(a){if(a.data.successful){var l=a.data.resultValue;t.deptName=l}else e.$message.error("查询部门id失败")}))),t.getTreeDeptCode()}}))}else{var l={};l.speciality=t.specClass,Object(c["Yc"])(l).then((function(e){if(t.dialogLoading=!1,e.data.successful){var a=e.data.resultValue.tableLable;for(var l in t.tableLabel=t.getLabelList(a),t.dictMap=t.getDictArr(a),t.changeItemClass1(),t.tableLabel)"number"==t.tableLabel[l].dispType&&(t.tableLabel[l].value=0)}else t.$message.error("查询配置新增信息失败");t.getTreeDeptCode()}))}},cancleSubmitInnerTable:function(){var e=this;e.probName="",e.innerVisible=!1},getChildTableList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?(e.innerVisible=!0,"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5)):(e.questionTitle="需求库列表",e.getWTList(1,5))):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e)return l.value}return""},setValue:function(e,t){var a=this;for(var l in a.tableLabel){var s=a.tableLabel[l];s.colDname==e&&(s.value=t)}},showNewItemName:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),t.B08=e.getValue("prjProp"),Object(c["I"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.setValue("itemName",a)}else t.resultHit}))},showNewItemNameJsp:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),6!=t.speciality&&(t.B08=e.getValue("prjProp")),e.getNameUrl="/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?appID=00&applyID=123123123123&iscUserId=&loginName=sx_test&operType=0",Object(c["Z"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.getNameUrl+=a,e.getNameUrl=encodeURI(encodeURI(e.getNameUrl)),e.newItemName=!0}else t.resultHit}))},getBM:function(){var e=this,t=document.getElementById("name-iframe"),a=t.contentWindow||t.contentDocument,l=a.document.getElementById("prjName").value;if(l)for(var s in document.getElementById("ifremVal").value=l,e.tableLabel)"itemName"==e.tableLabel[s].colDname&&(e.tableLabel[s].value=l);else this.$message({showClose:!0,message:"请先生成项目名称",type:"error"});window.frames["name-iframe"].pageForm.btnSaveName_onclick(window.event,(function(){l?e.newItemName=!1:this.$message({showClose:!0,message:"请先生成项目名称",type:"error"})}))},handleQuestionSelectionChange:function(e){var t=this,a=1;for(var l in t.tableLabel){var s=t.tableLabel[l];if("itemSource"==s.colDname){a="1"==s.value?1:2;break}}t.selectedQuestionCode=[],e.forEach((function(e){1==a?t.selectedQuestionCode.push(e.probCode):t.selectedQuestionCode.push(e.dmdCode)}))},submitQuestioinCode:function(){var e=this;if(e.probName="",e.selectedQuestionCode.length>0){for(var t in e.tableLabel){var a=e.tableLabel[t];if("questionCode"==a.colDname){if(a.value.length>0){var l=a.value.split(",");e.selectedQuestionCode=e.selectedQuestionCode.concat(l)}var s=new Set(e.selectedQuestionCode),i=Array.from(s),o=i.join(",");a.value=o;break}}e.selectedQuestionCode=[],e.innerVisible=!1}else e.$message({showClose:!0,message:"请选择问题或需求",type:"warning"})},getXQList:function(e,t){var a=this;a.loading=!0,Object(c["Vb"])({pageIndex:e,pageSize:t,probName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},getWTList:function(e,t){var a=this;a.loading=!0,Object(c["Tb"])({pageIndex:e,pageSize:t,dmdName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},showQuestionList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5),e.innerVisible=!0):"2"==a.value?(e.questionTitle="需求库列表",e.getWTList(1,5),e.innerVisible=!0):this.$message({showClose:!0,message:"项目来源为其他时,不需要选择问题或需求列表",type:"warning"}):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},makeItemName:function(){var e=this;e.newItemName=!1,console.log("生成项目名:"+e.newItemNameNo+";"+e.newItemNameTime)},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];null!=s.codeList&&("9"!=t.specClass&&"11"!=t.specClass||"itemClass"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"3"!=t.codeValue&&e.push(t)})),s.codeList=e}(),null!=t.parentItemId&&"itemType"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"1"!=t.codeValue&&e.push(t)})),s.codeList=e}(),a.set(s.colDname,s.codeList))}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},isNumber:function(e,t,a){var l=/^\d+(\.\d+)?$/;l.test(t)?t.toString().indexOf(".")>0&&t.toString().split(".")[1].length>2?a(new Error("数字只精确到小数点后两位")):a():a(new Error("只能输入数字且不能为负值"))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e){var s=e[l];if(null!=t.tempItemId||"ghYear"!=s.colDname&&"ghInvest"!=s.colDname){a[l]=e[l];var i=[];if(1==s.isMandatory){var o=new Object;o.required=!0,o.message=s.dispName+"不能为空","dropdown"==s.dispType?o.trigger="change":o.trigger="blur",i.push(o)}if("number"==s.dispType){var n=new Object;n.validator=t.isNumber,n.trigger="blur",i.push(n)}a[l].rule=i}}return a}}},d=u,m=(a("a27a"),a("a187"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,"4e31101d",null);t["default"]=p.exports},"735f":function(e,t,a){"use strict";a.r(t);var l,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"compile-tab",attrs:{label:"项目列表",name:"first"}},[a("compile")],1),a("el-tab-pane",{attrs:{label:"已提交",name:"second"}}),a("el-tab-pane",{attrs:{label:"已退回",name:"third"}})],1),a("querys",{directives:[{name:"show",rawName:"v-show",value:e.changeTab,expression:"changeTab"}],attrs:{showSwitch:!0,tabHeight:e.tHeight},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("年份")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年份"},on:{change:e.selectItem},model:{value:e.param.ghYear,callback:function(t){e.$set(e.param,"ghYear",t)},expression:"param.ghYear"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.voltLevel,callback:function(t){e.$set(e.param,"voltLevel",t)},expression:"param.voltLevel"}},e._l(e.selectParamDict.get("voltLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目来源")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemSource,callback:function(t){e.$set(e.param,"itemSource",t)},expression:"param.itemSource"}},e._l(e.selectParamDict.get("itemSource"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.changeTab,expression:"changeTab"}],staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"planeTable",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"selection",selectable:e.isChildren,width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left",label:t.dispName,"min-width":"220","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()})),0==e.param.isPassed?a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isChild?void 0:["7"==t.row.itemPhaseDetT||"14"==t.row.itemPhaseDetT||"17"==t.row.itemPhaseDetT||"19"==t.row.itemPhaseDetT||"24"==t.row.itemPhaseDetT?a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v("调整可研")]):e._e(),"15"==t.row.itemPhaseDetT||"20"==t.row.itemPhaseDetT?a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v("上传正式可研评审文件")]):e._e()]}}],null,!0)}):e._e()],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),a("el-dialog",{attrs:{visible:e.showCommit,title:"上传正式评审文件","close-on-click-modal":!1,"custom-class":"cus-dialog","modal-append-to-body":!1},on:{"update:visible":function(t){e.showCommit=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,"label-position":"right"}},[a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"项目可研评审文号"}},[a("el-input",{attrs:{placeholder:"项目可研评审文号"},model:{value:e.auditFileNo,callback:function(t){e.auditFileNo=t},expression:"auditFileNo"}})],1),a("el-form-item",[a("el-upload",{ref:"uploadFileSubmit",staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjCmStItem/uploadNormalFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadSuccess2,"on-change":e.changeFile,"on-remove":e.handleRemove,data:e.finalFileData,multiple:!1,"show-file-list":!0,"auto-upload":!1,accept:".CEB,.PDF"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showCommit=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.fileLoading},on:{click:e.submitFinalFile}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.showCommitPlan,"close-on-click-modal":!1,"custom-class":"cus-dialog"},on:{"update:visible":function(t){e.showCommitPlan=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("提交评审计划")])])]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"lableFormQuestion1",attrs:{model:e.planLabel,"label-position":"right"}},e._l(e.planLabel,(function(t,l){return a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType?a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.planDictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"test"==t.dispType&&"questionCode"!=t.colDname?a("el-input",{staticClass:"diy",attrs:{type:"textarea",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"string"==t.dispType||null==t.dispType?a("el-input",{attrs:{autocomplete:"off",size:"mini",placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1)})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showCommitPlan=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.planLoading},on:{click:function(t){return e.submitPlan()}}},[e._v("保 存")])],1)],2),a("el-dialog",{attrs:{visible:e.itemShow,"close-on-click-modal":!1,"custom-class":"cus-dialog"},on:{"update:visible":function(t){e.itemShow=t}}},[a("item-dialog",{attrs:{itemId:e.tempItemId}})],1),a("el-dialog",{attrs:{visible:e.stepShow,"close-on-click-modal":!1,width:"80%","custom-class":"cus-dialog"},on:{"update:visible":function(t){e.stepShow=t}}},[a("el-steps",{attrs:{"align-center":""}},e._l(e.stepArr,(function(e,t){return a("el-step",{key:t,attrs:{title:e.title,status:e.status}})})),1)],1),a("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.reportShow,"close-on-click-modal":!1,"custom-class":"cus-dialog","v-loading":e.fileUploadLoading},on:{"update:visible":function(t){e.reportShow=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("编制可研")])])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!1,model:e.formInline,"label-position":"right"}},[a("el-form-item",{attrs:{label:e.kyTitle}}),a("el-form-item",[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.GLOBALURL+"/prjCmFeaPrep/uploadMultReport",data:e.uploadReportData,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,headers:{userId:e.userId,token:e.token},"before-upload":e.beforeUploadKy,accept:".doc,docx",multiple:"",limit:1,"file-list":e.fileList,"show-file-list":!0,"auto-upload":!0,"on-success":e.uploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1),a("el-form-item",[a("div",{staticClass:"diy2"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.deleteReport}},[e._v("删除可研")]),a("el-button",{attrs:{type:"primary",size:"small"}},["上传可研报告"==e.kyTitle?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=4&codeValue="+e.itemSpeciality+"&token="+e.token}},[e._v("导出可研模版")]):e._e(),"上传项目建议书"==e.kyTitle?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=5&codeValue="+e.specClass+"&token="+e.token}},[e._v("导出可研模版")]):e._e()])],1)]),"1"==e.kyShowDialogType?a("el-form-item",[a("div",{staticStyle:{"font-weight":"600"}},[a("span",[e._v("评审计划审查意见")])]),""!=e.rejectInfo.fileId&&void 0!=e.rejectInfo.fileId?a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportReport?feaAuditid="+e.rejectInfo.fileId+"&toekn="+e.token}},[e._v("评审文件")]):e._e()]):e._e(),"2"==e.kyShowDialogType?a("el-form-item",[a("div",{staticStyle:{"font-weight":"600"}},[a("span",[e._v("总体评审意见")])]),""!=e.rejectInfo.fileId&&void 0!=e.rejectInfo.fileId?a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportReport?feaAuditid="+e.rejectInfo.fileId+"&token="+e.token}},[e._v("评审文件")]):e._e()]):e._e(),a("el-form-item",[a("el-input",{staticClass:"diy",attrs:{type:"textarea",disabled:""},model:{value:e.rejectInfo.info,callback:function(t){e.$set(e.rejectInfo,"info",t)},expression:"rejectInfo.info"}})],1)],1),a("el-row"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancalSubmitFeasibility}},[e._v("取 消")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitBtn,expression:"submitBtn"}],attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("提 交")])],1)],2)],1)},i=[],o=(a("99af"),a("4de4"),a("4160"),a("c975"),a("b0c0"),a("4ec9"),a("4fad"),a("b64b"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("ade3")),n=a("3835"),r=a("5530"),c=a("2f62"),u=a("a960"),d=a("c2b4"),m=a("2670"),p=a("7e1e"),h=a("2bb5"),f=a("73fc"),g=a("eb5a"),b=a("f36f"),v={name:"questions",data:function(){return{fileTypeList:[],fileType:"",planLoading:!1,fileLoading:!1,timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,changeTab:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],tHeight:"",showQuery:!1,isShowQuery:!1,checkList:["项目1"],radio:1,radiob:"1",DialogAdjustVisible:!1,DialogPackagVisible:!1,newDialogFormVisible:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},auditFileNo:"",options:[],value:"",formLabelWidth:"140px",input:"",lableList:[{value:""}],param:{deptCode:"",pageIndex:1,itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:"",isPassed:"0"},insertParam:Object,dictMap:new Map,selectParamDict:new Map,DialogTitle:"",itemId:"",formInfo:Object,tableData:[],tableLabel:[],tableDataShow:[],tzkeVisible:!1,formInline:{user:""},tzkeVisible1:!1,itemShow:!1,itemLabel:{},itemMap:new Map,stepShow:!1,activeStep:0,stepArr:[],reportShow:!1,fileList:[],uploadReportItemId:"",uploadReportData:{itemId:"",itemType:1},showCommit:!1,CommitfileList:[],feaAuditid:"",uploadCommitData:{feaAuditid:""},showCommitPlan:!1,pleanTableLabel:[],planLabel:{},tempPlaneItemId:"",planDictMap:new Map,columnTypeMap:new Map,isShowFilter:!1,activeName:"first",tableHeight:"",tableHeightTab:"",tempItemId:"",finalFileData:{},rejectInfo:{info:"",fileId:""},fileUploadLoading:!1,kyShowDialogType:"",itemSpeciality:"",userSpecialityArr:[],kyTitle:"",userId:"",reportFileId:"",reportFileName:"",submitBtn:!1,token:""}},components:{"item-dialog":h["default"],querys:f["a"],SelectTree:u["a"],ItemAddCom:d["default"],Compile:m["default"]},created:function(){this.tableHeight=window.innerHeight-240,this.tHeight=window.innerHeight-240},mounted:function(){this.getItemLabelSearch(),this.getSpecialityIds(),this.getTable(1,20),this.getItemLabel(),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},computed:Object(r["a"])({},Object(c["b"])([])),watch:{deptCode:function(){null!=this.deptCode&&""!=this.deptCode?this.param.deptCode=this.deptCode:this.param.deptCode="",this.getTable(this.currentPage,this.currentNum)}},methods:(l={changeFile:function(e){this.fileType=e.name.split(".")[1],this.fileTypeList.push(this.fileType),console.log(this.fileTypeList)},handleRemove:function(e,t){this.fileTypeList=[];for(var a=0;a<t.length;a++){var l="";l=t[a].name.split(".")[1],this.fileTypeList.push(l)}console.log(this.fileTypeList)},getValue:function(e){this.deptCode=e},tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(p["nb"])(s).then((function(e){if(e.data.successful){var t=e.data.resultValue;t.forEach((function(e){e.isChild=!0}));var s=l.getShowDateTable(t);a(s)}}))},isChildren:function(e){return!e.isChild},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getItemLabelSearch:function(){var e=this;Object(p["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.$forceUpdate()}}))},getTreeDeptCode:function(){var e=this;Object(p["jc"])().then((function(t){var a=t.data.resultValue;Object(p["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},uploadSuccess2:function(e){var t=this;if(t.showCommit=!1,t.fileLoading=!1,e.successful){t.$message.success("上传成功"),t.getTable(t.currentPage,t.currentNum);var a=[],l={};l.content=e.resultValue.itemName+"项目，已经上传正式评审文件，评审文号 "+e.resultValue.auditFileNo,l.noticeUser=e.resultValue.createor,a.push(l),Object(b["g"])(a).then((function(e){console.log(e)}));var s=t.finalFileData.itemId;if("01"==t.finalFileData.itemLevel)console.log("调用国电通编码器"),Object(p["H"])({itemId:s}).then((function(e){if(e.data.successful){var a=e.data.resultValue;console.log(a),Object(g["a"])(a).then((function(e){console.log(e);var a=e.data.status;if(-1!=a.indexOf("200"))t.$message.error("调用编码器失败,权限校验失败");else if(-1!=a.indexOf("100")){var l=e.data.applyResult,i=l[0];if(-1!=i.status.indexOf("100")){var o=i.baseCode;Object(p["Vd"])({itemId:s,code:o}).then((function(e){e.data.successful&&t.$message.success("编码成功")}))}else if(-1!=i.status.indexOf("200")){var n="";for(var r in i.applyResult)n=i.applyResult[r];t.$message.error(n)}}}))}}));else if("02"==t.finalFileData.itemLevel){var i={parentItemId:s};Object(p["nb"])(i).then((function(e){if(e.data.successful)for(var a=e.data.resultValue,l=function(e){var l=a[e];console.log("调用国电通编码器"),Object(p["H"])({itemId:l.itemId}).then((function(e){if(e.data.successful){var a=e.data.resultValue;console.log(a),Object(g["a"])(a).then((function(e){console.log(e);var a=e.data.status;if(-1!=a.indexOf("200"))console.log("调用编码器失败,权限校验失败");else if(-1!=a.indexOf("100")){var s=e.data.applyResult,i=s[0];if(-1!=i.status.indexOf("100")){var o=i.baseCode;Object(p["Vd"])({itemId:l.itemId,code:o}).then((function(e){e.data.successful&&t.$message.success("编码成功")}))}else if(-1!=i.status.indexOf("200")){var n="";for(var r in i.applyResult)n=i.applyResult[r];console.log(n)}}}))}}))},s=0;s<a.length;s++)l(s)}))}}else t.$message.error("上传失败")},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},getSpecialityIds:function(){var e=this;Object(p["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},resetItem:function(){var e=this;e.param={deptCode:"",index:1,itemName:"",itemType:"",pageSize:20,speciality:"",voltLevel:"",isPassed:"0",ghYear:""},this.getTable(1,20)},beforeUploadKy:function(){this.fileUploadLoading=!0},submitFinalFile:function(){if(!this.auditFileNo)return this.$message({showClose:!0,message:"请输入项目可研评审文号",type:"warning"}),!1;if(""==this.fileTypeList||void 0==this.fileTypeList)return this.$message({showClose:!0,message:"请上传格式为ceb或者pdf的文件",type:"warning"}),!1;for(var e=0;e<this.fileTypeList.length;e++)if("ceb"!=this.fileTypeList[e]&&"pdf"!=this.fileTypeList[e]&&"CEB"!=this.fileTypeList[e]&&"PDF"!=this.fileTypeList[e])return this.$message({showClose:!0,message:"只能上传格式为ceb或者pdf的文件",type:"warning"}),!1;this.finalFileData.auditFileNo=this.auditFileNo,this.$refs.uploadFileSubmit.submit()},downloadAdviceFile:function(){var e=this;if(""==e.rejectInfo.fileId)return this.$message({showClose:!0,message:"没有附件可以下载",type:"warning"}),!1;Object(p["U"])({feaAuditid:e.rejectInfo.fileId}).then((function(t){var a="评审意见信息.doc";e.loading=!1,console.log("download res",t);var l=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),s=document.createElement("a"),i=window.URL.createObjectURL(l);s.href=i,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}))},submitAuditFile:function(){},handleClick:function(e,t){console.log(e.name),"first"==e.name?this.changeTab=!1:"second"==e.name?(this.changeTab=!0,this.param.isPassed=1):(this.param.isPassed=0,this.changeTab=!0),this.getTable(1,20)},switchFilter:function(){this.isShowFilter=!this.isShowFilter},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},submitPlan:function(){var e=this,t=this,a={items:[]},l={};Object.keys(t.planLabel).forEach((function(e){console.log(e,t.planLabel[e]),l[t.planLabel[e].colDname]=t.planLabel[e].value})),l["itemId"]=t.tempItemId,l["auditPlanStatus"]=1,a.items.push(l),t.dialogFormVisible=!1,t.planLoading=!0,Object(p["Jd"])(a).then((function(a){console.log(a),t.planLoading=!1,a.data.successful?(e.$message({showClose:!0,message:"提交成功",type:"success"}),t.getTable(t.currentPage,t.currentNum),e.$refs.planeTable.clearSelection(),t.showCommitPlan=!1):e.$message({showClose:!0,message:"提交失败",type:"error"})}))},uploadCommitFile:function(){this.$refs.uploadCommit.submit()},showDialog:function(e){var t=this;if("7"==e.itemPhaseDetT||"14"==e.itemPhaseDetT||"17"==e.itemPhaseDetT||"19"==e.itemPhaseDetT||"24"==e.itemPhaseDetT){"3"==e.itemPhaseDetT?t.kyShowDialogType="1":t.kyShowDialogType="2","3"==e.itemClassT?t.kyTitle="上传项目建议书":t.kyTitle="上传可研报告",t.uploadReportItemId=e.itemId,t.uploadReportData.itemId=e.itemId,t.loading=!0,t.fileList=[],t.itemSpeciality=e.specialityT,Object(p["xd"])({itemId:e.itemId}).then((function(e){if(console.log("response",e),t.loading=!1,e.data.successful){var a=e.data.resultValue.fileName;if(a.length>0){var l={};l.name=a,l.url="",t.fileList.push(l)}}})).catch((function(e){console.log(e)}));var a={};a.itemPhaseDet=e.itemPhaseDetT,a.itemId=e.itemId,Object(p["bb"])(a).then((function(e){if(console.log(e),e.data.successful){var a=e.data.resultValue;t.rejectInfo.info=a.auditAdvice,t.rejectInfo.fileId=a.auditFileId}})),t.reportShow=!0}else"15"!=e.itemPhaseDetT&&"20"!=e.itemPhaseDetT||(t.showCommit=!0,t.auditFileNo="",t.fileTypeList=[],t.fileType="",t.finalFileData={itemId:e.itemId,itemPhaseDet:e.itemPhaseDetT,auditFileNo:t.auditFileNo,itemLevel:e.itemLevel})},beforeUploadReport:function(e){if(e.name){var t=e.name.split(".")[1];return"doc"==t||"docx"==t||(this.$message.warning("文件格式不正确,只能上传doc,docx文件!"),!1)}return this.$message.warning("文件格式不正确,只能上传doc,docx文件!"),!1},uploadSuccess:function(e,t,a){var l=this;this.fileUploadLoading=!1,e.successful&&(l.reportFileId=e.resultValue.fileId,l.reportFileName=e.resultValue.fileName,l.fileList=a,l.getTable(l.currentPage,l.currentNum))},downloadReport:function(){var e=this;e.loading=!0,Object(p["J"])({itemId:e.uploadReportItemId}).then((function(t){var a=e.fileList[0].name;e.loading=!1,console.log("download res",t);var l=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),s=document.createElement("a"),i=window.URL.createObjectURL(l);s.href=i,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i)}))},deleteReport:function(){var e=this,t=this,a=new FormData;if(0==t.fileList.length)return this.$message({showClose:!0,message:"可研报告已删除",type:"warning"}),!1;t.$confirm("确认删除可研报告？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.append("itemId",t.uploadReportItemId),Object(p["F"])(a).then((function(a){if(a.data.successful)t.fileList=[],e.$message({showClose:!0,message:"删除可研报告成功",type:"success"}),t.getTable(t.currentPage,t.currentNum);else{var l=a.data.resultHint;e.$message({showClose:!0,message:l,dangerouslyUseHTMLString:!0,type:"error"})}t.loading=!1}))}))},exportReportTitleQ:function(){var e=this;e.loading=!0,Object(p["V"])().then((function(t){e.loading=!1,e.downloadCeb(t.data,"可研模版信息.ceb")}))},submitUpload:function(){var e=this,t=this,a={};a.itemId=t.uploadReportItemId,a.repName=t.reportFileId,a.repId=t.reportFileId,t.submitBtn=!0,Object(p["Yd"])(a).then((function(a){if(t.submitBtn=!1,a.data.successful){var l=new FormData;l.append("itemIds",t.uploadReportItemId),Object(p["e"])(l).then((function(a){a.data.successful?(t.reportFileId="",t.reportFileName="",t.uploadReportItemId="",t.reportShow=!1,e.$message.success("保存可研报告成功"),t.getTable(t.currentPage,t.currentNum)):e.$message.error("保存可研报告失败")}))}else e.$message.error("保存可研报告失败")}))},cancalSubmitFeasibility:function(){var e=this;e.reportShow=!1,e.fileList=[],e.reportFileId="",e.reportFileName="",this.getTable(e.currentPage,e.currentNum)},showStep:function(e){var t=this;t.stepArr=[],Object(p["fc"])(e.itemId).then((function(e){console.log(e);var a=e.data.resultValue;a.forEach((function(e){var a={};a.title=e.stapName,0==e.isPassed?a.status="wait":1==e.isPassed?a.status="finish":2==e.isPassed?a.status="error":a.status="process",t.stepArr.push(a)})),t.stepShow=!0}))},getItemLabel:function(){var e=this;Object(p["Kb"])().then((function(t){if(console.log("response",t),t.data.successful){var a=t.data.resultValue.tableLable;e.itemMap=e.getDictArr(a),e.itemLabel=e.getLabelList(a)}}))},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.loading=!0,a.param.pageIndex=e,a.param.pageSize=t,a.param.filter="",a.param.filter="isPassed="+a.param.isPassed,0==a.param.isPassed?a.param.filter+="&itemPhaseDet=7,14,15,17,19,20,24":a.param.filter+="&itemPhaseDet=4,5,6,8,9,10,11,12,13,16,18,21";for(var l="",s=0,i=Object.entries(a.param);s<i.length;s++){var o=Object(n["a"])(i[s],2),r=o[0],c=o[1];"pageIndex"!=r&&"pageSize"!=r&&"itemPhaseDet"!=r&&"isPassed"!=r&&"filter"!=r&&""!=c&&(console.log(r+":"+c),l+="&"+r+"="+c)}a.param.filter+=l,Object(p["zd"])(a.param).then((function(e){console.log("response",e.data.resultValue),e.data.successful&&(a.totalNum=e.data.resultValue.totalNum,a.tableLabel=e.data.resultValue.tableLable,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMap=a.getColumnTypeArr(a.tableLabel),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData)),a.loading=!1,a.param.filter=""})).catch((function(e){console.log(e)}))},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];if(null!=s.codeList){if("speciality"==s.colDname){for(var i=[],o=0;o<s.codeList.length;o++)for(var n=0;n<t.userSpecialityArr.length;n++)s.codeList[o].codeValue==t.userSpecialityArr[n]&&i.push(s.codeList[o]);s.codeList=i}a.set(s.colDname,s.codeList)}}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getShowDateTable:function(e){for(var t=this,a=[],l=0;l<e.length;l++){for(var s=e[l],i=new Object,o=0,r=Object.entries(s);o<r.length;o++){var c=Object(n["a"])(r[o],2),u=c[0],d=c[1];if("itemPhaseDet"==u&&(i["itemPhaseDetT"]=d),"speciality"==u&&(i["specialityT"]=d),"itemClass"==u&&(i["itemClassT"]=d),t.dictMap.has(u))for(var m=t.dictMap.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(i[u]=h.codeName)}else if("DATE"==t.columnTypeMap.get(u)){i[u+"Rel"]=d;var f=t.formartDate(d);i[u]=f}else i[u]=d}a.push(i)}return a},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a}},Object(o["a"])(l,"handleRemove",(function(e,t){console.log(e,t)})),Object(o["a"])(l,"handlePreview",(function(e){console.log(e)})),Object(o["a"])(l,"handleExceed",(function(e,t){var a=this;e.length>1&&a.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件")),t[0]=e[0],a.fileList[0]=e[0],this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))})),Object(o["a"])(l,"beforeRemove",(function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))})),l)},w=v,y=(a("1748"),a("054d"),a("2877")),D=Object(y["a"])(w,s,i,!1,null,"60d94c36",null);t["default"]=D.exports},7397:function(e,t,a){"use strict";var l=a("7b10"),s=a.n(l);s.a},"73fc":function(e,t,a){"use strict";var l=function(){var e,t,a=this,l=a.$createElement,s=a._self._c||l;return s("div",{staticClass:"querys_box"},[a.showSwitch?s("div",{class:["switch_btn",(e={},e[a.open]=a.isShowQuery,e)],on:{click:a.switchQuerys}},[s("span",{staticClass:"iconfont"},[a._v("")])]):a._e(),s("div",{class:["querys",(t={},t[a.openQuery]=a.isShowQuery,t)]},[a._t("queryTabs")],2),s("div",{staticClass:"query_btns"},[a._t("queryBtns")],2)])},s=[],i=(a("c975"),a("a9e3"),a("ac1f"),a("466d"),{name:"querys",props:["showSwitch","tabHeight"],data:function(){return{openQuery:"open_query",open:"open",isShowQuery:!1}},mounted:function(){},methods:{switchQuerys:function(){this.isShowQuery=!this.isShowQuery;var e="";this.tabHeight?(e=this.tabHeight,console.log(e)):e=window.innerHeight-220,this.isShowQuery?(e-=42,console.log(e)):this.tabHeight?(console.log(this.tabHeight),e=this.tabHeight):e=window.innerHeight-220,this.$emit("changeQuery",this.isShowQuery,e)},viewportToPixels:function(e){var t=e.match(/([0-9\.]+)(vh|vw)/),a=Number(t[1]),l=window[["innerHeight","innerWidth"][["vh","vw"].indexOf(t[2])]];return l*(a/100)}}}),o=i,n=(a("9c4d"),a("2877")),r=Object(n["a"])(o,l,s,!1,null,"06ea9312",null);t["a"]=r.exports},7513:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":e.tableRowClassName,"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-form",{staticClass:"demo-form-inline reason-form",attrs:{model:e.form,"label-width":"10%"}},[a("el-form-item",{attrs:{label:"意见:"}},[a("el-input",{staticClass:"elinput reason",attrs:{type:"textarea",placeholder:""},model:{value:e.auditItemParam.auditAdvice,callback:function(t){e.$set(e.auditItemParam,"auditAdvice",t)},expression:"auditItemParam.auditAdvice"}})],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{on:{click:e.backWorkFlow}},[e._v("退回")]),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("同意")])],1)])],1)])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4160"),a("baa5"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){var e=this;return{showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:"",itemPhaseDet:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()<=a}},auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10)},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(m["e"])(t).then((function(t){if("0"==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:1,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:3},l=!1;"已提交立项申请"==e.auditItemParam.itemPhaseDet?(a.itemPhaseDet=3,l=!0):"可研编制已提交审批"==e.auditItemParam.itemPhaseDet&&(a.itemPhaseDet=26,l=!0),l&&Object(u["sd"])(a).then((function(t){if(e.loadingBtn1=!1,t.data.successful)e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}});else{var a=t.data.resultHint;e.$message.error(a)}}))}else e.$message.error(item.itemName+t.data.message)}))},backWorkFlow:function(){var e=this;this.dialogFormVisible=!1;var t={user:this.$route.query.iscUserId,currentActInstID:this.$route.query.activityInstID,destActDefID:"submit",rollBackStrategy:"path"};Object(m["b"])(t).then((function(t){if(0==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:2,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:0},l=!1;"已提交立项申请"==e.auditItemParam.itemPhaseDet?(a.itemPhaseDet=0,l=!0):"可研编制已提交审批"==e.auditItemParam.itemPhaseDet&&(a.itemPhaseDet=27,l=!0),l&&Object(u["sd"])(a).then((function(t){if(t.data.successful)e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}});else{var a=t.data.resultHint;e.$message.error(a)}}))}else e.$message.error(item.itemName+t.data.message)}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},getRowKeys:function(e){return e.itemId},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1==t.havePlan?"success-row":""},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},handleSelectionChange:function(e){},getTableWithTitle:function(e){var t=this,a=this;if(a.loading=!0,a.param.pageSize=e,a.param.itemPhaseDet="2",""==this.specClass){var l=a.$route.path;a.specClass=l.substr(l.lastIndexOf("/")+1,l.length)}a.param.speciality=a.specClass;var s={};s.speciality=a.specClass,Object(u["Wc"])(s).then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Ib"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemIds=t.itemId,a.auditItemParam.itemPhaseDet=t.itemPhaseDet;var l=[];null!=t&&(l.push(t),a.tableDataShow=l,a.totalNum=1)}}))}else t.$message.error("查询表头信息出错")}))},getTable:function(e){var t=this;t.loading=!0,t.param.pageSize=e,t.param.itemPhaseDet="2",Object(u["Rc"])(t.param).then((function(e){t.loading=!1,t.tableData=e.data.resultValue.prjStItemBaseList,t.totalNum=e.data.resultValue.total,t.tableDataShow=t.getShowDateTable(t.tableData,t.dictMap,t.columnTypeMapDict)}))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];if(null!=s.codeList){if("speciality"==s.colDname){for(var i=[],o=0;o<s.codeList.length;o++)for(var n=0;n<t.userSpecialityArr.length;n++)s.codeList[o].codeValue==t.userSpecialityArr[n]&&i.push(s.codeList[o]);s.codeList=i}a.set(s.colDname,s.codeList)}}return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p;"deptCode"==m&&(r["deptCode"]=p)}s.push(r)}return s}}},h=p,f=(a("a48e"),a("1904"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"79e3d0d0",null);t["default"]=g.exports},"758e":function(e,t,a){},"78d5":function(e,t,a){"use strict";var l=a("2be5"),s=a.n(l);s.a},"78d6":function(e,t,a){"use strict";var l=a("e132"),s=a.n(l);s.a},"7a14":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right"},[a("div",{staticClass:"right_container"},[a("h3",[a("span",[e._v("9条")]),e._v("待办工作")]),a("ul",[a("li",[e._v("待办工作1")]),a("li",[e._v("待办工作2")]),a("li",[e._v("待办工作3")]),a("li",[e._v("待办工作")]),a("li",[e._v("待办工作")]),a("li",[e._v("待办工作")])])]),a("div",{staticClass:"right_container"},[a("h3",[a("span",[e._v("9条")]),e._v("提醒")]),a("ul",[a("li",[e._v("问题销号提醒")]),a("li",[e._v("储备项目可研超时提醒")]),a("li",[e._v("储备项目出库提醒")]),a("li",[e._v("待办工作计划到期提醒")])])]),a("div",{staticClass:"right_container"},[a("h3",[a("span",[e._v("9条")]),e._v("审计日志")]),a("ul",[a("li",[e._v("审计日志1")]),a("li",[e._v("审计日志2")]),a("li",[e._v("审计日志3")]),a("li",[e._v("审计日志4")]),a("li",[e._v("审计日志5")]),a("li",[e._v("审计日志6")])])])])}],i={name:"right"},o=i,n=(a("a1a3"),a("2877")),r=Object(n["a"])(o,l,s,!1,null,null,null);t["default"]=r.exports},"7a66":function(e,t,a){},"7a79":function(e,t,a){"use strict";var l=a("fc4f"),s=a.n(l);s.a},"7abe":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"date_container"},[a("div",{staticClass:"date_item clearfix"},[a("span",{staticClass:"lable"},[e._v("日期")]),a("el-date-picker",{staticStyle:{width:"150px!important"},attrs:{clearable:!1,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",size:"small","picker-options":e.pickerOptionsStart,placeholder:"选择日期"},on:{change:function(t){return e.changeDate("start")}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),a("span",{staticClass:"lable"},[e._v("至")]),a("el-date-picker",{staticStyle:{width:"150px!important"},attrs:{clearable:!1,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,type:"date",size:"small",placeholder:"选择日期"},on:{change:function(t){return e.changeDate("end")}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)]),a("div",{staticClass:"statistical clearfix"},[a("div",{staticClass:"stat_item"},[a("span",{staticClass:"iconfont"},[e._v("")]),a("div",{staticClass:"stat_right"},[a("span",{staticClass:"title"},[e._v("项目储备")]),a("span",{staticClass:"numbers"},[e._v(e._s(e.statisticalNums.reserve.num)+" "),a("span",{staticClass:"unit"},[e._v("个")]),e._v(" "),a("span",{staticClass:"line"},[e._v("|")]),e._v(" "+e._s(e.statisticalNums.reserve.sum)+" "),a("span",{staticClass:"unit"},[e._v("万元")])])])]),a("div",{staticClass:"stat_item"},[a("span",{staticClass:"iconfont"},[e._v("")]),a("div",{staticClass:"stat_right"},[a("span",{staticClass:"title"},[e._v("已批复")]),a("span",{staticClass:"numbers"},[e._v(e._s(e.statisticalNums.isapproved.num)+" "),a("span",{staticClass:"unit"},[e._v("个")]),e._v(" "),a("span",{staticClass:"line"},[e._v("|")]),e._v(" "+e._s(e.statisticalNums.isapproved.sum)+" "),a("span",{staticClass:"unit"},[e._v("万元")])])])]),a("div",{staticClass:"stat_item"},[a("span",{staticClass:"iconfont"},[e._v("")]),a("div",{staticClass:"stat_right"},[a("span",{staticClass:"title"},[e._v("未批复")]),a("span",{staticClass:"numbers"},[e._v(e._s(e.statisticalNums.unapproved.num)+" "),a("span",{staticClass:"unit"},[e._v("个")]),e._v(" "),a("span",{staticClass:"line"},[e._v("|")]),e._v(" "+e._s(e.statisticalNums.unapproved.sum)+" "),a("span",{staticClass:"unit"},[e._v("万元")])])])])]),a("div",{staticClass:"home_main"},[a("div",{staticClass:"home_left"},[a("el-tabs",{staticClass:"home_tab",on:{"tab-click":e.clickLeftTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"0"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("总数")])]),a("el-tab-pane",{attrs:{name:"2"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("已批复")])]),a("el-tab-pane",{attrs:{name:"1"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("未批复")])])],1),a("div",{staticClass:"left_cont"},[a("div",{staticClass:"left_item"},[a("h3",{staticClass:"home_title"},[e._v("项目储备分析专业统计")]),a("div",{staticClass:"graphics"},e._l(e.graphicsData,(function(t,l){return a("div",{class:["graphics_item",{active:e.activeClass==l}],on:{click:function(a){return e.clickGraphics(t.speciality,t.specialityName,l)}}},[a("el-tooltip",{attrs:{placement:"bottom","popper-class":"graphics_tooltip","visible-arrow":!1}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("数量："+e._s(t.num)+"个"),a("br"),e._v("金额："+e._s(t.sum)+"万元")]),a("p",[e._v(e._s(t.specialityName))])]),a("span",{staticClass:"black"})],1)})),0),a("h3",{staticClass:"home_title"},[e._v("项目储备分析单位统计 - "+e._s(e.specialityStr))]),a("div",{staticClass:"chart_box",staticStyle:{height:"calc(50% - 50px)"}},[a("chart",{attrs:{option:e.option01}})],1)])])],1),a("div",{staticClass:"home_right"},[a("el-tabs",{staticClass:"home_tab home_tab_right",on:{"tab-click":e.clickRightTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{name:"1"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("单位")])]),a("el-tab-pane",{attrs:{name:"2"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("专项")])])],1),a("div",{staticClass:"right_cont"},[a("div",{staticClass:"right_item"},[a("div",{staticClass:"left_chart"},[a("h3",{staticClass:"home_title"},[e._v("储备进度完成率")]),a("div",{staticClass:"chart_box",staticStyle:{height:"calc(50% - 50px)"}},[a("chart",{attrs:{option:e.option02}})],1),a("h3",{staticClass:"home_title"},[e._v("储备项目批复统计")]),a("div",{staticClass:"chart_box",staticStyle:{height:"calc(50% - 50px)"}},[a("chart",{attrs:{option:e.option03}})],1)]),a("div",{staticClass:"right_chart"},[a("h3",{staticClass:"home_title"},[e._v("储备项目同比")]),a("div",{staticClass:"chart_box",staticStyle:{height:"calc(50% - 50px)"}},[a("chart",{attrs:{option:e.option04}})],1),a("h3",{staticClass:"home_title"},[e._v("储备项目来源统计")]),a("div",{staticClass:"chart_box",staticStyle:{height:"calc(50% - 50px)"}},[a("chart",{attrs:{option:e.option05}})],1)])])])],1)])])},s=[],i=(a("4160"),a("c975"),a("d81d"),a("b0c0"),a("159b"),a("5530")),o=a("7e1e"),n=a("2f62"),r=a("e9b1");a("3eba");a("94b1"),a("c037"),a("d28f"),a("007d"),a("627c");var c={name:"Dashboard",data:function(){return{speciality:"",pickerOptions:{disabledDate:this.disabledDate},pickerOptionsStart:{disabledDate:this.disabledDateStart},startDateSelect:"",endDateSelect:"",loading:!1,startDate:"",endDate:"",statisticalNums:{reserve:[156,15.78],isapproved:[156,15.78],unapproved:[156,15.78]},graphicsData:[],year:"",date:["05-22","06-22"],activeName:"0",activeTab:"1",option01:{},option02:{},option03:{},option04:{},option05:{},specialityStr:"全部",likeClass:!0}},computed:Object(i["a"])({},Object(n["b"])(["name"])),components:{chart:r["a"]},mounted:function(){var e=this.getFirstDayOfYear(new Date);this.startDate=e,this.endDate=this.timeFormat(new Date),console.log(this.startDate,this.endDate),this.setStat(),this.setSpeciality(),this.setComplete(),this.setProjectYoy(),this.setReply(),this.setProjectSource()},methods:{disabledDate:function(e){var t=this;return e<Date.parse(new Date(t.startDate))},disabledDateStart:function(e){var t=this;return e>Date.parse(new Date(t.endDate))},setProjectYoy:function(){var e=this;this.loading=!0,Object(o["Qc"])({startDate:this.startDate,endDate:this.endDate,type:this.activeTab}).then((function(t){e.loading=!1,t.data.successful&&(console.log(t),e.setOption04(t.data.resultValue.data))}))},setProjectSource:function(){var e=this;this.loading=!0,Object(o["Pc"])({startDate:this.startDate,endDate:this.endDate,type:this.activeTab}).then((function(t){e.loading=!1,t.data.successful&&(console.log(t),e.setOption05(t.data.resultValue))}))},setReply:function(){var e=this;this.loading=!0,Object(o["Oc"])({startDate:this.startDate,endDate:this.endDate,type:this.activeTab}).then((function(t){e.loading=!1,t.data.successful&&(console.log(t),e.setOption03(t.data.resultValue.data))}))},setComplete:function(){var e=this;this.loading=!0,Object(o["td"])({startDate:this.startDate,endDate:this.endDate,type:this.activeTab}).then((function(t){e.loading=!1,t.data.successful&&(console.log(t),e.setOption02(t.data.resultValue.data))}))},clickGraphics:function(e,t,a){var l=this;console.log(a),this.activeClass=a,this.loading=!0,this.specialityStr=t||"全部",this.speciality=e,Object(o["t"])({startDate:this.startDate,endDate:this.endDate,type:this.activeName,speciality:e}).then((function(e){l.loading=!1,e.data.successful&&(console.log(e),l.setOption01(e.data.resultValue))}))},clickLeftTab:function(e,t){console.log(e),console.log(this.activeName),this.setSpeciality()},clickRightTab:function(e,t){console.log(e),console.log(this.activeTab),this.setProjectYoy(),this.setComplete(),this.setProjectSource(),this.setReply()},changeDate:function(e){var t=new Date(this.startDate).getFullYear()==new Date(this.endDate).getFullYear();t?(this.setStat(),this.setSpeciality(),this.setProjectYoy(),this.setComplete(),this.setProjectSource(),this.setReply()):this.$message({showClose:!0,message:"日期不能跨年,请重新选择！"})},timeFormat:function(e){e&&"string"!==typeof e||this.error("参数异常，请检查...");var t=e.getFullYear(),a=e.getMonth()+1,l=e.getDate();return t+"-"+a+"-"+l},getFirstDayOfYear:function(e){return e.setDate(1),e.setMonth(0),this.timeFormat(e)},setOption05:function(e){var t=this,a=(e.coding,e.data),l=[],s=[],i=[],o=[],n=[];a.forEach((function(e,t){e.specialityName?n.push(e.specialityName):n.push(e.deptName);var a=[{itemSource:"01",num:0},{itemSource:"02",num:0},{itemSource:"03",num:0},{itemSource:"09",num:0}];if(e.data.length<3&&e.data.length){var r=e.data.map((function(e){return e.itemSource}));-1==r.indexOf("01")?e.data.push({itemSource:"01",num:0}):-1==r.indexOf("02")?e.data.push({itemSource:"02",num:0}):-1==r.indexOf("03")?e.data.push({itemSource:"03",num:0}):-1==r.indexOf("09")&&e.data.push({itemSource:"09",num:0})}else e.data.length||(e.data=a);e.data.forEach((function(e,t){"01"==e.itemSource?l.push(e.num):"02"==e.itemSource?s.push(e.num):"03"==e.itemSource?i.push(e.num):"09"==e.itemSource&&o.push(e.num)}))}));var r=Math.max.apply(Math,l),c=Math.max.apply(Math,s),u=Math.max.apply(Math,i),d=Math.max.apply(Math,o);isFinite(r)||(r=0),isFinite(c)||(c=0),isFinite(u)||(u=0),isFinite(d)||(d=0);var m=r+c+u+d;t.option05={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e,t,a){for(var l=e[0].name+"<br>",s=0,i=e.length;s<i;s++)l+=e[s].marker+e[s].seriesName+":"+e[s].value+"个",l+="<br>";return l}},dataZoom:[{type:"slider",show:!0,handleSize:2,height:"15px",bottom:0,showDetail:!1,showDataShadow:!1,startValue:0,endValue:9}],legend:{data:["问题库","需求库","规划","其他"]},grid:{left:"0",right:"4%",bottom:"20",top:"26",containLabel:!0},xAxis:{axisTick:{show:!1},type:"category",data:n,axisLabel:{show:!1,rotate:40,textStyle:{color:"#747474",fontSize:10}}},yAxis:{type:"value",nameTextStyle:{lineHeight:10},name:"(个)",nameGap:10,max:m,splitLine:{lineStyle:{type:"dashed"}},axisLabel:{textStyle:{color:"#999"}}},series:[{name:"问题库",type:"bar",stack:"总量",itemStyle:{normal:{color:"#3cc4c7"}},data:l},{name:"需求库",type:"bar",stack:"总量",itemStyle:{normal:{color:"#f4bd2c"}},data:s},{name:"规划",type:"bar",stack:"总量",itemStyle:{normal:{color:"#618bf8"}},data:i},{name:"其他",type:"bar",stack:"总量",itemStyle:{normal:{color:"#ff2f5b"}},data:o}]}},setOption04:function(e){var t=this,a=[],l=[],s=[];e.forEach((function(e,t){e.specialityName?a.push(e.specialityName):a.push(e.deptName),l.push(e.num),s.push(e.sum)}));var i,o=Math.max.apply(Math,l),n=Math.max.apply(Math,s);isFinite(o)||(o=0),isFinite(n)||(n=0),i=o>n?o:n,t.option04={dataZoom:[{type:"slider",show:!0,handleSize:2,height:"15px",bottom:0,showDetail:!1,showDataShadow:!1,startValue:0,endValue:9}],title:{text:"折线图堆叠",show:!1},tooltip:{trigger:"axis",formatter:function(e,t,a){for(var l=e[0].name+"<br>",s=0,i=e.length;s<i;s++)l+=e[s].marker+e[s].seriesName+":"+e[s].value+"%",l+="<br>";return l}},legend:{data:["数量","金额"],top:0,right:0},grid:{left:"0",right:"4%",bottom:"20",top:"26",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{axisTick:{show:!1},type:"category",boundaryGap:!1,axisLabel:{show:!1,rotate:40,textStyle:{color:"#747474",fontSize:10}},data:a},yAxis:{type:"value",max:i,axisLabel:{textStyle:{color:"#999"},formatter:"{value} %"},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"数量",type:"line",data:l,itemStyle:{normal:{color:"#35c0c8"}}},{name:"金额",type:"line",data:s,itemStyle:{normal:{color:"#f4bd2c"}}}]}},computedPosition:function(e,t){return t>=10?this.end=e<=10?35:100-Math.floor(35/e*100):100},setOption03:function(e){var t=this,a=[],l=[],s=[];e.forEach((function(e,t){e.specialityName?a.push(e.specialityName):a.push(e.deptName);var i=[{status:"1",num:0},{status:"0",num:0}];if(e.data.length<2&&e.data.length){var o=e.data.map((function(e){return e.status}));-1==o.indexOf("0")?e.data.push({status:"0",num:0}):-1==o.indexOf("1")&&e.data.push({status:"1",num:0})}else e.data.length||(e.data=i);console.log(e.data),e.data.forEach((function(e,t){"0"==e.status?s.push(e.num):"1"==e.status&&l.push(e.num)}))}));var i=Math.max.apply(Math,l),o=Math.max.apply(Math,s);isFinite(i)||(i=0),isFinite(o)||(o=0);var n=i+o;console.log("consolemaxmax",n),t.option03={dataZoom:[{type:"slider",show:!0,handleSize:2,height:"15px",bottom:0,showDetail:!1,showDataShadow:!1,startValue:0,endValue:9}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e,t,a){for(var l=e[0].name+"<br>",s=0,i=e.length;s<i;s++)l+=e[s].marker+e[s].seriesName+":"+e[s].value+"个",l+="<br>";return l}},legend:{data:["批复","未批复"]},grid:{left:"0",right:"4%",bottom:"20",top:"26",containLabel:!0},xAxis:{axisTick:{show:!1},type:"category",data:a,axisLabel:{show:!1,rotate:40,textStyle:{color:"#747474",fontSize:10}}},yAxis:{type:"value",nameTextStyle:{lineHeight:10},name:"(个)",nameGap:10,max:n,splitLine:{lineStyle:{type:"dashed"}},axisLabel:{textStyle:{color:"#999"}}},series:[{name:"批复",type:"bar",stack:"总量",itemStyle:{normal:{color:"#3cc4c7"}},data:l},{name:"未批复",type:"bar",stack:"总量",itemStyle:{normal:{color:"#f4bd2c"}},data:s}]}},setOption02:function(e){var t=this,a=[],l=[];e.forEach((function(e,t){e.specialityName?a.push(e.specialityName):a.push(e.deptName),l.push(e.percent)}));var s=Math.max.apply(Math,l);s<101&&(s=100),t.option02={dataZoom:[{type:"slider",show:!0,handleSize:2,yAxisIndex:[0],width:"15px",showDetail:!1,left:0,startValue:0,endValue:9}],color:["#3ac3c7"],title:{text:"未批复项目分析",show:!1},tooltip:{axisPointer:{type:"shadow"},trigger:"axis",formatter:function(e,t,a){for(var l=e[0].name+"<br>",s=0,i=e.length;s<i;s++)l+=e[s].marker+e[s].seriesName+":"+e[s].value+"%",l+="<br>";return l}},grid:{containLabel:!0,top:"5",left:"22",bottom:"0",right:"10"},xAxis:{type:"value",max:s,axisLabel:{show:!0,textStyle:{color:"#747474"},formatter:"{value} %"},splitLine:{lineStyle:{type:"dashed"}}},yAxis:{axisTick:{show:!1},name:"",type:"category",data:a,inverse:!0,nameLocation:"end",nameTextStyle:{lineHeight:10},axisLine:{show:!1},axisLabel:{interval:0,show:!1,rotate:50,textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",animation:!1,tooltip:{show:!1}},{name:"完成率",type:"bar",data:l,itemStyle:{normal:{color:"#48ccc5"}}}]}},setStat:function(){var e=this;this.loading=!0,Object(o["Gd"])({startDate:this.startDate,endDate:this.endDate}).then((function(t){e.loading=!1,t.data.successful&&(console.log(t),e.statisticalNums=t.data.resultValue)}))},setSpeciality:function(){var e=this;this.loading=!0,Object(o["Fd"])({startDate:this.startDate,endDate:this.endDate,type:this.activeName}).then((function(t){e.loading=!1,t.data.successful&&(e.graphicsData=t.data.resultValue,console.log("activeClass",e.activeClass),"0"!=e.activeName?e.clickGraphics(e.speciality,e.specialityStr,e.activeClass):e.clickGraphics())}))},setOption01:function(e){var t=this,a=[],l=[],s=[];e.forEach((function(e,t){a.push(e.deptName),l.push(e.num),s.push(e.sum)}));var i=Math.max.apply(Math,l),o=Math.max.apply(Math,s);t.option01={dataZoom:[{type:"slider",zoomLock:!0,show:!0,handleSize:2,showDetail:!1,height:"15px",bottom:0,startValue:0,endValue:9}],color:["#3ac3c7"],title:{text:"未批复项目分析",show:!1},tooltip:{trigger:"axis",formatter:function(e,t,a){for(var l=e[0].name+"<br>",s=0,i=e.length;s<i;s++)"数量"==e[s].seriesName?l+=e[s].marker+e[s].seriesName+":"+e[s].value+"个":"金额"==e[s].seriesName&&(l+=e[s].marker+e[s].seriesName+":"+e[s].value+"万元"),l+="<br>";return l}},legend:{show:!0,top:-3,right:100,textStyle:{color:"#666",fontSize:12},itemGap:20,data:["数量","金额"],inactiveColor:"#ccc"},grid:{left:"0",right:"4%",bottom:"20",top:"26",containLabel:!0},xAxis:{axisTick:{show:!1},axisLabel:{show:!1,rotate:40,textStyle:{color:"#747474",fontSize:10}},data:a},yAxis:[{name:"（个）",max:i,nameGap:10,nameLocation:"end",nameTextStyle:{lineHeight:10},splitLine:{lineStyle:{type:"dashed"}},axisLine:{lineStyle:{color:"#999",width:1}},axisLabel:{textStyle:{color:"#999"}}},{splitLine:{show:!1},nameTextStyle:{lineHeight:10,align:"left",color:"#484848"},nameGap:10,name:"(万元)",max:o,axisLine:{lineStyle:{color:"#999",width:1}},axisLabel:{textStyle:{color:"#999"}}}],series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",animation:!1,tooltip:{show:!1}},{name:"数量",type:"bar",data:l,itemStyle:{normal:{color:"#48ccc5"}}},{name:"金额",type:"line",yAxisIndex:1,data:s,itemStyle:{normal:{color:"#f2a319"}}}]}}}},u=c,d=(a("a4f2"),a("7397"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"7e933298",null);t["default"]=m.exports},"7b10":function(e,t,a){},"7b32":function(e,t,a){"use strict";var l=a("bcfe"),s=a.n(l);s.a},"7ce3":function(e,t,a){"use strict";var l=a("662a"),s=a.n(l);s.a},"7e07":function(e,t,a){"use strict";var l=a("f23c"),s=a.n(l);s.a},"7e1e":function(e,t,a){"use strict";a.d(t,"oc",(function(){return r})),a.d(t,"Ib",(function(){return c})),a.d(t,"v",(function(){return u})),a.d(t,"sd",(function(){return d})),a.d(t,"Eb",(function(){return m})),a.d(t,"Jb",(function(){return p})),a.d(t,"p",(function(){return h})),a.d(t,"vc",(function(){return f})),a.d(t,"Wd",(function(){return g})),a.d(t,"Ld",(function(){return b})),a.d(t,"zb",(function(){return v})),a.d(t,"tb",(function(){return w})),a.d(t,"qb",(function(){return y})),a.d(t,"M",(function(){return D})),a.d(t,"Qd",(function(){return C})),a.d(t,"r",(function(){return I})),a.d(t,"O",(function(){return L})),a.d(t,"Fb",(function(){return S})),a.d(t,"mb",(function(){return T})),a.d(t,"Ob",(function(){return k})),a.d(t,"Tb",(function(){return _})),a.d(t,"ac",(function(){return N})),a.d(t,"pd",(function(){return x})),a.d(t,"B",(function(){return j})),a.d(t,"Vb",(function(){return O})),a.d(t,"ib",(function(){return A})),a.d(t,"Zb",(function(){return V})),a.d(t,"rd",(function(){return P})),a.d(t,"E",(function(){return $})),a.d(t,"ub",(function(){return F})),a.d(t,"vb",(function(){return M})),a.d(t,"wb",(function(){return q})),a.d(t,"xb",(function(){return B})),a.d(t,"qd",(function(){return E})),a.d(t,"C",(function(){return z})),a.d(t,"Sb",(function(){return R})),a.d(t,"Hc",(function(){return U})),a.d(t,"Gb",(function(){return H})),a.d(t,"jd",(function(){return Q})),a.d(t,"S",(function(){return W})),a.d(t,"T",(function(){return G})),a.d(t,"uc",(function(){return Y})),a.d(t,"A",(function(){return X})),a.d(t,"xd",(function(){return J})),a.d(t,"V",(function(){return K})),a.d(t,"F",(function(){return Z})),a.d(t,"J",(function(){return ee})),a.d(t,"Hb",(function(){return te})),a.d(t,"Kb",(function(){return ae})),a.d(t,"gc",(function(){return le})),a.d(t,"Jd",(function(){return se})),a.d(t,"zd",(function(){return ie})),a.d(t,"hd",(function(){return oe})),a.d(t,"fc",(function(){return ne})),a.d(t,"Xb",(function(){return re})),a.d(t,"G",(function(){return ce})),a.d(t,"Bc",(function(){return ue})),a.d(t,"kc",(function(){return de})),a.d(t,"xc",(function(){return me})),a.d(t,"ud",(function(){return pe})),a.d(t,"w",(function(){return he})),a.d(t,"wd",(function(){return fe})),a.d(t,"Nc",(function(){return ge})),a.d(t,"D",(function(){return be})),a.d(t,"yd",(function(){return ve})),a.d(t,"gb",(function(){return we})),a.d(t,"Pb",(function(){return ye})),a.d(t,"ld",(function(){return De})),a.d(t,"Kd",(function(){return Ce})),a.d(t,"gd",(function(){return Ie})),a.d(t,"s",(function(){return Le})),a.d(t,"pb",(function(){return Se})),a.d(t,"Ud",(function(){return Te})),a.d(t,"Hd",(function(){return ke})),a.d(t,"Xd",(function(){return _e})),a.d(t,"vd",(function(){return Ne})),a.d(t,"Sd",(function(){return xe})),a.d(t,"R",(function(){return je})),a.d(t,"u",(function(){return Oe})),a.d(t,"W",(function(){return Ae})),a.d(t,"U",(function(){return Ve})),a.d(t,"Q",(function(){return Pe})),a.d(t,"Mc",(function(){return $e})),a.d(t,"pc",(function(){return Fe})),a.d(t,"N",(function(){return Me})),a.d(t,"qc",(function(){return qe})),a.d(t,"rc",(function(){return Be})),a.d(t,"Rd",(function(){return Ee})),a.d(t,"Mb",(function(){return ze})),a.d(t,"bb",(function(){return Re})),a.d(t,"jb",(function(){return Ue})),a.d(t,"f",(function(){return He})),a.d(t,"sb",(function(){return Qe})),a.d(t,"hb",(function(){return We})),a.d(t,"m",(function(){return Ge})),a.d(t,"Md",(function(){return Ye})),a.d(t,"Nd",(function(){return Xe})),a.d(t,"lc",(function(){return Je})),a.d(t,"Cc",(function(){return Ke})),a.d(t,"Dc",(function(){return Ze})),a.d(t,"q",(function(){return et})),a.d(t,"Od",(function(){return tt})),a.d(t,"Pd",(function(){return at})),a.d(t,"Ed",(function(){return lt})),a.d(t,"zc",(function(){return st})),a.d(t,"Ac",(function(){return it})),a.d(t,"bd",(function(){return ot})),a.d(t,"cd",(function(){return nt})),a.d(t,"dd",(function(){return rt})),a.d(t,"sc",(function(){return ct})),a.d(t,"h",(function(){return ut})),a.d(t,"i",(function(){return dt})),a.d(t,"j",(function(){return mt})),a.d(t,"Bb",(function(){return pt})),a.d(t,"Td",(function(){return ht})),a.d(t,"Tc",(function(){return ft})),a.d(t,"id",(function(){return gt})),a.d(t,"Yc",(function(){return bt})),a.d(t,"ic",(function(){return vt})),a.d(t,"bc",(function(){return wt})),a.d(t,"Dd",(function(){return yt})),a.d(t,"Bd",(function(){return Dt})),a.d(t,"X",(function(){return Ct})),a.d(t,"k",(function(){return It})),a.d(t,"fd",(function(){return Lt})),a.d(t,"ec",(function(){return St})),a.d(t,"dc",(function(){return Tt})),a.d(t,"od",(function(){return kt})),a.d(t,"yb",(function(){return _t})),a.d(t,"fb",(function(){return Nt})),a.d(t,"nd",(function(){return xt})),a.d(t,"Db",(function(){return jt})),a.d(t,"kd",(function(){return Ot})),a.d(t,"c",(function(){return At})),a.d(t,"ob",(function(){return Vt})),a.d(t,"I",(function(){return Pt})),a.d(t,"H",(function(){return $t})),a.d(t,"Y",(function(){return Ft})),a.d(t,"d",(function(){return Mt})),a.d(t,"g",(function(){return qt})),a.d(t,"Z",(function(){return Bt})),a.d(t,"a",(function(){return Et})),a.d(t,"L",(function(){return zt})),a.d(t,"hc",(function(){return Rt})),a.d(t,"jc",(function(){return Ut})),a.d(t,"mc",(function(){return Ht})),a.d(t,"Cb",(function(){return Qt})),a.d(t,"rb",(function(){return Wt})),a.d(t,"kb",(function(){return Gt})),a.d(t,"Wc",(function(){return Yt})),a.d(t,"Rc",(function(){return Xt})),a.d(t,"Uc",(function(){return Jt})),a.d(t,"yc",(function(){return Kt})),a.d(t,"Sc",(function(){return Zt})),a.d(t,"Vc",(function(){return ea})),a.d(t,"Gd",(function(){return ta})),a.d(t,"Fd",(function(){return aa})),a.d(t,"t",(function(){return la})),a.d(t,"td",(function(){return sa})),a.d(t,"Qc",(function(){return ia})),a.d(t,"Oc",(function(){return oa})),a.d(t,"Pc",(function(){return na})),a.d(t,"tc",(function(){return ra})),a.d(t,"Wb",(function(){return ca})),a.d(t,"Ub",(function(){return ua})),a.d(t,"Yd",(function(){return da})),a.d(t,"e",(function(){return ma})),a.d(t,"y",(function(){return pa})),a.d(t,"x",(function(){return ha})),a.d(t,"z",(function(){return fa})),a.d(t,"Rb",(function(){return ga})),a.d(t,"n",(function(){return ba})),a.d(t,"ab",(function(){return va})),a.d(t,"nc",(function(){return wa})),a.d(t,"cc",(function(){return ya})),a.d(t,"o",(function(){return Da})),a.d(t,"Vd",(function(){return Ca})),a.d(t,"Yb",(function(){return Ia})),a.d(t,"nb",(function(){return La})),a.d(t,"ed",(function(){return Sa})),a.d(t,"Ic",(function(){return Ta})),a.d(t,"Kc",(function(){return ka})),a.d(t,"Jc",(function(){return _a})),a.d(t,"Lc",(function(){return Na})),a.d(t,"Gc",(function(){return xa})),a.d(t,"Ec",(function(){return ja})),a.d(t,"Fc",(function(){return Oa})),a.d(t,"b",(function(){return Aa})),a.d(t,"db",(function(){return Va})),a.d(t,"l",(function(){return Pa})),a.d(t,"cb",(function(){return $a})),a.d(t,"K",(function(){return Fa})),a.d(t,"eb",(function(){return Ma})),a.d(t,"Xc",(function(){return qa})),a.d(t,"Nb",(function(){return Ba})),a.d(t,"Ad",(function(){return Ea})),a.d(t,"Cd",(function(){return za})),a.d(t,"Lb",(function(){return Ra})),a.d(t,"P",(function(){return Ua})),a.d(t,"wc",(function(){return Ha})),a.d(t,"md",(function(){return Qa})),a.d(t,"Qb",(function(){return Wa})),a.d(t,"Id",(function(){return Ga})),a.d(t,"lb",(function(){return Ya})),a.d(t,"Ab",(function(){return Xa})),a.d(t,"ad",(function(){return Ja}));a("c975"),a("d3b7"),a("ac1f"),a("1276");var l=a("bc3a"),s=a.n(l),i=a("4360"),o=a("5c96"),n=a("5f87");a("a18c");function r(e){return s()({method:"post",url:"/prjStItemNotice/getWorkItemStatus",data:e})}function c(e){return s()({method:"get",url:"/prjStItemNotice/getItemInfoByProcessInstId",params:e})}function u(e){return s()({method:"post",url:"/prjStItemNotice/createProcess",data:e})}function d(e){return s()({method:"post",url:"/prjStItemNotice/saveWorkItem",data:e})}function m(e){return s()({method:"get",url:"/prjStItemNotice/getItemInfo",params:e})}function p(e){return s()({method:"get",url:"/prjStItemNotice/getItemInfoByProcessInstIdWithBatchGroup",params:e})}function h(e){return s()({method:"post",url:"/auditPlanEditAndCheck/checkPlan",data:e})}function f(e){return s()({method:"get",url:"/workFlow/isAutoSelectExpert",params:e})}function g(e){return s()({method:"post",url:"/prjStItemNotice/updateItemPhaseDet",data:e})}function b(e){return s()({method:"post",url:"/workFlow/sureJoin",data:e})}function v(e){return s()({method:"get",url:"/workFlow/getExpertsListByWorkId",params:e})}function w(e){return s()({method:"get",url:"/workFlow/getEachNodePrincipal",params:e})}function y(e){return s()({method:"get",url:"/workFlow/getCreateProcessUser",params:e})}function D(e){return s()({method:"post",url:"/workFlow/expertAudit",data:e})}function C(e){return s()({method:"get",url:"/auditPlanEditAndCheck/updateAuditPlanStatus",params:e})}function I(e){return s()({method:"post",url:"/workFlow/collectAdvice",data:e})}function L(e){return s()({method:"post",url:"/workFlow/expertCountersign",data:e})}function S(e){return s()({method:"get",url:"/prjStItemNotice/getItemInfoByCreatorAndProcessId",params:e})}function T(e){return s()({method:"get",url:"/workFlow/getChildIdList",params:e})}function k(e){return s()({method:"get",url:"/workFlow/getNotJoinExpertInfoByProcessId",params:e})}function _(e){return s()({method:"get",url:"/prjStDmd/",params:e})}function N(e){return s()({method:"get",url:"/prjStDmd/getSaveTable",params:e})}function x(e){return s()({method:"post",url:"/prjStDmd/save",data:e})}function j(e){return s()({method:"post",url:"/prjStDmd/delete",data:e})}function O(e){return console.log(e),s()({method:"get",url:"/prjStProb/",params:e})}function A(e){return console.log(e),s()({method:"get",url:"/prjStProb/getByProbId",params:e})}function V(e){return s()({method:"get",url:"/prjStProb/getSaveTable",params:e})}function P(e){return s()({method:"post",url:"/prjStProb/save",data:e})}function $(e){return s()({method:"post",url:"/prjStProb/delete",data:e})}function F(e){return s()({method:"get",url:"/prjStExperts/"+e})}function M(e){return s()({method:"get",url:"/prjStExperts/",params:e})}function q(e){return s()({method:"get",url:"/prjStExperts/findExpertComm/",params:e})}function B(e){return s()({method:"get",url:"/prjStExperts/findExpertPro/",params:e})}function E(e){return s()({method:"post",url:"/prjStExperts/save",data:e})}function z(e){return s()({method:"post",url:"/prjStExperts/delete",data:e})}function R(e){return s()({method:"get",url:"/prjStAuditPlan/",params:e})}function U(e){return s()({method:"get",url:"/prjCmItem/",params:e})}function H(e){return s()({method:"get",url:"/prjCmItem/"+e})}function Q(e){return s()({method:"post",url:"/prjCmItem/saveLower",data:e})}function W(e){return s()({method:"post",url:"/prjStFeaAudit/toExcel",data:e,responseType:"blob"})}function G(){return s()({method:"post",url:"/prjCmItem/exportFileTitle",responseType:"blob"})}function Y(e){return s()({method:"post",data:e,url:"/prjCmItem/importFile",headers:{"Content-Type":"multipart/form-data"}})}function X(e){return s()({method:"post",url:"/stBaseItem/delete",data:e})}function J(e){return s()({method:"get",url:"/prjCmFeaPrep/selectReport",params:e})}function K(){return s()({method:"get",url:"/prjStTmpl/downloadTmpl?templateType=4&codeValue=1"})}function Z(e){return s()({method:"post",url:"/prjCmFeaPrep/deleteReport",data:e})}function ee(e){return s()({method:"get",url:"/prjCmFeaPrep/downloadReport",params:e,responseType:"blob"})}function te(e){return s()({method:"get",url:"/prjCmItem/getInfoByItemIdWhithLabel/"+e})}function ae(){return s()({method:"get",url:"/prjCmItem/getItemLabelInfo"})}function le(){return s()({method:"get",url:"/prjStOnAuditPlan/getSaveTable"})}function se(e){return s()({method:"post",url:"/prjStOnAuditPlan/save",data:e})}function ie(e){return s()({method:"get",url:"/prjStOnAuditPlan/",params:e})}function oe(e){return s()({method:"post",url:"/prjStProb/saveBao",data:e})}function ne(e){return s()({method:"get",url:"/notify/selectAllNotify/"+e})}function re(e){return console.log(e),s()({method:"get",url:"/prjStTmpl/",params:e})}function ce(e){return s()({method:"post",url:"/prjStTmpl/deleteTemplate",data:e})}function ue(e){return s()({method:"get",url:"/user/login",params:e})}function de(e){return s()({method:"get",url:"/user/getUserInfo",params:e})}function me(e){return s()({method:"get",url:"/prjStTmpl/issueTemplate/"+e})}function pe(e){return s()({method:"get",url:"/prjStTmpl/selectColType",params:e})}function he(e){return s()({method:"post",url:"/prjStTmpl/createTemplate",data:e})}function fe(e){return s()({method:"get",url:"/prjStTmpl/selectField",params:e})}function ge(e){return s()({method:"get",url:"/prjStItem/",params:e})}function be(e){return s()({method:"post",url:"/prjStItem/delete",data:e})}function ve(e){return s()({method:"get",url:"/prjStTmpl/selectReportTypeList",params:e})}function we(e){return s()({method:"get",url:"/prjStItemCheck/getById",params:e})}function ye(e){return s()({method:"get",url:"/prjStItemCheck/getOrderNo",params:e})}function De(e){return s()({method:"post",url:"/prjStItemCheck/saveOrderNo",data:e})}function Ce(e){return s()({method:"post",url:"/prjStItem/submit",data:e})}function Ie(e){return s()({method:"post",url:"/prjStItemCheck/saveBM",data:e})}function Le(e){return s()({method:"post",url:"/prjStAuditPlan/updateHZByIds",data:e})}function Se(e){return s()({method:"get",url:"/prjStAuditPlan/queryHZList/"+e})}function Te(e){return s()({method:"post",url:"/prjStAuditPlan/updateHZByCtotalTime",data:e})}function ke(e){return s()({method:"post",url:"/prjStAuditPlan/updateStateSCByIds",data:e})}function _e(e){return s()({method:"post",url:"/prjStAuditPlan/updateStateXDByIds",data:e})}function Ne(e){return s()({method:"post",url:"/prjStFeaAudit/selectExpertsByIds",data:e})}function xe(e){return s()({method:"post",url:"/prjStFeaAudit/updateAuditRunStateByIds",data:e})}function je(){return s()({method:"get",url:"/prjStFeaAudit/exportReport"})}function Oe(e){return s()({method:"post",url:"/prjStFeaAudit/updateAuditMonitorStateByIds",data:e})}function Ae(e){return s()({method:"get",url:"/prjStExperts/findExpertsAdvice",params:e})}function Ve(e){return s()({method:"get",url:"/prjStFeaAudit/exportReport",params:e})}function Pe(){return s()({method:"get",url:"/prjStTmpl/downloadTmpl?templateType=9"})}function $e(e){return s()({method:"get",url:"/prjStFeaAudit/",params:e})}function Fe(e){return s()({method:"get",url:"/prjStFeaAudit/queryByCondition",params:e})}function Me(e){return s()({method:"post",url:"/prjStFeaAudit/updateAuditExpertsStateByIds",data:e})}function qe(e){return s()({method:"post",url:"/prjStFeaAudit/updateExpertsHQStateByIds",data:e})}function Be(e){return s()({method:"post",url:"/prjStFeaAudit/updateAuditMonitorStateByIds",data:e})}function Ee(e){return s()({method:"post",url:"/prjStOnAuditPlan/updateAuditPlanTime",data:e})}function ze(e){return s()({method:"post",url:"/prjStExperts/getLeaderAdvise",data:e})}function Re(e){return s()({method:"post",url:"/prjStOnAuditPlan/getAuditResult",data:e})}function Ue(e){return s()({method:"post",url:"/prjStItem/getCKlist",data:e})}function He(e){return s()({method:"post",url:"/prjStItem/approve",data:e})}function Qe(e){return s()({method:"get",url:"/prjCmItem/getMagCnCode",params:e})}function We(e){return s()({method:"get",url:"/prjStAuditPlan/getByAuditPlanId/"+e})}function Ge(e){return s()({method:"post",url:"/prjStOnAuditPlan/updatePrjStAuditPlanStatus/",data:e})}function Ye(e){return s()({method:"get",url:"/isc/ticketLogin",params:e})}function Xe(e){return s()({method:"get",url:"/isc/ticketLogout",params:e})}function Je(e){return s()({method:"get",url:"/isc/getUserInfoByTicket",params:e})}function Ke(e){return s()({method:"get",url:"/prjStItemCheck/orgAnalyze",params:e})}function Ze(e){return s()({method:"get",url:"/prjStItemCheck/pfAnalyze",params:e})}function et(e){return s()({method:"get",url:"/prjStItemCheck/ckAnalyze",params:e})}function tt(e){return s()({method:"get",url:"/prjStItemCheck/unStatusAnalyze",params:e})}function at(e){return s()({method:"get",url:"/prjStItemCheck/unStockAnalyze",params:e})}function lt(){return s()({method:"get",url:"/prjCmLabelDefine/specList"})}function st(e){return s()({method:"get",url:"/prjStItemCheck/itemunCKAnalyze",params:e})}function it(e){return s()({method:"get",url:"/prjStItemCheck/itemunPfAnalyze",params:e})}function ot(e){return s()({method:"get",url:"/prjStFeaAudit/getReviewItemAnalysis",params:e})}function nt(e){return s()({method:"get",url:"/prjStFeaAudit/getReviewItemStatistics",params:e})}function rt(e){return s()({method:"get",url:"/prjStFeaAudit/getReviewTypeStatistics",params:e})}function ct(e){return s()({method:"get",url:"/prjStFeaAudit/getHangingJointReviewItemAnalysis",params:e})}function ut(e){return s()({method:"get",url:"/prjStFeaAudit/getAuditPlanPhase",params:e})}function dt(e){return s()({method:"get",url:"/prjStFeaAudit/getAuditPlanPhaseEd",params:e})}function mt(e){return s()({method:"get",url:"/prjStFeaAudit/getAuditPlanPhaseIng",params:e})}function pt(e){return s()({method:"post",url:"/prjStAuditPlan/getFragmentary",data:e})}function ht(e){return s()({method:"post",url:"/prjStAuditPlan/updateFragmentaryAudit",data:e})}function ft(e){return s()({method:"post",url:"/prjCmItem/queryBySpeciality",data:e})}function gt(e){return s()({method:"post",url:"/prjCmItem/saveBySpeciality",data:e})}function bt(e){return s()({method:"post",url:"/prjCmItem/queryTitleBySpeciality",data:e})}function vt(e){return s()({method:"get",url:"/prjCmItem/getTreeList",params:e})}function wt(e){return s()({method:"get",url:"/stBaseItem/getSingleItem",params:e})}function yt(e){return s()({method:"post",url:"/prjCmItem/shiftOutItem",data:e})}function Dt(e){return s()({method:"post",url:"/prjCmItem/shiftInItem",data:e})}function Ct(e){return s()({method:"get",url:"/prjCmItem/getAllPackageItem",params:e})}function It(e){return s()({method:"post",url:"prjStFeaAudit/autoSelectExperts",data:e})}function Lt(e){return s()({method:"post",url:"/prjStFeaAudit/saveAutoSelectExperts",data:e})}function St(e){return s()({method:"get",url:"/prjCmLabelDefine/getStandard",params:e})}function Tt(){return s()({method:"get",url:"/prjCmItem/getSpecialityIds"})}function kt(e){return s()({method:"post",url:"/prjCmLabelDefine/save",data:e})}function _t(e){return s()({method:"get",url:"/prjStFeaAudit/getExpertsInfoWithAudit",params:e})}function Nt(e){return s()({method:"get",url:"/prjCmLabelDefine/bqList",params:e})}function xt(e){return s()({method:"post",url:"/prjCmLabelClass/save",data:e})}function jt(e){return s()({method:"get",url:"/prjStItem/getListOrder",params:e})}function Ot(e){return s()({method:"post",url:"/prjStItem/saveNum",data:e})}function At(e){return s()({method:"post",url:"/prjCmItem/adjustPackageItem",data:e})}function Vt(e){return s()({method:"get",url:"/prjCmItem/getCmNameRule",params:e})}function Pt(e){return s()({method:"post",url:"/prjCmItem/doPostApplyItemName",data:e})}function $t(e){return s()({method:"get",url:"/prjCmStItem/doPostApplyItemCode",params:e})}function Ft(e){return s()({method:"get",url:"/prjCmStItem/getApplyCodeParam",params:e})}function Mt(e){return s()({method:"get",url:"/prjCmItem/applyBySpeciality",params:e})}function qt(e){return s()({method:"post",url:"/prjCmItem/auditBySpeciality",data:e})}function Bt(e){return s()({method:"post",url:"/prjCmItem/getApplyNameParam",data:e})}function Et(e){return s()({method:"post",url:"/prjStExperts/export",data:e,responseType:"blob"})}function zt(e){return s()({method:"post",url:"/prjCmItem/editBySpeciality",data:e})}function Rt(){return s()({method:"get",url:"/prjCmItem/getTreeDeptCode"})}function Ut(){return s()({method:"get",url:"/prjCmItem/getUserDeptCode"})}function Ht(e){return s()({method:"get",url:"/isc/getUserInfoByToken",params:e})}function Qt(){return s()({method:"get",url:"/prjCmItem/getFragmentaryList"})}function Wt(e){return s()({method:"get",url:"/org/getDeptIdByCode",params:e})}function Gt(e){return s()({method:"get",url:"/magCnCode/getCascadeLabel",params:e})}function Yt(e){return s()({method:"post",url:"/stBaseItem/queryItemTitle",data:e})}function Xt(e){return s()({method:"post",url:"/stBaseItem/queryAll",data:e})}function Jt(e){return s()({method:"post",url:"/stBaseItem/queryChildInfo",data:e})}function Kt(e){return s()({method:"post",url:"/stBaseItem/edit",data:e})}function Zt(e){return s()({method:"post",url:"/stBaseItem/queryByItemId",data:e})}function ea(e){return s()({method:"get",url:"/stBaseItem/queryFilterParam",params:e})}function ta(e){return s()({method:"get",url:"/prjStItem/stat",params:e})}function aa(e){return s()({method:"get",url:"/prjStItem/specialityStat",params:e})}function la(e){return s()({method:"get",url:"/prjStItem/companyStat",params:e})}function sa(e){return s()({method:"get",url:"/prjStItem/scheduleComplete",params:e})}function ia(e){return s()({method:"get",url:"/prjStItem/projectYoy",params:e})}function oa(e){return s()({method:"get",url:"/prjStItem/projectReply",params:e})}function na(e){return s()({method:"get",url:"/prjStItem/projectSource",params:e})}function ra(e){return s()({method:"get",url:"/stBaseItem/hasParent",params:e})}function ca(e){return s()({method:"get",url:"/prjStProb/queryWithOutItem",params:e})}function ua(e){return s()({method:"get",url:"/prjStDmd/queryWithOutItem",params:e})}function da(e){return s()({method:"post",url:"/prjCmFeaPrep/uploadReport",data:e})}function ma(e){return s()({method:"post",url:"/prjCmFeaPrep/applyFeaPrep",data:e})}function pa(e){return s()({method:"get",url:"/prjStProb/delProbTemplFile",params:e})}function ha(e){return s()({method:"get",url:"/prjStDmd/delDmdTemplFile",params:e})}function fa(e){return s()({method:"get",url:"/prjCmFeaPrep/deleteFeaFile",params:e})}function ga(){return s()({method:"get",url:"/prjCmItem/getParamId"})}function ba(e){return s()({method:"get",url:"/stBaseItem/checkFeaDInvest",params:e})}function va(e){return s()({method:"get",url:"/stBaseItem/getAuditClass",params:e})}function wa(e){return s()({method:"get",url:"/stBaseItem/getVoltCodeList",params:e})}function ya(e){return s()({method:"get",url:"/stBaseItem/getSpecDetailClass",params:e})}function Da(e){return s()({method:"get",url:"/stBaseItem/checkItemParent",params:e})}function Ca(e){return s()({method:"get",url:"/prjCmStItem/getCode",params:e})}function Ia(e){return s()({method:"get",url:"/stBaseItem/getQuestionOrDmdDetail",params:e})}function La(e){return s()({method:"get",url:"/stBaseItem/getChildrenItem",params:e})}function Sa(e){return s()({method:"get",url:"/stBaseItem/rollBackItem",params:e})}function Ta(e){return s()({method:"post",url:"/prjStAuditBatch/",data:e})}function ka(e){return s()({method:"post",url:"/prjStAuditBatch/edit",data:e})}function _a(e){return s()({method:"get",url:"/prjStAuditBatch/deleteById",params:e})}function Na(e){return s()({method:"get",url:"/prjStAuditBatch/publish",params:e})}function xa(e){return s()({method:"get",url:"/planHookUp/queryTitle",params:e})}function ja(e){return s()({method:"post",url:"/planHookUp/",data:e})}function Oa(e){return s()({method:"get",url:"/planHookUp/planHookUpBatch",params:e})}function Aa(e){return s()({method:"post",url:"/planHookUp/addLinkMan",data:e})}function Va(e){return s()({method:"get",url:"/auditPlanEditAndCheck/getBatchNameList",params:e})}function Pa(e){return s()({method:"post",url:"/auditPlanEditAndCheck/batchPackage",data:e})}function $a(e){return s()({method:"get",url:"/auditPlanEditAndCheck/getBatchGroupChild",params:e})}function Fa(e){return s()({method:"post",url:"/auditPlanEditAndCheck/editAuditPlan",data:e})}function Ma(e){return s()({method:"get",url:"/auditPlanEditAndCheck/getBatchPackageTree",params:e})}function qa(){return s()({method:"get",url:"/auditPlanEditAndCheck/queryTitle"})}function Ba(e){return s()({method:"get",url:"/auditPlanEditAndCheck/getNotInBatchPackageItem",params:e})}function Ea(e){return s()({method:"post",url:"/auditPlanEditAndCheck/shiftInBatchPackage",data:e})}function za(e){return s()({method:"post",url:"/auditPlanEditAndCheck/shiftOutBatchPackage",data:e})}function Ra(e){return s()({method:"post",url:"/workFlow/getItemList",data:e})}function Ua(e){return s()({method:"get",url:"/workFlow/queryTitle",params:e})}function Ha(e){return s()({method:"get",url:"/workFlow/isItemLeader",params:e})}function Qa(e){return s()({method:"get",url:"/workFlow/saveOverDueReason",params:e})}function Wa(e){return s()({method:"get",url:"/workFlow/getOverDueReason",params:e})}function Ga(e){return s()({method:"post",url:"/workFlow/submitOffLineAdvice",data:e})}function Ya(e){return s()({method:"get",url:"/auditPlanEditAndCheck/getCheckAdvice",params:e})}function Xa(e){return s()({method:"get",url:"/workFlow/getExpertsNumByProcessId",params:e})}function Ja(e){return s()({method:"post",url:"/stBaseItem/queryWithTitleAndData",data:e})}s.a.defaults.baseURL="http://192.168.1.239:9088",s.a.interceptors.request.use((function(e){var t=e.url.split("/"),a=t[t.length-1];return"ticketLogin"!=a&&"getUserInfo"!=a&&"login"!=a&&(e.headers["userId"]=sessionStorage.getItem("userId"),e.headers["token"]=sessionStorage.getItem("token")),e}),(function(e){return Promise.reject(e)})),s.a.interceptors.response.use((function(e){if(e.status&&200==e.status&&"undefined"!=typeof e.data.successful&&!e.data.successful){if(console.log("仅对200和error状态处理",e.data.resultHint),"没有访问权限"!=e.data.resultHint&&Object(o["Message"])({showClose:!0,dangerouslyUseHTMLString:!0,message:e.data.resultHint,type:"error"}),"没有访问权限"==e.data.resultHint){Object(n["l"])(),Object(n["i"])(),sessionStorage.clear();var t=i["a"].state.user.locationUrl;-1!=t.indexOf("?")&&(t=t.split("?")[0]),console.log("错误登录跳转地址",t),window.location.href=i["a"].state.user.iscUrl+"/isc_sso/login?service="+t}return e}return e}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400)";break;case 401:e.message="未授权，请重新登录(401)";break;case 403:e.message="拒绝访问(403)";break;case 404:e.message="请求出错(404)";break;case 408:e.message="请求超时(408)";break;case 500:e.message="服务器错误(500)";break;case 501:e.message="服务未实现(501)";break;case 502:e.message="网络错误(502)";break;case 503:e.message="服务不可用(503)";break;case 504:e.message="网络超时(504)";break;case 505:e.message="HTTP版本不受支持(505)";break;default:e.message="连接出错(".concat(e.response.status,")!")}else e.message="连接服务器失败!";return o["Message"].error({message:e.message}),Promise.resolve(e)}))},"7f62":function(e,t,a){},"7faf":function(e,t,a){"use strict";var l=a("b8ff"),s=a.n(l);s.a},"80c8":function(e,t,a){"use strict";var l=a("52c5"),s=a.n(l);s.a},"820c":function(e,t,a){"use strict";var l=a("04ad"),s=a.n(l);s.a},"826f":function(e,t,a){"use strict";var l=a("15dc"),s=a.n(l);s.a},"82cf":function(e,t,a){"use strict";var l=a("9ea2"),s=a.n(l);s.a},"84c4":function(e,t,a){"use strict";var l=a("8535"),s=a.n(l);s.a},"84f6":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!1},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),0!=e.param.isPassed?a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[a("sapn",[e._v("可研状态")])],1),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.feaStatus,callback:function(t){e.$set(e.param,"feaStatus",t)},expression:"param.feaStatus"}},e._l(e.selectParamDict.get("itemPhaseDet"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]):e._e(),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showBatchCheck}},[e._v("批量审查")])],1)]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{attrs:{data:e.tableShowData,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"v-loading":e.loading,height:e.tableHeight,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):3==t.showType?a("el-table-column",{attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showItemInfo(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),a("el-dialog",{attrs:{visible:e.batchCheckShow,title:"批量审查","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.batchCheckShow=t}}},[a("el-form",{ref:"form",staticClass:"demo-form-inline",attrs:{model:e.advice,"label-width":"0",size:"small"}},[a("el-form-item",[a("el-radio-group",{model:{value:e.advice.agreeType,callback:function(t){e.$set(e.advice,"agreeType",t)},expression:"advice.agreeType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("同意")]),a("el-radio",{attrs:{label:"2"}},[e._v("不同意")])],1),a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStFeaAudit/uploadFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadAdviceSuccess,multiple:!1,"show-file-list":!0,limit:1,"file-list":e.fileList,accept:".doc,.docx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传审查意见")])],1)],1),a("el-form-item",[a("el-input",{attrs:{type:"textarea"},model:{value:e.advice.checkAdvice,callback:function(t){e.$set(e.advice,"checkAdvice",t)},expression:"advice.checkAdvice"}})],1),a("el-form-item",{attrs:{align:"right"}},[a("el-button",{attrs:{type:"primary",loading:e.checkLoading},on:{click:e.batchCheck}},[e._v("保存")]),a("el-button",{on:{click:function(t){e.batchCheckShow=!1}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.itemShow,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.itemShow=t}}},[a("item-dialog",{attrs:{itemId:e.tempItemId}})],1)],1)},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("2bb5"),c=a("a960"),u=a("7e1e"),d=a("73fc"),m=a("c2b4"),p={name:"questions",data:function(){return{checkLoading:!1,isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],param:{pageIndex:1,pageSize:10,isPassed:0,deptCode:"",itemType:"",speciality:"",feaStatus:""},tableHeight:"",dialogVisibleL:!1,textarea:"",nolabel:"",radio:"",dialogLoading:!1,loading:!1,dialogTitle:"",tableTest:[],delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},resource:"",options:[],value:"",formLabelWidth:"120px",input:"",tableData:[],tableLabel:[],tableShowData:[],dictMap:new Map,selectParamDict:new Map,columnTypeMap:new Map,tempItemId:"",tempFeaAuditid:"",itemShow:!1,dialogShowType:"",advice:{agreeType:"",checkAdvice:"",fileId:""},isShowFilter:!1,itemMap:new Map,batchCheckShow:!1,paramSave:[],fileList:[],userId:"",token:""}},components:{"item-dialog":r["default"],querys:d["a"],SelectTree:c["a"],ItemAddCom:m["default"]},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getItemLabelSearch(),this.getItemLabel(),this.getTable(1,20),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},computed:Object(o["a"])({},Object(n["b"])([])),watch:{deptCode:function(){this.param.deptCode=this.deptCode,this.currentPage=1,this.getTable(1,this.currentNum)}},methods:{getValue:function(e){this.deptCode=e},tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(u["nb"])(s).then((function(e){if(e.data.successful){var t=l.getShowDateTable(e.data.resultValue,l.dictMap,l.columnTypeMap);a(t)}}))},getItemLabelSearch:function(){var e=this;Object(u["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.selectParamDict.set("itemPhaseDet",t.data.resultValue.itemPhaseDet),e.$forceUpdate()}}))},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},uploadAdviceSuccess:function(e){var t=this;if(e.successful)t.advice.fileId=e.resultValue.auditFileId,this.$message({showClose:!0,message:"上传成功",type:"success"});else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},batchCheck:function(){var e=this,t=this,a=[];t.paramSave.forEach((function(e){var l={};l.auditType=t.advice.agreeType,l.checkAdvice=t.advice.checkAdvice,l.itemId=e.itemId,l.auditPlanId=e.auditPlanId,l.planFileId=t.advice.fileId,a.push(l)})),t.checkLoading=!0,Object(u["Td"])(a).then((function(a){t.checkLoading=!1,a.data.successful?(e.$message.success("批量修改成功"),t.batchCheckShow=!1,t.getTable(t.currentPage,t.currentNum),t.paramSave=[]):e.$message.error("批量修改失败")}))},getRowKeys:function(e){return e.itemId},showBatchCheck:function(){var e=this;0==e.paramSave.length?this.$message({showClose:!0,message:"请选择审核项目",type:"error"}):e.batchCheckShow=!0},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},resetItem:function(){var e=this;e.param={pageIndex:1,pageSize:20,deptCode:"",itemType:"",isPassed:0,speciality:"",feaStatus:""},this.getTable(1,20)},getItemLabel:function(){var e=this;Object(u["Kb"])().then((function(t){if(console.log("response",t),t.data.successful){var a=t.data.resultValue.tableLable;e.itemMap=e.getDictArr(a)}}))},switchFilter:function(){this.isShowFilter=!this.isShowFilter},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showItemInfo:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},handleSelectionChange:function(e){var t=this;t.paramSave=[],e.forEach((function(e){var a={};a.auditPlanId=e.auditPlanId,a.itemId=e.itemId,t.paramSave.push(a)}))},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.loading=!0;var l={};l.pageIndex=e,l.pageSize=t,0==a.param.isPassed?l.feaStatus="5,11,14":l.feaStatus=a.param.feaStatus,l.itemName=a.param.itemName,l.deptCode=a.param.deptCode,l.itemType=a.param.itemType,l.speciality=a.param.speciality,l.itemClass="3",Object(u["Bb"])(l).then((function(e){if(console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum,a.tableLabel=e.data.resultValue.tableLable;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableShowData=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}a.loading=!1})).catch((function(e){console.log(e)}))},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),"feaStatus"==m&&(r["feaStatusT"]=p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p}s.push(r)}return s},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e}}},h=p,f=(a("e220"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"26d77b64",null);t["default"]=g.exports},8535:function(e,t,a){},"856d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":e.tableRowClassName,"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-form",{staticClass:"demo-form-inline reject-form",attrs:{model:e.form,"label-width":"10%"}},[a("el-form-item",{attrs:{label:"驳回原因:"}},[a("el-input",{staticClass:"reject-input",attrs:{type:"textarea",disabled:""},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("再次提交")])],1)])],1)])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4160"),a("baa5"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){var e=this;return{showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:"",speciality:"",specDetailClass:"",specClass:"",itemPhaseDet:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()<=a}},auditPlanId:"",saveParams:[],userSpecialityArr:[],rejectReason:""}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10),this.getWorkItemStatus()},computed:Object(o["a"])({},Object(n["b"])([])),methods:{getWorkItemStatus:function(){var e=this,t=e.$route.query.processInstID,a={};a.processInstID=t,Object(u["oc"])(a).then((function(t){if(t.data.successful){console.log(t);var a=t.data.resultValue;e.rejectReason=a[a.length-1].auditDesc}}))},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(m["e"])(t).then((function(t){if("0"==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:1,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:3};console.log(e.auditItemParam.itemPhaseDet);var l=!1;"已提交立项申请"==e.auditItemParam.itemPhaseDet||"立项申请退回"==e.auditItemParam.itemPhaseDet?(a.itemPhaseDet=2,l=!0):"可研编制已退回"==e.auditItemParam.itemPhaseDet&&(a.itemPhaseDet=25,l=!0),l&&Object(u["sd"])(a).then((function(t){if(e.loadingBtn1=!0,t.data.successful)e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}});else{var a=t.data.resultHint;e.$message.error(a)}}))}else e.$message.error(item.itemName+t.data.message)}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},getRowKeys:function(e){return e.itemId},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1==t.havePlan?"success-row":""},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},handleSelectionChange:function(e){var t=this;t.auditItemParam.itemIds="";var a="";e.forEach((function(e){a+=","+e.itemId})),t.auditItemParam.itemIds=a.substr(1)},getTableWithTitle:function(e){var t=this,a=this;if(a.loading=!0,a.param.pageSize=e,a.param.itemPhaseDet="2",""==this.specClass){var l=a.$route.path;a.specClass=l.substr(l.lastIndexOf("/")+1,l.length)}a.param.speciality=a.specClass;var s={};s.speciality=a.specClass,Object(u["Wc"])(s).then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Ib"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemIds=t.itemId,a.auditItemParam.speciality=t.specialityT,a.auditItemParam.specDetailClass=t.specDetailClass,a.auditItemParam.specClass=t.specClass,a.auditItemParam.itemPhaseDet=t.itemPhaseDet;var l=[];null!=t&&(l.push(t),a.tableDataShow=l,a.totalNum=1)}}))}else t.$message.error("查询表头信息出错")}))},getTable:function(e){var t=this;t.loading=!0,t.param.pageSize=e,t.param.itemPhaseDet="2",Object(u["Rc"])(t.param).then((function(e){t.loading=!1,t.tableData=e.data.resultValue.prjStItemBaseList,t.totalNum=e.data.resultValue.total,t.tableDataShow=t.getShowDateTable(t.tableData,t.dictMap,t.columnTypeMapDict)}))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];if(null!=s.codeList){if("speciality"==s.colDname){for(var i=[],o=0;o<s.codeList.length;o++)for(var n=0;n<t.userSpecialityArr.length;n++)s.codeList[o].codeValue==t.userSpecialityArr[n]&&i.push(s.codeList[o]);s.codeList=i}a.set(s.colDname,s.codeList)}}return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p;"deptCode"==m&&(r["deptCode"]=p)}s.push(r)}return s}}},h=p,f=(a("4059"),a("99a9"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"42176ab3",null);t["default"]=g.exports},"85ad":function(e,t,a){"use strict";var l=a("0e12"),s=a.n(l);s.a},"86a7":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"94px":"240px"}},[a("div",{staticClass:"main_container"},[a("div",{staticClass:"clearfix template_main"},[e.showLeft?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.leftLoading,expression:"leftLoading"}],staticClass:"template_left"},[a("ul",e._l(e.tempList,(function(t,l){return a("li",{key:l,class:{active:e.selectLeft==l},on:{click:function(a){return e.getTemplateTable(e.$route.query.tmplTypeId,t.codeValue,l+"")}}},[e._v(" "+e._s(t.codeName)+" ")])})),0)]):e._e(),a("div",{staticClass:"template_right"},[a("div",{staticClass:"template_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.templateLoading,expression:"templateLoading"}],attrs:{border:"",data:e.tableData,"header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column",height:e.tableHeight}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"tmplName",label:"模版名称"}}),a("el-table-column",{attrs:{prop:"tmplCreator",label:"创建者"}}),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"tmplCont",label:"说明"}}),a("el-table-column",{attrs:{prop:"release",label:"发布"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index+1==e.tableData.length?a("span",{staticClass:"blue",on:{click:function(a){return e.issueTemplate(t.row.tmplId)}}},[e._v("发布")]):a("span",[e._v("发布")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"下载"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index+1==e.tableData.length?a("span",{staticClass:"iconfont download blue"},[1==e.$route.query.tmplTypeId||2==e.$route.query.tmplTypeId||3==e.$route.query.tmplTypeId||8==e.$route.query.tmplTypeId||7==e.$route.query.tmplTypeId?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/export?templateType="+e.$route.query.tmplTypeId+"&token="+e.token}},[e._v("")]):5==e.$route.query.tmplTypeId||4==e.$route.query.tmplTypeId||9==e.$route.query.tmplTypeId||11==e.$route.query.tmplTypeId?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType="+e.$route.query.tmplTypeId+"&codeValue="+e.codeValue+"&token="+e.token}},[e._v("")]):a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType="+e.$route.query.tmplTypeId+"&token="+e.token}},[e._v("")])]):a("span",{staticClass:"iconfont download"},[e._v("")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"iconfont download blue",on:{click:function(a){return e.deleteTmp(t.row.tmplId)}}},[e._v("")])]}}])})],1),e.showUpload?a("div",{staticClass:"upbox"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStTmpl/uploadTmpl",data:{templateType:e.$route.query.tmplTypeId,codeValue:e.codeValue},"before-upload":e.beforeupload,headers:{userId:e.windowUid,token:e.token},"on-error":e.errorUpload,"on-success":e.uploadSuccess,multiple:!1,"show-file-list":!1}},[a("span",{staticClass:"iconfont"},[e._v("")]),e._v(" 上传模版 ")])],1):a("div",{staticClass:"upbox "},[a("span",{staticClass:"add",on:{click:e.addTmpData}},[a("span",{staticClass:"iconfont"},[e._v("")]),e._v(" 新建模版")])])],1)])])])]),a("el-dialog",{attrs:{title:e.$route.name,"close-on-click-modal":!1,width:"525px",visible:e.DialogConfiguration},on:{"update:visible":function(t){e.DialogConfiguration=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDatatest,border:"","max-height":"230px","highlight-current-row":"","header-cell-style":{background:"#359691",color:"#fff"}}},[a("el-table-column",{attrs:{prop:"name",label:"数据项中文名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showselect?a("div",[a("el-input",{staticClass:"rowinp",attrs:{size:"small"},on:{change:e.showAddData},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})],1):a("div",[e._v(e._s(t.row.fieldName))])]}}])}),a("el-table-column",{attrs:{prop:"date",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.showselect?a("div",[a("el-select",{staticClass:"rowinp",attrs:{placeholder:"请选择"},on:{change:e.showAddData},model:{value:t.row.dataType,callback:function(a){e.$set(t.row,"dataType",a)},expression:"scope.row.dataType"}},e._l(e.regionList,(function(e){return a("el-option",{key:e.fieldType,attrs:{label:e.fieldZhName,value:e.fieldType}})})),1)],1):a("div",[e._v(e._s(t.row.fieldZhName))])]}}])})],1),a("div",{staticClass:"addbtn",staticStyle:{background:"#359691",color:"#fff","text-align":"center","line-height":"30px",cursor:"pointer","margin-bottom":"10px"},on:{click:e.addTmp}},[e._v("新建")]),a("el-form",{ref:"form",attrs:{inline:!0,model:e.templateDescForm,"label-width":"100px"}},[a("el-form-item",{attrs:{"label-width":"80px",label:"版本说明"}},[a("el-input",{staticStyle:{width:"269px"},attrs:{type:"textarea",size:"mini"},model:{value:e.templateDesc,callback:function(t){e.templateDesc=t},expression:"templateDesc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.DialogConfiguration=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAdd}},[e._v("确 定")])],1)],1)],1)},s=[],i=(a("4160"),a("b0c0"),a("d3b7"),a("159b"),a("5530")),o=a("2f62"),n=a("7a14"),r=a("7e1e"),c={name:"questions",data:function(){return{windowUid:"",templateDescForm:{},templateDesc:"",selectLeft:0,uploading:!1,loading:!1,showLeft:!0,showUpload:!0,DialogConfiguration:!1,region:"",tableDatatest:[],tableData:[],regionList:[],tempList:[],leftLoading:!1,templateLoading:!1,codeValue:"",tableHeight:"",token:""}},watch:{$route:{handler:function(e,t){var a=this;5==e.query.tmplTypeId||4==e.query.tmplTypeId||9==e.query.tmplTypeId||11==e.query.tmplTypeId?a.getTempList({listType:e.query.tmplTypeId}).then((function(t){a.codeValue=a.tempList[0].codeValue,a.getTemplateTable(e.query.tmplTypeId,a.tempList[0].codeValue,"0")})):(a.codeValue="",a.getTemplateTable(e.query.tmplTypeId)),"可研报告模版"==e.name||"项目建议书模版"==e.name||"可研评审意见模版"==e.name||"可研批复意见模版"==e.name?a.showLeft=!0:a.showLeft=!1,"可研评审专家模版"==e.name||"评审计划模版"==e.name||"市场导向需求模版"==e.name||"战略导向需求模版"==e.name||"问题导向需求模版"==e.name?a.showUpload=!1:a.showUpload=!0},immediate:!0}},created:function(){this.tableHeight=window.innerHeight-150},components:{right:n["default"]},mounted:function(){this.windowUid=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},computed:Object(i["a"])({},Object(o["b"])(["token"])),methods:{errorUpload:function(){this.uploading=!1,this.$message({type:"error",message:"上传失败"})},getTempList:function(e){var t=this;return new Promise((function(a,l){t.leftLoading=!0,Object(r["yd"])(e).then((function(e){console.log("response",e),e.data.successful&&(t.tempList=e.data.resultValue,t.codeValue=t.tempList[0].codeValue,t.leftLoading=!1),a(t.tempList)})).catch((function(e){console.log(e)}))}))},submitAdd:function(){var e=this,t={columnList:[],templateDesc:e.templateDesc,templateName:"string",templateType:e.$route.query.tmplTypeId};e.tableDatatest.forEach((function(e,a){console.log(e.showselect),e.showselect&&t.columnList.push(e)})),Object(r["w"])(t).then((function(t){console.log("response",t),t.data.successful?(e.DialogConfiguration=!1,e.tableDatatest=[],e.getTemplateTable(e.$route.query.tmplTypeId),e.$message({type:"success",message:"新建成功"})):e.$message({type:"info",message:t.data.resultHint})})).catch((function(e){console.log(e)}))},showAddData:function(){console.log(this.tableDatatest)},issueTemplate:function(e){var t=this;Object(r["xc"])(e).then((function(e){console.log("response",e),e.data.successful?(t.getTemplateTable(t.$route.query.tmplTypeId,t.codeValue),t.$message({type:"success",message:"发布成功"})):t.$message({type:"info",message:"发布失败"})})).catch((function(e){console.log(e)}))},addTmpData:function(){var e=this;console.log("999"),e.tableDatatest=[],e.DialogConfiguration=!0,Object(r["wd"])({templateType:e.$route.query.tmplTypeId}).then((function(t){t.data.successful&&(console.log(t),t.data.resultValue.forEach((function(t,a){e.tableDatatest.push(t)}))),console.log("tableDatatableData",e.tableDatatest)})).catch((function(e){console.log(e)})),Object(r["ud"])({templateType:e.$route.query.tmplTypeId}).then((function(t){t.data.successful&&(console.log(t),e.regionList=t.data.resultValue)})).catch((function(e){console.log(e)}))},addTmp:function(){var e=this,t={name:"",dataType:"",showselect:!0};e.tableDatatest.push(t)},deleteTmp:function(e){var t=this,a=this;a.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=new FormData;t.append("tmplId",e),Object(r["G"])(t).then((function(e){console.log("response",e),e.data.successful?(a.getTemplateTable(a.$route.query.tmplTypeId,a.codeValue),console.log("chengg"),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"info",message:"删除失败"})})).catch((function(e){console.log(e)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},dateFormat:function(e,t){var l=a("c1df"),s=e[t.property];return l(s).format("YYYY-MM-DD")},getTemplateTable:function(e,t,a){var l=this,s={};console.log(e,t,a),t?(a&&(console.log(a),l.selectLeft=a),l.codeValue=t,s={tmplTypeId:e,codeValue:t}):s={tmplTypeId:e},l.templateLoading=!0,Object(r["Xb"])(s).then((function(e){console.log("response",e),l.templateLoading=!1,e.data.successful&&(l.tableData=e.data.resultValue.items),l.loading=!1})).catch((function(e){console.log(e)}))},beforeupload:function(){this.uploading=!0},uploadSuccess:function(e,t,a){console.log(e);var l=this;l.uploading=!1,e.successful?(l.$message({showClose:!0,message:"上传成功",type:"success"}),l.getTemplateTable(l.$route.query.tmplTypeId,l.codeValue)):this.$message({showClose:!0,message:e.data.resultHint})}}},u=c,d=(a("d66d"),a("b53f"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"1e2a5694",null);t["default"]=m.exports},8881:function(e,t,a){"use strict";var l=a("9d27"),s=a.n(l);s.a},"8a2a":function(e,t,a){},"8a6b":function(e,t,a){},"8aa9":function(e,t,a){"use strict";var l=a("cf17"),s=a.n(l);s.a},"8cdb":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wscn-http404-container"},[a("div",{staticClass:"wscn-http404"},[e._v(" 哎呀 ")])])}],i={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},o=i,n=(a("acae"),a("2877")),r=Object(n["a"])(o,l,s,!1,null,"34dd4a7a",null);t["default"]=r.exports},"8f2c":function(e,t,a){"use strict";var l=a("7a66"),s=a.n(l);s.a},"92c7":function(e,t,a){"use strict";var l=a("ac99"),s=a.n(l);s.a},"92ed":function(e,t,a){"use strict";var l=a("2a66"),s=a.n(l);s.a},"930c":function(e,t,a){"use strict";var l=a("4780"),s=a.n(l);s.a},9340:function(e,t,a){},"93eb":function(e,t,a){"use strict";var l=a("4f55"),s=a.n(l);s.a},"947b":function(e,t,a){},"94a4":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目状态")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemPhaseDetT,callback:function(t){e.$set(e.param,"itemPhaseDetT",t)},expression:"param.itemPhaseDetT"}},e._l(e.selectParamDict.get("itemPhaseDet"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.voltLevel,callback:function(t){e.$set(e.param,"voltLevel",t)},expression:"param.voltLevel"}},e._l(e.selectParamDict.get("voltLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("专项类别")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.speciality,callback:function(t){e.$set(e.param,"speciality",t)},expression:"param.speciality"}},e._l(e.selectParamDict.get("speciality"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目来源")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemSource,callback:function(t){e.$set(e.param,"itemSource",t)},expression:"param.itemSource"}},e._l(e.selectParamDict.get("itemSource"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("年份")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},on:{change:e.selectItem},model:{value:e.param.ghYear,callback:function(t){e.$set(e.param,"ghYear",t)},expression:"param.ghYear"}})],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showBZKY}},[e._v("批量上传可研报告")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportItemKY}},[e._v("导出")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDialogEdit}},[e._v("修改")]),a("el-button",{attrs:{type:"primary",size:"small",loading:e.backLoading},on:{click:e.sendBack}},[e._v("退回")]),a("el-button",{attrs:{type:"primary",size:"small",loading:e.showLoadingBtn},on:{click:e.checkDialogSubmit}},[e._v("提交")])],1)]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"diyItemTable",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","row-class-name":e.tableRowClassName,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"110"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left",label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,hasChildren:e.hasChildren,hasParent:e.hasParent,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),a("el-dialog",{attrs:{visible:e.tzkeVisible1,"close-on-click-modal":!1,"custom-class":"cus-dialog","modal-append-to-body":!1},on:{"update:visible":function(t){e.tzkeVisible1=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("批量上传可研报告")])])]),a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.formInline,"label-position":"right"}},[a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:e.kyTitle}},[a("el-upload",{ref:"upload",staticClass:"diyUpload",staticStyle:{display:"inline-block",position:"relative","margin-right":"10px"},attrs:{action:e.GLOBALURL+"/prjCmFeaPrep/uploadMultReport",data:e.uploadReportData,headers:{userId:e.userId,token:e.token},multiple:!1,"file-list":e.fileList,"auto-upload":!0,"on-success":e.uplodaReportSuccess,"show-file-list":!0,limit:1,"on-exceed":e.handleExceed,accept:".doc,.docx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1),a("el-button",{attrs:{type:"primary",size:"small"}},["上传可研报告（建议书）"==e.kyTitle?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=4&codeValue="+e.tempSpecClass+"&token="+e.token}},[e._v("导出可研模版")]):e._e(),"上传项目建议书"==e.kyTitle?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=5&codeValue="+e.tempSpecClass}},[e._v("导出可研模版")]):e._e()])],1),a("el-form-item",{attrs:{label:"上传估算书等可研附件"}},[a("el-upload",{ref:"upload",staticStyle:{display:"inline-block"},attrs:{action:e.GLOBALURL+"/prjCmFeaPrep/uploadMultReport",data:e.uploadReportData,headers:{userId:e.userId,token:e.token},multiple:"","file-list":e.fileList2,"auto-upload":!0,"on-success":e.uploadSuccess2,"show-file-list":!0,limit:5,"on-exceed":e.handleExceed,accept:".doc,.docx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1)],1),a("el-row"),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancalSubmitFeasibility}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitBtn},on:{click:e.submitUpload}},[e._v("提 交")])],1)],2)],1)},s=[],i=(a("99af"),a("4160"),a("a15b"),a("baa5"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("2909"),n=a("5530"),r=a("73fc"),c=a("a960"),u=a("c2b4"),d=a("2f62"),m=a("7e1e"),p=a("f36f"),h={name:"questions",data:function(){return{hasChildren:!1,hasParent:!1,backData:[],backLoading:!1,showLoadingBtn:!1,feaSInvest:"",feaDInvest:"",auditFileNo:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null,itemPhaseDetT:""},showDrawer:!1,parentItemInfo:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],showQuery:!1,isShowQuery:!1,loadingBtn1:!1,tzkeVisible1:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},exportData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{deptCode:"",pageIndex:1,itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",feaStatus:0,ghYear:"",itemSource:"",isCreateor:"",itemPhaseDet:""},dictMap:new Map,selectParamDict:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"",tableHeightTab:"",auditPlanId:"",saveParams:[],userSpecialityArr:[],bzkyArr:[],kyTitle:"",fileList:[],fileList2:[],reportFileId:"",itemIds:"",fjIds:[],userId:"",uploadReportData:{itemId:"",itemType:1},formInline:{user:""},tempSpecClass:"",submitBtn:!1,token:""}},components:{querys:r["a"],SelectTree:c["a"],ItemAddCom:u["default"]},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getItemLabel(),this.getSpecialityIds(),this.getTableWithTitle(1,20),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},watch:{$route:{handler:function(e,t){var a=this;console.log("路由变化"),a.showData.specClassName=a.$route.name,a.showData.oldPath=a.$route.path,a.showDrawer=!1},immediate:!0},deptCode:function(){this.param.createOrg=this.deptCode,this.currentPage=1,this.getTable(1,this.currentNum)}},computed:Object(n["a"])({},Object(d["b"])([])),methods:{getAllItems:function(){this.currentPage=1,this.param.isCreateor="",this.getTable(1,10)},getMyItems:function(){this.param.isCreateor="1",this.currentPage=1,this.getTable(1,10)},getValue:function(e){this.deptCode=e},exportItemKY:function(){window.location.href=this.GLOBALURL+"/stBaseItem/exportItem?itemIds="+this.exportData.ids+"&token="+this.token},sendBack:function(){var e=this;if(0==this.backData.length)return this.$message({showClose:!0,message:"请选择一个项目",type:"warning"}),!1;for(var t=[],a=0;a<this.backData.length;a++){var l=this.backData[a];if(this.userId!=l.createorT)return this.$message({showClose:!0,message:"所选项目中包含非当前用户创建的项目",type:"warning"}),!1;if(3!=l.itemPhaseDetT)return this.$message({showClose:!0,message:"所选项目中包含非立项审核通过状态的项目",type:"warning"}),!1;t.push(l.itemId)}var s={itemIds:t.toString()};Object(m["ed"])(s).then((function(t){t.data.successful&&e.getTable(e.currentPage,e.currentNum)}))},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 27==t.itemPhaseDetT?"success-row":""},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getItemLabel:function(){var e=this;Object(m["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.selectParamDict.set("itemPhaseDet",t.data.resultValue.itemPhaseDet),e.selectParamDict.set("speciality",t.data.resultValue.specialityList)}}))},getTreeDeptCode:function(){var e=this;Object(m["jc"])().then((function(t){var a=t.data.resultValue;Object(m["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},checkDialogSubmit:function(){var e=this,t=this;if(0==this.bzkyArr.length)return this.$message({showClose:!0,message:"请选择一个项目",type:"warning"}),!1;for(var a=[],l=0;l<this.bzkyArr.length;l++){var s=this.bzkyArr[l];if(this.userId!=s.createorT)return this.$message({showClose:!0,message:"所选项目中包含非当前用户创建的项目",type:"warning"}),!1;if("4"!=s.itemPhaseDetT)return this.$message({showClose:!0,message:"所选项目状态必须是'已上传可研'",type:"warning"}),!1;if(null==s.havePrep)return this.$message({showClose:!0,message:"所选项目中包含未上传可研报告的项目",type:"warning"}),!1;a.push(s.itemId)}this.showLoadingBtn=!0;var i=a.toString();Object(m["o"])({itemIds:i}).then((function(l){if(l.data.successful){var s=l.data.resultValue;if(!s.result)return e.showLoadingBtn=!1,t.$message({showClose:!0,message:"不能选择包含上级的项目",type:"warning"}),!1;var i=a.join(",");Object(m["n"])({itemIds:i}).then((function(a){if(a.data.successful){var l=a.data.resultValue;if(!l)return e.showLoadingBtn=!1,e.$message({showClose:!0,message:"所选项目中包含未填写可研动态总投资的项目",type:"warning"}),!1;Object(m["ab"])({itemIds:i}).then((function(a){if(a.data.successful){var l=a.data.resultValue.flag;if(!l){e.showLoadingBtn=!1;var s=a.data.resultValue.msg;return e.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:s,type:"warning"}),!1}t.showDialogSubmit()}}))}else e.showLoadingBtn=!1}))}else e.showLoadingBtn=!1}))},showDialogSubmit:function(){var e=this,t={},a=[];if(0==this.$store.state.user.workflowtype)(function(){var t="",a=window.JSON.parse(sessionStorage.getItem("iscOrg")),l=window.JSON.parse(sessionStorage.getItem("specRoleMap")),s=window.JSON.parse(sessionStorage.getItem("purchaseRoleMap")),i=window.JSON.parse(sessionStorage.getItem("electronicRoleMap")),o=sessionStorage.getItem("userId"),n={user:o,orgIds:a.id,roleIds:t,processDefName:"feasibility_study_report_review",activityDefID:"review",processInstName:"",processInstDesc:"",itemId:""},r=function(a){var r=e.bzkyArr[a];t=l[r.specialityT],n.roleIds=t,"01"==r.specialityT&&(t=i[r.specDetailClassT],n.roleIds=t),"08"==r.specialityT&&(t=s[r.specClassT],n.roleIds=t),n.itemId=r.itemId,n.processInstName=r.itemName+"-项目可研编制审核",n.processInstDesc=r.itemName+"-项目可研编制审核",void 0==n.orgIds&&(n.orgIds=""),void 0==n.roleIds&&(n.roleIds=""),Object(p["c"])(n).then((function(t){if(0==t.data.status){var a={processInstID:t.data.data,userId:o,itemId:r.itemId,type:1};Object(m["v"])(a).then((function(a){if(a.data.successful){var l={processInstID:t.processInstID,itemId:r.itemId,userId:o,isAudit:"",workItemId:"123",auditDesc:"可研编制评审申请",itemPhaseDet:"25"};Object(m["sd"])(l).then((function(t){if(e.showLoadingBtn=!1,a.data.successful)e.$refs.itemTable.clearSelection(),e.$message.success("提交可研编制评审申请成功"),e.getTable(e.currentPage,e.currentNum);else{var l=a.data.resultHint;e.$message.error(r.itemName+l)}}))}else{e.showLoadingBtn=!1;var s=a.data.resultHint;e.$message.error(r.itemName+s)}}))}else e.showLoadingBtn=!1,e.$message.error(r.itemName+t.data.message)}))};for(var c in e.bzkyArr)r(c)})();else{for(var l in this.bzkyArr)a.push(this.bzkyArr[l].itemId);a=a.join(","),t.itemIds=a;var s=new FormData;s.append("itemIds",a),console.log(t),Object(m["e"])(s).then((function(t){e.showLoadingBtn=!1,t.data.successful&&(e.$refs.itemTable.clearSelection(),e.$message.success("提交可研报告成功"),e.getTable(e.currentPage,e.currentNum))}))}},beforeRemove:function(e){return this.$confirm("确定移除 ".concat(e.name,"？"))},uplodaReportSuccess:function(e){var t=this;e.successful?(t.reportFileId=e.resultValue.fileId,t.reportFileName=e.resultValue.fileName):this.$message({showClose:!0,message:"上传失败",dangerouslyUseHTMLString:!0,type:"error"})},uploadSuccess2:function(e){var t=this;if(e.successful){var a={};a.fileId=e.resultValue.fileId,a.fileName=e.resultValue.fileName,t.fjIds.push(a)}else this.$message({showClose:!0,message:"上传失败",dangerouslyUseHTMLString:!0,type:"error"})},uploadSuccess:function(e){var t=this;this.fileUploadLoading=!1,this.submitBtn=!1,e.successful?(this.$message({showClose:!0,message:"上传成功",type:"success"}),t.tzkeVisible1=!1,t.fileList=[],this.getTable(t.currentPage,t.currentNum)):this.$message({showClose:!0,message:"上传失败",dangerouslyUseHTMLString:!0,type:"error"})},cancalSubmitFeasibility:function(){var e=this;e.tzkeVisible1=!1,e.fileList=[],e.fileList2=[],e.bzkyArr=[],e.fjIds=[],e.reportFileId="",this.$refs.itemTable.clearSelection()},submitUpload:function(){var e=this,t=this;t.submitBtn=!0;var a={},l=t.bzkyArr,s=[];for(var i in l)if(s.push(l[i].itemId),l[i].children&&l[i].children.length>0){var n=l[i].children;for(var r in n)s.push(n[r].itemId);s=Object(o["a"])(new Set(s))}if(t.itemIds=s.join(","),console.log(t.itemIds),a.itemIds=t.itemIds,a.repId=t.reportFileId,a.repName=t.reportFileName,a.fjIds=t.fjIds,""==a.repName||void 0==a.repName)return this.$message({showClose:!0,message:"请上传可研报告",type:"warning"}),!1;console.log(a),Object(m["Yd"])(a).then((function(a){t.submitBtn=!1,a.data.successful?(t.tzkeVisible1=!1,t.fileList=[],t.fileList2=[],t.bzkyArr=[],t.fjIds=[],t.reportFileId="",t.reportFileName="",e.$refs.itemTable.clearSelection(),e.$message.success("保存可研报告成功"),t.getTable(t.currentPage,t.currentNum)):e.$message.error("保存可研报告失败")}))},handleExceed:function(e,t){var a=this;e.length>1&&a.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleExceed2:function(e,t){var a=this;e.length>5&&a.$message.warning("当前限制选择 5 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},showBZKY:function(){var e=this;e.showDrawer=!1;var t=[];if(0==e.bzkyArr.length)return this.$message({showClose:!0,message:"请选择一个项目",type:"warning"}),!1;for(var a=0;a<e.bzkyArr.length;a++){if(e.userId!=e.bzkyArr[a].createorT)return this.$message({showClose:!0,message:"所选项目中包含不是您创建的项目,请重新选择",type:"warning"}),!1;var l=e.bzkyArr[a].itemPhaseDetT;if("3"!=l&&"4"!=l&&"27"!=l)return this.$message({showClose:!0,message:"所选项目包含状态不符合业务逻辑的项目,请重新选择",type:"warning"}),!1;t.push(e.bzkyArr[a].itemId)}t=t.toString(),Object(m["o"])({itemIds:t}).then((function(t){if(t.data.successful){var a=t.data.resultValue;if(a.result){console.log(e.bzkyArr);var l=e.bzkyArr[0];e.fileList=[],e.fileList2=[],e.tempSpecClass=l.specialityT,e.kyTitle="上传可研报告（建议书）",e.tzkeVisible1=!0}else e.$message({showClose:!0,message:"不能选择包含上级的项目",type:"warning"})}}))},getSpecialityIds:function(){var e=this;Object(m["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},getRowKeys:function(e){return e.itemId},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},showDialogEdit:function(){var e=this;if(0==this.parentItemInfo.length)this.$message.warning("请选择一项");else if(this.parentItemInfo.length>1)this.$message.warning("只能选择一项");else if(this.userId!=this.parentItemInfo[0].createorT)this.$message.warning("你不是创建者，没有权利修改此项");else{var t=this.parentItemInfo[0].itemPhaseDetT;if("3"!=t&&"4"!=t&&"15"!=t&&"20"!=t&&"27"!=t)return this.$message({showClose:!0,message:"所选项目包含状态不符合业务逻辑的项目,请重新选择",type:"warning"}),!1;this.parentItemInfo[0].children&&this.parentItemInfo[0].children.length>0?(this.hasChildren=!0,this.hasParent=!1,console.log(this.hasChildren+"111"+this.hasParent),this.showData.itemId=this.parentItemInfo[0].itemId,this.showData.phash=2,this.showData.itemPhaseDet=t,this.showDrawer=!0,this.timer=(new Date).getTime()):(this.hasChildren=!1,Object(m["o"])({itemIds:this.parentItemInfo[0].itemId}).then((function(a){if(a.data.successful){var l=a.data.resultValue;l.result?e.hasParent=!1:e.hasParent=!0,console.log(e.hasChildren+"111"+e.hasParent),e.showData.itemId=e.parentItemInfo[0].itemId,e.showData.phash=2,e.showData.itemPhaseDet=t,e.showDrawer=!0,e.timer=(new Date).getTime()}})))}},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},handleSelectionChange:function(e){var t=this;t.bzkyArr=[],t.backData=[],t.parentItemInfo=[],t.bzkyArr=t.bzkyArr.concat(e),t.backData=t.backData.concat(e),t.parentItemInfo=t.parentItemInfo.concat(e),t.exportData={ids:[]},e.forEach((function(e,a){t.exportData.ids.push(e.itemId)}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTableWithTitle:function(e,t){var a=this,l=this;if(l.loading=!0,l.param.pageIndex=e,l.param.pageSize=t,""==l.param.itemPhaseDetT||null==l.param.itemPhaseDetT?l.param.itemPhaseDet="3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,22,23,24,25,26,27":l.param.itemPhaseDet=l.param.itemPhaseDetT,""==this.specClass){var s=l.$route.path;l.specClass=s.substr(s.lastIndexOf("/")+1,s.length)}l.param.speciality=l.specClass,l.param.needPrep="1";var i={};i.speciality=l.specClass,Object(m["ad"])(l.param).then((function(e){l.loading=!1,e.data.successful?(l.tableLabel=e.data.resultValue.tableTitle,l.dictMap=l.getDictArr(l.tableLabel),l.columnTypeMapDict=l.getColumnTypeArr(l.tableLabel),l.tableData=e.data.resultValue.tableData.prjStItemBaseList,l.totalNum=e.data.resultValue.tableData.total,l.tableDataShow=l.getShowDateTable(l.tableData,l.dictMap,l.columnTypeMapDict)):a.$message.error("查询表头信息出错")}))},getTable:function(e,t){var a=this;a.loading=!0,a.param.pageIndex=e,a.param.pageSize=t,""==a.param.itemPhaseDetT||null==a.param.itemPhaseDetT?a.param.itemPhaseDet="3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,22,23,24,25,26,27":a.param.itemPhaseDet=a.param.itemPhaseDetT,a.param.needPrep="1",Object(m["Rc"])(a.param).then((function(e){a.loading=!1,a.tableData=e.data.resultValue.prjStItemBaseList,a.totalNum=e.data.resultValue.total,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMapDict)}))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];if(null!=s.codeList){if("speciality"==s.colDname){for(var i=[],o=0;o<s.codeList.length;o++)for(var n=0;n<t.userSpecialityArr.length;n++)s.codeList[o].codeValue==t.userSpecialityArr[n]&&i.push(s.codeList[o]);s.codeList=i}a.set(s.colDname,s.codeList)}}return a},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"speciality"==m&&(r["specialityT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p),"deptCode"==m&&(r["deptCode"]=p),"itemPhaseDet"==m&&(r["itemPhaseDetT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var v=l.getShowDateTable(n.children,t,a);r.children=v}s.push(r)}return s}}},f=h,g=(a("826f"),a("a010"),a("2877")),b=Object(g["a"])(f,l,s,!1,null,"b88e4318",null);t["default"]=b.exports},"95a7":function(e,t,a){},"95b4":function(e,t,a){"use strict";var l=a("a89d"),s=a.n(l);s.a},9635:function(e,t,a){},"99a9":function(e,t,a){"use strict";var l=a("22a2"),s=a.n(l);s.a},"9bd9":function(e,t,a){},"9c4d":function(e,t,a){"use strict";var l=a("5d94"),s=a.n(l);s.a},"9d1c":function(e,t,a){},"9d27":function(e,t,a){},"9d46":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container storage_container"},[a("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.queryTable},model:{value:e.getTableData.itemName,callback:function(t){e.$set(e.getTableData,"itemName",t)},expression:"getTableData.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("评审批次")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.queryTable},model:{value:e.getTableData.batchName,callback:function(t){e.$set(e.getTableData,"batchName",t)},expression:"getTableData.batchName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("SelectTree",{attrs:{props:e.props,options:e.deptArr,value:e.valueId,clearable:e.isClearable,accordion:e.isAccordion},on:{getValue:function(t){return e.getValue(t)}}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("专项类别")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},on:{change:e.queryTable},model:{value:e.getTableData.speciality,callback:function(t){e.$set(e.getTableData,"speciality",t)},expression:"getTableData.speciality"}},e._l(e.dictMap.get("speciality"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("批复状态")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},on:{change:e.queryTable},model:{value:e.getTableData.apprStatus,callback:function(t){e.$set(e.getTableData,"apprStatus",t)},expression:"getTableData.apprStatus"}},e._l(e.dictMap.get("apprStatus"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目类型")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},on:{change:e.queryTable},model:{value:e.getTableData.itemType,callback:function(t){e.$set(e.getTableData,"itemType",t)},expression:"getTableData.itemType"}},e._l(e.dictMap.get("itemType"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},on:{change:e.queryTable},model:{value:e.getTableData.voltLevel,callback:function(t){e.$set(e.getTableData,"voltLevel",t)},expression:"getTableData.voltLevel"}},e._l(e.dictMap.get("voltLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("是否已编码")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},on:{change:e.queryTable},model:{value:e.getTableData.hasCode,callback:function(t){e.$set(e.getTableData,"hasCode",t)},expression:"getTableData.hasCode"}},[a("el-option",{attrs:{label:"已编码",value:"1"}}),a("el-option",{attrs:{label:"未编码",value:"0"}})],1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.ImportDialogShow}},[e._v("导入储备项目")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportItemStorage}},[e._v("导出")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.ImportTitleShow}},[e._v("导出模版")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDialogEdit}},[e._v("修改储备信息")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDialogEdit2}},[e._v("修改基本信息")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.del}},[e._v("删除")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showLabel}},[e._v("批量评分")]),a("el-button",{staticClass:"margin_right",attrs:{type:"primary",size:"small"},on:{click:function(t){e.ckDialog=!0}}},[e._v("项目出库")]),a("el-button",{staticClass:"margin_right",attrs:{type:"primary",size:"small"},on:{click:e.showPF}},[e._v("批复文件上传")]),a("el-button",{staticClass:"margin_right",attrs:{type:"primary",size:"small"},on:{click:e.submitTable}},[e._v("提交")]),a("el-button",{staticClass:"margin_right",attrs:{type:"primary",size:"small",loading:e.batchAllLoad},on:{click:e.batchBM}},[e._v("批量编码")])],1)]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"storagetable",attrs:{data:e.storageShowData,border:"","row-key":e.getRowKeys,"tree-props":{children:"children",hasChildren:"hasChildren"},"header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!1,"row-class-name":e.tableRowClassName,height:e.tableHeight,"select-on-indeterminate":!0},on:{"selection-change":e.handleSelectionChange,select:e.handelSelectRow,"sort-change":e.changeSort,"select-all":e.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"45","reserve-selection":!0}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&"stockInTime"!=t.colDname&&"stockOutTime"!=t.colDname&&"grandSort"!=t.colDname&&"apprStatus"!=t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{"min-width":"200",align:"left",label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showItemInfo(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):"grandSort"==t.colDname?a("el-table-column",{attrs:{"min-width":"150",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"stockInTime"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",sortable:"custom",prop:t.colDname,label:t.dispName,formatter:e.dateFormat,"show-overflow-tooltip":!0}}):"apprStatus"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",sortable:"custom",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"stockOutTime"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",prop:t.colDname,label:t.dispName,formatter:e.dateFormat,"show-overflow-tooltip":!0}}):e._e()})),a("el-table-column",{attrs:{label:"操作",width:"220",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operation"},[t.row.code?a("div",[a("div",{staticClass:"gray"},[e._v("编码")])]):a("div",["项目包"==t.row.itemType||"单项项目"==t.row.itemType?a("div",{staticClass:"gray"},[e._v("编码")]):a("div",{staticClass:"blue",attrs:{loading:t.row.btnLoading},on:{click:function(a){return e.showBm(t.row)}}},[e._v("编码")])]),a("div",["项目包"==t.row.itemType||"单项项目"==t.row.itemType?a("div",{staticClass:"gray"},[e._v("编码器")]):a("div",{staticClass:"blue",on:{click:function(a){return e.showBmJsp(t.row)}}},[e._v("编码器")])]),a("div",{staticClass:"blue",on:{click:function(a){return e.singleScore(t.row.speciality,t.row.itemId,t.row)}}},[e._v("评分")])])]}}])})],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.getTableData.pageSize,"page-sizes":[10,20,30,50],layout:"sizes,total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,hasParent:e.hasParent,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)]),a("el-dialog",{attrs:{title:"导出储备项目模版","close-on-click-modal":!1,visible:e.showImporTitle},on:{"update:visible":function(t){e.showImporTitle=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"专项类型"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.specialityClassTitle,callback:function(t){e.specialityClassTitle=t},expression:"specialityClassTitle"}},e._l(e.dictMap.get("speciality"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1),a("el-form-item",{attrs:{label:"导出模版"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=e.specialityClassTitle,expression:"specialityClassTitle!=''"}],attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportExcelStorageTemp?speciality="+e.specialityClassTitle+"&token="+e.token}},[e._v("导出")])])],1)],1)],1),a("el-dialog",{attrs:{title:"导入储备项目","close-on-click-modal":!1,visible:e.showImportDialog},on:{"update:visible":function(t){e.showImportDialog=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"专项类型"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.specialityClass,callback:function(t){e.specialityClass=t},expression:"specialityClass"}},e._l(e.dictMap.get("speciality"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1),a("el-form-item",{attrs:{label:"上传导入文件"}},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.importBtn,expression:"importBtn"}],staticClass:"upload",attrs:{action:e.GLOBALURL+"/stBaseItem/importExcelStorage",data:{speciality:e.specialityClass},headers:{userId:e.userId,token:e.token},"on-success":e.uploadAdviceSuccess,"before-upload":e.beforeUpload,accept:".xlsx,.xls","show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"浏览项目","close-on-click-modal":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("itemDialog",{attrs:{itemId:e.tempItemId}}),a("el-form",{ref:"form",attrs:{model:e.browseShowData,"label-position":"right","label-width":"130px"}},[a("el-form-item",{attrs:{label:"下载可研评审文件"}},[a("a",{staticClass:"blue",attrs:{href:e.GLOBALURL+"/prjStItemCheck/downloadPS?itemId="+e.itemId+"&token="+e.token}},[e._v("下载可研评审文件")])]),1==e.browseShowData[0].apprStatus?a("el-form-item",{attrs:{label:"下载批复文件"}},[a("a",{staticClass:"blue",attrs:{href:e.GLOBALURL+"/prjStItemCheck/downloadPiFu?itemId="+e.itemId+"&token="+e.token}},[e._v("下载批复文件")])]):e._e()],1),a("div"),a("div")],1),a("el-dialog",{attrs:{title:"批复文件","close-on-click-modal":!1,visible:e.pfDialog},on:{"update:visible":function(t){e.pfDialog=t},close:e.closePfDialog}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form,"label-position":"right"}},[a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"项目可研批复文号"}},[a("el-input",{attrs:{placeholder:"项目可研批复文号"},model:{value:e.apprFileNo,callback:function(t){e.apprFileNo=t},expression:"apprFileNo"}})],1),a("el-form-item",{attrs:{label:"项目批复文件"}},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.uploading,expression:"uploading"}],staticClass:"upload",attrs:{"on-exceed":e.exceed,action:e.GLOBALURL+"/prjStItem/uploadFile",headers:{userId:e.userId,token:e.token},"before-upload":e.beforeupload,"on-error":e.errorUpload,"on-success":e.uploadSuccess,multiple:!1,"file-list":e.fileList,limit:1,"show-file-list":!0}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:!e.fileId.length},on:{click:e.pfFile}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"排序号","close-on-click-modal":!1,visible:e.pxDialog},on:{"update:visible":function(t){e.pxDialog=t}}},[a("el-form",{ref:"pxForm",attrs:{"label-position":"right",model:e.pxForm,"label-width":"150px",size:"small"}},[a("el-form-item",{attrs:{label:"专业号"}},[e._v(" "+e._s(e.pxForm.speciality)+" ")]),a("el-form-item",{attrs:{label:"省顺序序号",prop:"shorderNo",rules:[{min:4,max:4,message:"长度4字符",trigger:"blur"}]}},[a("el-input",{attrs:{disabled:!("shorderNo"==e.pxForm.isEdit),placeholder:"长度为4个字符"},model:{value:e.pxForm.shorderNo,callback:function(t){e.$set(e.pxForm,"shorderNo",t)},expression:"pxForm.shorderNo"}})],1),a("el-form-item",{attrs:{label:"市顺序序号",prop:"siorderNo",rules:[{min:3,max:3,message:"长度3字符",trigger:"blur"}]}},[a("el-input",{attrs:{disabled:!("siorderNo"==e.pxForm.isEdit),placeholder:"长度为3个字符"},model:{value:e.pxForm.siorderNo,callback:function(t){e.$set(e.pxForm,"siorderNo",t)},expression:"pxForm.siorderNo"}})],1),a("el-form-item",{attrs:{label:"县顺序号",prop:"xorderNo",rules:[{min:2,max:2,message:"长度2字符",trigger:"blur"}]}},[a("el-input",{attrs:{disabled:!("xorderNo"==e.pxForm.isEdit),placeholder:"长度为2个字符"},model:{value:e.pxForm.xorderNo,callback:function(t){e.$set(e.pxForm,"xorderNo",t)},expression:"pxForm.xorderNo"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveOrder}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.pxDialog=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"项目储备评分设置","close-on-click-modal":!1,visible:e.lyDialog},on:{close:e.closeBq,"update:visible":function(t){e.lyDialog=t}}},[a("el-form",{ref:"bqForm",attrs:{model:e.bqList,"label-position":"right","label-width":"230px",size:"small"}},e._l(e.bqList,(function(t,l){return a("el-form-item",{attrs:{label:t.labelClassName,prop:l+".value",rules:t.rules}},[t.childrenList.length?a("el-select",{attrs:{clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(t.childrenList,(function(e){return a("el-option",{key:e.labelClassCode,attrs:{label:e.labelClassName,value:e.labelClassCode}})})),1):a("el-input",{attrs:{autocomplete:"off",size:"mini"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1)})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.lyDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("bqForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{staticClass:"ck_dialog",attrs:{title:"项目出库","close-on-click-modal":!1,visible:e.ckDialog,width:"90%"},on:{"update:visible":function(t){e.ckDialog=t}}},[a("div",{staticClass:"ck_sectct"},[a("el-select",{staticStyle:{width:"120px"},attrs:{value:"山西省电力公司",placeholder:"请选择",disabled:""}},[a("el-option",{attrs:{label:"山西省电力公司",value:"shanghai"}}),a("el-option",{attrs:{label:"电力公司",value:"beijing"}})],1)],1),a("el-form",{ref:"outboundForm",staticClass:"ck",attrs:{model:e.outboundForm,"label-width":"70px",size:"small"}},e._l(e.outboundForm,(function(t,l){return a("el-form-item",{attrs:{label:t.codeName,prop:l+".money"}},[e._v(" 计划投资 "),a("el-input",{staticStyle:{width:"100px"},on:{input:function(a){return e.validationMoney(t)},change:e.changeMoney},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"domain.money"}}),e._v(" 万元 ")],1)})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.isOutbound},on:{click:function(t){return e.submitOutbound("outboundForm")}}},[e._v("确 定")])],1),a("el-dialog",{attrs:{title:"出库项目列表","close-on-click-modal":!1,width:"80%","show-close":!1,visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-table",{attrs:{data:e.ckData,"max-height":"300px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"speciality",label:"专业类别"}}),a("el-table-column",{attrs:{prop:"code",label:"项目编码"}}),a("el-table-column",{attrs:{prop:"itemName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"grandSort",label:"排序号"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"}},[a("a",{attrs:{href:e.GLOBALURL+"/prjStItem/cKlistExport?token="+e.token}},[e._v("导出")])]),a("el-button",{attrs:{type:"primary"},on:{click:e.hideCk}},[e._v("确定")]),a("el-button",{on:{click:e.hideCk}},[e._v("取消")])],1)],1)],1),a("el-dialog",{staticClass:"bmiframe miframe",attrs:{title:"生成编码","close-on-click-modal":!1,width:"1000px",visible:e.bmDialog,"append-to-body":""},on:{"update:visible":function(t){e.bmDialog=t},close:e.closePfDialog}},[a("iframe",{attrs:{name:"my-iframe",id:"my-iframe",src:e.codeUrl,frameborder:"0",width:"100%",height:"500",scrolling:"none"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getBM}},[e._v("获取编码")])],1)])],1)])])},s=[],i=(a("99af"),a("4160"),a("c975"),a("d81d"),a("4ec9"),a("4fad"),a("d3b7"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),o=(a("96cf"),a("1da1")),n=a("5530"),r=a("ade3"),c=a("7a14"),u=a("a960"),d=a("7e1e"),m=a("2f62"),p=a("2bb5"),h=a("73fc"),f=a("c2b4"),g=a("eb5a"),b={name:"storageManagement",data:function(){var e;return e={batchAllLoad:!1,hasParent:!1,apprFileNo:"",isShowQuery:!1,showQuery:!1,tableHeightTab:"",scoreSpecValue:[],scoreData:[],timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,parentItemInfo:[],token:"",userId:"",deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[]},Object(r["a"])(e,"isShowQuery",!1),Object(r["a"])(e,"specialityClassTitle",""),Object(r["a"])(e,"showImporTitle",!1),Object(r["a"])(e,"importBtn",!1),Object(r["a"])(e,"showImportDialog",!1),Object(r["a"])(e,"codeUrl","/pcinfo/resUnicode/pages/pgEditUnifiedCode.jsp?openType=1&appID=00&applyID=1"),Object(r["a"])(e,"ispaixu",!0),Object(r["a"])(e,"isSubmit",""),Object(r["a"])(e,"bqItemId",""),Object(r["a"])(e,"bqList",[]),Object(r["a"])(e,"tempItemId",""),Object(r["a"])(e,"isOutbound",!0),Object(r["a"])(e,"isShowFilter",!1),Object(r["a"])(e,"ckData",[]),Object(r["a"])(e,"tableHeight","70vh"),Object(r["a"])(e,"innerVisible",!1),Object(r["a"])(e,"ckDialog",!1),Object(r["a"])(e,"uploading",!1),Object(r["a"])(e,"itemId",""),Object(r["a"])(e,"pfDialog",!1),Object(r["a"])(e,"lyDialog",!1),Object(r["a"])(e,"detailDialog",!1),Object(r["a"])(e,"pxDialog",!1),Object(r["a"])(e,"bmDialog",!1),Object(r["a"])(e,"form",{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}),Object(r["a"])(e,"showForm",4),Object(r["a"])(e,"data",[{label:"电网基建类",id:1,children:[{id:15,label:"安全类指标",children:[{id:4,label:"满足常规电源接入"},{id:5,label:"解决设备负载率偏高"},{id:6,label:"提升站间符合转移能力"},{id:7,label:"提升标准网架结构"},{id:8,label:"提升N-1通过率"},{id:9,label:"消除单线或单变"},{id:10,label:"加强线路联络"},{id:11,label:"缩短供电半径"},{id:12,label:"消除老旧设备"},{id:13,label:"消除设备缺陷"},{id:14,label:"提升设备标准化水平"}]}]},{label:"经济性指标",id:2},{label:"侧性指标",id:3}]),Object(r["a"])(e,"defaultProps",{children:"children",label:"label"}),Object(r["a"])(e,"newDialogFormVisible",!1),Object(r["a"])(e,"tableTest",[{name:"项目1",xmbm:"xxx1",dw:"单位1",ck:"2020.5.20",px:"010000000001",jq:"A-xxll-001",zylb:"专业1",xmnr:"项目内容项目内容项目内容项目内容项目内容",jhps:"2020.2.5",lz:"xx-001"},{name:"项目2",xmbm:"xxx3",ck:"2020.5.20",px:"010000000002",jq:"A-xxll-001",dw:"单位1",zylb:"专业1",xmnr:"项目内容项目内容项目内容项目内容项目内容",jhps:"2020.3.5",lz:"xx-001"},{name:"项目3",xmbm:"xxx2",dw:"单位1",px:"010000000003",jq:"A-xxll-001",zylb:"专业1",xmnr:"项目内容项目内容项目内容项目内容项目内容",jhps:"2020.3.8",ck:"",lz:"xx-001"},{name:"项目4",xmbm:"xxx2",px:"010000000004",jq:"A-xxll-001",dw:"单位1",zylb:"专业1",xmnr:"项目内容项目内容项目内容项目内容项目内容",jhps:"2020.3.5",ck:"",lz:"xx-001"}]),Object(r["a"])(e,"dialogLoading",!1),Object(r["a"])(e,"loading",!1),Object(r["a"])(e,"delData",{ids:[]}),Object(r["a"])(e,"exportData",{ids:[]}),Object(r["a"])(e,"lableList",[{value:""}]),Object(r["a"])(e,"totalNum",0),Object(r["a"])(e,"currentPage",1),Object(r["a"])(e,"currentNum",20),Object(r["a"])(e,"year",""),Object(r["a"])(e,"dialogFormVisible",!1),Object(r["a"])(e,"form",{}),Object(r["a"])(e,"fileId",""),Object(r["a"])(e,"options",[]),Object(r["a"])(e,"value",""),Object(r["a"])(e,"formLabelWidth","120px"),Object(r["a"])(e,"input",""),Object(r["a"])(e,"browseShowData",[{apprStatus:0}]),Object(r["a"])(e,"browseLabel",[]),Object(r["a"])(e,"browseData",[]),Object(r["a"])(e,"tableData",[]),Object(r["a"])(e,"tableLabel",[]),Object(r["a"])(e,"storageShowData",[]),Object(r["a"])(e,"storageTableData",[]),Object(r["a"])(e,"storageLabelList",[]),Object(r["a"])(e,"dictMap",new Map),Object(r["a"])(e,"fileList",[]),Object(r["a"])(e,"storageDictMap",new Map),Object(r["a"])(e,"browseDictMap",new Map),Object(r["a"])(e,"submitData",[]),Object(r["a"])(e,"outboundForm",{}),Object(r["a"])(e,"getTableData",{batchName:"",pageIndex:1,pageSize:20,itemName:"",voltLevel:"",apprStatus:"",deptCode:"",speciality:"",itemType:"",createor:"",sort:"",sortType:""}),Object(r["a"])(e,"pxForm",{speciality:"",shorderNo:"",xorderNo:"",siorderNo:"",itemId:"",isEdit:""}),Object(r["a"])(e,"bmForm",{code:"",itemId:""}),Object(r["a"])(e,"shiArr",["A0","B0","K0","C0","D0","E0","F0","H0","J0","L0","M0"]),Object(r["a"])(e,"shengArr",["00"]),Object(r["a"])(e,"specialityClass",""),Object(r["a"])(e,"loadingCode",!1),Object(r["a"])(e,"isAllSelect",!1),e},computed:Object(n["a"])({},Object(m["b"])(["roles"])),components:{right:c["default"],itemDialog:p["default"],querys:h["a"],SelectTree:u["a"],ItemAddCom:f["default"]},mounted:function(){this.currentPage=1,this.getTableData.pageIndex=1,this.getTableData.pageSize=20,this.getTable(),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},created:function(){this.tableHeight=window.innerHeight-220},watch:{deptCode:function(){this.getTableData.deptCode=this.deptCode,this.getTableData.pageIndex=1,this.currentPage=1,this.getTable()}},methods:{selectAll:function(e,t){var a=this;t||(a.isAllSelect=!a.isAllSelect),a.isAllSelect?e.map((function(e){e.children&&(e.children.map((function(e){a.toggleSelection(e,a.isAllSelect)})),e.children.length>0&&a.selectAll(e.children,!0))})):a.$refs.storagetable.clearSelection()},toggleSelection:function(e,t){console.log("toggleSelection",t),t&&this.$refs.storagetable.toggleRowSelection(e,t)},handelSelectRow:function(e,t){},toggleRowSelection:function(e){var t=this;if(e.length)for(var a=function(a){var l=e[a];setTimeout((function(){t.$refs.storagetable.toggleRowSelection(l)}),500)},l=0;l<e.length;l++)a(l)},exportItemStorage:function(){var e=this.GLOBALURL+"/prjStItem/exportItem?itemId="+this.exportData.ids;for(var t in this.getTableData){var a=this.getTableData[t];null!=a&&""!=a&&(e+="&"+t+"="+a)}e+="&token="+this.token,window.location.href=e},changeSort:function(e){console.log(e),this.getTableData={batchName:"",pageIndex:1,pageSize:20,itemName:"",voltLevel:"",apprStatus:"",deptCode:"",speciality:"",itemType:"",createor:"",sort:"",sortType:"",hasCode:""},"stockInTime"==e.prop?this.getTableData.sort="STOCK_IN_TIME":"apprStatus"==e.prop&&(this.getTableData.sort="APPR_STATUS"),"ascending"==e.order?this.getTableData.sortType="asc":"descending"==e.order&&(this.getTableData.sortType="desc"),this.getTable()},cannclSelection:function(){this.$refs.storagetable.clearSelection()},queryTable:function(){this.getTableData.sortType="",this.getTableData.sort="",this.getTableData.pageIndex=1,this.currentPage=1,this.cannclSelection(),this.getTable()},getAllItems:function(){this.currentPage=1,this.getTableData.pageIndex=1,this.getTableData.pageSize=10,this.getTableData.createor="",this.getTable()},getMyItems:function(){this.currentPage=1,this.getTableData.pageIndex=1,this.getTableData.pageSize=10,this.getTableData.createor=this.userId,this.getTable()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return"已批复"==t.apprStatus?"success-row":""},getValue:function(e){this.deptCode=e,console.log(this.valueId)},showDialogEdit:function(){0==this.parentItemInfo.length?this.$message.warning("请选择一项"):this.parentItemInfo.length>1?this.$message.warning("只能选择一项"):this.userId!=this.parentItemInfo[0].createor?this.$message.warning("你不是创建者，没有权利修改此项"):(this.parentItemInfo[0].isChild?this.hasParent=!0:this.hasParent=!1,this.showData.itemId=this.parentItemInfo[0].itemId,this.showData.phash=3,this.showDrawer=!0,this.timer=(new Date).getTime())},showDialogEdit2:function(){0==this.parentItemInfo.length?this.$message.warning("请选择一项"):this.parentItemInfo.length>1?this.$message.warning("只能选择一项"):this.userId!=this.parentItemInfo[0].createor?this.$message.warning("你不是创建者，没有权利修改此项"):(this.parentItemInfo[0].isChild?this.hasParent=!0:this.hasParent=!1,this.showData.itemId=this.parentItemInfo[0].itemId,this.showData.phash=1,this.showDrawer=!0,this.timer=(new Date).getTime())},getTreeDeptCode:function(){var e=this;Object(d["jc"])().then((function(t){var a=t.data.resultValue;Object(d["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},beforeUpload:function(e){var t=this;return""==t.specialityClass?(this.$message({message:"请先选择专项类型",type:"warning"}),!1):(t.importBtn=!0,!0)},uploadAdviceSuccess:function(e){if(this.importBtn=!1,e.successful)this.$message.success("导入成功"),this.showImportDialog=!1,this.importBtn=!1,this.getTableData.pageIndex=1,this.getTableData.pageSize=this.currentNum,this.currentPage=1,this.getTable();else{var t=e.resultHint;this.$message({showClose:!0,dangerouslyUseHTMLString:t,message:e.resultHint})}},ImportDialogShow:function(){var e=this;e.showImportDialog=!0,e.importBtn=!1},ImportTitleShow:function(){var e=this;e.showImporTitle=!0},closeBq:function(){var e=this;e.bqList=[],e.resetForm("bqForm")},resetForm:function(e){console.log("关闭事件"),this.$refs[e].resetFields()},submitForm:function(e){var t=this,a=this;a.$refs[e].validate((function(e){if(e){var l={childrenList:t.bqList,itemIds:t.scoreData.toString()};Object(d["nd"])(l).then((function(e){e.data.successful&&(a.$message({showClose:!0,message:"保存成功",type:"success"}),a.lyDialog=!1,a.getTable())}))}}))},valiNum:function(e,t,a){var l=/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g;""===t?a(new Error("请输入内容")):l.test(t)?a():a(new Error("请输入数字"))},validateNum:function(e,t,a){console.log("rule",e,"value",t,"callback",a);var l=/^[+]{0,1}(\d+)$/g;""===t?a(new Error("不能为空")):l.test(t)?a():a(new Error("请输入0及0以上的整数"))},getSpecValue:function(e,t){var a=this.dictMap.get("speciality"),l="";return a.forEach((function(t,a){t.codeName==e&&(l=t.codeValue)})),"01"==l&&t.voltLevel&&("35kV"==t.voltLevel||"20kV"==t.voltLevel?l=21:"110kV"==t.voltLevel?l=22:"10kV"==t.voltLevel||"6kV"==t.voltLevel||"6V"==t.voltLevel||"110V"==t.voltLevel||"12V"==t.voltLevel||"24V"==t.voltLevel||"36V"==t.voltLevel||"48V"==t.voltLevel||"600V"==t.voltLevel||"66kV"==t.voltLevel||"660V"==t.voltLevel||"750V"==t.voltLevel||"1000V（含1140V）"==t.voltLevel||"1500V"==t.voltLevel||"220V"==t.voltLevel||"2500V"==t.voltLevel||"3000V"==t.voltLevel||"380V(含400V)"==t.voltLevel?l=20:"220kV"==t.voltLevel||"330kV"==t.voltLevel?l=23:"500kV"!=t.voltLevel&&"750kV"!=t.voltLevel&&"1000kV"!=t.voltLevel||(l=24)),l},singleScore:function(e,t,a){this.scoreData=t,this.scoreSpecValue=[],this.scoreSpecValue.push();var l=this.getSpecValue(e,a);this.scoreSpecValue.push(l),this.showLabel()},showLabel:function(e,t,a){var l=this;this.bqItemId=t,console.log(this.scoreSpecValue.length),1==this.scoreSpecValue.length?(Object(d["fb"])({spec:this.scoreSpecValue[0],itemIds:this.scoreData.toString()}).then((function(e){e.data.successful&&(l.bqList=e.data.resultValue.childrenList,l.bqList.forEach((function(e,t){var a=[];e.childrenList.length?a.push({required:!0,message:e.labelClassName+"不能为空",trigger:"change"}):"1"==e.displayType?a.push({required:!0,message:e.labelClassName+"不能为空",trigger:"blur"},{validator:l.valiNum,trigger:"blur"}):a.push({required:!0,message:e.labelClassName+"不能为空",trigger:"blur"},{validator:l.validateNum,trigger:"blur"}),e.rules=a})))})),this.lyDialog=!0):this.$message({showClose:!0,message:"请选择同类型的项目批量评分！",type:"warning"})},validationMoney:function(e){console.log(e),e.money<0&&(e.money=0,this.$message({showClose:!0,message:"不能为负数",type:"warning"}))},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showItemInfo:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},submitOutbound:function(e){var t=this,a=[];for(var l in t.outboundForm)""!=t.outboundForm[l].money&&a.push({spec:t.outboundForm[l].codeValue,money:t.outboundForm[l].money});Object(d["jb"])(a).then((function(e){if(e.data.successful){if(e.data.resultValue.list.length){t.$refs["outboundForm"].resetFields();var a=t.dictMap.get("speciality");for(var l in e.data.resultValue.list)for(var s in a)e.data.resultValue.list[l].speciality==a[s].codeValue+""&&(e.data.resultValue.list[l].speciality=a[s].codeName+"");t.ckData=e.data.resultValue.list}var i=e.data.resultValue.errors,o="";i.forEach((function(e){o+=e.error+"<br>"})),setTimeout((function(){t.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:o,type:"warning"})}),500)}}))},changeMoney:function(){console.log(this.outboundForm);var e=this;for(var t in e.outboundForm){if(""!=e.outboundForm[t].money){e.isOutbound=!1;break}e.isOutbound=!0}},dateFormat:function(e,t){var l=a("c1df"),s=e[t.property];return s?l(s).format("YYYY-MM-DD"):""},exceed:function(){this.$message({showClose:!0,message:"只能上传一个批复文件",type:"warning"})},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getBM:function(){var e=this;window.frames["my-iframe"].pageForm.btnSure_onclick(window.event,(function(t){console.log(t),console.log("my-iframe点击事件");var a=document.getElementById("my-iframe"),l=a.contentWindow||a.contentDocument,s=l.document.getElementById("newCode").innerHTML;s?(e.bmForm.code=s,e.bmDialog=!1,e.saveBmForm()):e.$message({showClose:!0,message:"请先生成编码",type:"warning"})}))},showBmJsp:function(e){var t=this,a=e.itemId;Object(d["Y"])({itemId:a}).then((function(l){if(l.data.successful){var s=l.data.resultValue;e.code?t.codeUrl="/pcinfo/resUnicode/pages/pgEditUnifiedInfo.jsp?appID=00&applyID=123123123123&iscUserId=&loginName=sx_test&itemSpecial=10001&openType=1&operType=2&prjCode="+e.code+"&itemID="+a:(t.codeUrl="/pcinfo/resUnicode/pages/pgEditUnifiedCode.jsp?appID=00&applyID=123123123123&iscUserId=&loginName=sx_test&itemSpecial=10001&openType=1&operType=0",t.codeUrl+=s),t.codeUrl=encodeURI(encodeURI(t.codeUrl)),t.bmForm={code:"",itemId:""},t.bmDialog=!0,t.bmForm.itemId=e.itemId}}))},batchBMAll:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,l,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.batchAllLoad=!0,l="",s=0;case 4:if(!(s<a.parentItemInfo.length)){t.next=18;break}return i=a.parentItemInfo[s],t.prev=6,t.next=9,a.showBm2(i);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](6),console.log(t.t0),l+=i.itemName+"编码失败<br/>";case 15:s++,t.next=4;break;case 18:a.batchAllLoad=!1,""!=l?a.$alert(l,"提示",{confirmButtonText:"关闭",dangerouslyUseHTMLString:!0,customClass:"submit-error"}):a.$message.success("批量编码成功"),a.getTable(),a.$refs.storagetable.clearSelection();case 22:case"end":return t.stop()}}),t,null,[[6,11]])})))()},batchBM:function(){var e=this;if(e.parentItemInfo.length>0)for(var t=0;t<e.parentItemInfo.length;t++){var a=e.parentItemInfo[t];if(null!=a.code&&""!=a.code&&void 0!=a.code)return e.$message.warning("所选项目中已包含编码"),!1}else e.$message.warning("请选择需要编码的项目");e.batchBMAll()},showBm2:function(e){e.btnLoading=!0;var t=e.itemId;return new Promise((function(a,l){Object(d["H"])({itemId:t}).then((function(s){if(s.data.successful){var i=s.data.resultValue;Object(g["a"])(i).then((function(s){e.btnLoading=!1,console.log(s);var i=s.data.status;if(-1!=i.indexOf("200"))l(),console.log("调用编码器失败,权限校验失败");else if(-1!=i.indexOf("100")){var o=s.data.applyResult,n=o[0];if(-1!=n.status.indexOf("100")){var r=n.baseCode;Object(d["Vd"])({itemId:t,code:r}).then((function(e){e.data.successful&&a()}))}else if(-1!=n.status.indexOf("200")){var c="";for(var u in n.applyResult)c=n.applyResult[u];l(),console.log(c)}}}))}})).catch((function(e){l(e)}))}))},showBm:function(e){var t=this;e.btnLoading=!0;var a=e.itemId;Object(d["H"])({itemId:a}).then((function(l){if(l.data.successful){var s=l.data.resultValue;console.log(s),Object(g["a"])(s).then((function(l){e.btnLoading=!1,console.log(l);var s=l.data.status;if(-1!=s.indexOf("200"))t.$message.error("调用编码器失败,权限校验失败");else if(-1!=s.indexOf("100")){var i=l.data.applyResult,o=i[0];if(-1!=o.status.indexOf("100")){var n=o.baseCode;Object(d["Vd"])({itemId:a,code:n}).then((function(e){e.data.successful&&(t.$message.success("编码成功"),t.getTable())}))}else if(-1!=o.status.indexOf("200")){var r="";for(var c in o.applyResult)r=o.applyResult[c];t.$message.error(r)}}}))}}))},saveBmForm:function(){var e=this;""!=this.bmForm.code?Object(d["gd"])(this.bmForm).then((function(t){console.log("response",t),t.data.successful?(e.detailDialog=!1,e.$message({showClose:!0,message:"保存成功",type:"success"}),e.getTable()):e.$message({showClose:!0,message:t.data.resultHint,dangerouslyUseHTMLString:!0,type:"error"})})):this.$message({showClose:!0,message:"请填写编码",type:"warning"})},isCommit:function(e,t){},saveOrder:function(){var e=this;this.$refs["pxForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(d["ld"])(e.pxForm).then((function(t){console.log("response",t),t.data.successful?(e.pxDialog=!1,e.$message({showClose:!0,message:"保存成功",type:"success"}),e.getTable()):e.$message({showClose:!0,message:t.data.resultHint,dangerouslyUseHTMLString:!0,type:"error"})}))}))},hideCk:function(){this.innerVisible=!1,this.ckDialog=!1},showPx:function(e){var t=this;t.pxForm={state:e.isCommit,speciality:"",shorderNo:"",xorderNo:"",siorderNo:"",itemId:"",isEdit:""},t.pxDialog=!0,t.pxForm.itemId=e.itemId,Object(d["Pb"])({itemId:e.itemId}).then((function(e){console.log("response",e),e.data.successful&&(t.pxForm.shorderNo=e.data.resultValue.shorderNo,t.pxForm.siorderNo=e.data.resultValue.siorderNo,t.pxForm.speciality=e.data.resultValue.speciality,t.pxForm.xorderNo=e.data.resultValue.xorderNo,t.pxForm.isEdit=e.data.resultValue.isEdit)}))},closePfDialog:function(){this.fileList=[],this.fileId="",this.apprFileNo="",this.pfDialog=!1},showPF:function(){this.isChildSelect?this.$message({showClose:!0,message:"不能选择包含上级的项目",type:"warning"}):this.delData.ids.length?this.pfDialog=!0:this.$message({showClose:!0,message:"请选择要批复的数据",type:"warning"})},changeProbName:function(e){e||this.getTable()},handleNodeClick:function(e){this.showForm=e.id,console.log(this.showForm)},submitTable:function(){var e=this,t=this;Object(d["Kd"])().then((function(a){console.log("response",a),a.data.successful?(e.$message({showClose:!0,message:"提交成功",type:"success"}),t.getTable(),t.$refs.storagetable.clearSelection()):e.$alert(a.data.resultHint,"提示",{confirmButtonText:"关闭",dangerouslyUseHTMLString:!0,customClass:"submit-error"}),t.loading=!1}))},getRowKeys:function(e){return e.itemId},handleSelectionChange:function(e){console.log("handleSelectionChange",e);var t=this;t.parentItemInfo=[],t.parentItemInfo=t.parentItemInfo.concat(e),e&&(t.scoreData=[],t.scoreSpecValue=[],t.submitData=[],t.delData={ids:[]},t.exportData={ids:[]},t.isChildSelect=!1,e.forEach((function(e,a){e.isChild&&(t.isChildSelect=!0),t.scoreData.push(e.itemId);var l=t.getSpecValue(e.speciality,e);-1==t.scoreSpecValue.indexOf(l)&&t.scoreSpecValue.push(t.getSpecValue(e.speciality,e)),-1==t.submitData.indexOf(e.itemId)&&(t.submitData.push(e.itemId),t.delData.ids.push(e.itemId),t.exportData.ids.push(e.itemId))})))},del:function(){var e=this,t=this;if(t.delData.ids.length){for(var a=0;a<t.delData.length;a++){var l=t.delData[a];if(l.createor!=t.userId)return t.$message({showClose:!0,message:"所选项目中存在不是创建者创建的项目，请检查后再删除",type:"warning"}),!1}this.$confirm("此操作将永久删除"+t.delData.ids.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,Object(d["D"])(t.delData).then((function(a){console.log("response",a),a.data.successful?(e.$message({showClose:!0,message:"删除成功",type:"success"}),t.getTable()):e.$message({showClose:!0,message:a.data.resultHint,dangerouslyUseHTMLString:!0,type:"error"}),t.loading=!1,t.cannclSelection()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}else this.$message({showClose:!0,message:"未选择任何数据",type:"warning"})},showDialog:function(e){var t=this;t.dialogFormVisible=!0,t.tempItemId=e.itemId,Object(d["gb"])({itemId:e.itemId}).then((function(e){console.log(e),e.data.successful&&(t.browseLabel=e.data.resultValue.tableLable,t.browseTableData=e.data.resultValue.tableData,t.browseDictMap=t.getDictArr(t.browseLabel),t.browseShowData=t.getShowDateTable(t.browseTableData,t.browseDictMap),console.log("browseShowData",t.browseShowData)),t.dialogLoading=!1}))},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentNum=e,this.getTableData.pageSize=e,this.getTableData.pageIndex=this.currentPage,this.getTable()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.getTableData.pageIndex=e,this.getTableData.pageSize=this.currentNum,this.getTable()},getTable:function(){var e=this;e.loading=!0,console.log("currentPage",this.currentPage),console.log(e.getTableData),Object(d["Nc"])(e.getTableData).then((function(t){if(console.log("response",t),e.isChildSelect=!1,t.data.successful){"1"==t.data.resultValue.submit?e.isSubmit=!1:e.isSubmit=!0,"1"==t.data.resultValue.paixu?e.ispaixu=!1:e.ispaixu=!0,e.totalNum=t.data.resultValue.totalNum,e.tableLabel=t.data.resultValue.tableLable,e.tableData=t.data.resultValue.tableData,e.dictMap=e.getDictArr(e.tableLabel);var a=e.dictMap.get("speciality");for(var l in a)e.$set(a[l],"money",""),e.outboundForm[l]=a[l];console.log("outboundForm",e.outboundForm),e.storageLabelList=t.data.resultValue.tableLable,e.storageDictMap=e.getDictArr(e.storageLabelList),e.storageTableData=t.data.resultValue.tableData,e.storageShowData=e.getShowDateTable(e.storageTableData,e.storageDictMap),e.storageShowData.forEach((function(t){if(t.children){var a=t.children;a.forEach((function(a,l){-1!=e.submitData.indexOf(a.itemId)&&e.$refs.storagetable.toggleRowSelection(t.children[l],!0)}))}})),e.$nextTick((function(){e.$refs.storagetable.doLayout()}))}e.loading=!1})).catch((function(e){console.log(e)}))},getShowDateTable:function(e,t){console.log(t);for(var a=this,l=[],s=0;s<e.length;s++){var o=e[s];if("undefined"!=typeof o.children&&null!=o.children&&o.children.length>0){var n=[];n=o.children,o.children=a.getShowDateTable(n,a.storageDictMap)}o.btnLoading=!1;for(var r=new Object,c=0,u=Object.entries(o);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else r[m]=p}l.push(r)}return l},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];if(null!=l.codeList){if("speciality"==l.colDname){for(var s=[],i=0;i<l.codeList.length;i++){var o=l.codeList[i];"05"!=o.codeValue&&"07"!=o.codeValue&&"14"!=o.codeValue&&s.push(o)}l.codeList=s}t.set(l.colDname,l.codeList)}}return t},pfFile:function(){var e=this;if(!this.apprFileNo)return this.$message({showClose:!0,message:"请输入项目可研批复文号",type:"warning"}),!1;var t={ids:this.delData.ids,primarykey:[this.fileId,this.apprFileNo]};Object(d["f"])(t).then((function(t){console.log(t),t.data.successful&&(e.$message({showClose:!0,message:"批复成功",type:"success"}),e.getTable(),e.closePfDialog())}))},uploadSuccess:function(e,t,a){var l=this;console.log(e),l.uploading=!1,l.fileList=a,console.log(l.fileList),e.successful?(l.fileId=e.resultValue,l.$message({showClose:!0,message:"上传成功",type:"success"})):l.$message({showClose:!0,message:e.resultHint,dangerouslyUseHTMLString:!0,type:"error"})},beforeupload:function(){this.uploading=!0},errorUpload:function(){var e;this.uploading=!1,this.$message((e={type:"info",message:response.resultHint},Object(r["a"])(e,"type","error"),Object(r["a"])(e,"dangerouslyUseHTMLString",!0),e))}}},v=b,w=(a("3825"),a("49d4"),a("2877")),y=Object(w["a"])(v,l,s,!1,null,"2cfe981c",null);t["default"]=y.exports},"9e74":function(e,t,a){"use strict";var l=a("a810"),s=a.n(l);s.a},"9ea2":function(e,t,a){},"9ed6":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{align:"right",model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[a("div",{staticClass:"title-container"}),a("el-form-item",{attrs:{prop:"username"}},[a("span",{staticClass:"svg-container"},[e._v(" 用户名： ")]),a("el-input",{ref:"username",attrs:{placeholder:"用户名",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container "},[e._v(" 密码： ")]),a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}})],1),a("el-button",{staticClass:"orange",staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("登录")])],1)],1)},s=[],i={name:"Login",data:function(){var e=function(e,t,a){t?a():a(new Error("请输入用户名"))},t=function(e,t,a){a()};return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,passwordType:"password",redirect:void 0}},mounted:function(){},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(){e.loading=!1}))}))}}},o=i,n=(a("92ed"),a("164e"),a("2877")),r=Object(n["a"])(o,l,s,!1,null,"3a87c36f",null);t["default"]=r.exports},"9ff1":function(e,t,a){"use strict";var l={treeListInfo:""},s={SET_TREEINFO:function(e,t){e.treeListInfo=t}},i={set_treeInfo:function(e,t){var a=e.commit;a("SET_TREEINFO",t)}};t["a"]={namespaced:!0,state:l,mutations:s,actions:i}},a010:function(e,t,a){"use strict";var l=a("2c28"),s=a.n(l);s.a},a187:function(e,t,a){"use strict";var l=a("1418"),s=a.n(l);s.a},a18c:function(e,t,a){"use strict";a.d(t,"b",(function(){return H})),a.d(t,"a",(function(){return Q})),a.d(t,"d",(function(){return Y}));var l=a("2b0e"),s=a("8c4f"),i=a("bc85"),o=a("3b00"),n=a("7248"),r=a("c64d"),c=a("f564"),u=a("529e"),d=a("2670"),m=a("735f"),p=a("494b"),h=a("94a4"),f=a("4615"),g=a("5d4c"),b=a("ef00"),v=a("ceab"),w=a("ddbf"),y=a("2c70"),D=a("0f83"),C=a("5214"),I=a("84f6"),L=a("2b80"),S=a("9d46"),T=a("f516"),k=a("6e7d"),_=a("86a7"),N=a("9ed6"),x=a("71cc"),j=a("7abe"),O=(a("8cdb"),a("40d4"),a("08cd")),A=a("e3b4"),V=a("7513"),P=a("856d"),$=a("eca2"),F=a("b2ec"),M=a("da49"),q=a("0f8b"),B=a("fe39"),E=a("acb6"),z=a("07e2"),R=a("cce6"),U=a("ca0a");l["default"].use(s["a"]);var H=[{path:"/perfectFileApproval",name:"perfectFileApproval",component:U["default"],hidden:!0},{path:"/uploadFileApproval",name:"uploadFileApproval",component:R["default"],hidden:!0},{path:"/countersignatureApproval",name:"countersignatureApproval",component:z["default"],hidden:!0},{path:"/collectCommentsApproval",name:"collectCommentsApproval",component:E["default"],hidden:!0},{path:"/reviewCommentsApproval",name:"reviewCommentsApproval",component:B["default"],hidden:!0},{path:"/expertsAgainApproval",name:"expertsAgainApproval",component:q["default"],hidden:!0},{path:"/expertsConfirmApproval",name:"expertsConfirmApproval",component:M["default"],hidden:!0},{path:"/planAssessmentApproval",name:"planAssessmentApproval",component:$["default"],hidden:!0},{path:"/planAssessAgainApproval",name:"planAssessAgainApproval",component:F["default"],hidden:!0},{path:"/todo",name:"todo",component:A["default"],hidden:!0},{path:"/projectApproval",name:"projectApproval",component:V["default"],hidden:!0},{path:"/projectSubmitApproval",name:"projectSubmitApproval",component:P["default"],hidden:!0},{path:"/login",component:N["default"],hidden:!0},{path:"/addItem",name:"itemAdd",component:n["default"],hidden:!0},{path:"/addItemLG",name:"itemAddLG",component:f["default"],hidden:!0},{path:"/addItemCommon",name:"itemAddCommon",component:g["default"],hidden:!0},{path:"/itemEdit",name:"itemEdit",component:r["default"],hidden:!0},{path:"/itemInfo",name:"itemInfo",component:c["default"],hidden:!0},{path:"/storageTable",name:"storageTable",component:T["default"],hidden:!0},{path:"/isclogin",component:x["default"],hidden:!0},{path:"/",isOpen:!0,component:j["default"],name:"首页",children:[{path:"/",name:"home",component:j["default"]}]}];t["c"]=new s["a"]({routes:H});var Q=[{path:"/questions",component:O["a"],name:"项目需求管理",meta:{role:["1","1-1","1-2"]},isOpen:!0,children:[{path:"/questions",component:i["default"],name:"问题库管理",meta:{role:["1-1"]}},{path:"/demand",component:o["default"],name:"需求库管理",meta:{role:["1-2"]}}]},{path:"/projecta",component:O["a"],name:"项目立项管理",isOpen:!0,meta:{role:["2","2-1","2-2","2-3","2-1-1","2-1-2","2-1-3","2-1-4","2-1-5","2-1-6","2-1-7","2-1-8","2-1-9","2-1-10","2-1-11","2-1-12","2-1-13","2-1-14","2-1-15","2-1-16"]},children:[{path:"/project/0/1",component:O["a"],name:"项目立项",meta:{role:["2-1","2-1-1","2-1-2","2-1-3","2-1-4","2-1-5","2-1-6","2-1-7","2-1-8","2-1-9","2-1-10","2-1-11","2-1-12","2-1-13","2-1-14","2-1-15","2-1-16"]},isOpen:!0,children:[{path:"/project/0/1",component:u["default"],name:"电网基建",meta:{role:["2-1-1"]}},{path:"/project/0/2",component:u["default"],name:"电网小型基建",meta:{role:["2-1-2"]}},{path:"/project/0/3",component:u["default"],name:"生产技改",meta:{role:["2-1-3"]}},{path:"/project/0/4",component:u["default"],name:"生产大修",meta:{role:["2-1-4"]}},{path:"/project/0/5",component:u["default"],name:"电力营销投入",meta:{role:["2-1-5"]}},{path:"/project/0/6",component:u["default"],name:"电网信息化投入",meta:{role:["2-1-6"]}},{path:"/project/0/7",component:u["default"],name:"生产辅助大修",meta:{role:["2-1-7"]}},{path:"/project/0/8",component:u["default"],name:"教育培训",meta:{role:["2-1-8"]}},{path:"/project/0/13",component:u["default"],name:"研究开发",meta:{role:["2-1-12"]}},{path:"/project/0/14",component:u["default"],name:"股权投资",meta:{role:["2-1-13"]}},{path:"/project/0/15",component:u["default"],name:"零星购置",meta:{role:["2-1-14"]}},{path:"/project/0/16",component:u["default"],name:"生产辅助技改",meta:{role:["2-1-15"]}},{path:"/project/0/17",component:u["default"],name:"管理咨询",meta:{role:["2-1-16"]}},{path:"/project/0/18",component:u["default"],name:"资本性",meta:{role:["2-1-1"]}},{path:"/project/0/19",component:u["default"],name:"成本性",meta:{role:["2-1-4"]}}]},{path:"/itemCheck",component:p["default"],isOpen:!1,name:"立项审核",meta:{role:["2-2"]}},{path:"/itemKY",component:h["default"],isOpen:!1,name:"立项项目库",meta:{role:["2-4"]}},{path:"/compile",component:d["default"],isOpen:!1,name:"评审计划申请",meta:{role:["2-5"]}},{path:"/hasSubmitPlan",component:m["default"],isOpen:!1,name:"已提交评审计划",meta:{role:["2-3"]}}]},{path:"/analysis",component:O["a"],name:"可研评审管理",meta:{role:["3","3-1","3-2","3-3","3-4","3-1-1","3-1-2","3-1-3","3-1-4","3-2-1","3-2-2","3-2-3","3-1-5"]},isOpen:!0,children:[{path:"/plan",component:O["a"],name:"评审计划管理",isOpen:!0,meta:{role:["3-1","3-1-1","3-1-2","3-1-3","3-1-4","3-1-5"]},children:[{path:"/plan/0",component:w["default"],name:"评审计划信息",meta:{role:["3-1-1"]}},{path:"/plan/1",component:y["default"],name:"评审计划汇总",meta:{role:["3-1-2"]}},{path:"/plan/2",component:D["default"],name:"评审计划审查",meta:{role:["3-1-3"]}},{path:"/plan/3",component:C["default"],name:"评审计划下达",meta:{role:["3-1-4"]}}]},{path:"/online",component:O["a"],name:"可研评审",isOpen:!0,meta:{role:["3-2","3-2-1","3-2-2","3-2-3"]},children:[]},{path:"/plan/4",component:I["default"],name:"零星项目审核",meta:{role:["3-5"]}},{path:"/analysis",component:b["default"],name:"可研评审分析",meta:{role:["3-3"]}},{path:"/experts",component:v["default"],name:"评审专家库",meta:{role:["3-4"]}}]},{path:"/storageManagement",component:O["a"],name:"项目储备管理",isOpen:!0,meta:{role:["4","4-1","4-2","4-3-px"]},children:[{path:"/storageManagement",component:S["default"],name:"储备库管理",meta:{role:["4-1"]}},{path:"/storageOrder",component:k["default"],name:"分级排序",meta:{role:["4-3-px"]}},{path:"/reserveAnalysis",component:L["default"],name:"储备分析",meta:{role:["4-2"]}}]},{path:"/templateConfiguration",component:O["a"],name:"模版配置",isOpen:!0,meta:{role:["5","5-1","5-2","5-3","5-4","5-5","5-1-1","5-1-2","5-1-3","5-2-1","5-2-2","5-3-1","5-3-2","5-3-3","5-3-4","5-4-1","5-5-1"]},children:[{path:"/templateConfiguration/1",component:_["default"],name:"项目需求",isOpen:!0,meta:{role:["5-1","5-1-1","5-1-2","5-1-3"]},children:[{path:"/templateConfiguration/1/1",component:_["default"],name:"战略导向需求模版",isOpen:!0,meta:{role:["5-1-1"]}},{path:"/templateConfiguration/1/2",component:_["default"],name:"市场导向需求模版",isOpen:!0,meta:{role:["5-1-2"]}},{path:"/templateConfiguration/1/3",component:_["default"],name:"问题导向需求模版",isOpen:!0,meta:{role:["5-1-3"]}}]},{path:"/templateConfiguration/2",component:_["default"],name:"可研编制",meta:{role:["5-2","5-2-1","5-2-2"]},isOpen:!0,children:[{path:"/templateConfiguration/2/1",component:_["default"],name:"可研报告模版",isOpen:!0,meta:{role:["5-2-1"]}},{path:"/templateConfiguration/2/2",component:_["default"],name:"项目建议书模版",isOpen:!0,meta:{role:["5-2-2"]}}]},{path:"/templateConfiguration/3",component:_["default"],name:"可研评审",meta:{role:["5-3","5-3-1","5-3-2","5-3-3","5-3-4"]},isOpen:!0,children:[{path:"/templateConfiguration/3/1",component:_["default"],name:"项目建议书审查意见模版",isOpen:!0,meta:{role:["5-3-1"]}},{path:"/templateConfiguration/3/2",component:_["default"],name:"评审计划模版",isOpen:!0,meta:{role:["5-3-2"]}},{path:"/templateConfiguration/3/3",component:_["default"],name:"可研评审专家模版",isOpen:!0,meta:{role:["5-3-3"]}},{path:"/templateConfiguration/3/4",component:_["default"],name:"可研评审意见模版",isOpen:!0,meta:{role:["5-3-4"]}}]},{path:"/templateConfiguration/4",component:_["default"],name:"可研批复",meta:{role:["5-4","5-4-1"]},isOpen:!0,children:[{path:"/templateConfiguration/4/1",component:_["default"],name:"可研批复意见模版",isOpen:!0,meta:{role:["5-4-1"]}}]},{path:"/templateConfiguration/5",component:_["default"],name:"储备监督检查",meta:{role:["5-5","5-5-1"]},isOpen:!0,children:[{path:"/templateConfiguration/5/1",component:_["default"],name:"监督检查意见模版",isOpen:!0,meta:{role:["5-5-1"]}}]}]}],W=function(){return new s["a"]({mode:"hash",scrollBehavior:function(){return{y:0}},routes:H})},G=W();function Y(){var e=W();G.matcher=e.matcher}},a1a3:function(e,t,a){"use strict";var l=a("a343"),s=a.n(l);s.a},a1f0:function(e,t,a){"use strict";var l=a("1b16"),s=a.n(l);s.a},a1f3:function(e,t,a){},a27a:function(e,t,a){"use strict";var l=a("ebe1"),s=a.n(l);s.a},a32f:function(e,t,a){"use strict";var l=a("d62a"),s=a.n(l);s.a},a343:function(e,t,a){},a48e:function(e,t,a){"use strict";var l=a("fc6b"),s=a.n(l);s.a},a4f2:function(e,t,a){"use strict";var l=a("a799"),s=a.n(l);s.a},a665:function(e,t,a){"use strict";var l=a("a1f3"),s=a.n(l);s.a},a78c:function(e,t,a){"use strict";var l=a("c80f"),s=a.n(l);s.a},a799:function(e,t,a){},a810:function(e,t,a){},a81a:function(e,t,a){"use strict";var l=a("4608"),s=a.n(l);s.a},a89d:function(e,t,a){},a95b:function(e,t,a){"use strict";var l=a("e542"),s=a.n(l);s.a},a960:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"myselect",class:{size_large:"large"==e.size},attrs:{value:e.valueTitle,clearable:"",size:e.size,disabled:e.disabled},on:{clear:e.clearHandle}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:e.reFresh,expression:"reFresh"}],staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle},nativeOn:{dblclick:function(t){return e.double(t)}}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,value:e.valueId,props:e.props,"node-key":"id","default-expanded-keys":e.defaultExpandedKey,onselectstart:"return false"},on:{"node-click":e.handleNodeClick}})],1)],1)},s=[],i=(a("4160"),a("159b"),a("5530")),o=a("2f62"),n=a("7e1e"),r=a("9ff1"),c={name:"el-tree-select",props:{disabled:{default:!1},size:{type:String,default:"small"},deptCodeT:{type:String,default:""},deptName:{type:String,default:""},clearable:{type:Boolean},accordion:{type:Boolean}},data:function(){return{valueId:null,options:[],valueTitle:"",defaultExpandedKey:[],reFresh:!1,deptCode:"",props:{label:"name",children:"children",code:"deptCode",value:"id"}}},created:function(){this.$store.dispatch("treeList/set_treeInfo"),console.log("created")},store:r["treeList"],mounted:function(){this.valueId=this.value,console.log(this.options),console.log(this.props),this.initHandle(),console.log(this.$store.state.treeListInfo),this.$store.state.treeListInfo?(this.options=this.$store.state.treeListInfo,this.reFresh=!0,console.log("走缓存")):(this.getTreeDeptCode(),console.log("走接口"))},computed:Object(i["a"])({},Object(o["c"])({treeListInfo:function(e){return e.treeListInfo}})),methods:{double:function(){this.$refs.myselect.blur()},getTreeDeptCode:function(){var e=this;Object(n["jc"])().then((function(t){var a=t.data.resultValue;Object(n["hc"])().then((function(t){t.data.successful&&(e.valueId=a,e.reFresh=!0,e.$store.state.treeListInfo=t.data.resultValue,e.options=t.data.resultValue,console.log(e.$store.state.treeListInfo))}))}))},initHandle:function(){var e=this;""!=e.deptName&&(e.valueTitle=e.deptName),this.initScroll()},initScroll:function(){this.$nextTick((function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin: 0px; max-height: none; overflow: hidden;",t.forEach((function(e){return e.style.width=0}))}))},handleNodeClick:function(e){this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.deptCode=e[this.props.code],this.$emit("getValue",this.deptCode),console.log(this.deptCode),this.defaultExpandedKey=[]},clearHandle:function(){this.valueTitle="",this.valueId=null,this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",null)},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))}},watch:{deptName:function(){""!=this.deptName&&(this.valueTitle=this.deptName)}}},u=c,d=(a("3828"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"28558e6e",null);t["a"]=m.exports},ac99:function(e,t,a){},acae:function(e,t,a){"use strict";var l=a("d03a"),s=a.n(l);s.a},acb6:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"collect-comments"},[a("h3",{staticClass:"dialog_tit"},[e._v("汇总专家意见")]),a("el-table",{staticClass:"dialog_table",attrs:{data:e.expertInfoArrShow,"max-height":"480px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{label:"专家姓名",prop:"expertName"}}),a("el-table-column",{attrs:{label:"专业",prop:"professional"}}),a("el-table-column",{attrs:{label:"评审结果",prop:"isAuditStr"}}),a("el-table-column",{attrs:{label:"评审意见",prop:"auditAdvice"}}),a("el-table-column",{attrs:{label:"评审意见附件","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return""!=t.row.auditFileId?[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportReport?feaAuditid="+t.row.auditFileId+"&token="+e.token}},[e._v("附件")])]:void 0}}],null,!0)})],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!1,model:e.expertAdvice}},[a("el-form-item",{attrs:{label:"总体评审意见"}},[a("el-radio-group",{model:{value:e.expertAdvice.agreeType,callback:function(t){e.$set(e.expertAdvice,"agreeType",t)},expression:"expertAdvice.agreeType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("通过")]),a("el-radio",{attrs:{label:"0"}},[e._v("不通过")]),a("el-radio",{attrs:{label:"2"}},[e._v("修改后通过")])],1)],1),a("el-form-item",[a("el-input",{staticClass:"diy",attrs:{type:"textarea"},model:{value:e.expertAdvice.auditOption,callback:function(t){e.$set(e.expertAdvice,"auditOption",t)},expression:"expertAdvice.auditOption"}})],1)],1),a("h3",{staticClass:"dialog_tit"},[e._v("评审意见模版 "),a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=9&codeValue="+e.itemSpeciality+"&token="+e.token}},[e._v("下载评审意见模版")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",[a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStFeaAudit/uploadFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadAdviceSuccess,multiple:!1,"show-file-list":!0,accept:".doc,.docx",limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("确认")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){return{isAuto:!1,itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,loadingBtn2:!1,expertInfoArrShow:[],expertAdvice:{auditFileId:"",itemId:"",agreeType:"1",auditOption:"",isBatchPackage:!1},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"",userSpecialityArr:[],token:"",userId:"",itemSpeciality:""}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10),this.userId=this.$route.query.iscUserId,this.token=sessionStorage.getItem("token")},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID,option:{checkPermission:"false",relativeData:{isPass:this.expertAdvice.agreeType}}};this.loadingBtn1=!0,Object(m["f"])(t).then((function(t){"0"==t.data.status?Object(u["r"])(e.expertAdvice).then((function(t){if(e.loadingBtn1=!1,t.data.successful)e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}});else{var a=t.data.resultHint;e.$message.error(a)}})):(e.loadingBtn1=!1,e.$message.error(t.data.message))}))},uploadAdviceSuccess:function(e){var t=this;if(e.successful)t.expertAdvice.auditFileId=e.resultValue.auditFileId,this.$message({showClose:!0,message:"上传成功",type:"success"});else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var l=e.data.resultValue;a.expertAdvice.itemId=l.itemId,1==l.isBatchPackage?a.expertAdvice.isBatchPackage=!0:a.expertAdvice.isBatchPackage=!1;var s=[];null!=l&&s.push(l),a.tableDataShow=a.getShowDateTable(s,a.dictMap,a.columnTypeMapDict),Object(u["W"])({itemId:l.itemId,isBatchPackage:a.expertAdvice.isBatchPackage}).then((function(e){if(e.data.successful){console.log(e.data);var l=e.data.resultValue.tableLable,s=[];for(var i in l){var o=l[i];"professional"==o.colDname&&(s=o.codeList)}a.expertInfoArr=e.data.resultValue.tableData,a.expertInfoArrShow=[],a.expertInfoArr.forEach((function(e){var t={};t=e,(1==e.isAudit||0==e.isAudit||2==e.isAudit)&&t.isAuditStr;for(var l=0;l<s.length;l++){var i=s[l];t.professional==i.codeValue&&(t.professional=i.codeName)}a.expertInfoArrShow.push(t)}))}else t.$message({showClose:!0,message:"查询专家列表失败",type:"error"}),a.expertInfoArr=[]}))}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("b061"),a("f75c"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"63630836",null);t["default"]=g.exports},af95:function(e,t,a){},aff5:function(e,t,a){"use strict";var l=a("15a4"),s=a.n(l);s.a},b061:function(e,t,a){"use strict";var l=a("6ee6"),s=a.n(l);s.a},b0a0:function(e,t,a){"use strict";var l=a("452c"),s=a.n(l);s.a},b25b:function(e,t,a){},b285:function(e,t,a){},b29b:function(e,t,a){},b2ec:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"plan-assess"},[a("el-form",{staticClass:"demo-form-inline reject-form",attrs:{model:e.form,"label-width":"10%"}},[a("el-form-item",{attrs:{label:"驳回原因:"}},[a("el-input",{staticClass:"reject-input",attrs:{type:"textarea",disabled:""},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("再次提交")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){return{rejectReason:"",itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:"",itemPhaseDet:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10),this.getWorkItemStatus()},computed:Object(o["a"])({},Object(n["b"])([])),methods:{getWorkItemStatus:function(){var e=this,t=e.$route.query.processInstID,a={};a.processInstID=t,Object(u["oc"])(a).then((function(t){if(t.data.successful){console.log(t);var a=t.data.resultValue;e.rejectReason=a[a.length-1].auditDesc}}))},cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};Object(m["e"])(t).then((function(t){if("0"==t.data.status){var a={itemId:e.tempItemId,isBatchPackage:e.auditItemParam.isBatchPackage,status:2};Object(u["Qd"])(a).then((function(t){t.data.successful&&e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}})}))}else e.$message.error(t.data.message)}))},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemIds=t.itemId,a.auditItemParam.itemPhaseDet=t.itemPhaseDet;var l=[];null!=t&&l.push(t),a.tableDataShow=a.getShowDateTable(l,a.dictMap,a.columnTypeMapDict),1==t.isBatchPackage?a.auditItemParam.isBatchPackage=!0:a.auditItemParam.isBatchPackage=!1}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("78d6"),a("7b32"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"2474a71e",null);t["default"]=g.exports},b39f:function(e,t,a){"use strict";(function(e){a("4de4"),a("b64b");var l=a("5530"),s=a("2f62"),i=a("5f87");t["a"]={name:"naver",data:function(){return{isCollapse:!1,activeIndex:"",ischange:!0}},watch:{},computed:Object(l["a"])({},Object(s["b"])(["permission_routes"]),{},Object(s["c"])({pathChangeActive:function(e){return e.itemadd.pathChangeActive}}),{routes:function(){return e.antRouter}}),mounted:function(){Object(i["f"])("path",window.location.href)?(console.log("隐藏菜单"),this.$store.dispatch("app/setHideMenu",!0),this.$store.dispatch("app/setIscollapse",!0)):(this.$store.dispatch("app/setHideMenu",!1),this.$store.dispatch("app/setIscollapse",!1)),console.log("this.routes",this.permission_routes)},methods:{notHttp:function(e){return"http"!=e.substring(0,4)},toggleIsCollapse:function(){this.isCollapse=!this.isCollapse,this.$store.dispatch("app/setIscollapse",this.isCollapse)},setPath:function(e){var t=this;"/templateConfiguration/1/1"==e?t.$router.push({path:e,query:{tmplTypeId:"1"}}):"/templateConfiguration/1/2"==e?t.$router.push({path:e,query:{tmplTypeId:"2"}}):"/templateConfiguration/1/3"==e?t.$router.push({path:e,query:{tmplTypeId:"3"}}):"/templateConfiguration/2/1"==e?t.$router.push({path:e,query:{tmplTypeId:"4"}}):"/templateConfiguration/2/2"==e?t.$router.push({path:e,query:{tmplTypeId:"5"}}):"/templateConfiguration/3/1"==e?t.$router.push({path:e,query:{tmplTypeId:"6"}}):"/templateConfiguration/3/2"==e?t.$router.push({path:e,query:{tmplTypeId:"7"}}):"/templateConfiguration/3/3"==e?t.$router.push({path:e,query:{tmplTypeId:"8"}}):"/templateConfiguration/3/4"==e?t.$router.push({path:e,query:{tmplTypeId:"9"}}):"/templateConfiguration/4/1"==e?t.$router.push({path:e,query:{tmplTypeId:"11"}}):"/templateConfiguration/5/1"==e?t.$router.push({path:e,query:{tmplTypeId:"10"}}):(t.$router.push({path:e}),console.log("key"+e))},handleSelect:function(e,t){var a=this;console.log(a.$refs.elMenu),a.setPath(e)},oneChild:function(e){if(e){var t=Object.keys(e);return 1==t.length}},hasOneShowingChild:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,s=t.filter((function(t){return!t.hidden&&(e.onlyOneChild=t,!0)}));return 1===s.length||0===s.length&&(this.onlyOneChild=Object(l["a"])({},a,{path:"",noShowingChildren:!0}),!0)}}}}).call(this,a("c8ba"))},b53f:function(e,t,a){"use strict";var l=a("9bd9"),s=a.n(l);s.a},b8ff:function(e,t,a){},b9d0:function(e,t,a){},bc85:function(e,t,a){"use strict";a.r(t);var l,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("问题名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入"},on:{change:e.selectItem},model:{value:e.getTableData.probName,callback:function(t){e.$set(e.getTableData,"probName",t)},expression:"getTableData.probName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("年份")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{attrs:{size:"small",type:"year","value-format":"yyyy",placeholder:"选择年"},on:{change:e.selectItem},model:{value:e.getTableData.createDate,callback:function(t){e.$set(e.getTableData,"createDate",t)},expression:"getTableData.createDate"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属部门")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.selectItem},model:{value:e.getTableData.orgDept,callback:function(t){e.$set(e.getTableData,"orgDept",t)},expression:"getTableData.orgDept"}},e._l(e.dictMap.get("orgDept"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("问题分类")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.selectItem},model:{value:e.getTableData.probTypeSnd,callback:function(t){e.$set(e.getTableData,"probTypeSnd",t)},expression:"getTableData.probTypeSnd"}},e._l(e.dictMap.get("probTypeSnd"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("是否销号")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.selectItem},model:{value:e.getTableData.isCancel,callback:function(t){e.$set(e.getTableData,"isCancel",t)},expression:"getTableData.isCancel"}},e._l(e.dictMap.get("isCancel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.selectItem},model:{value:e.getTableData.voltageGrade,callback:function(t){e.$set(e.getTableData,"voltageGrade",t)},expression:"getTableData.voltageGrade"}},e._l(e.dictMap.get("voltageGrade"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showDialog(null)}}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.del}},[e._v(" 删除")]),a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStProb/importFile",headers:{userId:e.uid,token:e.token},"on-success":e.uploadSuccess,multiple:!1,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入")])],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportTmp}},[e._v("导出")]),a("el-button",{attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/export?templateType=3&token="+e.token}},[e._v("导出模版")])])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"questionTable",attrs:{data:e.tableShowData,height:e.tableHeight,border:"","row-key":e.getRowKeys,"header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"45"}}),e._l(e.tableLabel,(function(t,l){return"probName"!=t.colDname&&"createDate"!=t.colDname&&"isCancel"!=t.colDname&&"fileName"!=t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"probName"==t.colDname?a("el-table-column",{attrs:{"min-width":"250",align:"left",label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.probName))])]}}])}):"isCancel"==t.colDname?a("el-table-column",{attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName,"min-width":"120","show-overflow-tooltip":!0}}):"createDate"==t.colDname?a("el-table-column",{attrs:{formatter:e.dateFormat,prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"fileName"==t.colDname?a("el-table-column",{attrs:{formatter:e.dateFormat,prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.fileName?[a("a",{attrs:{href:e.GLOBALURL+"/prjStProb/downloadAccessory?probId="+t.row.probId+"&token="+e.token}},[e._v(e._s(t.row.fileName))])]:void 0}}],null,!0)}):e._e()})),a("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.userId==t.row.userNo?a("el-upload",{ref:"uploadFile",staticClass:"upload",attrs:{"on-exceed":e.exceed,action:e.GLOBALURL+"/prjStProb/uploadAccessory",headers:{userId:e.userId,token:e.token},data:{probId:t.row.probId},"before-upload":e.beforeupload,"on-error":e.errorUpload,"on-success":e.uploadSuccess,multiple:!1,"show-file-list":!1}},[""==t.row.fileName||null==t.row.fileName?a("el-button",{staticClass:"blue",attrs:{type:"text"}},[e._v("上传附件")]):a("el-button",{staticClass:"blue",attrs:{type:"text"}},[e._v("覆盖附件")])],1):a("span",[""==t.row.fileName||null==t.row.fileName?a("span",{staticStyle:{color:"gray",padding:"0 10px"}},[e._v("上传附件")]):a("span",{staticStyle:{color:"gray",padding:"0 10px"}},[e._v("覆盖附件")])]),""!=t.row.fileName&&null!=t.row.fileName&&e.userId==t.row.userNo?a("span",{staticClass:"blue",on:{click:function(a){return e.delFile(t.row)}}},[e._v("删除附件")]):e._e(),""!=t.row.fileName&&null!=t.row.fileName&&e.userId!=t.row.userNo?a("span",{staticStyle:{color:"gray",padding:"0 10px"}},[e._v("删除附件")]):e._e()]}}])})],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":e.getTableData.pageSize,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),a("el-dialog",{attrs:{title:e.dialogTit,"close-on-click-modal":!1,width:"900px",visible:e.dialogFormVisible},on:{close:function(t){return e.cancel("lableFormQuestion")},"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"lableFormQuestion",attrs:{model:e.lableList,inline:!0,"label-position":"right"}},[e._l(e.lableList,(function(t,l){return a("el-form-item",{attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:{required:e.isRequired(t.isMandatory),message:t.dispName+"不能为空",trigger:"blur"}}},["text"==t.dispType?a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"string"==t.dispType?a("el-input",{attrs:{autocomplete:"off"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(t.codeList,(function(e){return a("el-option",{key:e.codeId,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"date"==t.dispType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1)})),e.showDownload?a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"下载附件"}},[a("a",{staticClass:"blue",attrs:{href:e.GLOBALURL+"/prjStProb/downloadAccessory?probId="+e.downloadId+"&token="+e.token}},[e._v(e._s(e.fileName))])]):e._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel("lableFormQuestion")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("lableFormQuestion")}}},[e._v("确 定")])],1)],1)],1)},i=[],o=(a("4160"),a("4ec9"),a("4fad"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),n=a("ade3"),r=a("5530"),c=(a("7a14"),a("73fc")),u=a("a960"),d=a("7e1e"),m=a("2f62"),p={name:"questions",data:function(){return{delLoading:!1,submitLoading:!1,deptCode:"",fileName:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],isShowQuery:!1,show_table:"show_table",downloadId:"",showDownload:!1,fileList:[],uploading:!1,BatchSubmissionDisable:!0,batchDisable:!0,isShowFilter:!1,dialogTit:"",tableHeight:"",filterClass:"filterClose",isOpenFilter:!1,batchLoading:!1,probNameInp:"",isdisable:!1,screeningFrom:{name:"",region:"",type:[]},tempId:"",batchFormVisible:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:{},totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"120px",input:"",tableData:[],tableLabel:[],param:{deptCode:"",index:1,itemName:"",itemType:"",pageSize:20,specClass:"",voltageGrade:""},getTableData:{speciality:"",isCancel:"",pageIndex:1,pageSize:20,probName:"",voltageGrade:"",probTypeCode:"",probTypeSnd:"",orgNo:"",orgDept:"",createDate:"",deptCode:""},getBatchData:{orgDept:"",typeList:[],probName:"",probTypeCode:"wt"},dictMap:new Map,batchLabel:[],batchData:[],showBatchData:[],batchSubmission:{probName1:"",probIds:[],probName:"",orgNo:"",orgDept:"",typeList:"",probId:""},tableShowData:[],columnTypeMap:new Map,token:"",userId:"",tempUserNo:""}},computed:Object(r["a"])({},Object(m["b"])(["uid"])),components:{querys:c["a"],SelectTree:u["a"]},watch:{deptCode:function(){console.log(this.deptCode),this.getTableData.orgNo=this.deptCode,this.getTable("",this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){var e=this;e.token=sessionStorage.getItem("token"),e.userId=sessionStorage.getItem("userId"),e.getTable("",1,20)},methods:(l={delFile:function(e){var t=this;Object(d["y"])({probId:e.probId}).then((function(e){e.data.successful?(t.$message.success("删除成功"),t.getTable("",t.currentPage,t.currentNum)):t.$message.error("删除附件失败")}))},uploadFileSubmit:function(e){this.$refs.uploadFile.submit()},getValue:function(e){this.deptCode=e,console.log(e)},getTreeDeptCode:function(){var e=this;Object(d["jc"])().then((function(t){var a=t.data.resultValue;Object(d["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0):(this.tableHeight=t,this.isShowQuery=!1)},getRowKeys:function(e){return e.probId},switchFilter:function(){this.isShowFilter=!this.isShowFilter},closeBatch:function(){var e;this.getBatchData=(e={orgDept:""},Object(n["a"])(e,"orgDept",""),Object(n["a"])(e,"probName",""),Object(n["a"])(e,"typeList",[]),Object(n["a"])(e,"probTypeCode","wt"),e),this.batchSubmission={probIds:[],probName1:"",probName:"",orgNo:"",orgDept:"",typeList:""},this.batchFormVisible=!1,this.BatchSubmissionDisable=!0,this.batchDisable=!0},OpenFiler:function(){this.isOpenFilter=!0,this.filterClass="filterOpen"},CloseFiler:function(){this.isOpenFilter=!1,this.filterClass="filterClose"},BatchSubmissionForm:function(){var e=this;console.log(this.batchSubmission),0==this.batchSubmission.probIds.length||""==this.batchSubmission.probName1||""==this.batchSubmission.orgNo||""==this.batchSubmission.orgDept||""==this.batchSubmission.typeList?this.$message({showClose:!0,message:"请补全相关信息再提交批量打包",type:"warning"}):Object(d["hd"])(this.batchSubmission).then((function(t){console.log(t),t.data.successful?(e.batchFormVisible=!1,e.$message({showClose:!0,message:"批量打包成功",type:"success"}),e.getTable()):e.$message({showClose:!0,message:"批量打包失败",type:"error"})}))},changeBatchTable:function(e){console.log(this.batchSubmission);var t=this;t.batchSubmission.probIds=[],e.forEach((function(e,a){t.batchSubmission.probIds.push(e.probId)})),console.log(t.batchSubmission),t.getBatchTable()},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},dateFormat:function(e,t){var l=a("c1df"),s=e[t.property];return s?l(s).format("YYYY-MM-DD"):""},getBatchTable:function(){var e=this;console.log(e.getBatchData),e.getBatchData.orgNo.length&&e.getBatchData.orgDept.length&&0!=e.getBatchData.typeList.length?e.batchDisable=!1:e.batchDisable=!0,e.getBatchData.orgNo.length&&e.getBatchData.orgDept.length&&e.getBatchData.typeList.length&&e.batchSubmission.probName1.length&&0!=e.batchSubmission.typeList.length&&e.batchSubmission.probIds.length?e.BatchSubmissionDisable=!1:e.BatchSubmissionDisable=!0},changeProbName:function(e){e||this.getTable()},isRequired:function(e){return console.log(e),!(!e||1!=e)},uploadSuccess:function(e,t,a){var l=this;e.successful?(l.$message({showClose:!0,message:"导入成功",type:"success"}),l.currentPage=1,l.getTable("",1,l.currentNum)):l.$message({showClose:!0,message:e.resultHint,dangerouslyUseHTMLString:!0,type:"error"})},showBatch:function(e,t){console.log(e,t);var a,l=this;(l.isdisable=e,l.batchFormVisible=!0,t)?(console.log(t),l.tableData.forEach((function(e,a){e.probId==t.probId&&(console.log(e),l.getBatchData.orgNo=e.orgNo,l.getBatchData.orgDept=e.orgDept)})),l.batchSubmission.probName1=t.probName,l.batchSubmission.typeList=l.getBatchData.typeList,l.batchSubmission.probId=t.probId,Object(d["ib"])({probId:t.probId}).then((function(e){console.log(e),e.data.successful&&(l.batchData=e.data.resultValue.tableData[0].prjStProbVoList,console.log(l.batchData),l.showBatchData=l.getShowDateTable(l.batchData,l.dictMap,l.columnTypeMap),l.batchLabel=e.data.resultValue.tableLable,l.getBatchData.typeList=e.data.resultValue.tableData[0].probTypeSnd.split(","),l.batchSubmission.typeList=l.getBatchData.typeList,setTimeout((function(){l.selectAll()})))})),l.batchSubmission.orgNo=l.getBatchData.orgNo,l.batchSubmission.orgDept=l.getBatchData.orgDept):(l.showBatchData=[],l.batchData=[],l.batchLabel=[],l.getBatchData=(a={orgDept:""},Object(n["a"])(a,"orgDept",""),Object(n["a"])(a,"probName",""),Object(n["a"])(a,"typeList",[]),Object(n["a"])(a,"probTypeCode","wt"),a),l.batchSubmission={probIds:[],probName1:"",probName:"",orgNo:"",orgDept:"",typeList:""})},selectAll:function(){var e=this;e.showBatchData.forEach((function(t){e.$refs.batchTable.toggleRowSelection(t,!0)}))},handleSelectionChange:function(e){var t=this;t.delData={ids:[]},e.forEach((function(e,a){t.delData.ids.push(e.probId)})),console.log("handleSelectionChange",t.delData)},exportTmp:function(){var e=this,t=e.delData;t.ids=t.ids.toString(),window.location.href=e.GLOBALURL+"/prjStProb/export?ids="+t.ids+"&token="+e.token},del:function(){var e=this,t=this;t.delData.ids.length?this.$confirm("此操作将永久删除"+t.delData.ids.length+"条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,t.delLoading=!0,Object(d["E"])(t.delData).then((function(a){t.$refs.questionTable.clearSelection(),console.log(a),t.delLoading=!1,a.data.successful?(t.$message({showClose:!0,message:"删除成功",type:"success"}),t.getTable("",t.currentPage,t.currentNum)):e.$message({showClose:!0,message:"删除失败",type:"error"}),t.loading=!1}))})).catch((function(){e.$message({type:"warning",message:"已取消删除"})})):this.$message({showClose:!0,message:"未选择任何数据",type:"warning"})},submitForm:function(e){var t=this,a=this;if(""!=a.tempUserNo&&a.userId!=a.tempUserNo)return this.$message.warning("非创建者没有权限修改此项"),!1;a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={items:[]};console.log(a.lableList);var s={};a.tempId.length&&(s["probId"]=a.tempId),console.log(a.lableList),Object.keys(a.lableList).forEach((function(e){"createDate"!=a.lableList[e].colDname&&(s[a.lableList[e].colDname]=a.lableList[e].value)})),l.items.push(s),console.log("subdatasubdata",l),a.dialogFormVisible=!1,a.loading=!0,a.submitLoading=!0,Object(d["rd"])(l).then((function(e){console.log(e),a.submitLoading=!1,e.data.successful?(t.$message({showClose:!0,message:"操作成功",type:"success"}),a.currentPage=1,a.getTable("",1,a.currentNum)):t.$message({showClose:!0,message:"操作失败",type:"error"}),a.loading=!1}))}))},cancel:function(e){this.dialogFormVisible=!1,this.resetForm(e)},resetForm:function(e){this.$refs[e].resetFields()},showDialog:function(e){var t=this;t.dialogFormVisible=!0,t.dialogLoading=!0,t.showDownload=!1,e?(t.dialogTit="编辑问题",t.tempId=e.probId,t.fileName=e.fileName,e.tmplFileId?(t.showDownload=!0,t.downloadId=e.probId):t.showDownload=!1,t.tempUserNo=e.userNo):(t.dialogTit="新增问题",t.tempId="",t.tempUserNo=""),Object(d["Zb"])().then((function(a){if(console.log(a),a.data.successful){a.data.resultValue.items.forEach((function(e,t){e.value=""}));var l={};console.log(a.data.resultValue.items);var s=function(s){e&&(console.log(e.probId),t.tableData.forEach((function(t,l){t.probId==e.probId&&(console.log(t),a.data.resultValue.items[s].value=t[a.data.resultValue.items[s].colDname])}))),l[s]=a.data.resultValue.items[s]};for(var i in a.data.resultValue.items)s(i);t.lableList=l,console.log(t.lableList)}t.dialogLoading=!1}))},selectItem:function(){this.currentPage=1,this.getTable("",1,this.currentNum)},handleSizeChange:function(e){this.currentNum=e,this.getTable("",this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable("",e,this.currentNum)},getTable:function(e,t,a){var l,s=this;s.loading=!0,"batchData"==e?(l=Object(r["a"])({},s.getBatchData),console.log("getBatchData",l),s.batchSubmission.orgNo=l.orgNo,s.batchSubmission.orgDept=l.orgDept,s.batchSubmission.typeList=l.typeList,l.typeList=l.typeList.toString()):l=s.getTableData,l.pageIndex=t,l.pageSize=a,Object(d["Vb"])(l).then((function(t){if(console.log("response",t),t.data.successful)if("batchData"==e)s.batchData=t.data.resultValue.tableData,s.showBatchData=s.getShowDateTable(s.batchData,s.dictMap,s.columnTypeMap),s.batchLabel=t.data.resultValue.tableLable;else{s.totalNum=t.data.resultValue.totalNum,s.tableLabel=t.data.resultValue.tableLable;var a=t.data.resultValue.tableLable;s.tableLabel=s.getLabelList(a),s.dictMap=s.getDictArr(a),console.log("dictMap",s.dictMap),s.columnTypeMap=s.getColumnTypeArr(a),s.tableData=t.data.resultValue.tableData,s.tableShowData=s.getShowDateTable(s.tableData,s.dictMap,s.columnTypeMap)}s.loading=!1})).catch((function(e){console.log(e)}))},toggleRowSelect:function(e){var t=this;e.length>0?this.$nextTick((function(){e.forEach((function(e){t.$refs.questionTable.toggleRowSelection(e,!0)}))})):this.$refs.questionTable.clearSelection()},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],i=0;i<e.length;i++){for(var n=e[i],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(o["a"])(u[c],2),m=d[0],p=d[1];if("feaStatus"==m&&(r["feaStatusT"]=p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p,m);r[m]=b}else r[m]=p;"orgNo"==m&&(r["orgNo"]=p)}s.push(r)}return s},formartDate:function(e,t){var a=new Date(e),l=a.getFullYear(),s=a.getMonth()+1,i=a.getDate();return"year"==t?l:l+"-"+this.add0(s)+"-"+this.add0(i)},add0:function(e){return e<10?"0"+e:e},beforeupload:function(){},errorUpload:function(){this.loading=!1,this.$message({type:"error",message:"上传失败"})}},Object(n["a"])(l,"uploadSuccess",(function(e,t,a){var l=this;console.log(e),l.uploading=!1,l.fileList=a,console.log(l.fileList),e.successful?(l.$message({showClose:!0,message:"上传成功",type:"success"}),l.currentPage=1,l.getTable("",1,l.currentNum)):l.$message({showClose:!0,message:e.resultHint,dangerouslyUseHTMLString:!0,type:"error"})})),Object(n["a"])(l,"exceed",(function(){this.$message({showClose:!0,message:"只能上传一个文件",type:"warning"})})),l)},h=p,f=(a("c12f"),a("a78c"),a("2877")),g=Object(f["a"])(h,s,i,!1,null,"7ba2998b",null);t["default"]=g.exports},bcfe:function(e,t,a){},c12f:function(e,t,a){"use strict";var l=a("45b7"),s=a.n(l);s.a},c2b4:function(e,t,a){"use strict";a.r(t);var l,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[e.showAddDialog?a("div",{staticClass:"drawer-wrapper"},[a("div",{staticClass:"close-btn",on:{click:e.closeDrawer}},[a("span",{staticClass:"iconfont"},[e._v("")])]),a("el-tabs",{style:{height:e.tabHeight},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{staticClass:"tab-label",attrs:{slot:"label"},slot:"label"},[e._v("基本信息")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading1,expression:"dialogLoading1"}],ref:"saveFormLX",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabelLX,"label-position":"right"}},e._l(e.tableLabelLX,(function(t,l){return 3!=t.showType&&4!=t.showType?a("el-form-item",{key:t.colDname,class:"voltLevel"==t.colDname&&1==e.hideVoltLevel?"hideClass":"",attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType&&"startDate"!=t.colDname&&"cmplDate"!=t.colDname?a("el-date-picker",{staticClass:"date-pick",attrs:{"value-format":t.isDispDetail,type:t.colLimit,disabled:"1"==t.readOnly||"1"!=e.phash,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"date"==t.dispType&&"startDate"==t.colDname?a("el-date-picker",{staticClass:"date-pick",attrs:{type:t.colType,disabled:"1"==t.readOnly||"1"!=e.phash,"picker-options":e.startTime,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"date"==t.dispType&&"cmplDate"==t.colDname?a("el-date-picker",{staticClass:"date-pick",attrs:{type:t.colType,disabled:"1"==t.readOnly||"1"!=e.phash,"picker-options":e.endTime,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||"1"!=e.phash},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||!e.dictMap.has(t.colDname)||0==e.dictMap.get(t.colDname).length||"1"!=e.phash},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:"1"==t.readOnly||"1"!=e.phash},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{attrs:{disabled:"1"==t.readOnly||"1"!=e.phash},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"number"==t.dispType?a("el-input",{attrs:{placeholder:t.dispName,disabled:"1"==t.readOnly||"1"!=e.phash},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{attrs:{min:0,precision:0,disabled:"1"==t.readOnly||"1"!=e.phash},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType&&"string"!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{attrs:{autocomplete:"off",disabled:"1"==t.readOnly||"1"!=e.phash,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},[null!=t.unit&&""!=t.unit?a("template",{slot:"append"},[e._v(e._s(t.unit))]):e._e()],2),"itemName"==t.colDname?a("el-input",{staticClass:"itemName",attrs:{id:"ifremVal",disabled:"1"==t.readOnly||"1"!=e.phash,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right itemName-btn",attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly||"1"!=e.phash},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e(),"text"==t.dispType&&"problemCode"!=t.colDname?a("el-input",{staticClass:"item-textarea",attrs:{rows:"13",cols:"40",type:"textarea",disabled:"1"==t.readOnly||"1"!=e.phash,placeholder:t.dispName,row:1},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-input",{staticClass:"drawer-textarea",attrs:{rows:"13",cols:"40",type:"textarea",placeholder:t.dispName,disabled:!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"0"!=e.phash&&"text"==t.dispType&&"problemCode"==t.colDname?a("el-button",{staticClass:"drawer-textarea-btn",attrs:{type:"primary",disabled:"1"==t.readOnly},on:{click:function(t){return t.preventDefault(),e.showQuestionList("")}}},[e._v("关联问题或需求")]):e._e(),"0"==e.phash&&"text"==t.dispType&&"problemCode"==t.colDname?a("el-button",{staticClass:"drawer-textarea-btn",attrs:{disabled:""==t.value,type:"primary"},on:{click:function(a){return a.preventDefault(),e.showQuestionList(t.value)}}},[e._v("问题或需求详情")]):e._e()],1):e._e()})),1)],1),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{staticClass:"tab-label",attrs:{slot:"label"},slot:"label"},[e._v("可研信息")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading1,expression:"dialogLoading1"}],ref:"saveFormKY",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabelKY,"label-position":"right",disabled:"2"!=e.phash}},e._l(e.tableLabelKY,(function(t,l){return 3!=t.showType&&4!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType?a("el-date-picker",{staticClass:"date-pick",attrs:{"value-format":t.isDispDetail,type:t.colLimit,disabled:"1"==t.readOnly,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||!e.dictMap.has(t.colDname)||0==e.dictMap.get(t.colDname).length},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:"1"==t.readOnly},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{attrs:{disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"number"==t.dispType?a("el-input",{attrs:{placeholder:t.dispName,disabled:e.isHasChildren},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{attrs:{min:0,precision:0,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType&&"string"!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{attrs:{autocomplete:"off",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},[null!=t.unit&&""!=t.unit?a("template",{slot:"append"},[e._v(e._s(t.unit))]):e._e()],2),"itemName"==t.colDname?a("el-input",{staticClass:"itemName",attrs:{id:"ifremVal",disabled:"1"==t.readOnly,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right itemName-btn",attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e(),"text"==t.dispType&&"problemCode"!=t.colDname?a("el-input",{staticClass:"item-textarea",attrs:{rows:"13",cols:"40",type:"textarea",disabled:"1"==t.readOnly,placeholder:t.dispName,row:1},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-input",{staticClass:"drawer-textarea",attrs:{rows:"13",cols:"40",type:"textarea",placeholder:t.dispName,disabled:!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-button",{staticClass:"drawer-textarea-btn",attrs:{type:"primary",disabled:"1"==t.readOnly},on:{click:function(t){return t.preventDefault(),e.showQuestionList("")}}},[e._v("关联问题或需求")]):e._e()],1):e._e()})),1),a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("报告列表")])]),e._l(e.fileData,(function(t,l){return a("el-form",{key:l},[1==t.key&&""!=t.fileName&&void 0!=t.fileName?a("el-form-item",{attrs:{label:"可研报告","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF",display:"inline-block","line-height":"40px"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+t.fileId+"&token="+e.token}},[e._v(e._s(t.fileName))]),2!=e.phash||e.isHasParent?e._e():a("el-button",{staticClass:"icon-del-btn",attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.deleteFile(t.fileId,1)}}})],1):e._e(),1==t.key&&t.itemFileList.length>0?a("el-form-item",{attrs:{label:"可研报告附件","label-width":e.formLabelWidth}},e._l(t.itemFileList,(function(t,l){return a("div",{key:l,staticClass:"reportFiles"},[a("a",{staticStyle:{color:"#409EFF",display:"inline-block","line-height":"40px"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+t.fileId+"&token="+e.token}},[e._v(e._s(t.fileName))]),2!=e.phash||e.isHasParent?e._e():a("el-button",{staticClass:"icon-del-btn",attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.deleteFile(t.fileId,2)}}})],1)})),0):e._e(),2==t.key&&""!=t.fileName&&void 0!=t.fileName?a("el-form-item",{attrs:{label:"可研评审文件","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF",display:"inline-block","line-height":"40px"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+t.fileId+"&token="+e.token}},[e._v(e._s(t.fileName))]),2!=e.phash||e.isHasParent?e._e():a("el-button",{staticClass:"icon-del-btn",attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.deleteFile(t.fileId,3)}}})],1):e._e()],1)}))],2),a("el-tab-pane",{attrs:{name:"third"}},[a("span",{staticClass:"tab-label",attrs:{slot:"label"},slot:"label"},[e._v("储备信息")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading1,expression:"dialogLoading1"}],ref:"saveFormCB",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabelCB,"label-position":"right",disabled:"3"!=e.phash}},e._l(e.tableLabelCB,(function(t,l){return 3!=t.showType&&4!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["date"==t.dispType?a("el-date-picker",{staticClass:"date-pick",attrs:{"value-format":t.isDispDetail,type:t.colLimit,disabled:"1"==t.readOnly,placeholder:"选择日期"},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType?a("el-select",{attrs:{placeholder:t.dispName,clearable:"",disabled:"1"==t.readOnly||!e.dictMap.has(t.colDname)||0==e.dictMap.get(t.colDname).length},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:"1"==t.readOnly},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{attrs:{disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"number"==t.dispType?a("el-input",{attrs:{placeholder:t.dispName,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{attrs:{min:0,precision:0,disabled:"1"==t.readOnly},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType&&"string"!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname||"apprFileNo"==t.colDname?e._e():a("el-input",{attrs:{autocomplete:"off",disabled:"1"==t.readOnly,placeholder:t.dispName},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},[null!=t.unit&&""!=t.unit?a("template",{slot:"append"},[e._v(e._s(t.unit))]):e._e()],2),"apprFileNo"==t.colDname?a("el-input",{staticClass:"apprFileNo",attrs:{disabled:"1"==t.readOnly||e.tempItemId&&e.isHasParent,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-input",{staticClass:"itemName",attrs:{id:"ifremVal",disabled:"1"==t.readOnly,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right itemName-btn",attrs:{type:"primary",size:"medium",disabled:"1"==t.readOnly},on:{click:e.showNewItemNameJsp}},[e._v("手动命名")]):e._e(),"text"==t.dispType&&"problemCode"!=t.colDname?a("el-input",{staticClass:"item-textarea",attrs:{rows:"13",cols:"40",type:"textarea",disabled:"1"==t.readOnly,placeholder:t.dispName,row:1},on:{change:function(a){return e.commonChange(t,t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-input",{staticClass:"drawer-textarea",attrs:{rows:"13",cols:"40",type:"textarea",placeholder:t.dispName,disabled:!0},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"problemCode"==t.colDname?a("el-button",{staticClass:"drawer-textarea-btn",attrs:{type:"primary",disabled:"1"==t.readOnly},on:{click:function(t){return t.preventDefault(),e.showQuestionList("")}}},[e._v("关联问题或需求")]):e._e()],1):e._e()})),1),a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("报告列表")])]),e._l(e.fileData,(function(t,l){return 3==t.key?a("el-form",{key:l},[""!=t.fileName?a("el-form-item",{attrs:{label:"批复文件","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+t.fileId+"&token="+e.token}},[e._v(e._s(t.fileName))]),3==e.phash?a("el-button",{staticClass:"icon-del-btn",attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.deleteFile(t.fileId,4)}}}):e._e()],1):e._e()],1):e._e()}))],2)],1),0!=e.phash?a("div",{staticClass:"save_btn"},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.dialogLoading},on:{click:function(t){return e.saveItem()}}},[e._v("保存")])],1):e._e()],1):e._e(),a("el-dialog",{staticClass:"bmiframe",attrs:{visible:e.newItemName,"close-on-click-modal":!1,width:"1000px","custom-class":"cus-dialog","modal-append-to-body":""},on:{"update:visible":function(t){e.newItemName=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("生成项目名称")])])]),a("iframe",{attrs:{name:"my-iframe",id:"my-iframe",src:e.getNameUrl,frameborder:"0",width:"100%",height:"400",scrolling:"none"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getBM}},[e._v("获取项目名称")])],1)],2),a("el-dialog",{staticClass:"question_dialog",attrs:{width:"70%",title:e.questionTitle,"close-on-click-modal":!1,visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},["问题库列表"==e.questionTitle?a("div",[a("div",{staticClass:"search-box"},[a("span",{staticClass:"search-label"},[e._v("问题编码")]),a("el-input",{attrs:{placeholder:"请输入问题编码",clearable:""},on:{change:e.selectItemWT},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}})],1),a("div",{staticClass:"search-box"},[a("span",{staticClass:"search-label"},[e._v("问题名称")]),a("el-input",{attrs:{placeholder:"请输入问题名称",clearable:""},on:{change:e.selectItemWT},model:{value:e.searchProbName,callback:function(t){e.searchProbName=t},expression:"searchProbName"}})],1),a("div",{staticClass:"search-box"},[a("span",{staticClass:"search-label"},[e._v("问题描述")]),a("el-input",{attrs:{placeholder:"请输入问题描述",clearable:""},on:{change:e.selectItemWT},model:{value:e.searchProbDes,callback:function(t){e.searchProbDes=t},expression:"searchProbDes"}})],1)]):a("div",[a("div",{staticClass:"search-box"},[a("span",{staticClass:"search-label"},[e._v("需求编码")]),a("el-input",{attrs:{placeholder:"请输入需求编码",clearable:""},on:{change:e.selectItemXQ},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}})],1),a("div",{staticClass:"search-box"},[a("span",{staticClass:"search-label"},[e._v("需求名称")]),a("el-input",{attrs:{placeholder:"请输入需求名称",clearable:""},on:{change:e.selectItemXQ},model:{value:e.searchDmdName,callback:function(t){e.searchDmdName=t},expression:"searchDmdName"}})],1),a("div",{staticClass:"search-box"},[a("span",{staticClass:"search-label"},[e._v("需求描述")]),a("el-input",{attrs:{placeholder:"请输入需求描述",clearable:""},on:{change:e.selectItemXQ},model:{value:e.searchDmdDes,callback:function(t){e.searchDmdDes=t},expression:"searchDmdDes"}})],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"questionTable",attrs:{data:this.questionShowData,"max-height":"350px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"select-all":e.handelSelectRowAll,select:e.handelSelectRow}},[a("el-table-column",{attrs:{type:"selection",width:"45","reserve-selection":!0}}),e._l(e.questionLabelList,(function(t,l){return"createDate"!=t.colDname&&"isCancel"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"isCancel"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.cancelFormat,prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"createDate"==t.colDname?a("el-table-column",{key:l,attrs:{"min-width":"150",formatter:e.dateFormat,prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):e._e()}))],2),a("div",{staticClass:"page",staticStyle:{"margin-bottom":"10px"}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.questionListTotalNum},on:{"size-change":e.handleSizeWTChange,"current-change":e.handleCurrentWTChange}})],1),0==e.detailFlag?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleSubmitInnerTable}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.questionLoading},on:{click:e.submitQuestioinCode}},[e._v("保 存")])],1):e._e()],1)],1)},i=[],o=(a("4160"),a("c975"),a("a434"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("ade3")),n=a("53ca"),r=a("3835"),c=a("5530"),u=a("2f62"),d=a("a960"),m=a("7e1e"),p=(l={name:"itemAddCom",props:{showData:{type:Object,default:function(){return{}}},showAddDialog:!1,isShowQuery:!1,tableHeightTab:"",hasChildren:!1,hasParent:!1},components:{SelectTree:d["a"]},data:function(){return{isHasChildren:!1,isHasParent:!1,hideVoltLevel:!1,codeStr:"",detailFlag:!1,searchProbName:"",searchProbDes:"",searchDmdName:"",searchDmdDes:"",questionLoading:!1,fileData:[],itemSourseFlag:1,isToggle:!1,reportFileName:"",reportFileList:[],feaReportId:"",problemCode:"",showDrawer:!1,isChangeQuery:!1,deptName:"",deptArr:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},itemForm:{},itemInfo:{},getNameUrl:"/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?openType=1&appID=00&applyID=2",newItemName:!1,specClass:"",specClassName:"",dictMap:new Map,tempId:"",columnMap:new Map,title:"",totalLableArr:[],dialogLoading:!1,formLabelWidth:"45%",innerVisible:!1,questionTitle:"",questionLabelList:[],questionTableData:[],questionListTotalNum:0,questionDictMap:new Map,questionShowData:[],selectedQuestionCode:[],currentPage:1,currentNum:5,loading:!1,probName:"",specEnabled:!0,parentItemId:null,parentItemLevel:null,itemClassArr:[],childTableData:[],childrenShowData:[],childrenLable:{},childrenDictMap:new Map,childrenColumnMap:new Map,showChildren:!1,deptCodeT:"",LGTypeArr:[],tableLabelArr:[],tabMap:new Map,tableData:[],tableLabel:{},tableLabelLX:{},tableLabelKY:{},tableLabelCB:{},activeTab:"first",phash:"",dialogLoading1:!1,dialogLoading2:!1,dialogLoading3:!1,searchCode:"",itemIdT:"",tabHeight:"",endTime:{disabledDate:this.disabledEnd},startTime:{disabledDate:this.disabledStart},itemPhaseDet:""}},created:function(){this.$store.dispatch("itemadd/setItemParamStatus")},mounted:function(){console.log("showData"+this.showData.phash),this.specClass=this.showData.specClass,this.specClassName=this.showData.specClassName,this.tempItemId=this.showData.itemId,this.parentItemId=this.showData.parentItemId,this.tableLabelArr=this.showData.tableLabelArr,this.phash=this.showData.phash,this.showDrawer=this.showAddDialog,this.parentItemLevel=this.showData.parentItemLevel,this.itemPhaseDet=this.showData.itemPhaseDet,this.isChangeQuery=this.isShowQuery,this.tabHeight=this.tableHeightTab,this.isHasChildren=this.hasChildren,this.isHasParent=this.hasParent,console.log(this.isHasChildren),console.log(this.isHasParent),"2"==this.phash?this.activeTab="second":"3"==this.phash?this.activeTab="third":this.activeTab="first",""!=this.tempItemId&&null!=this.tempItemId&&void 0!=this.tempItemId&&(this.isToggle=!0),this.token=sessionStorage.getItem("token"),this.getLabel()},watch:{itemId:function(){this.tempItemId=this.showData.itemId,console.log("itemid变化"),this.getLabel()},isShowQuery:function(){this.isShowQuery?this.tabHeight=this.tableHeightTab-55+"px":this.tabHeight=this.tableHeightTab-45+"px"}},computed:Object(c["a"])({},Object(u["c"])({addItemParams:function(e){return e.itemadd.addItemParams},isSaved:function(e){return e.itemadd.isSaved}}))},Object(o["a"])(l,"created",(function(){this.tabHeight=this.tableHeightTab-45+"px",console.log(this.tabHeight)})),Object(o["a"])(l,"components",{SelectTree:d["a"]}),Object(o["a"])(l,"methods",{changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0):(this.tableHeight=t,this.isShowQuery=!1)},selectItemXQ:function(){this.currentPage=1,this.detailFlag?this.questionDetail(this.codeStr,1,this.currentNum):this.getXQList(1,this.currentNum)},selectItemWT:function(){this.currentPage=1,this.detailFlag?this.questionDetail(this.codeStr,1,this.currentNum):this.getWTList(1,this.currentNum)},disabledEnd:function(e){if(""!=this.getValue("startDate")&&void 0!=this.getValue("startDate")&&null!=this.getValue("startDate"))return e.getTime()<new Date(this.getValue("startDate")).getTime()},disabledStart:function(e){if(""!=this.getValue("cmplDate")&&void 0!=this.getValue("cmplDate")&&null!=this.getValue("cmplDate"))return e.getTime()>new Date(this.getValue("cmplDate")).getTime()},deleteFile:function(e,t){var a=this,l={fileId:e,type:t,itemId:a.tempItemId};a.$confirm("确定删除此文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["z"])(l).then((function(e){if(e.data.successful)if(1==t){var l={itemId:a.tempItemId,itemPhaseDet:"3"};Object(m["Wd"])(l).then((function(e){e.data.successful?(a.getKYInfo(a.tempItemId),a.$parent.getTable(1,20)):a.$message({showClose:!0,message:"删除失败",type:"error"})}))}else a.getKYInfo(a.tempItemId)}))}))},getRowKeys:function(e){return 1==this.itemSourseFlag?e.probCode:2==this.itemSourseFlag?e.dmdCode:void 0},closeDrawer:function(){this.$store.dispatch("itemadd/setPathChangeActive",!1),this.showDrawer=!1,this.$emit("changeStatus",this.showDrawer)},commonChange:function(e,t){var a=this,l=this;if("cascadeDropdown"==e.dispType&&null!=e.detailColDname){var s=e.detailColDname.split(",");if(s.length>0){for(var i=0;i<s.length;i++){var o=s[i];l.dictMap.set(o,new Array),l.setValue(o,null)}var n={};n.speciality=l.specClass,n.codeValue=t,n.groupCode=e.groupCode;var r=null;if(null!=e.codeList){for(var c=0;c<e.codeList.length;c++){var u=e.codeList[c];if(u.codeValue==t){r=u.groupCode;break}}null!=r&&(n.groupCode=r),Object(m["Uc"])(n).then((function(e){if(console.log(e),e.data.successful){if(console.log(e.data.resultValue),!l.tempItemId){var t=[],i=e.data.resultValue;if(i.length>0)for(var o=0;o<i.length;o++){var n=i[o];1==n.enabled&&t.push(n)}e.data.resultValue=t}l.dictMap.set(s[0],e.data.resultValue),l.setValue(s[0],e.data.resultValue,!0),a.$forceUpdate()}}))}}}switch(l.specClass){case"08":"quantity"==e.colDname&&t>1&&l.setValue("lxItemType","1");case"01":"voltLevel"==e.colDname?Object(m["cc"])({voltCode:t}).then((function(e){if(e.data.successful){for(var t=e.data.resultValue,a=l.dictMap.get("specDetailClass"),s=!1,i=0;i<a.length;i++){var o=a[i];if(o.codeValue==t){s=!0;break}}s?l.setValue("specDetailClass",t):l.$message.warning("您没有所选电压的等级对应的权限，请重新选择")}})):"specDetailClass"==e.colDname&&Object(m["nc"])({specDetailClass:t}).then((function(e){if(e.data.successful){var t=e.data.resultValue,a=l.getValue("voltLevel");if(null!=a){for(var s=!1,i=0;i<t.length;i++){var o=t[i];if(a==o.codeValue){s=!0;break}}s||l.setValue("voltLevel",null)}}}));case"06":if("itemClass1"==e.colDname&&(console.log(t),t))if("0609"==t){var d=l.tableLabelLX;for(var p in d)"voltLevel"==d[p].colDname&&(d[p].rule[0].required=!1,d[p].value="",l.hideVoltLevel=!0)}else{var h=l.tableLabelLX;for(var f in h)"voltLevel"==h[f].colDname&&(0!=l.phash&&h[f].phase==l.phash&&(h[f].rule[0].required=!0),h[f].value="",l.hideVoltLevel=!1)}if("itemClass2"==e.colDname&&(console.log(t),t))if("060309"==t)for(var g in l.tableLabelLX)"voltLevel"==l.tableLabelLX[g].colDname&&(l.tableLabelLX[g].rule[0].required=!1,l.tableLabelLX[g].value="",l.hideVoltLevel=!0);else for(var b in l.tableLabelLX)"voltLevel"==l.tableLabelLX[b].colDname&&(0!=l.phash&&l.tableLabelLX[b].phase==l.phash&&(l.tableLabelLX[b].rule[0].required=!0),l.tableLabelLX[b].value="",l.hideVoltLevel=!1)}if("itemSource"==e.colDname){for(var v in l.tableLabelLX)"problemCode"!=l.tableLabelLX[v].colDname&&"dmdCode"!=l.tableLabelLX[v].colDname||(l.tableLabelLX[v].value="");l.$refs.questionTable&&l.$refs.questionTable.clearSelection(),"01"==t?l.itemSourseFlag=1:"02"==t&&(l.itemSourseFlag=2)}"apprFileNo"==e.colDname&&(""!=this.tempItemId||this.tempItemId)},getValue1:function(e){this.setValue("conOrg",e),console.log(this.valueId)},clearValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e){l.value="";break}}},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},getShowDateTable:function(e,t){for(var a=[],l=0;l<e.length;l++){for(var s=e[l],i=new Object,o=0,n=Object.entries(s);o<n.length;o++){var c=Object(r["a"])(n[o],2),u=c[0],d=c[1];if(t.has(u))for(var m=t.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(i[u]=h.codeName)}else i[u]=d}a.push(i)}return a},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},dateFormat:function(e,t){var l=a("c1df"),s=e[t.property];return s?l(s).format("YYYY-MM-DD"):""},formartDate:function(e,t){if("N"==t)return e+"";var a=new Date(e);return a},add0:function(e){return e<10?"0"+e:e},saveItem:function(){var e=this,t=this,a="",l={};"1"==t.phash?(a="saveFormLX",l=t.tableLabelLX):"2"==t.phash?(a="saveFormKY",l=t.tableLabelKY):"3"==t.phash&&(a="saveFormCB",l=t.tableLabelCB),t.$refs[a].validate((function(a){if(!a){var s="您有未符合规范的输入项，请检查";return console.log("error submit!!"),e.$message({showClose:!0,message:s,type:"warning"}),!1}var i={},o="保存成功",n="保存失败";for(var r in t.dialogLoading=!0,i["itemId"]=t.tempItemId,i["parentId"]=t.parentItemId,i["speciality"]=t.specClass,i["phash"]=t.phash,""!=t.itemIdT&&(i["itemIdT"]=t.itemIdT),l){var c=l[r];i[c.colDname]=c.value}Object(m["yc"])(i).then((function(a){t.dialogLoading=!1,console.log(a),a.data.successful?(e.$message({showClose:!0,message:o,type:"success"}),t.itemId="",t.itemIdT="",e.showDrawer=!1,e.$emit("changeStatus",e.showDrawer),e.$parent.getTable(1,20)):e.$message({showClose:!0,message:n,type:"error"}),t.loading=!1}))}))},handleSizeWTChange:function(e){var t=this;for(var a in t.currentNum=e,t.tableLabelLX){var l=t.tableLabelLX[a];if("itemSource"==l.colDname){l.value.length>0?(t.innerVisible=!0,"01"==l.value?(t.questionTitle="问题库列表",t.detailFlag?t.questionDetail(t.codeStr,t.currentPage,e):(t.isToggle=!0,t.getWTList(t.currentPage,e))):(t.questionTitle="需求库列表",t.detailFlag?t.questionDetail(t.codeStr,t.currentPage,e):(t.isToggle=!0,t.getXQList(t.currentPage,e)))):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},handleCurrentWTChange:function(e){console.log("当前页: ".concat(e));var t=this;for(var a in t.currentPage=e,t.tableLabelLX){var l=t.tableLabelLX[a];if("itemSource"==l.colDname){l.value.length>0?(t.innerVisible=!0,"01"==l.value?(t.questionTitle="问题库列表",t.detailFlag?t.questionDetail(t.codeStr,e,t.currentNum):(t.isToggle=!0,t.getWTList(e,t.currentNum))):(t.questionTitle="需求库列表",t.detailFlag?t.questionDetail(t.codeStr,e,t.currentNum):(t.isToggle=!0,t.getXQList(e,t.currentNum)))):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getLabel:function(){var e=this;if(null!=e.tempItemId&&""!=e.tempItemId&&void 0!=e.tempItemId){var t={index:1,pageSize:10};if(t.speciality=e.specClass,t.itemId=e.tempItemId,0==e.tableLabelArr.length){var a={};a.speciality=e.specClass,a.itemId=e.tempItemId,Object(m["Wc"])(a).then((function(t){if(t.data.successful){e.tableLabelArr=t.data.resultValue,e.setLableData();var a={};a.speciality=e.specClass,a.itemId=e.tempItemId,Object(m["Sc"])(a).then((function(t){if(t.data.successful){var a=t.data.resultValue.prjStItemBase,l=t.data.resultValue.prjStFea,s=t.data.resultValue.prjStStorage;e.setItemInfoData(e.tableLabelLX,a),e.setItemInfoData(e.tableLabelKY,l),e.setItemInfoData(e.tableLabelCB,s)}}))}}))}else{e.setLableData();var l={};l.speciality=e.specClass,l.itemId=e.tempItemId,Object(m["Sc"])(l).then((function(t){if(t.data.successful){var a=t.data.resultValue.prjStItemBase,l=t.data.resultValue.prjStFea,s=t.data.resultValue.prjStStorage;e.setItemInfoData(e.tableLabelLX,a),e.setItemInfoData(e.tableLabelKY,l),e.setItemInfoData(e.tableLabelCB,s)}}))}e.getKYInfo(e.tempItemId)}else{var s={};if(s.speciality=e.specClass,0==e.tableLabelArr.length){var i={};i.speciality=e.specClass,Object(m["Wc"])(i).then((function(t){t.data.successful&&(e.tableLabelArr=t.data.resultValue,e.setLableData())}))}else if(null!=e.parentItemId){var o={};o.speciality=e.specClass,Object(m["Wc"])(o).then((function(t){t.data.successful&&(e.tableLabelArr=t.data.resultValue,e.setLableData())}))}else e.setLableData()}},setItemInfoData:function(e,t){var a=this;for(var l in e)null==t[e[l].colDname]?(e[l].value="","number"==e[l].dispType&&(e[l].value=0)):"date"==e[l].dispType?e[l].value=a.formartDate(t[e[l].colDname],e[l].colType):e[l].value=t[e[l].colDname]+"","cascadeDropdown"==e[l].dispType&&a.commonChange(e[l],e[l].value),"conOrg"==e[l].colDname&&null!=t["conOrg"]&&""!=t["conOrg"]&&(a.deptName=t["conOrg"],e[l].value=t["conOrgT"]),"problemCode"!=e[l].colDname&&"dmdCode"!=e[l].colDname||(a.problemCode=t[e[l].colDname],console.log(a.problemCode)),"itemType"==e[l].colDname&&("13"==a.specClass||"11"==a.specClass?t["itemType"]="XS":"03"==a.specClass&&(t["itemType"]="XX"))},getKYInfo:function(e){var t=this;Object(m["xd"])({itemId:e}).then((function(e){console.log("response",e),e.data.successful&&(t.fileData=e.data.resultValue)})).catch((function(e){console.log(e)}))},setLableData:function(){for(var e=this,t=[],a=[],l=[],s=0;s<e.tableLabelArr.length;s++){var i=e.tableLabelArr[s];"1"==i.phase?t.push(i):"2"==i.phase?a.push(i):"3"==i.phase&&l.push(i)}e.tableLabelLX=e.getLabelList(t),e.tableLabelKY=e.getLabelList(a),e.tableLabelCB=e.getLabelList(l),"08"==e.specClass&&null==e.tempItemId&&Object(m["jc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;e.setValue("conOrg",a.deptCode),e.deptName=a.deptName}})),e.dictMap=e.getDictArr(e.tableLabelArr)},cancleSubmitInnerTable:function(){var e=this;e.probName="",e.innerVisible=!1},getValue:function(e){var t=this,a={};for(var l in"1"==t.phash?a=t.tableLabelLX:"2"==t.phash?a=t.tableLabelKY:"3"==t.phash&&(a=t.tableLabelCB),a){var s=a[l];if(s.colDname==e)return s.value}},setValue:function(e,t,a){var l=this,s={};if("1"==l.phash?s=l.tableLabelLX:"2"==l.phash?s=l.tableLabelKY:"3"==l.phash&&(s=l.tableLabelCB),void 0!=Object(n["a"])(a)&&a)for(var i in s){var o=s[i];if(o.colDname==e){o.codeList=t;break}}else for(var r in s){var c=s[r];if(c.colDname==e){c.value=t;break}}},showNewItemName:function(){var e=this,t={};t.speciality=e.specClass,t.itemClass=e.getValue("itemClass1"),t.itemClassChild=e.getValue("itemClass2"),t.itemClassChild2=e.getValue("itemClass3"),t.B01=e.getValue("area"),t.B04=e.getValue("voltLevel"),t.B03=e.getValue("stationName"),t.B05=e.getValue("buildType"),t.B08="A",Object(m["I"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.setValue("itemName",a)}else t.resultHit}))},showNewItemNameJsp:function(){var e=this,t={};t.speciality=e.specClass,t.B04=e.getValue("voltLevel"),console.log("param"+t),e.getNameUrl="/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?appID=00&applyID=123123123123&iscUserId=&loginName=sx_test&operType=0",Object(m["Z"])(t).then((function(t){if(t.data.successful){var a=t.data.resultValue;e.getNameUrl+=a,""!=e.tempItemId&&null!=e.tempItemId?(e.getNameUrl+="&itemID="+e.tempItemId,e.getNameUrl=encodeURI(encodeURI(e.getNameUrl)),e.newItemName=!0):""!=e.itemIdT&&null!=e.itemIdT?(e.getNameUrl+="&itemID="+e.itemIdT,e.getNameUrl=encodeURI(encodeURI(e.getNameUrl)),e.newItemName=!0):Object(m["Rb"])().then((function(t){t.data.successful&&(e.itemIdT=t.data.resultValue,e.getNameUrl+="&itemID="+e.itemIdT,e.getNameUrl=encodeURI(encodeURI(e.getNameUrl)),e.newItemName=!0)}))}else t.resultHit}))},getBM:function(){var e=this,t=document.getElementById("my-iframe"),a=t.contentWindow||t.contentDocument,l=a.document.getElementById("prjName").value;if(l){for(var s in document.getElementById("ifremVal").value=l,this.tableLabelLX)"itemName"==this.tableLabelLX[s].colDname&&(this.tableLabelLX[s].value=l);this.newItemName=!1}else this.$message({showClose:!0,message:"请先生成项目名称",type:"error"});window.frames["my-iframe"].pageForm.btnSaveName_onclick(window.event,(function(t){console.log("resresresresresresres",t);var a=t.nameParam.B04;"01"==e.specClass?Object(m["cc"])({voltCode:a}).then((function(t){if(t.data.successful){for(var l=t.data.resultValue,s=e.dictMap.get("specDetailClass"),i=!1,o=0;o<s.length;o++){var n=s[o];if(n.codeValue==l){i=!0;break}}i?(e.setValue("specDetailClass",l),e.setValue("voltLevel",a)):e.$message.warning("您没有所选电压的等级对应的权限，请重新选择")}})):e.setValue("voltLevel",a)}))},handelSelectRow:function(e,t){var a,l=this,s=e.length&&-1!==e.indexOf(t);a=l.problemCode.length?l.problemCode.split(","):[],console.log(s,t.dmdCode),s?1==l.itemSourseFlag?a.push(t.probCode):2==l.itemSourseFlag&&a.push(t.dmdCode):a.forEach((function(e,s){1==l.itemSourseFlag?e==t.probCode&&a.splice(s,1):2==l.itemSourseFlag&&e==t.dmdCode&&a.splice(s,1)})),console.log(a),l.problemCode=a.toString(),console.log("problemCode+",l.problemCode)},handelSelectRowAll:function(e){var t=this,a=[];1==t.itemSourseFlag?e.forEach((function(e,t){a.push(e.probCode)})):2==t.itemSourseFlag&&e.forEach((function(e,t){a.push(e.dmdCode)})),console.log(a),t.problemCode=a.toString()},submitQuestioinCode:function(){var e=this;if(console.log("problemCodeproblemCodeproblemCodeproblemCode",e.problemCode),e.probName="",e.questionLoading=!0,console.log("selectedQuestionCode"+e.problemCode),e.problemCode.length>0){for(var t in e.tableLabelLX){var a=e.tableLabelLX[t];if("problemCode"==a.colDname||"dmdCode"==a.colDname){console.log(a.value),a.value=e.problemCode,e.questionLoading=!1;break}}e.innerVisible=!1}else e.questionLoading=!1,e.$message({showClose:!0,message:"请选择问题或需求",type:"warning"})},getWTList:function(e,t){var a=this;a.loading=!0,a.detailFlag=!1;var l={pageIndex:e,pageSize:t,probCode:a.searchCode,probName:a.searchProbName,probDesc:a.searchProbDes,dmdName:a.searchDmdName,dmdDesc:a.searchDmdDes,itemId:a.tempItemId};Object(m["Wb"])(l).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap),a.tempItemId.length>0&&1==a.isToggle&&""!=a.problemCode&&a.problemCode.length>0&&(a.problemCode.indexOf(",")>0?function(){var e=a.problemCode.split(",");console.log(e);var t=function(t){a.questionTableData.forEach((function(l){e[t]==l.probCode&&(console.log("toggle"+l.probCode),a.$refs.questionTable.toggleRowSelection(l,!0),console.log("setTimeOut"+l))}))};for(var l in e)t(l)}():a.questionTableData.forEach((function(e){a.problemCode==e.probCode&&(console.log("toggle"+e.probCode),setTimeout((function(){a.$refs.questionTable.toggleRowSelection(e,!0)}),500))}))))})).catch((function(e){console.log(e)}))},getXQList:function(e,t){var a=this;a.loading=!0,a.detailFlag=!1;var l={pageIndex:e,pageSize:t,probCode:a.searchCode,probName:a.searchProbName,probDesc:a.searchProbDes,dmdName:a.searchDmdName,dmdDesc:a.searchDmdDes,itemId:a.tempItemId};Object(m["Ub"])(l).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap),a.tempItemId.length>0&&1==a.isToggle&&""!=a.problemCode&&a.problemCode.length>0&&(a.problemCode.indexOf(",")>0?function(){var e=a.problemCode.split(","),t=function(t){a.questionTableData.forEach((function(l){e[t]==l.dmdCode&&(console.log("toggle"+l.dmdCode),a.$refs.questionTable.toggleRowSelection(l,!0))}))};for(var l in e)t(l)}():a.questionTableData.forEach((function(e){a.problemCode==e.dmdCode&&(console.log("toggle"+e.dmdCode),a.$refs.questionTable.toggleRowSelection(e,!0))}))))})).catch((function(e){console.log(e)}))},questionDetail:function(e,t,a){var l=this;l.detailFlag=!0;var s={itemSource:"",codeStr:e,index:t,pageSize:a,name:"",code:l.searchCode,itemContent:""};"问题库列表"==l.questionTitle?(s.itemSource="01",s.name=l.searchProbName,s.itemContent=l.searchProbDes):(s.itemSource="02",s.name=l.searchDmdName,s.itemContent=l.searchDmdDes),Object(m["Yb"])(s).then((function(e){e.data.successful&&(console.log(e),l.questionListTotalNum=e.data.resultValue.totalNum,l.questionLabelList=e.data.resultValue.tableLable,l.questionDictMap=l.getDictArr(l.questionLabelList),l.questionTableData=e.data.resultValue.tableData,l.questionShowData=l.getShowDateTable(l.questionTableData,l.questionDictMap))}))},showQuestionList:function(e){var t=this;for(var a in t.problemCode=t.getValue("problemCode"),t.currentPage=1,t.detailFlag=""!=e,t.tableLabelLX){var l=t.tableLabelLX[a];if("itemSource"==l.colDname){null!=l.value&&l.value.length>0?"01"==l.value?(t.questionTitle="问题库列表",t.itemSourseFlag=1,""!=e?(t.questionDetail(e,1,t.currentNum),t.codeStr=e):t.getWTList(1,t.currentNum),t.innerVisible=!0):"02"==l.value?(t.itemSourseFlag=2,t.questionTitle="需求库列表",""!=e?(t.questionDetail(e,1,t.currentNum),t.codeStr=e):t.getXQList(1,t.currentNum),t.innerVisible=!0):this.$message({showClose:!0,message:"项目来源为其他时,不需要选择问题或需求列表",type:"warning"}):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},makeItemName:function(){var e=this;e.newItemName=!1,console.log("生成项目名:"+e.newItemNameNo+";"+e.newItemNameTime)},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];null!=s.codeList&&1!=s.isFilterCol?("08"!=t.specClass&&"10"!=t.specClass&&"09"!=t.specClass&&"11"!=t.specClass||"itemClass"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"3"!=t.codeValue&&e.push(t)})),s.codeList=e}(),"08"==t.specClass&&"itemType"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"LX"!=t.codeValue&&e.push(t)})),s.codeList=e}(),""!=t.tempItemId&&null!=t.tempItemId&&void 0!=t.tempItemId||(null!=t.parentItemId?"itemLevel"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){e.push(t)})),s.codeList=e}():"itemLevel"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"03"!=t.codeValue&&e.push(t)})),s.codeList=e}()),null!=t.tempItemId&&""!=t.tempItemId&&void 0==t.tempItemId||function(){var e=[];s.codeList.forEach((function(t){1==t.enabled&&e.push(t)})),s.codeList=e}(),a.set(s.colDname,s.codeList)):"cascadeDropdown"==s.dispType&&a.set(s.colDname,new Array)}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},isNumber:function(e,t,a){null==t&&a();var l=/^\d+(\.\d+)?$/;l.test(t)?t.toString().indexOf(".")>0&&t.toString().split(".")[1].length>4?a(new Error("数字只精确到小数点后四位")):a():a(new Error("只能输入数字且不能为负值"))},getLabelList:function(e){var t=this;e.forEach((function(e){"dropdown"==e.displayType||"cascadeDropdown"==e.displayType?t.$set(e,"value",""):t.$set(e,"value",null)}));var a={};for(var l in e){var s=e[l];"undefined"!=typeof s.readOnly&&null!=s.readOnly&&""!=s.readOnly||(s.readOnly="0"),a[l]=e[l];var i=[];if(0!=t.phash&&s.phase==t.phash){if(1==s.isMandatory){var o=new Object;o.required=!0,o.message=s.dispName+"不能为空",s.dispType,o.trigger="change",i.push(o)}if("number"==s.dispType){var n=new Object;n.validator=t.isNumber,n.trigger="change",i.push(n)}if("undefined"!=typeof s.elCode&&null!=s.elCode&&""!=s.elCode){var r=new Object;r.required=!1,r.pattern=s.elCode,"undefined"!=typeof s.errorText&&""!=s.errorText&&null!=s.errorText?r.message=s.errorText:r.message=s.dispName+"格式不正确",r.trigger="change",i.push(r)}a[l].rule=i}null!=s.colDefault&&""!=s.colDefault&&"null"!=s.colDefault&&(a[l].value=s.colDefault),"itemType"==s.colDname&&("13"==t.specClass||"11"==t.specClass?a[l].value="XS":"03"==t.specClass&&(a[l].value="XX")),null!=t.parentItemId?"itemLevel"==a[l].colDname&&("01"==t.parentItemLevel?a[l].value="03":"02"==t.parentItemLevel&&(a[l].value="01"),a[l].readOnly="1"):a[l].readOnly="0",2==t.phash&&(3==t.itemPhaseDet||4==t.itemPhaseDet||27==t.itemPhaseDet?"auditFileNo"==a[l].colDname&&(a[l].readOnly="1"):15!=t.itemPhaseDet&&20!=t.itemPhaseDet||"feaSInvest"!=a[l].colDname&&"feaDInvest"!=a[l].colDname||(a[l].readOnly="1"))}return a}}),l),h=p,f=(a("d2bd"),a("2877")),g=Object(f["a"])(h,s,i,!1,null,"4fb7e6a5",null);t["default"]=g.exports},c2f1:function(e,t,a){},c479:function(e,t,a){},c64d:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main addpage",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("span",{staticClass:"color_tip"},[e._v(e._s(e.title))])]),a("div",{staticStyle:{height:"calc(100vh - 150px)",overflow:"auto",background:"#dff1f1"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"saveForm",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabel,"label-position":"right",inline:!0}},e._l(e.tableLabel,(function(t,l){return 3!=t.showType?a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["DATE"==t.dispType?a("el-date-picker",{staticClass:"diy_long",staticStyle:{width:"300px!important"},attrs:{type:t.colLimit,"value-format":t.isDispDetail,placeholder:"选择日期",disabled:null==t.isFaceDisp},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType&&"speciality"!=t.colDname&&"itemClass1"!=t.colDname&&"itemClass2"!=t.colDname&&"itemClass3"!=t.colDname&&"fragmentaryType"!=t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:7!=t.showType},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass1"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:7!=t.showType},on:{change:function(a){return e.changeItemClass2(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr1,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass2"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:7!=t.showType},on:{change:function(a){return e.changeItemClass3(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr2,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass3"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:7!=t.showType},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr3,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{size:"large",props:e.props,options:e.deptArr,value:e.valueId,deptName:e.deptName,clearable:e.isClearable,accordion:e.isAccordion,disabled:7!=t.showType},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",attrs:{disabled:7!=t.showType},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"dropdown"==t.dispType&&"speciality"==t.colDname?a("el-select",{staticClass:"diy_long",attrs:{disabled:e.specEnabled,placeholder:t.dispName},model:{value:e.specClass,callback:function(t){e.specClass=t},expression:"specClass"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"text"==t.dispType&&"questionCode"==t.colDname?a("el-button",{staticClass:"diy_right",attrs:{type:"primary",disabled:null==t.isFaceDisp},on:{click:function(t){return t.preventDefault(),e.showQuestionList(t)}}},[e._v("关联问题或需求")]):e._e(),"text"==t.dispType&&"questionCode"!=t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:t.dispName,disabled:7!=t.showType},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:t.textMask,disabled:7!=t.showType&&"ghInvest"!=t.colDname},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""!=t.dispType&&null!=t.dispType||"itemName"==t.colDname||"erectItemCode"==t.colDname?e._e():a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{autocomplete:"off",placeholder:t.dispName,disabled:7!=t.showType},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}),"erectItemCode"==t.colDname?a("el-input",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-input",{staticClass:"diy_left",attrs:{id:"ifremVal",disabled:7!=t.showType,placeholder:t.dispName},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:7!=t.showType}},[e._v("自动命名")]):e._e(),"itemName"==t.colDname?a("el-button",{staticClass:"diy_right",staticStyle:{width:"71px",padding:"10px 0"},attrs:{type:"primary",size:"medium",disabled:7!=t.showType}},[e._v("手动命名")]):e._e()],1):e._e()})),1),a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("报告列表")])]),a("el-form",[""!=e.reportFileName?a("el-form-item",{attrs:{label:"可研报告","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjCmFeaPrep/downloadReport?itemId="+e.feaReportId+"&token="+e.token}},[e._v(e._s(e.reportFileName))])]):e._e(),""!=e.feaFileName?a("el-form-item",{attrs:{label:"可研评审文件","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+e.feaFileId+"token"+e.token}},[e._v(e._s(e.feaFileName))]),a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjCmStItem/updataNormalFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadSuccess,data:e.finalFileData,multiple:!1,"show-file-list":!1,"file-list":e.fileList3,accept:".doc,.docx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("替换可研评审文件")])],1)],1):e._e(),""!=e.approvalFileName?a("el-form-item",{attrs:{label:"批复文件","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+e.approvalFileId+"&token="+e.token}},[e._v(e._s(e.approvalFileName))])]):e._e()],1),e.showChildren?a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("子项目列表")])]):e._e(),e.showChildren?a("el-table",{staticStyle:{width:"100%",heigth:"auto"},attrs:{data:e.childrenShowData,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.childrenLable,(function(t,l){return"itemName"!=t.colDname&&1==t.showType&&"itemCont"!=t.colDname&&"questionCode"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#333"}},[e._v(e._s(t.row.itemName))])]}}],null,!1,615918490)}):"itemCont"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.itemCont?[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.itemCont))]),a("p",[e._v(e._s(e.formatStr(t.row.itemCont)))])])]:void 0}}],null,!0)}):"questionCode"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.questionCode?[t.row.questionCode.length<20?a("p",[e._v(" "+e._s(t.row.questionCode)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.questionCode))]),a("p",[e._v(e._s(e.formatStr(t.row.questionCode)))])])]:void 0}}],null,!0)}):e._e()}))],2):e._e()],1),a("div",{staticClass:"save_btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.saveItem("saveForm")}}},[e._v("保存")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancle}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.resert}},[e._v("重置")])],1),a("el-dialog",{staticClass:"bmiframe",attrs:{visible:e.newItemName,"close-on-click-modal":!1,width:"1000px","custom-class":"cus-dialog","modal-append-to-body":""},on:{"update:visible":function(t){e.newItemName=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("生成项目名称")])])]),a("iframe",{attrs:{name:"my-iframe",id:"name-iframe",src:e.getNameUrl+"/?"+Math.round(1e3*Math.random()),frameborder:"0",width:"100%",height:"500",scrolling:"none"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getBM}},[e._v("获取项目名称")])],1)],2),a("el-dialog",{attrs:{width:"70%",title:e.questionTitle,"close-on-click-modal":!1,visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[a("div",{staticClass:"btns"},[a("el-input",{staticClass:"serch",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.probName,callback:function(t){e.probName=t},expression:"probName"}}),a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getChildTableList}},[e._v("检索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.questionShowData,"max-height":"500px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleQuestionSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._l(e.questionLabelList,(function(t,l){return"createDate"!=t.colDname&&"isCancel"!=t.colDname&&"probDesc"!=t.colDname&&"probRemark"!=t.colDname&&"dmdDesc"!=t.colDname&&"dmdRemark"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName}}):"probDesc"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probDesc?[t.row.probDesc.length<10?a("p",[e._v(" "+e._s(t.row.probDesc)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.probDesc)))])])]:void 0}}],null,!0)}):"probRemark"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.probRemark?[t.row.probRemark.length<10?a("p",[e._v(" "+e._s(t.row.probRemark)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.probRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.probRemark)))])])]:void 0}}],null,!0)}):"dmdDesc"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdDesc))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdDesc)))])])]}}])}):"dmdRemark"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.dmdRemark))]),a("p",[e._v(e._s(e.formatStr(t.row.dmdRemark)))])])]}}])}):"isCancel"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.cancelFormat,prop:t.colDname,label:t.dispName}}):"createDate"==t.colDname?a("el-table-column",{key:l,attrs:{formatter:e.dateFormat,prop:t.colDname,label:t.dispName}}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.questionListTotalNum},on:{"current-change":e.handleCurrentWTChange}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleSubmitInnerTable}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitQuestioinCode}},[e._v("保 存")])],1)],1)],1)])])},s=[],i=(a("99af"),a("4160"),a("a630"),a("c975"),a("a15b"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=a("7e1e"),u={data:function(){return{deptName:"",deptArr:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},itemName:"",itemForm:{},itemInfo:{},getNameUrl:"/pcinfo/resUniname/pages/pgUnifiedNameDefine.jsp?openType=1&appID=00&applyID=2",newItemName:!1,specClass:"",tableData:[],tableLabel:{},dictMap:new Map,tempId:"",columnMap:new Map,title:"",totalLableArr:[],dialogLoading:!1,formLabelWidth:"140px",innerVisible:!1,questionTitle:"",questionLabelList:[],questionTableData:[],questionListTotalNum:0,questionDictMap:new Map,questionShowData:[],selectedQuestionCode:[],currentPage:1,loading:!1,probName:"",specEnabled:!0,parentItemId:null,childTableData:[],childrenShowData:[],childrenLable:{},childrenDictMap:new Map,childrenColumnMap:new Map,showChildren:!1,reportFileName:"",feaReportId:"",feaFileName:"",feaFileId:"",approvalFileName:"",approvalFileId:"",fileList3:[],userId:"",token:"",finalFileData:{itemId:"",auditFileId:""},itemClassArr:[],itemClassArr1:[],itemClassArr2:[],itemClassArr3:[],itemClassShow3:!1,itemClassShow2:!1,itemClassShow1:!1}},created:function(){this.tableHeight=window.innerHeight-320+"px"},mounted:function(){var e=this;window.onresize=function(){return function(){e.tableHeight=window.innerHeight-320+"px"}()},this.tempItemId=this.$route.query.itemId,this.oldPath=this.$route.query.oldPath,this.itemName=this.$route.query.itemName,this.title=this.itemName+" 修改",this.getLabel(this.tempItemId),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},computed:Object(o["a"])({},Object(n["c"])({addItemParams:function(e){return e.itemadd.addItemParams}})),components:{SelectTree:r["a"]},methods:{getValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e)return l.value}},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},getValue1:function(e){this.setValue("conDept",e),console.log(this.valueId)},changeItemClass1:function(){var e=this,t={speciality:1};Object(c["ob"])(t).then((function(t){if(t.data.successful)if(e.itemClassArr=t.data.resultValue[0].idLevel2,e.itemClassArr1=t.data.resultValue[0].idLevel2,0==e.itemClassArr1.length)e.itemClassShow1=!0;else if(e.itemClassShow1=!1,null!=e.tempItemId){var a=e.getValue("itemClass1"),l=e.getValue("itemClass2");e.changeItemClass2(a,!0),e.changeItemClass3(l,!0)}}))},changeItemClass2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("itemClass2"),a.clearValue("itemClass3"));for(var l=0;l<a.itemClassArr.length;l++){var s=a.itemClassArr[l];if(s.typeCode==e){a.itemClassArr2=s.idLevel3,0==a.itemClassArr2.length?(a.itemClassShow2=!0,a.itemClassShow3=!0):(a.itemClassShow2=!1,a.itemClassShow3=!1);break}}},changeItemClass3:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||a.clearValue("itemClass3");for(var l=0;l<a.itemClassArr.length;l++)for(var s=a.itemClassArr[l],i=s.idLevel3,o=0;o<i.length;o++){var n=i[o];n.typeCode==e&&(a.itemClassArr3=n.idLevel4,0==a.itemClassArr3.length?a.itemClassShow3=!0:a.itemClassShow3=!1)}},getCascadeLabel:function(e,t){var a=this,l=new FormData;l.append("parentId",e),Object(c["kb"])({parentId:e}).then((function(e){if(e.data.successful&&(console.log(e),a.cascadeLabel=e.data.resultValue,null!=a.tempItemId)){var t=a.getValue("assetType2"),l=a.getValue("gdAssetType");a.getCascadeLabel2(l,!0),a.getCascadeLabel3(t,!0)}}))},getCascadeLabel2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("assetType2"),a.clearValue("assetType3")),a.cascadeLabel2=[],a.cascadeLabel3=[];for(var l=0;l<a.cascadeLabel.length;l++){var s=a.cascadeLabel[l];if(s.codeValue==e){a.cascadeLabel2=s.childList;break}}},getCascadeLabel3:function(e,t){var a=this;a.cascadeLabel3=[],"undefined"!=typeof t&&0!=t||a.clearValue("assetType3");for(var l=0;l<a.cascadeLabel2.length;l++){var s=a.cascadeLabel2[l];s.codeValue==e&&(a.cascadeLabel3=s.childList)}},uploadSuccess:function(e){var t=this;if(e.successful){var a=e.resultValue;t.feaFileName=a.fileName,t.feaFileId=a.fileId}},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},getShowDateTable:function(e,t){for(var a=[],l=0;l<e.length;l++){for(var s=e[l],o=new Object,n=0,r=Object.entries(s);n<r.length;n++){var c=Object(i["a"])(r[n],2),u=c[0],d=c[1];if(t.has(u))for(var m=t.get(u),p=0;p<m.length;p++){var h=m[p];h.codeValue==d&&(o[u]=h.codeName)}else o[u]=d}a.push(o)}return a},cancelFormat:function(e,t){return 1===e.TableIsbibei?"是":"否"},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDay();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},resert:function(){var e=this;if(null!=e.tempItemId)Object(c["Gb"])(e.tempItemId).then((function(t){if(t.data.successful){var a=t.data.resultValue.items[0];for(var l in e.tableLabel)null==a[e.tableLabel[l].colDname]?e.tableLabel[l].value="":e.tableLabel[l].value=a[e.tableLabel[l].colDname]+""}})).catch((function(e){console.log(e)}));else for(var t in e.tableLabel)e.tableLabel[t].value=""},saveItem:function(e){var t=this,a=this;a.$refs[e].validate((function(e){var l={},s="",i="";for(var o in null!=a.tempItemId?(l["itemId"]=a.itemId,s="修改成功",i="修改失败"):null!=a.parentItemId?(l["parentId"]=a.parentItemId,s="新增下级成功",i="新增下级失败"):(s="添加成功",i="添加失败"),a.tableLabel){var n=a.tableLabel[o];l[n.colDname]=n.value}null==a.tempItemId&&""==l["itemName"]&&(l["itemName"]=document.getElementById("ifremVal").value),l["speciality"]=a.specClass,null!=a.tempItemId&&(l["itemId"]=a.tempItemId),a.dialogLoading=!0,null==a.parentItemId&&Object(c["L"])(l).then((function(e){a.dialogLoading=!1,console.log(e),e.data.successful?(t.$message({showClose:!0,message:s,type:"success"}),a.itemId="",a.$router.push({path:a.oldPath})):t.$message({showClose:!0,message:i,type:"error"}),a.loading=!1}))}))},cancle:function(){var e=this;this.$router.push({path:e.oldPath})},handleCurrentWTChange:function(e){console.log("当前页: ".concat(e));var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if("itemSource"==l.colDname){l.value.length>0?(t.innerVisible=!0,"1"==l.value?(t.questionTitle="问题库列表",t.getXQList(e,5)):(t.questionTitle="需求库列表",t.getWTList(e,5))):t.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},getLabel:function(e){var t=this,a=this;a.dialogLoading=!0,Object(c["Hb"])(e).then((function(l){if(a.dialogLoading=!1,l.data.successful){var s=l.data.resultValue.tableLable,i=l.data.resultValue.tableData;for(var o in a.tableLabel=a.getLabelList(s),a.dictMap=a.getDictArr(s),a.tableLabel)null==i[a.tableLabel[o].colDname]?(a.tableLabel[o].value="","number"==a.tableLabel[o].dispType&&(a.tableLabel[o].value=0)):"DATE"==a.tableLabel[o].dispType?a.tableLabel[o].value=a.formartDate(i[a.tableLabel[o].colDname]):a.tableLabel[o].value=i[a.tableLabel[o].colDname]+"";a.reportFileName=i.feaReportName,a.feaReportId=e,"undefined"!=typeof i.apprFileName&&(a.approvalFileName=i.apprFileName,a.approvalFileId=i.apprFileId),"undefined"!=typeof i.auditFileName&&(a.feaFileName=i.auditFileName,a.feaFileId=i.auditFileId,a.finalFileData.itemId=e,a.finalFileData.auditFileId=i.auditFileId);var n=l.data.resultValue.tableDataList;t.childrenLable=l.data.resultValue.tableLableList,"undefined"==typeof n||0==n.length?a.showChildren=!1:(a.showChildren=!0,a.childrenDictMap=a.getDictArr(a.childrenLable),a.childrenColumnMap=a.getColumnTypeArr(a.childrenLable),a.childrenShowData=a.getShowDateTable(n,a.childrenDictMap,a.childrenColumnMap)),a.changeItemClass1(),a.getCascadeLabel("1001");var r=a.getValue("conDept");""!=r&&(a.deptCodeT=r,Object(c["rb"])({deptCode:r}).then((function(e){if(e.data.successful){var l=e.data.resultValue;a.deptName=l}else t.$message.error("查询部门id失败")}))),a.getTreeDeptCode()}else t.$message.error("查询项目信息失败")}))},cancleSubmitInnerTable:function(){var e=this;e.probName="",e.innerVisible=!1},getChildTableList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?(e.innerVisible=!0,"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5)):(e.questionTitle="需求库列表",e.getWTList(1,5))):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},showNewItemName:function(){this.newItemName=!0},getBM:function(){var e=document.getElementById("name-iframe"),t=e.contentWindow||e.contentDocument,a=t.document.getElementById("prjName").value;if(a){for(var l in document.getElementById("ifremVal").value=a,this.tableLabel)"itemName"==this.tableLabel[l].colDname&&(this.tableLabel[l].value=a);this.newItemName=!1}else this.$message({showClose:!0,message:"请先生成项目名称",type:"error"})},handleQuestionSelectionChange:function(e){var t=this,a=1;for(var l in t.tableLabel){var s=t.tableLabel[l];if("itemSource"==s.colDname){a="1"==s.value?1:2;break}}t.selectedQuestionCode=[],e.forEach((function(e){1==a?t.selectedQuestionCode.push(e.probCode):t.selectedQuestionCode.push(e.dmdCode)}))},submitQuestioinCode:function(){var e=this;if(e.probName="",e.selectedQuestionCode.length>0){for(var t in e.tableLabel){var a=e.tableLabel[t];if("questionCode"==a.colDname){if(a.value.length>0){var l=a.value.split(",");e.selectedQuestionCode=e.selectedQuestionCode.concat(l)}var s=new Set(e.selectedQuestionCode),i=Array.from(s),o=i.join(",");a.value=o;break}}e.selectedQuestionCode=[],e.innerVisible=!1}else e.$message({showClose:!0,message:"请选择问题或需求",type:"warning"})},getXQList:function(e,t){var a=this;a.loading=!0,Object(c["Vb"])({pageIndex:e,pageSize:t,probName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},getWTList:function(e,t){var a=this;a.loading=!0,Object(c["Tb"])({pageIndex:e,pageSize:t,dmdName:a.probName}).then((function(e){a.loading=!1,console.log("response",e),e.data.successful&&(a.questionListTotalNum=e.data.resultValue.totalNum,a.questionLabelList=e.data.resultValue.tableLable,a.questionDictMap=a.getDictArr(a.questionLabelList),a.questionTableData=e.data.resultValue.tableData,a.questionShowData=a.getShowDateTable(a.questionTableData,a.questionDictMap))})).catch((function(e){console.log(e)}))},showQuestionList:function(){var e=this;for(var t in e.tableLabel){var a=e.tableLabel[t];if("itemSource"==a.colDname){a.value.length>0?"1"==a.value?(e.questionTitle="问题库列表",e.getXQList(1,5),e.innerVisible=!0):"2"==a.value?(e.questionTitle="需求库列表",e.getWTList(1,5),e.innerVisible=!0):this.$message({showClose:!0,message:"项目来源为其他时,不需要选择问题或需求列表",type:"warning"}):e.$message({showClose:!0,message:"请先选择项目来源",type:"warning"});break}}},makeItemName:function(){var e=this;e.newItemName=!1,console.log("生成项目名:"+e.newItemNameNo+";"+e.newItemNameTime)},getDictArr:function(e){for(var t=this,a=new Map,l=0;l<e.length;l++){var s=e[l];null!=s.codeList&&("9"!=t.specClass&&"11"!=t.specClass||"itemClass"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"3"!=t.codeValue&&e.push(t)})),s.codeList=e}(),null!=t.parentItemId&&"itemType"==s.colDname&&function(){var e=[];s.codeList.forEach((function(t){"1"!=t.codeValue&&e.push(t)})),s.codeList=e}(),a.set(s.colDname,s.codeList))}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},isNumber:function(e,t,a){var l=/^\d+(\.\d+)?$/;l.test(t)?t.toString().indexOf(".")>0&&t.toString().split(".")[1].length>2?a(new Error("数字只精确到小数点后两位")):a():a(new Error("只能输入数字且不能为负值"))},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e){var s=e[l];if(null!=t.tempItemId||"ghYear"!=s.colDname&&"ghInvest"!=s.colDname){a[l]=e[l];var i=[];if(1==s.isMandatory){var o=new Object;o.required=!0,o.message=s.dispName+"不能为空","dropdown"==s.dispType?o.trigger="change":o.trigger="blur",i.push(o)}if("number"==s.dispType){var n=new Object;n.validator=t.isNumber,n.trigger="blur",i.push(n)}a[l].rule=i}}return a}}},d=u,m=(a("78d5"),a("82cf"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,"8c0d4f22",null);t["default"]=p.exports},c6cda:function(e,t,a){"use strict";var l=a("1d66"),s=a.n(l);s.a},c80f:function(e,t,a){},c8b4:function(e,t,a){"use strict";var l=a("d2d2"),s=a.n(l);s.a},ca0a:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()})),a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v("修改可研")])]}}])})],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"plan-assess"},[a("el-form",[a("el-form-item",[a("div",{staticStyle:{"font-weight":"600"}},[a("span",[e._v("总体评审意见")])]),""!=e.rejectInfo.fileId&&void 0!=e.rejectInfo.fileId?a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStFeaAudit/exportReport?feaAuditid="+e.rejectInfo.fileId+"&token="+e.token}},[e._v("评审文件")]):e._e(),a("el-input",{staticClass:"diy",attrs:{type:"textarea",disabled:""},model:{value:e.rejectInfo.info,callback:function(t){e.$set(e.rejectInfo,"info",t)},expression:"rejectInfo.info"}})],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("确认")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)]),a("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.reportShow,"close-on-click-modal":!1,"custom-class":"cus-dialog","v-loading":e.fileUploadLoading},on:{"update:visible":function(t){e.reportShow=t}}},[a("template",{slot:"title"},[a("div",{staticStyle:{"font-size":"large"}},[a("span",[e._v("修改可研")])])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!1,"label-position":"right"}},[a("el-form-item",{attrs:{label:e.kyTitle}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.GLOBALURL+"/prjCmFeaPrep/uploadMultReport",data:e.uploadReportData,headers:{userId:e.userId,token:e.token},accept:".doc,.docx",multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,"show-file-list":!0,"auto-upload":!0,"on-success":e.uploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")]),a("el-button",{attrs:{type:"primary",size:"small"}},["上传可研报告"==e.kyTitle?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=4&codeValue="+e.itemSpeciality+"&token="+e.token}},[e._v("导出可研模版")]):e._e(),"上传项目建议书"==e.kyTitle?a("a",{attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=4&codeValue="+e.itemSpeciality+"&token="+e.token}},[e._v("导出可研模版")]):e._e()])],1)],1),a("el-form-item",{attrs:{label:"上传估算书等附件"}},[a("el-upload",{ref:"upload",staticStyle:{display:"inline-block"},attrs:{action:e.GLOBALURL+"/prjCmFeaPrep/uploadMultReport",data:e.uploadReportData,headers:{userId:e.userId,token:e.token},multiple:"","file-list":e.fileList2,"auto-upload":!0,"on-success":e.uploadSuccess2,"show-file-list":!0,limit:5,"on-exceed":e.handleExceed2,accept:".doc,.docx"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancalSubmitFeasibility}},[e._v("取 消")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitBtn,expression:"submitBtn"}],attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("提 交")])],1)],2)],1)},s=[],i=(a("99af"),a("4160"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("ade3"),n=(a("2f62"),a("a960")),r=(a("2bb5"),a("c2b4")),c=a("7e1e"),u=a("73fc"),d=a("f36f"),m={name:"questions",data:function(){var e;return e={kyTitle:"",fileUploadLoading:!1,reportShow:!1,fjIds:[],fileList2:[],reportFileId:"",reportFileName:"",fileList:[],uploadReportItemId:"",uploadReportData:{itemId:"",itemType:1},isAuto:!1,itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,loadingBtn2:!1,expertInfoArrShow:[],expertAdvice:{auditAdvice:"",itemId:"",agreeType:"1",auditOpinion:"",isBatchPackage:!1},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{}},Object(o["a"])(e,"reportFileName",""),Object(o["a"])(e,"columnTypeMap",new Map),Object(o["a"])(e,"isShowFilter",!1),Object(o["a"])(e,"tableHeight","65vh"),Object(o["a"])(e,"userSpecialityArr",[]),Object(o["a"])(e,"token",""),Object(o["a"])(e,"userId",""),Object(o["a"])(e,"itemSpeciality",""),Object(o["a"])(e,"rejectInfo",{info:"",fileId:""}),Object(o["a"])(e,"submitBtn",!1),e},components:{querys:u["a"],SelectTree:n["a"],ItemAddCom:r["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getTableWithTitle(1,10),this.userId=this.$route.query.iscUserId,this.token=sessionStorage.getItem("token")},methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeFile:function(e){this.fileType=e.name.split(".")[1],this.fileTypeList.push(this.fileType),console.log(this.fileTypeList)},showDialog:function(e){var t=this;"3"==e.itemClassT?t.kyTitle="上传项目建议书":t.kyTitle="上传可研报告",t.uploadReportItemId=e.itemId,t.uploadReportData.itemId=e.itemId,t.loading=!0,t.fileList=[],t.fileList2=[],t.fjIds=[],t.itemSpeciality=e.specialityCopy,Object(c["xd"])({itemId:e.itemId}).then((function(e){if(console.log("response",e),t.loading=!1,e.data.successful){var a=e.data.resultValue;a.forEach((function(e){if(1==e.key){if(e.fileName.length>0){var a={};a.name=e.fileName,a.url="",t.reportFileId=e.fileId,t.reportFileName=e.fileName,t.fileList.push(a)}if(e.itemFileList){var l=e.itemFileList;l.forEach((function(e){var a={};a.name=e.fileName,a.url="";var l={};l.fileId=e.fileId,l.fileName=e.fileName,t.fjIds.push(l),t.fileList2.push(a)}))}}}))}})).catch((function(e){console.log(e)})),t.reportShow=!0},submitUpload:function(){var e=this,t=this,a={};a.itemId=t.uploadReportItemId,a.repName=t.reportFileName,a.repId=t.reportFileId,a.fjIds=t.fjIds,t.submitBtn=!0,Object(c["Yd"])(a).then((function(a){if(t.submitBtn=!1,a.data.successful){var l=new FormData;l.append("itemIds",t.uploadReportItemId),Object(c["e"])(l).then((function(a){a.data.successful?(t.reportFileId="",t.reportFileName="",t.fjIds=[],t.uploadReportItemId="",t.reportShow=!1,e.$message.success("保存可研报告成功")):e.$message.error("保存可研报告失败")}))}else e.$message.error("保存可研报告失败")}))},cancalSubmitFeasibility:function(){var e=this;e.reportShow=!1,e.fileList=[],e.fileList2=[],e.reportFileId="",e.reportFileName="",this.getTableWithTitle(e.currentPage,e.currentNum)},handleExceed:function(e,t){var a=this;e.length>1&&a.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleExceed2:function(e,t){var a=this;e.length>5&&a.$message.warning("当前限制选择 5 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},uploadSuccess:function(e,t,a){var l=this;this.fileUploadLoading=!1,e.successful&&(l.reportFileId=e.resultValue.fileId,l.reportFileName=e.resultValue.fileName,l.fileList=a)},uploadSuccess2:function(e){var t=this;if(e.successful){var a={};a.fileId=e.resultValue.fileId,a.fileName=e.resultValue.fileName,t.fjIds.push(a)}else this.$message({showClose:!0,message:"上传失败",dangerouslyUseHTMLString:!0,type:"error"})},deleteReport:function(){var e=this,t=this,a=new FormData;if(0==t.fileList.length)return this.$message({showClose:!0,message:"可研报告已删除",type:"warning"}),!1;t.$confirm("确认删除可研报告？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.append("itemId",t.uploadReportItemId),Object(c["F"])(a).then((function(a){if(a.data.successful)t.fileList=[],e.$message({showClose:!0,message:"删除可研报告成功",type:"success"}),t.getTableWithTitle(t.currentPage,t.currentNum);else{var l=a.data.resultHint;e.$message({showClose:!0,message:l,dangerouslyUseHTMLString:!0,type:"error"})}t.loading=!1}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(d["e"])(t).then((function(t){"0"==t.data.status?e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}):(e.loadingBtn1=!1,e.$message.error(t.data.message))}))},uploadAdviceSuccess:function(e){var t=this;if(e.successful)t.expertAdvice.auditFileId=e.resultValue.auditFileId,this.$message({showClose:!0,message:"上传成功",type:"success"});else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(c["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(c["Fb"])({processId:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.uploadReportItemId=t.itemId,a.uploadReportData.itemId=t.itemId,a.tableDataShow=a.getShowDateTable(t,a.dictMap,a.columnTypeMapDict);var l={};l.itemPhaseDet=a.tableDataShow[0].itemPhaseDet,l.itemId=a.tableDataShow[0].itemId,Object(c["bb"])(l).then((function(e){if(console.log(e),e.data.successful){var t=e.data.resultValue;a.rejectInfo.info=t.auditAdvice,a.rejectInfo.fileId=t.auditFileId}}))}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},p=m,h=(a("194f"),a("80c8"),a("2877")),f=Object(h["a"])(p,l,s,!1,null,"0e76fde8",null);t["default"]=f.exports},cce6:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"upload-file"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,"label-position":"right"}},[a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"项目可研评审文号"}},[a("el-input",{attrs:{placeholder:"项目可研评审文号"},model:{value:e.auditFileNo,callback:function(t){e.auditFileNo=t},expression:"auditFileNo"}})],1),a("el-form-item",[a("el-upload",{ref:"uploadFileSubmit",staticClass:"upload",attrs:{action:e.GLOBALURL+"/workFlow/uploadNormalFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadSuccess2,"on-change":e.changeFile,"on-remove":e.handleRemove,data:e.finalFileData,"file-list":e.fileList3,multiple:!1,"show-file-list":!0,"auto-upload":!1,accept:".CEB,.PDF"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("确认")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4160"),a("c975"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=(a("2f62"),a("a960")),n=(a("2bb5"),a("c2b4")),r=a("7e1e"),c=a("eb5a"),u=a("73fc"),d=a("f36f"),m={name:"questions",data:function(){return{isAuto:!1,itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,loadingBtn2:!1,isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],tempItemId:"",tempIsBatch:!1,tempItemName:"",itemShow:!1,saveLabel:{},columnTypeMap:new Map,tableHeight:"65vh",userSpecialityArr:[],token:"",userId:"",itemSpeciality:"",fileType:"",fileTypeList:[],finalFileData:{},auditFileNo:"",fileList3:[]}},components:{querys:u["a"],SelectTree:o["a"],ItemAddCom:n["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getTableWithTitle(1,10),this.userId=this.$route.query.iscUserId,this.token=sessionStorage.getItem("token")},methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(r["jc"])().then((function(t){var a=t.data.resultValue;Object(r["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeFile:function(e){this.fileType=e.name.split(".")[1],this.fileTypeList.push(this.fileType),console.log(this.fileTypeList)},handleRemove:function(e,t){this.fileTypeList=[];for(var a=0;a<t.length;a++){var l="";l=t[a].name.split(".")[1],this.fileTypeList.push(l)}console.log(this.fileTypeList)},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};if(!this.auditFileNo)return this.$message({showClose:!0,message:"请输入项目可研评审文号",type:"warning"}),!1;if(""==this.fileTypeList||void 0==this.fileTypeList)return this.$message({showClose:!0,message:"请上传格式为ceb或者pdf的文件",type:"warning"}),!1;for(var a=0;a<this.fileTypeList.length;a++)if("ceb"!=this.fileTypeList[a]&&"pdf"!=this.fileTypeList[a]&&"CEB"!=this.fileTypeList[a]&&"PDF"!=this.fileTypeList[a])return this.$message({showClose:!0,message:"只能上传格式为ceb或者pdf的文件",type:"warning"}),!1;this.loadingBtn1=!0,Object(d["e"])(t).then((function(t){e.loadingBtn1=!1,"0"==t.data.status?(e.finalFileData.auditFileNo=e.auditFileNo,e.$refs.uploadFileSubmit.submit()):e.$message.error(t.data.message)}))},uploadSuccess2:function(e){var t=this;if(t.showCommit=!1,t.fileLoading=!1,e.successful){var a=e.resultValue;t.$message.success("操作成功"),a.length>0&&a.forEach((function(e){var t=[],a={};a.content=e.itemName+"项目，已经上传正式评审文件，评审文号 "+e.auditFileNo,a.noticeUser=e.createor,t.push(a),Object(d["g"])(t).then((function(e){console.log(e)}))}));var l=t.finalFileData.itemId,s={itemId:l,isBatchPackage:t.tempIsBatch};Object(r["mb"])(s).then((function(e){if(e.data.successful)for(var a=e.data.resultValue,l=function(e){var l=a[e];console.log("调用国电通编码器"),Object(r["H"])({itemId:l.itemId}).then((function(e){if(e.data.successful){var a=e.data.resultValue;console.log(a),Object(c["a"])(a).then((function(e){console.log(e);var a=e.data.status;if(-1!=a.indexOf("200"))console.log("调用编码器失败,权限校验失败");else if(-1!=a.indexOf("100")){var s=e.data.applyResult,i=s[0];if(-1!=i.status.indexOf("100")){var o=i.baseCode;Object(r["Vd"])({itemId:l.itemId,code:o}).then((function(e){e.data.successful?t.$alert("编码成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}):t.$message.error("编码失败")}))}else if(-1!=i.status.indexOf("200")){var n="";for(var c in i.applyResult)n=i.applyResult[c];console.log(n)}}}))}}))},s=0;s<a.length;s++)l(s)}))}else t.$message.error("上传失败")},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(r["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(r["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.tempItemId=t.itemId;var l="";1==t.isBatchPackage?(a.tempIsBatch=!0,l=t.children[0].itemPhaseDet):(a.tempIsBatch=!1,l=t.itemPhaseDet);var s=[];null!=t&&s.push(t),a.tableDataShow=a.getShowDateTable(s,a.dictMap,a.columnTypeMapDict),a.auditFileNo="",a.fileList3=[],a.fileTypeList=[],a.fileType="",a.finalFileData={itemId:t.itemId,itemPhaseDet:l,auditFileNo:a.auditFileNo,isBatchPackage:a.tempIsBatch}}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},p=m,h=(a("da2f"),a("c6cda"),a("2877")),f=Object(h["a"])(p,l,s,!1,null,"0a33ab62",null);t["default"]=f.exports},ceab:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!1},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("专家姓名")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入专家姓名"},on:{change:e.selectItem},model:{value:e.getTableData.expertName,callback:function(t){e.$set(e.getTableData,"expertName",t)},expression:"getTableData.expertName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("性别")]),a("div",{staticClass:"query_select"},[void 0!=e.dictMap?a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.selectItem},model:{value:e.getTableData.expertSex,callback:function(t){e.$set(e.getTableData,"expertSex",t)},expression:"getTableData.expertSex"}},e._l(e.dictMap.get("expertSex"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.exportBtn,expression:"exportBtn"}],attrs:{type:"primary",size:"small"},on:{click:e.exportExperts}},[e._v(" 导出 ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showDialog(null)}}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",size:"small",loading:e.delLoading},on:{click:e.del}},[e._v("删除")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"expertTable",attrs:{data:this.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._l(e.tableLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),a("el-dialog",{staticClass:"experts-dialog",attrs:{title:e.dialogTitle,"close-on-click-modal":!1,width:"70%",visible:e.dialogFormVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"lableForm",attrs:{model:e.tableLabel,inline:!0,"label-position":"right"}},[e._l(e.tableLabel,(function(t,l){return"text"!=t.dispType?a("el-form-item",{key:l,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["number"==t.dispType?a("el-input",{attrs:{type:"number",placeholder:"请输入内容"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"string"==t.dispType?a("el-input",{attrs:{placeholder:t.dispName,autocomplete:"off"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(t.codeList,(function(e){return a("el-option",{key:e.codeId,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"date"==t.dispType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1):e._e()})),e._l(e.tableLabel,(function(t,l){return"text"==t.dispType?a("el-form-item",{key:l,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["text"==t.dispType?a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1):e._e()}))],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitForm("lableForm")}}},[e._v("确 定")])],1)],1)],1)},s=[],i=(a("4160"),a("a15b"),a("4ec9"),a("4fad"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),o=(a("7a14"),a("a960")),n=a("7e1e"),r=a("73fc"),c={name:"questions",data:function(){return{submitLoading:!1,delLoading:!1,token:"",deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},tableHeight:"",isShowQuery:!1,isShowFilter:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:{},totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"40%",input:"",tableData:[],tableLabel:[],tableDataShow:[],getTableData:{pageIndex:1,pageSize:20,professional:"",orgNo:"",orgDept:"",expertSex:"",expertName:"",deptCode:""},dictMap:new Map,tempId:"",columnMap:new Map,dialogTitle:"",expertIdArr:[],exportBtn:!1,deptArr:[]}},components:{querys:r["a"],SelectTree:o["a"]},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.token=sessionStorage.getItem("token"),this.getTable(1,20)},watch:{deptCode:function(){this.getTableData.deptCode=this.deptCode,this.currentPage=1,this.getTable(1,this.currentNum)}},methods:{getValue:function(e){this.deptCode=e},getTreeDeptCode:function(){var e=this;Object(n["jc"])().then((function(t){var a=t.data.resultValue;Object(n["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},exportExperts:function(){var e=this,t=e.expertIdArr.join(",");e.exportBtn=!0;var a=new FormData;a.append("expertIs",t),Object(n["a"])(a).then((function(t){e.$refs.expertTable.clearSelection(),e.exportBtn=!1,e.download(t.data,"专家信息.xlsx")}))},download:function(e,t){console.log(e);var a=document.createElement("a"),l=new Blob([e],{type:"application/vnd.ms-excel"});a.style.display="none",a.href=URL.createObjectURL(l),a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0):(this.tableHeight=t,this.isShowQuery=!1)},switchFilter:function(){this.isShowFilter=!this.isShowFilter},isRequired:function(e){return console.log(e),!(!e||1!=e)},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},changeProbName:function(e){this.getTable()},uploadSuccess:function(e,t,a){var l=this;e.successful?(l.$message({showClose:!0,message:"导入成功",type:"success"}),l.currentPage=1,l.getTable(1,l.currentNum)):l.$message({showClose:!0,message:"导入失败",dangerouslyUseHTMLString:!0,type:"error"})},handleSelectionChange:function(e){var t=this;t.delData={ids:[]},t.expertIdArr=[],e.forEach((function(e,a){t.delData.ids.push(e.expertId),t.expertIdArr.push(e.expertId)}))},del:function(){var e=this,t=this;t.delData.ids.length?this.$confirm("此操作将永久删除文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,t.delLoading=!0,Object(n["C"])(t.delData).then((function(a){t.delLoading=!1,console.log(a),a.data.successful?(e.$message({showClose:!0,message:"删除成功",type:"success"}),t.currentPage=1,t.getTable(1,t.currentNum)):e.$message({showClose:!0,message:"删除失败",dangerouslyUseHTMLString:!0,type:"error"}),t.loading=!1}))})).catch((function(){e.$message({type:"warning",message:"已取消删除"})})):this.$message({showClose:!0,message:"请选择至少一条数据",type:"warning"})},submitForm:function(e){var t=this,a=this;console.log(a.tempId),a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={items:[]};console.log(a.tableLabel);var s={};a.tempId.length&&(s["expertId"]=a.tempId),Object.keys(a.tableLabel).forEach((function(e){console.log(e,a.tableLabel[e]),s[a.tableLabel[e].colDname]=a.tableLabel[e].value})),l.items.push(s),console.log("subdata",l),a.dialogFormVisible=!1,a.loading=!0,a.submitLoading=!0,Object(n["qd"])(l).then((function(e){a.submitLoading=!1,console.log(e),e.data.successful?(t.$message({showClose:!0,message:"操作成功",type:"success"}),a.tempId="","修改"==a.dialogTitle?a.getTable(a.currentPage,a.currentNum):(a.currentPage=1,a.getTable(1,a.currentNum))):t.$message({showClose:!0,message:"操作失败",dangerouslyUseHTMLString:!0,type:"error"}),a.loading=!1}))}))},showDialog:function(e){var t=this,a=this;a.dialogFormVisible=!0,null!=e?(a.dialogTitle="修改",a.tempId=e.expertId,Object(n["ub"])(e.expertId).then((function(e){if(e.data.successful){var l=e.data.resultValue.items[0];for(var s in a.tableLabel)null==l[a.tableLabel[s].colDname]?a.tableLabel[s].value="":a.tableLabel[s].value=l[a.tableLabel[s].colDname]+""}else t.$message({showClose:!0,message:"查询失败",dangerouslyUseHTMLString:!0,type:"error"})}))):(a.dialogTitle="新增",Object.keys(a.tableLabel).forEach((function(e){a.tableLabel[e].value=""})))},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.loading=!0;for(var l="",s=0,o=Object.entries(a.getTableData);s<o.length;s++){var r=Object(i["a"])(o[s],2),c=r[0],u=r[1];"pageIndex"!=c&&"pageSize"!=c&&""!=u&&(console.log(c+":"+u),l+="&"+c+"="+u)}l=l.substr(1);var d={};d.pageIndex=e,d.pageSize=t,""!=l&&(d.filter=l),Object(n["vb"])(d).then((function(e){if(console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnMap),a.getDictArr(a.tableLabel)}a.loading=!1})).catch((function(e){console.log(e)}))},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p}0==n.expertAge&&(r.expertAge=""),s.push(r)}return s},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e){var s=e[l];if(a[l]=e[l],1==s.isMandatory){var i=new Object;i.required=!0,i.message=s.dispName+"不能为空",i.trigger="blur",a[l].rule=i}else{var o=new Object;o.required=!1,a[l].rule=o}}return a}}},u=c,d=(a("71e0"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"04b5894a",null);t["default"]=m.exports},cf17:function(e,t,a){},d03a:function(e,t,a){},d2bd:function(e,t,a){"use strict";var l=a("4245"),s=a.n(l);s.a},d2d2:function(e,t,a){},d37d:function(e,t,a){"use strict";var l=a("31df"),s=a.n(l);s.a},d5cf:function(e,t,a){},d62a:function(e,t,a){},d66d:function(e,t,a){"use strict";var l=a("e5bc"),s=a.n(l);s.a},da2f:function(e,t,a){"use strict";var l=a("13f8"),s=a.n(l);s.a},da49:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"experts-confirm"},[a("el-form",{staticClass:"demo-form-inline reject-form",attrs:{model:e.form,"label-width":"10%"}},[a("el-form-item",{attrs:{label:"意见:"}},[a("el-input",{staticClass:"reject-input",attrs:{type:"textarea"},model:{value:e.auditItemParam.auditAdvice,callback:function(t){e.$set(e.auditItemParam,"auditAdvice",t)},expression:"auditItemParam.auditAdvice"}})],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{loading:e.loadingBtn2},on:{click:e.backWorkFlow}},[e._v("不参加")]),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("参加")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){return{createUserid:"",isAuto:!1,itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,loadingBtn2:!1,auditItemParam:{audited:"1",auditAdvice:"",itemId:"",itemName:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10)},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},createOnlineProcess:function(e,t){var a=this,l={processId:e,itemId:this.auditItemParam.itemId,isBatchPackage:this.auditItemParam.isBatchPackage};Object(u["tb"])(l).then((function(e){if(e.data.successful){var l=e.data.resultValue.zzUserName,s=e.data.resultValue.zjList,i=e.data.resultValue.kYList,o=e.data.resultValue.GJPerson,n={user:a.createUserid,workItemID:t.workItemID,activityDefID:"",participants:[]};l&&(n.activityDefID="HZYJ",n.participants=[],n.participants.push(l),Object(m["a"])(n).then((function(e){0==e.data.status?(n.activityDefID="WSKYBG",n.participants=[],n.participants=i,Object(m["a"])(n).then((function(e){0==e.data.status?(n.activityDefID="SCPSYJ",n.participants=[],n.participants=s,Object(m["a"])(n).then((function(e){0==e.data.status?(n.activityDefID="GJZSPSWJ",n.participants=[],n.participants=o,Object(m["a"])(n).then((function(e){if(0==e.data.status){var l={user:a.createUserid,workItemID:t.workItemID};Object(m["e"])(l).then((function(e){if(0==e.data.status){var l={processInstID:t.processInstID,userId:a.createUserid,itemId:a.auditItemParam.itemId,workItemID:t.workItemID,itemPhaseDet:"11",isBatchPackage:a.auditItemParam.isBatchPackage};Object(u["v"])(l).then((function(e){if(e.data.successful){var t={itemId:a.auditItemParam.itemId,itemPhaseDet:"11",isBatchPackage:a.auditItemParam.isBatchPackage};Object(u["Wd"])(t).then((function(e){a.loadingBtn1=!1,e.data.successful?a.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}):a.$message.error("操作失败")}))}else a.loadingBtn1=!1,a.$message.error("操作失败")}))}}))}else a.loadingBtn1=!1,a.$message.error("操作失败")}))):(a.loadingBtn1=!1,a.$message.error("操作失败"))}))):(a.loadingBtn1=!1,a.$message.error("操作失败"))}))):(a.loadingBtn1=!1,a.$message.error("操作失败"))})))}else a.loadingBtn1=!1,a.$message.error("操作失败")}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(m["e"])(t).then((function(t){if("0"==t.data.status){var a={itemId:e.auditItemParam.itemId,isBatchPackage:e.auditItemParam.isBatchPackage,processInstID:e.$route.query.processInstID,auditJoinOption:e.auditItemParam.auditAdvice,auditJoinType:1};Object(u["Ld"])(a).then((function(t){if(t.data.successful){var a=t.data.resultValue.isAllJoin,l={itemId:e.auditItemParam.itemId,isBatchPackage:e.auditItemParam.isBatchPackage},s=[];s.push(l),a?Object(u["qb"])({processId:e.$route.query.processInstID}).then((function(t){if(t.data.successful){e.createUserid=t.data.resultValue.applyUserId;var a={user:e.createUserid,processDefName:"online_review",processInstName:"",processInstDesc:"",createOption:{relativeData:{businessID:""}}};a.processInstName=e.tempItemName+"-在线评审",a.processInstDesc=e.tempItemName+"-在线评审",Object(m["d"])(a).then((function(t){if(0==t.data.status){var a={workItemID:t.data.data.workItem.workItemID,processInstID:t.data.data.processInstID},l=e.$route.query.processInstID;e.createOnlineProcess(l,a)}else e.loadingBtn1=!1,e.$message.error("操作失败")}))}else e.loadingBtn1=!1,e.$message.error("操作失败")})):(e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}),e.loadingBtn1=!1)}}))}else e.loadingBtn1=!1,e.$message.error("操作失败")}))},createProcessAgainByExpert:function(e){var t=this,a=e.userId,l={user:a,processDefName:"expert_selection",processInstName:"",processInstDesc:""};l.itemId=e.itemId,l.processInstName=this.tempItemName+"-专家确认",l.processInstDesc=this.tempItemName+"-专家确认",Object(m["d"])(l).then((function(l){if(0==l.data.status){var s=l.data.data.workItem.workItemID,i=l.data.data.processInstID,o={user:a,workItemID:s,activityDefID:"ZJQR",participants:[]};o.participants.push(e.name),Object(m["a"])(o).then((function(l){if(0==l.data.status){var s={user:a,workItemID:o.workItemID};Object(m["e"])(s).then((function(l){if(0==l.data.status){var s={processInstID:i,userId:a,itemId:e.itemId,workItemID:o.workItemID,isLeader:e.isLeader,expertId:e.expertId,itemPhaseDet:"10",isBatchPackage:t.auditItemParam.isBatchPackage,totalNum:e.totalNum};Object(u["v"])(s).then((function(e){t.loadingBtn2=!1,e.data.successful?t.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}):t.$message.error("操作失败")}))}else t.loadingBtn2=!1,t.$message.error("操作失败")}))}else t.loadingBtn2=!1,t.$message.error("操作失败")}))}else t.loadingBtn2=!1}))},backWorkFlow:function(){var e=this,t={itemId:this.auditItemParam.itemId,isBatchPackage:this.auditItemParam.isBatchPackage,processInstID:this.$route.query.processInstID,auditJoinOption:this.auditItemParam.auditAdvice,auditJoinType:0};this.loadingBtn2=!0,Object(u["Ld"])(t).then((function(t){if(t.data.successful){var a=t;if(e.isAuto){var l={user:e.$route.query.iscUserId,processInstID:e.$route.query.processInstID};Object(m["h"])(l).then((function(t){if(0==t.data.status){var l=a.data.resultValue;e.createProcessAgainByExpert(l)}else e.loadingBtn2=!1}))}else{var s={user:e.$route.query.iscUserId,currentActInstID:e.$route.query.activityInstID,destActDefID:"ZDZJ",rollBackStrategy:"path"};Object(m["b"])(s).then((function(t){e.loadingBtn2=!1,0==t.data.status?e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}}):e.$message.error("操作失败")}))}}else e.loadingBtn2=!1}))},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemId=t.itemId,a.auditItemParam.itemName=t.itemName,a.tempItemName=t.itemName;var l=[];null!=t&&l.push(t);var s=!1;1==t.isBatchPackage?(s=!0,a.auditItemParam.isBatchPackage=!0):(s=!1,a.auditItemParam.isBatchPackage=!1);var i={userId:a.$route.query.iscUserId,itemId:t.itemId,isBatchPackage:s};Object(u["vc"])(i).then((function(e){e.data.successful&&(1==e.data.resultValue?a.isAuto=!0:a.isAuto=!1)})),a.tableDataShow=a.getShowDateTable(l,a.dictMap,a.columnTypeMapDict)}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("e654"),a("3d13"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"f264fad6",null);t["default"]=g.exports},dbdf:function(e,t,a){"use strict";var l=a("f6c8"),s=a.n(l);s.a},dd76:function(e,t,a){"use strict";var l=a("af95"),s=a.n(l);s.a},ddbf:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!0},on:{changeQuery:e.changeQuery}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("开始时间")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{staticClass:"diy_date",attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.startTime},on:{change:e.selectItem},model:{value:e.param.planStartDate,callback:function(t){e.$set(e.param,"planStartDate",t)},expression:"param.planStartDate"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("结束时间")]),a("div",{staticClass:"query_select"},[a("el-date-picker",{staticClass:"diy_date",attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.endTime},on:{change:e.selectItem},model:{value:e.param.planEndDate,callback:function(t){e.$set(e.param,"planEndDate",t)},expression:"param.planEndDate"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目来源")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemSource,callback:function(t){e.$set(e.param,"itemSource",t)},expression:"param.itemSource"}},e._l(e.selectParamDict.get("itemSource"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("电压等级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.voltLevel,callback:function(t){e.$set(e.param,"voltLevel",t)},expression:"param.voltLevel"}},e._l(e.selectParamDict.get("voltLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)])]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.collect}},[e._v("汇总")])],1)]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoding,expression:"tableDataLoding"}],attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":20,"page-sizes":[10,20,30,50],layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),a("el-dialog",{attrs:{visible:e.itemShow,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.itemShow=t}}},[a("item-dialog",{attrs:{itemId:e.tempItemId}})],1)],1)},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("ade3"),r=a("2f62"),c=a("2bb5"),u=a("a960"),d=(a("7a14"),a("c2b4")),m=a("7e1e"),p=a("73fc"),h={name:"questions",data:function(){var e;return e={isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[]},Object(n["a"])(e,"isShowQuery",!1),Object(n["a"])(e,"isShowFilter",!1),Object(n["a"])(e,"dialogLoading",!1),Object(n["a"])(e,"loading",!1),Object(n["a"])(e,"delData",{ids:[]}),Object(n["a"])(e,"lableList",[{value:""}]),Object(n["a"])(e,"totalNum",0),Object(n["a"])(e,"currentPage",1),Object(n["a"])(e,"currentNum",20),Object(n["a"])(e,"year",""),Object(n["a"])(e,"dialogFormVisible",!1),Object(n["a"])(e,"form",{name:""}),Object(n["a"])(e,"options",[]),Object(n["a"])(e,"value",""),Object(n["a"])(e,"formLabelWidth","120px"),Object(n["a"])(e,"input",""),Object(n["a"])(e,"tableTest",[]),Object(n["a"])(e,"tableData",[]),Object(n["a"])(e,"tableDataShow",[]),Object(n["a"])(e,"tableLabel",{}),Object(n["a"])(e,"dictMap",new Map),Object(n["a"])(e,"selectParamDict",new Map),Object(n["a"])(e,"param",{deptCode:"",index:1,itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",auditPlanStatus:"",planStartDate:"",planEndDate:""}),Object(n["a"])(e,"itemShow",!1),Object(n["a"])(e,"itemLabel",{}),Object(n["a"])(e,"itemMap",new Map),Object(n["a"])(e,"reportFileName",""),Object(n["a"])(e,"selectPlanId",[]),Object(n["a"])(e,"columnTypeMap",new Map),Object(n["a"])(e,"tempItemId",""),Object(n["a"])(e,"tableDataLoding",!1),Object(n["a"])(e,"tableHeight",""),Object(n["a"])(e,"endTime",{disabledDate:this.disabledEnd}),Object(n["a"])(e,"startTime",{disabledDate:this.disabledStart}),e},components:{"item-dialog":c["default"],querys:p["a"],SelectTree:u["a"],ItemAddCom:d["default"]},watch:{deptCode:function(){this.param.deptCode=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},computed:Object(o["a"])({},Object(r["b"])([])),mounted:function(){this.getItemLabelSearch(),this.getTable(1,20),this.getItemLabel()},methods:{disabledEnd:function(e){if(""!=this.param.planStartDate&&void 0!=this.param.planStartDate&&null!=this.param.planStartDate)return e.getTime()<new Date(this.param.planStartDate).getTime()},disabledStart:function(e){if(""!=this.param.planEndDate&&void 0!=this.param.planEndDate&&null!=this.param.planEndDate)return e.getTime()>new Date(this.param.planEndDate).getTime()},tableLoad:function(e,t,a){var l=this,s={parentItemId:e.itemId};Object(m["nb"])(s).then((function(e){if(e.data.successful){var t=l.getShowDateTable(e.data.resultValue,l.dictMap,l.columnTypeMap);a(t)}}))},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getItemLabelSearch:function(){var e=this;Object(m["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.$forceUpdate()}}))},getTreeDeptCode:function(){var e=this;Object(m["jc"])().then((function(t){var a=t.data.resultValue;Object(m["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},changeQuery:function(e,t){e?(this.tableHeight=t,this.isShowQuery=!0,this.showQuery=!0):(this.tableHeight=t,this.isShowQuery=!1,this.showQuery=!1)},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},resetItem:function(){var e=this;e.param={deptCode:"",index:1,itemName:"",itemType:"",pageSize:20,speciality:"",voltLevel:"",feaStatus:0,ghYear:"",planStartDate:"",planEndDate:""},this.getTable(1,20)},switchFilter:function(){this.isShowFilter=!this.isShowFilter},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},collect:function(){var e=this,t=this;if(t.loading=!0,console.log(t.selectPlanId.ids),void 0==t.selectPlanId.ids||""==t.selectPlanId.ids)return t.$message({showClose:!0,message:"请选择要汇总的项目",type:"warning"}),!1;this.$confirm("是否汇总所选项目评审计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["s"])(t.selectPlanId).then((function(a){t.loading=!1,a.data.successful?(t.$message({showClose:!0,message:"汇总成功",type:"success"}),e.getTable(1,e.currentNum)):t.$message({showClose:!0,message:"汇总信息失败",type:"error"})}))})).catch((function(){}))},handleSelectionChange:function(e){var t=this;t.selectPlanId={cTotalTime:"",ids:[]},e.forEach((function(e){t.selectPlanId.ids.push(e.auditPlanId)}))},getItemLabel:function(){var e=this;Object(m["Kb"])().then((function(t){if(console.log("response",t),t.data.successful){var a=t.data.resultValue.tableLable;e.itemMap=e.getDictArr(a),e.itemLabel=e.getLabelList(a)}}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.tableDataLoding=!0;for(var l="cTotalTimeStr=0&itemPhaseDet=5&isPassed=0",s=0,o=Object.entries(a.param);s<o.length;s++){var n=Object(i["a"])(o[s],2),r=n[0],c=n[1];"pageIndex"!=r&&"pageSize"!=r&&""!=c&&null!=c&&(console.log(r+":"+c),l+="&"+r+"="+c)}var u={};u.pageIndex=e,u.pageSize=t,u.filter=l,Object(m["Sb"])(u).then((function(e){if(a.tableDataLoding=!1,console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableDataShow=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}a.loading=!1})).catch((function(e){console.log(e)}))},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1];if(console.log(m+":"+p),t.has(m))for(var h=t.get(m),f=0;f<h.length;f++){var g=h[f];g.codeValue==p&&(r[m]=g.codeName)}else if("DATE"==a.get(m)){r[m+"Rel"]=p;var b=l.formartDate(p);r[m]=b}else r[m]=p}s.push(r)}return s}}},f=h,g=(a("95b4"),a("7a79"),a("2877")),b=Object(g["a"])(f,l,s,!1,null,"d85eea90",null);t["default"]=b.exports},df6a:function(e,t,a){},e132:function(e,t,a){},e138:function(e,t,a){"use strict";var l=a("2190"),s=a.n(l);s.a},e15e:function(e,t,a){"use strict";var l=a("43c3"),s=a.n(l);s.a},e220:function(e,t,a){"use strict";var l=a("9340"),s=a.n(l);s.a},e3b4:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("iframe",{staticClass:"nesting",attrs:{id:"frm",src:e.url,frameborder:"0"}})])},s=[],i={name:"todo",data:function(){return{url:""}},created:function(){var e=sessionStorage.getItem("iscUserId");this.url="http://192.168.1.239:8100/flow-page/pmp_flow_base/flow/base/task.html?user="+e},mounted:function(){},methods:{}},o=i,n=(a("7ce3"),a("2877")),r=Object(n["a"])(o,l,s,!1,null,null,null);t["default"]=r.exports},e465:function(e,t,a){},e542:function(e,t,a){},e5b8:function(e,t,a){"use strict";var l=a("18f9"),s=a.n(l);s.a},e5bc:function(e,t,a){},e5e4:function(e,t,a){},e654:function(e,t,a){"use strict";var l=a("eda7"),s=a.n(l);s.a},e965:function(e,t,a){"use strict";var l=a("71d6"),s=a.n(l);s.a},e9b1:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"chart",staticClass:"myChart"})])},s=[],i=(a("7a14"),a("3eba"));a("94b1"),a("c037"),a("ef97"),a("2f73"),a("d28f"),a("0a6d"),a("007d"),a("627c");var o={name:"chart",props:["option"],data:function(){return{myChart:null}},watch:{option:function(e,t){console.log(e);var a=this;a.drawLine()}},mounted:function(){console.log(this.option)},methods:{drawLine:function(){console.log("drawLine");var e=this;e.myChart=i.init(e.$refs.chart),e.option&&e.myChart.setOption(e.option)}}},n=o,r=(a("67f0"),a("2877")),c=Object(r["a"])(n,l,s,!1,null,"9619e93e",null);t["a"]=c.exports},eb5a:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var l=a("bc3a"),s=a.n(l),i=a("4360");function o(e){return s()({method:"post",url:i["a"].state.app.bmUrl,data:e})}},ebe1:function(e,t,a){},eca2:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0,"min-width":"200"}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName,"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"plan-assess"},[a("el-form",{staticClass:"demo-form-inline reason-form",attrs:{model:e.form,"label-width":"10%"}},[a("el-form-item",{attrs:{label:"意见:"}},[a("el-input",{staticClass:"elinput reason",attrs:{type:"textarea",placeholder:""},model:{value:e.auditItemParam.auditAdvice,callback:function(t){e.$set(e.auditItemParam,"auditAdvice",t)},expression:"auditItemParam.auditAdvice"}})],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{on:{click:e.backWorkFlow}},[e._v("退回")]),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("同意")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){var e=this;return{itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:"",itemPhaseDet:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),l=Date.now()-864e5;return t.getTime()<=l||t.getTime()<=a}},auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-300},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10)},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(m["e"])(t).then((function(t){if("0"==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:1,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:9};1==e.tableDataShow[0].hasPackage?a.isBatchPackage=!0:a.isBatchPackage=!1,Object(u["sd"])(a).then((function(t){e.loadingBtn1=!1;var a=e.tableDataShow[0].hasPackage;if(t.data.successful){var l={itemId:e.auditItemParam.itemIds,checkType:1,checkAdvice:e.auditItemParam.auditAdvice,hasPackage:a},s=[];s.push(l),Object(u["p"])(s).then((function(t){if(t.data.successful){var a=t.data.resultValue;a.length>0&&a.forEach((function(e){var t=[],a={};a.content=e.itemName+"项目，评审计划已经下达，评审时间 "+e.startDate+" —— "+e.endDate,a.noticeUser=e.createor,t.push(a),Object(m["g"])(t).then((function(e){console.log(e)}))})),e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}})}}))}else{var i=t.data.resultHint;e.$message.error(i)}}))}else e.$message.error(t.data.message)}))},backWorkFlow:function(){var e=this,t={user:this.$route.query.iscUserId,currentActInstID:this.$route.query.activityInstID,destActDefID:"TJKYPSJH",rollBackStrategy:"path"};Object(m["b"])(t).then((function(t){if(0==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:2,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:8};Object(u["sd"])(a).then((function(t){if(t.data.successful){var a=e.tableDataShow[0].hasPackage,l={itemId:e.auditItemParam.itemIds,checkType:0,checkAdvice:e.auditItemParam.auditAdvice,hasPackage:a},s=[];s.push(l),Object(u["p"])(s).then((function(t){t.data.successful&&e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}})}))}else{var i=t.data.resultHint;e.$message.error(i)}}))}else e.$message.error(t.data.message)}))},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID,s={processInstID:l};console.log("processInstID"+a.$route.query.processInstID),Object(u["Jb"])(s).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemIds=t.itemId,a.auditItemParam.itemPhaseDet=t.itemPhaseDet;var l=[];null!=t&&l.push(t),a.tableDataShow=a.getShowDateTable(l,a.dictMap,a.columnTypeMapDict)}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("a32f"),a("e15e"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"44649dc0",null);t["default"]=g.exports},eda7:function(e,t,a){},ef00:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("div",{staticClass:"picker"},[e._v(" 选择时间 "),a("el-date-picker",{attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.changeDate},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1),a("div",{staticClass:"charttop"},[a("div",{staticClass:"charttop_chart"},[a("h3",{staticClass:"chart_title"},[e._v("评审项目统计")]),a("chart",{attrs:{option:e.option02}})],1),a("div",{staticClass:"charttop_chart"},[a("h3",{staticClass:"chart_title"},[e._v("评审方式统计")]),a("chart",{attrs:{option:e.option03}})],1),a("div",{staticClass:"charttop_chart"},[a("h3",{staticClass:"chart_title"},[e._v("评审项目分析")]),a("chart",{attrs:{option:e.option04}})],1),a("div",{staticClass:"charttop_chart"},[a("h3",{staticClass:"chart_title"},[e._v("挂接评审项目分析")]),a("chart",{attrs:{option:e.option05}})],1)]),a("div",{staticClass:"chartbot"},[a("div",{staticClass:"chartbot_chart"},[a("h3",{staticClass:"chart_title"},[e._v("评审计划管理阶段项目")]),a("chart",{attrs:{option:e.option06}})],1),a("div",{staticClass:"chartbot_chart"},[a("h3",{staticClass:"chart_title"},[e._v("评审中的项目")]),a("chart",{attrs:{option:e.option01}})],1),a("div",{staticClass:"chartbot_chart"},[a("h3",{staticClass:"chart_title"},[e._v("评审完成项目")]),a("chart",{attrs:{option:e.option07}})],1)])])])])},s=[],i=(a("4160"),a("b0c0"),a("7a14")),o=a("e9b1"),n=a("7e1e"),r=a("3eba");a("94b1"),a("007d"),a("627c");var c={name:"questions",data:function(){return{option01:{},option02:{},option04:{},option03:{},option05:{},region:"电网基建",option06:{},option07:{},dates:""}},components:{right:i["default"],chart:o["a"]},mounted:function(){var e=new Date,t=new Date;t.setMonth(e.getMonth()-1),this.dates=[t,e],this.changeDate()},methods:{changeDate:function(){this.getReviewItemAnalysis(),this.getReviewItemStatistics(),this.getReviewTypeStatistics(),this.getHangingJointReviewItemAnalysis(),this.getAuditPlanPhase(),this.getAuditPlanPhaseEd(),this.getAuditPlanPhaseIng()},getReviewItemAnalysis:function(){var e=this;Object(n["bd"])({planStartDate:e.dates[0],planEndDate:e.dates[1]}).then((function(t){if(t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=0;i<a.length;i++)l.push(a[i].name),s.push({name:a[i].name,value:a[i].value});e.option04={color:["#f4bd2c","#2cddd4"],title:{text:"评审项目分析",show:!1,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:10,data:l},series:[{name:"",type:"pie",radius:["20%","30%"],center:["50%","50%"],data:s.sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#a1a1a1"},labelLine:{lineStyle:{color:"#d4d4d4"},smooth:.2,length:10,length2:20},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}}))},getReviewItemStatistics:function(){var e=this;Object(n["cd"])({planStartDate:e.dates[0],planEndDate:e.dates[1]}).then((function(t){if(t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=0;i<a.length;i++)l.push(a[i].name),s.push({name:a[i].name,value:a[i].value});e.option02={color:["#73a0fa","#2cddd4","#f7c739"],title:{text:"评审项目统计",show:!1,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:10,data:l},series:[{name:"",type:"pie",radius:["20%","30%"],center:["50%","50%"],data:s.sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#a1a1a1"},labelLine:{lineStyle:{color:"#d4d4d4"},smooth:.2,length:10,length2:20},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}}))},getReviewTypeStatistics:function(){var e=this;Object(n["dd"])({planStartDate:e.dates[0],planEndDate:e.dates[1]}).then((function(t){if(t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=0;i<a.length;i++)l.push(a[i].name),s.push({name:a[i].name,value:a[i].value});e.option03={color:["#ff2f5b","#2cddd4"],title:{text:"评审方式统计",show:!1,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:10,data:l},series:[{name:"",type:"pie",radius:["20%","30%"],center:["50%","50%"],data:s.sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#a1a1a1"},labelLine:{lineStyle:{color:"#d4d4d4"},smooth:.2,length:10,length2:20},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}}))},getHangingJointReviewItemAnalysis:function(){var e=this,t=this;Object(n["sc"])({planStartDate:t.dates[0],planEndDate:t.dates[1]}).then((function(t){if(t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=0;i<a.length;i++)l.push(a[i].name),s.push({name:a[i].name,value:a[i].value});e.option05={color:["#fa9b6d","#2cddd4"],title:{text:"挂接评审项目分析",show:!1,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:10,data:l},series:[{name:"",type:"pie",radius:["20%","30%"],center:["50%","50%"],data:s.sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{color:"#a1a1a1"},labelLine:{lineStyle:{color:"#d4d4d4"},smooth:.2,length:10,length2:20},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}}}))},getAuditPlanPhase:function(){var e=this;Object(n["h"])({planStartDate:e.dates[0],planEndDate:e.dates[1]}).then((function(t){if(t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=[],o=0;o<a.length;o++)l.push(a[o].name),s.push(a[o].value);s.forEach((function(e){i.push(Math.max(s))})),e.option06={color:["#3ac3c7"],title:{text:"评审计划管理阶段项目",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{},xAxis:{axisLabel:{show:!0,interval:0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:i,animation:!1},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5ed9c3"},{offset:1,color:"#33bfc8"}])}}}]}}}))},getAuditPlanPhaseEd:function(){var e=this;Object(n["i"])({planStartDate:e.dates[0],planEndDate:e.dates[1]}).then((function(t){if(t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=[],o=0;o<a.length;o++)l.push(a[o].name),s.push(a[o].value);s.forEach((function(e){i.push(Math.max(s))})),e.option07={color:["#3ac3c7"],title:{text:"评审完成项目",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{},xAxis:{axisLabel:{show:!0,interval:0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:i,animation:!1},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5ed9c3"},{offset:1,color:"#33bfc8"}])}}}]}}}))},getAuditPlanPhaseIng:function(){var e=this;Object(n["j"])({planStartDate:e.dates[0],planEndDate:e.dates[1]}).then((function(t){if(console.log(t.data),t.data.successful){for(var a=t.data.resultValue,l=[],s=[],i=[],o=0;o<a.length;o++)l.push(a[o].name),s.push(a[o].value);s.forEach((function(e){i.push(Math.max(s))})),e.option01={color:["#3ac3c7"],title:{text:"评审中的项目",show:!1,textStyle:{fontFamily:"Arial, Verdana, sans...",fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{},xAxis:{axisLabel:{show:!0,interval:0,rotate:40,textStyle:{color:"#747474"}},data:l},yAxis:{name:"（个）",splitLine:{lineStyle:{type:"dashed"}},axisLine:{show:!1},axisLabel:{textStyle:{color:"#999"}}},series:[{type:"bar",itemStyle:{color:"rgba(0,0,0,0.05)"},barGap:"-100%",barCategoryGap:"40%",data:i,animation:!1},{name:"",type:"bar",data:s,itemStyle:{normal:{color:new r.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#5ed9c3"},{offset:1,color:"#33bfc8"}])}}}]}}}))}}},u=c,d=(a("4d49"),a("2877")),m=Object(d["a"])(u,l,s,!1,null,"138bb8a5",null);t["default"]=m.exports},f1cd:function(e,t,a){"use strict";var l=a("b9d0"),s=a.n(l);s.a},f23c:function(e,t,a){},f36f:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"g",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return m})),a.d(t,"h",(function(){return p}));a("d3b7");var l=a("bc3a"),s=a.n(l),i=a("4360");function o(e){var t={user:e.user,processDefName:e.processDefName,processInstName:e.processInstName,processInstDesc:e.processInstDesc,createOption:{relativeData:{businessID:""}},orgId:e.orgIds,orgRoleIds:e.roleIds,activityDefID:e.activityDefID,sumbitOption:{checkPermission:"false"}};return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/FlowCenter/createAndReassignAndfinishWorkItemWithOption",data:t})}function n(e){return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/BPMWIManager/finishWorkItem",data:e})}function r(e){return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/BPMBAManager/backActivity",data:e})}function c(e){return s()({method:"post",url:i["a"].state.app.workflowurl+"notice/batchAdd",data:e})}function u(e){return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/BPMWIManager/finishWorkItemWithOption",data:e})}function d(e){var t={user:e.user,processDefName:e.processDefName,processInstName:e.processInstName,processInstDesc:e.processInstDesc,createOption:{relativeData:{businessID:"123"}}};return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/FlowCenter/createWithOptionAndReturnWorkItem",data:t})}function m(e){return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/FlowCenter/appointActivityParticipantWithIscLoginName",data:e})}function p(e){return s()({method:"post",url:i["a"].state.app.workflowurl+"bpm/BPMPIManager/terminateProcessInstance",data:e})}},f516:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-tabs",{staticClass:"special",attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.specialList,(function(t){return a("el-tab-pane",{attrs:{label:t.codeName,name:t.codeValue}},[1==t.codeValue?a("el-tabs",{staticClass:"special",attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.infrastructureName,callback:function(t){e.infrastructureName=t},expression:"infrastructureName"}},e._l(e.infrastructureList,(function(e){return a("el-tab-pane",{attrs:{label:e.codeName,name:e.codeValue}})})),1):e._e()],1)})),1),a("el-table",{staticClass:"storage-table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"span-method":e.idSpanMethod,border:"","header-cell-style":{background:"#359691",color:"#fff"},height:"60vh"}},[a("el-table-column",{attrs:{prop:"labelCode",label:"一级标签权重",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:e.changeinp},model:{value:t.row.labelCode,callback:function(a){e.$set(t.row,"labelCode",a)},expression:"scope.row.labelCode"}})]}}])}),a("el-table-column",{attrs:{prop:"labelName",label:"指标分类"}}),a("el-table-column",{attrs:{prop:"labelCode1",label:"二级标签权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{change:e.changeinp},model:{value:t.row.labelCode1,callback:function(a){e.$set(t.row,"labelCode1",a)},expression:"scope.row.labelCode1"}})]}}])}),a("el-table-column",{attrs:{prop:"labelName1",label:"指标名称"}}),a("el-table-column",{attrs:{prop:"labelCode2",label:"分数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{on:{input:function(a){return e.changeNumber(t.row.labelCode2,t.row)}},model:{value:t.row.labelCode2,callback:function(a){e.$set(t.row,"labelCode2",a)},expression:"scope.row.labelCode2"}})]}}])}),a("el-table-column",{attrs:{prop:"labelName2",label:"属性"}})],1),a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.SubmissionTable}},[e._v("提交")]),a("el-button",[a("router-link",{attrs:{to:"/storageOrder"}},[e._v("取 消")])],1)],1)],1)])])},s=[],i=(a("4160"),a("b0c0"),a("4ec9"),a("b680"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("5530")),o=a("2f62"),n=a("7e1e"),r={name:"storageManagement",data:function(){return{infrastructureName:"",infrastructureList:[],activeName:"",isWeight1:!1,isWeight2:!1,specialList:[],spanArr:[],spanArrChild:[],permissionData:[{deviceId:"首页",taxerName:"",taxerId:"",rowspan:[1,1]},{deviceId:"管理功能",taxerName:"预开审核",taxerId:"预开审核管理",rowspan:[6,1]},{deviceId:"管理功能",taxerName:"发票查询",taxerId:"已开发票查询",rowspan:[0,3]},{deviceId:"管理功能",taxerName:"发票查询",taxerId:"未上传发票查询",rowspan:[0,0]},{deviceId:"管理功能",taxerName:"发票查询",taxerId:"验签失败发票查询",rowspan:[0,0]},{deviceId:"管理功能",taxerName:"商户综合管理",taxerId:"税控设备列表",rowspan:[0,2]},{deviceId:"管理功能",taxerName:"商户综合管理",taxerId:"数据抄报",rowspan:[0,0]}],tableData:[{id:"12987122",parentWeight:"1",childWeight:"3",name:"王小虎",amount1:"234",amount2:"3.2",amount3:10},{id:"12987122",parentWeight:"1",childWeight:"3",name:"王小虎",amount1:"165",amount2:"4.43",amount3:12},{id:"12987124",parentWeight:"2",childWeight:"1",name:"王小虎",amount1:"324",amount2:"1.9",amount3:9},{id:"12987125",parentWeight:"2",childWeight:"2",name:"王小虎",amount1:"621",amount2:"2.2",amount3:17},{id:"12987126",parentWeight:"2",childWeight:"2",name:"王小虎",amount1:"539",amount2:"4.1",amount3:15}],tabMap:new Map,tabMap2:new Map}},computed:Object(i["a"])({},Object(o["b"])(["roles","token"])),components:{},mounted:function(){this.getSpanArr(this.tableData),this.getSpecList()},created:function(){},methods:{changeNumber:function(e,t){console.log(e),(e<0||e>100)&&(t.labelCode2=0,this.$message({showClose:!0,message:"请输入0～100的数值",type:"warning"}))},accSub:function(e,t){var a,l,s,i;try{a=e.toString().split(".")[1].length}catch(o){a=0}try{l=t.toString().split(".")[1].length}catch(o){l=0}return s=Math.pow(10,Math.max(a,l)),i=a>=l?a:l,((e*s+t*s)/s).toFixed(i)},SubmissionTable:function(){for(var e=this,t=0;t<e.tableData.length;t++)0!=t&&(e.tableData[t].lableId===e.tableData[t-1].lableId&&(e.tableData[t].labelCode=e.tableData[t-1].labelCode),e.tableData[t].lableId1===e.tableData[t-1].lableId1&&(e.tableData[t].labelCode1=e.tableData[t-1].labelCode1));e.getTabMap(e.tableData);var a=0;e.tabMap.forEach((function(t,l){t=parseFloat(t),console.log(t),a=e.accSub(a,t)})),e.isWeight1=1==a;try{e.tabMap2.forEach((function(t,a){console.log(t);var l=0;if(t.forEach((function(t,a){t=parseFloat(t),l=e.accSub(l,t)})),console.log("tempAdd2",l),1!=l)throw e.isWeight2=!1,Error();e.isWeight2=!0}))}catch(l){}console.log("isWeight1",e.isWeight1,"isWeight2",e.isWeight2),e.isWeight1&&e.isWeight2?(Object(n["od"])(e.tableData).then((function(t){console.log(t),t.data.successful&&e.$message({showClose:!0,message:"保存成功",type:"success"})})),e.$router.push({path:"/storageManagement"})):e.isWeight1?e.isWeight2||e.$message({showClose:!0,message:"二级指标权重之和不为1,请确认修改！",type:"warning"}):e.$message({showClose:!0,message:"一级指标权重之和不为1,请确认修改！",type:"warning"})},changeinp:function(){console.log(this.tableData)},handleClick:function(e,t){console.log(e,t),"01"!=e.name?this.getStandData(e.name):this.getStandData(this.infrastructureName)},getStandData:function(e){var t=this;Object(n["ec"])({specId:e}).then((function(e){e.data.successful&&(console.log(),t.getSpanArr(e.data.resultValue),t.tableData=e.data.resultValue)}))},getSpecList:function(){var e=this;Object(n["Ed"])().then((function(t){console.log("response",t),t.data.successful&&(e.specialList=t.data.resultValue,console.log("specialList",e.specialList),e.activeName=e.specialList[0].codeValue,e.infrastructureList=e.specialList[0].codeList,e.infrastructureName=e.infrastructureList[0].codeValue,e.getStandData(e.infrastructureName))}))},idSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0==a||1==a){var l=this.spanArrChild[t],s=l>0?1:0;return{rowspan:l,colspan:s}}if(2==a||3==a){var i=this.spanArr[t],o=i>0?1:0;return{rowspan:i,colspan:o}}},getSpanArr:function(e){this.spanArr=[],this.spanArrChild=[];for(var t=0;t<e.length;t++)0===t?(this.spanArr.push(1),this.spanArrChild.push(1),this.pos=0,this.posChild=0):(e[t].lableId===e[t-1].lableId?(this.spanArrChild[this.posChild]+=1,this.spanArrChild.push(0)):(this.spanArrChild.push(1),this.posChild=t),e[t].lableId1===e[t-1].lableId1?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=t));console.log("spanArrChild",this.spanArrChild)},getTabMap:function(e){var t=new Map,a=new Map,l=this;console.log(e);for(var s=0;s<e.length;s++){var i=e[s];if(t.has(i.lableId)||t.set(i.lableId,i.labelCode),a.has(i.lableId)){var o=a.get(i.lableId);o.has(i.lableId1)||o.set(i.lableId1,i.labelCode1)}else{var n=new Map;n.set(i.lableId1,i.labelCode1),a.set(i.lableId,n)}}l.tabMap=t,l.tabMap2=a,console.log(l.tabMap,l.tabMap2)}}},c=r,u=(a("0235"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,"e2c4a5d0",null);t["default"]=d.exports},f564:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main addpage",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("span",{staticClass:"color_tip"},[e._v("项目详情")])]),a("div",{staticClass:"info_form",staticStyle:{height:"calc(100vh - 150px)",overflow:"auto",background:"#dff1f1"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],ref:"saveForm",staticStyle:{overflow:"auto","padding-top":"15px"},attrs:{model:e.tableLabel,"label-position":"right",inline:!0}},e._l(e.tableLabel,(function(t,l){return a("el-form-item",{key:t.colDname,attrs:{label:t.dispName,"label-width":e.formLabelWidth,prop:l+".value",rules:t.rule}},["DATE"==t.dispType?a("el-date-picker",{staticClass:"diy_long",attrs:{type:t.colLimit,"value-format":t.isDispDetail,placeholder:"选择日期",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"dropdown"==t.dispType&&"speciality"!=t.colDname&&"itemClass1"!=t.colDname&&"itemClass2"!=t.colDname&&"itemClass3"!=t.colDname&&"fragmentaryType"!=t.colDname?a("el-select",{staticClass:"diy_long",attrs:{disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"dropdown"==t.dispType&&"fragmentaryType"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:"请选择零星购置专项类型",clearable:"",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.LGTypeArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass1"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:""},on:{change:function(a){return e.changeItemClass2(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr1,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass2"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:""},on:{change:function(a){return e.changeItemClass3(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr2,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"dropdown"==t.dispType&&"itemClass3"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.itemClassArr3,(function(e){return a("el-option",{key:e.typeCode,attrs:{label:e.typeName,value:e.typeCode}})})),1):e._e(),"deptDropdown"==t.dispType?a("SelectTree",{attrs:{disabled:!0,size:"large",props:e.props,options:e.deptArr,value:e.valueId,clearable:e.isClearable,accordion:e.isAccordion},on:{getValue:function(t){return e.getValue1(t)}}}):e._e(),"cascadeDropdown"==t.dispType&&"gdAssetType"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:""},on:{change:function(a){return e.getCascadeLabel2(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.cascadeLabel,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType&&"assetType2"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:""},on:{change:function(a){return e.getCascadeLabel3(t.value,!1)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.cascadeLabel2,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"cascadeDropdown"==t.dispType&&"assetType3"==t.colDname?a("el-select",{staticClass:"diy_long",staticStyle:{width:"300px"},attrs:{placeholder:t.dispName,clearable:"",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.cascadeLabel3,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e(),"radio"==t.dispType?a("el-radio-group",{staticClass:"diy_long",attrs:{disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}},e._l(e.dictMap.get(t.colDname),(function(t){return a("el-radio",{key:t.codeValue,attrs:{label:t.codeValue}},[e._v(" "+e._s(t.codeName)+" ")])})),1):e._e(),"text"==t.dispType?a("el-input",{staticClass:"diy_long",attrs:{type:"textarea",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"number"==t.dispType?a("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),"integer"==t.dispType?a("el-input-number",{staticStyle:{width:"300px"},attrs:{min:1,precision:0,disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e(),""==t.dispType||null==t.dispType||"string"==t.dispType?a("el-input",{staticClass:"diy_long",attrs:{autocomplete:"off",disabled:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}}):e._e()],1)})),1),a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("报告列表")])]),a("el-form",[""!=e.reportFileName?a("el-form-item",{attrs:{label:"可研报告","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjCmFeaPrep/downloadReport?itemId="+e.feaReportId+"&token="+e.token}},[e._v(e._s(e.reportFileName))])]):e._e(),e.reportFileList.length>0?a("el-form-item",{attrs:{label:"可研报告附件","label-width":e.formLabelWidth}},e._l(e.reportFileList,(function(t,l){return a("a",{key:l,staticStyle:{color:"#409EFF","margin-right":"10px",display:"inline-block"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+t.fileId+"&token="+e.token}},[e._v(e._s(t.fileName))])})),0):e._e(),""!=e.feaFileName?a("el-form-item",{attrs:{label:"可研评审文件","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+e.feaFileId+"&token="+e.token}},[e._v(e._s(e.feaFileName)+" ")])]):e._e(),""!=e.approvalFileName?a("el-form-item",{attrs:{label:"批复文件","label-width":e.formLabelWidth}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/pmpFileUpload/downloadFile?fileId="+e.approvalFileId+"&token="+e.token}},[e._v(e._s(e.approvalFileName))])]):e._e()],1),e.showChildren?a("el-divider",[a("span",{staticStyle:{"font-family":"'微软雅黑'","font-weight":"bold"}},[e._v("子项目列表")])]):e._e(),e.showChildren?a("el-table",{staticStyle:{width:"100%",heigth:"auto"},attrs:{data:e.childrenShowData,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.childrenLable,(function(t,l){return"itemName"!=t.colDname&&1==t.showType&&"itemCont"!=t.colDname&&"questionCode"!=t.colDname?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#333"}},[e._v(e._s(t.row.itemName))])]}}],null,!1,615918490)}):"itemCont"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.itemCont?[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.itemCont))]),a("p",[e._v(e._s(e.formatStr(t.row.itemCont)))])])]:void 0}}],null,!0)}):"questionCode"==t.colDname?a("el-table-column",{attrs:{label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.questionCode?[t.row.questionCode.length<20?a("p",[e._v(" "+e._s(t.row.questionCode)+" ")]):a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.questionCode))]),a("p",[e._v(e._s(e.formatStr(t.row.questionCode)))])])]:void 0}}],null,!0)}):e._e()}))],2):e._e()],1),a("div",{staticClass:"save_btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.cancle}},[e._v("返回")])],1)],1)])])},s=[],i=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=a("7e1e"),u={data:function(){return{deptName:"",deptArr:[],deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},itemClassArr:[],itemClassArr1:[],itemClassArr2:[],itemClassArr3:[],itemClassShow3:!1,itemClassShow2:!1,itemClassShow1:!1,token:"",finalFileData:{},fileList3:[],itemForm:{},itemInfo:{},newItemName:!1,specClass:"",specClassName:"",tableData:[],tableLabel:{},dictMap:new Map,tempId:"",columnMap:new Map,title:"",totalLableArr:[],dialogLoading:!1,formLabelWidth:"120px",parentItemId:null,childTableData:[],childrenShowData:[],childrenLable:{},childrenDictMap:new Map,childrenColumnMap:new Map,showChildren:!1,reportFileName:"",feaReportId:"",feaFileName:"",feaFileId:"",approvalFileName:"",approvalFileId:"",LGTypeArr:[],cascadeLabel:[],cascadeLabel2:[],cascadeLabel3:[],reportFileList:[]}},created:function(){this.tableHeight=window.innerHeight-320+"px"},mounted:function(){var e=this;window.onresize=function(){return function(){e.tableHeight=window.innerHeight-320+"px"}()},this.token=sessionStorage.getItem("token"),this.tempItemId=this.$route.query.itemId,this.oldPath=this.$route.query.oldPath,this.getLabel(this.tempItemId),this.getLgTypeArr()},components:{SelectTree:r["a"]},computed:Object(o["a"])({},Object(n["c"])({addItemParams:function(e){return e.itemadd.addItemParams}})),methods:{getCascadeLabel:function(e,t){var a=this,l=new FormData;l.append("parentId",e),Object(c["kb"])({parentId:e}).then((function(e){if(e.data.successful&&(console.log(e),a.cascadeLabel=e.data.resultValue,null!=a.tempItemId)){var t=a.getValue("assetType2"),l=a.getValue("gdAssetType");a.getCascadeLabel2(l,!0),a.getCascadeLabel3(t,!0)}}))},getCascadeLabel2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("assetType2"),a.clearValue("assetType3")),a.cascadeLabel2=[],a.cascadeLabel3=[];for(var l=0;l<a.cascadeLabel.length;l++){var s=a.cascadeLabel[l];if(s.codeValue==e){a.cascadeLabel2=s.childList;break}}},getCascadeLabel3:function(e,t){var a=this;a.cascadeLabel3=[],"undefined"!=typeof t&&0!=t||a.clearValue("assetType3");for(var l=0;l<a.cascadeLabel2.length;l++){var s=a.cascadeLabel2[l];s.codeValue==e&&(a.cascadeLabel3=s.childList)}},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},getLgTypeArr:function(){var e=this;Object(c["Cb"])().then((function(t){t.data.successful&&(e.LGTypeArr=t.data.resultValue)}))},clearValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e){l.value="";break}}},getValue:function(e){var t=this;for(var a in t.tableLabel){var l=t.tableLabel[a];if(l.colDname==e)return l.value}},setValue:function(e,t){var a=this;for(var l in a.tableLabel){var s=a.tableLabel[l];s.colDname==e&&(s.value=t)}},changeItemClass1:function(e){var t=this,a={speciality:e};Object(c["ob"])(a).then((function(e){if(e.data.successful)if(t.itemClassArr=e.data.resultValue[0].idLevel2,t.itemClassArr1=e.data.resultValue[0].idLevel2,0==t.itemClassArr1.length)t.itemClassShow1=!0;else if(t.itemClassShow1=!1,null!=t.tempItemId){var a=t.getValue("itemClass1"),l=t.getValue("itemClass2");t.changeItemClass2(a,!0),t.changeItemClass3(l,!0)}}))},changeItemClass2:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||(a.clearValue("itemClass2"),a.clearValue("itemClass3"));for(var l=0;l<a.itemClassArr.length;l++){var s=a.itemClassArr[l];if(s.typeCode==e){a.itemClassArr2=s.idLevel3,0==a.itemClassArr2.length?(a.itemClassShow2=!0,a.itemClassShow3=!0):(a.itemClassShow2=!1,a.itemClassShow3=!1);break}}},changeItemClass3:function(e,t){var a=this;"undefined"!=typeof t&&0!=t||a.clearValue("itemClass3");for(var l=0;l<a.itemClassArr.length;l++)for(var s=a.itemClassArr[l],i=s.idLevel3,o=0;o<i.length;o++){var n=i[o];n.typeCode==e&&(a.itemClassArr3=n.idLevel4,0==a.itemClassArr3.length?a.itemClassShow3=!0:a.itemClassShow3=!1)}},formatStr:function(e){return e.length<10?e:e.substring(0,10)+"..."},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},cancle:function(){var e=this;this.$router.push({path:e.oldPath})},getKYInfo:function(e){var t=this;Object(c["xd"])({itemId:e}).then((function(e){console.log("response",e),e.data.successful&&(t.reportFileList=e.data.resultValue.itemFileList)})).catch((function(e){console.log(e)}))},getLabel:function(e){var t=this,a=this;a.dialogLoading=!0,Object(c["Hb"])(e).then((function(l){if(a.dialogLoading=!1,l.data.successful){var s=l.data.resultValue.tableLable,i=l.data.resultValue.tableData;for(var o in a.tableLabel=a.getLabelList(s),a.dictMap=a.getDictArr(s),a.tableLabel)null==i[a.tableLabel[o].colDname]?a.tableLabel[o].value="":"DATE"==a.tableLabel[o].dispType?a.tableLabel[o].value=a.formartDate(i[a.tableLabel[o].colDname]):a.tableLabel[o].value=i[a.tableLabel[o].colDname]+"";a.reportFileName=i.feaReportName,a.feaReportId=e,"undefined"!=typeof i.apprFileName&&(a.approvalFileName=i.apprFileName,a.approvalFileId=i.apprFileId),"undefined"!=typeof i.auditFileName&&(a.feaFileName=i.auditFileName,a.feaFileId=i.auditFileId);var n=i.speciality;a.changeItemClass1(n);var r=l.data.resultValue.tableDataList;t.childrenLable=l.data.resultValue.tableLableList,"undefined"==typeof r||0==r.length?a.showChildren=!1:(a.showChildren=!0,a.childrenDictMap=a.getDictArr(a.childrenLable),a.childrenColumnMap=a.getColumnTypeArr(a.childrenLable),a.childrenShowData=a.getShowDateTable(r,a.childrenDictMap,a.childrenColumnMap)),a.getTreeDeptCode(),a.getKYInfo(e)}else t.$message.error("查询项目信息失败")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e){var s=e[l];if(a[l]=e[l],1==s.isMandatory){var i=new Object;i.required=!0,i.message=s.dispName+"不能为空",i.trigger="blur",a[l].rule=i}else{var o=new Object;o.required=!1,a[l].rule=o}}return a},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"DATE"==a.get(m)?r[m]=l.formartDate(p):r[m]=p}s.push(r)}return s},uploadSuccess:function(e){var t=this;e.successful?t.$message({showClose:!0,message:"上传正式评审文件成功",type:"success"}):t.$message({showClose:!0,message:"提交评审上传正式评审文件失败",dangerouslyUseHTMLString:!0,type:"error"})}}},d=u,m=(a("3b06"),a("f1cd"),a("2877")),p=Object(m["a"])(d,l,s,!1,null,"17c89092",null);t["default"]=p.exports},f5d1:function(e,t,a){"use strict";var l=a("c479"),s=a.n(l);s.a},f6c8:function(e,t,a){},f75c:function(e,t,a){"use strict";var l=a("c2f1"),s=a.n(l);s.a},faaa:function(e,t,a){"use strict";var l=a("b25b"),s=a.n(l);s.a},fc4f:function(e,t,a){},fc6b:function(e,t,a){},fc89:function(e,t,a){},fe39:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("div",{staticClass:"review-comments"},[a("h3",{staticClass:"dialog_tit"},[e._v("评审意见")]),a("el-radio-group",{model:{value:e.expertAdvice.agreeType,callback:function(t){e.$set(e.expertAdvice,"agreeType",t)},expression:"expertAdvice.agreeType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("通过")]),a("el-radio",{attrs:{label:"0"}},[e._v("不通过")])],1),a("el-input",{staticClass:"textarea",attrs:{type:"textarea"},model:{value:e.expertAdvice.auditOption,callback:function(t){e.$set(e.expertAdvice,"auditOption",t)},expression:"expertAdvice.auditOption"}}),a("h3",{staticClass:"dialog_tit"},[e._v("评审意见模版 "),a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=9&codeValue="+e.itemSpeciality+"&token="+e.token}},[e._v("下载评审意见模版")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",[a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStFeaAudit/uploadFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadAdviceSuccess,multiple:!1,"show-file-list":!0,accpect:".doc,.docx",limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("确认")])],1)])])])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],i=(a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("3835")),o=a("5530"),n=a("2f62"),r=a("a960"),c=(a("2bb5"),a("c2b4")),u=a("7e1e"),d=a("73fc"),m=a("f36f"),p={name:"questions",data:function(){return{itemSpeciality:"",isAuto:!1,itemId:"",showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,loadingBtn2:!1,expertAdvice:{auditFileId:"",itemId:"",agreeType:"1",auditOption:"",isBatchPackage:!1},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",userSpecialityArr:[],token:"",userId:""}},components:{querys:d["a"],SelectTree:r["a"],ItemAddCom:c["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10),this.userId=this.$route.query.iscUserId,this.token=sessionStorage.getItem("token")},computed:Object(o["a"])({},Object(n["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(u["jc"])().then((function(t){var a=t.data.resultValue;Object(u["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(m["e"])(t).then((function(t){"0"==t.data.status?Object(u["M"])(e.expertAdvice).then((function(t){if(e.loadingBtn1=!1,t.data.successful)e.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(){parent.GetChildValue("true")}});else{var a=t.data.resultHint;e.$message.error(a)}})):(e.loadingBtn1=!1,e.$message.error(t.data.message))}))},uploadAdviceSuccess:function(e){var t=this;if(e.successful)t.expertAdvice.auditFileId=e.resultValue.auditFileId,this.$message({showClose:!0,message:"上传成功",type:"success"});else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},getSpecialityIds:function(){var e=this;Object(u["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(u["Xc"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var l=a.$route.query.processInstID;Object(u["Jb"])({processInstID:l}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.expertAdvice.itemId=t.itemId,1==t.isBatchPackage?a.expertAdvice.isBatchPackage=!0:a.expertAdvice.isBatchPackage=!1;var l=[];null!=t&&l.push(t),a.tableDataShow=a.getShowDateTable(l,a.dictMap,a.columnTypeMapDict)}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getShowDateTable:function(e,t,a){for(var l=this,s=[],o=0;o<e.length;o++){for(var n=e[o],r=new Object,c=0,u=Object.entries(n);c<u.length;c++){var d=Object(i["a"])(u[c],2),m=d[0],p=d[1],h=m.toLowerCase();if(t.has(m))for(var f=t.get(m),g=0;g<f.length;g++){var b=f[g];b.codeValue==p&&(r[m]=b.codeName)}else if(t.has(h))for(var v=t.get(m.toLowerCase),w=0;w<v.length;w++){var y=v[w];y.codeValue==p&&(r[m]=y.codeName)}else"date"==a.get(m)||"month"==a.get(m)||"year"==a.get(m)?null!=p&&""!=p&&(r[m]=l.formartDate(p,a.get(m))):r[m]=p;"itemClass"==m&&(r["itemClassT"]=p),"conDept"==m&&(r["conDept"]=p),"itemLevel"==m&&(r["itemLevelT"]=p),"specDetailClass"==m&&(r["specDetailClassT"]=p),"specClass"==m&&(r["specClassT"]=p)}if("undefined"!=typeof n.children&&null!=n.children&&n.children.length>0){var D=l.getShowDateTable(n.children,t,a);r.children=D}s.push(r)}return s}}},h=p,f=(a("a1f0"),a("820c"),a("2877")),g=Object(f["a"])(h,l,s,!1,null,"413e5d98",null);t["default"]=g.exports},ffde:function(e,t,a){"use strict";var l=a("0e47"),s=a.n(l);s.a}});
//# sourceMappingURL=app.8aa0140b.js.map