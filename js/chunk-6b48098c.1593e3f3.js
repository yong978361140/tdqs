(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b48098c"],{"68bb":function(e,t,a){},"81b6":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container"},[a("querys",{attrs:{showSwitch:!1}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},on:{change:function(t){return e.selectItem()}},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:function(t){return e.getValue(t)}}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("专业类别")]),a("div",{staticClass:"query_select"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:function(t){return e.selectItem()}},model:{value:e.param.speciality,callback:function(t){e.$set(e.param,"speciality",t)},expression:"param.speciality"}},e._l(e.selectParamDict.get("speciality"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("批次名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{type:"text",clearable:"",size:"small",placeholder:"请输入"},on:{change:function(t){return e.selectItem()}},model:{value:e.param.batchName,callback:function(t){e.$set(e.param,"batchName",t)},expression:"param.batchName"}})],1)])])]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoding,expression:"tableDataLoding"}],attrs:{data:e.tableShowData,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column",height:e.tableHeight,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):3==t.showType?a("el-table-column",{attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"220","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isBatchPackage?a("span",[e._v(e._s(t.row.itemName))]):a("span",{staticClass:"blue",on:{click:function(a){return e.showItemInfo(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)]),a("el-dialog",{staticClass:"diy_dialog",attrs:{visible:e.showHasSelectedExpert,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showHasSelectedExpert=t}}},[a("el-table",{staticClass:"dialog_table",attrs:{data:e.hasSelectedExpertInfoShow,"max-height":"480px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{label:"专家姓名",prop:"expertName"}}),a("el-table-column",{attrs:{label:"专家性别",prop:"expertSex"}}),a("el-table-column",{attrs:{label:"专业",prop:"professional"}}),a("el-table-column",{attrs:{label:"评审职位",prop:"isLeader"}}),a("el-table-column",{attrs:{label:"是否参加",prop:"isJoin"}}),a("el-table-column",{attrs:{label:"参加意见",prop:"auditJoinOpinion"}}),a("el-table-column",{attrs:{label:"参加意见",prop:"auditJoinOpinion"}}),a("el-table-column",{attrs:{label:"审核意见",prop:"isAudit"}}),a("el-table-column",{attrs:{label:"审核意见内容",prop:"auditAdvice","min-width":"150"}}),a("el-table-column",{attrs:{label:"汇总意见",prop:"isPassed"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showHasSelectedExpert=!1}}},[e._v("关 闭")])],1)],1)],1)])])},s=[],r=(a("4160"),a("4ec9"),a("4fad"),a("d3b7"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),i=(a("2f62"),a("2bb5"),a("a960")),o=a("7e1e"),n=a("73fc"),c=a("c2b4"),u={name:"questions",data:function(){return{showHasSelectedExpert:!1,hasSelectedExpertInfoShow:[],tableDataLoding:!1,colTimeList:[],isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,createOrg:"",param:{pageIndex:1,pageSize:20,itemName:"",speciality:"",createOrg:"",itemPhaseDet:"",batchName:"",joinStatus:""},tableHeight:"",totalNum:0,currentPage:1,currentNum:20,tableData:[],tableLabel:[],tableShowData:[],dictMap:new Map,selectParamDict:new Map,columnTypeMap:new Map,tempItemId:"",token:"",valueId:"",deptArr:[],statusList:[{id:"16",name:"全部参加"},{id:"15",name:"部分参加"},{id:"14",name:"确认中"},{id:"4",name:"未选择"}]}},components:{querys:n["a"],SelectTree:i["a"],ItemAddCom:c["default"]},created:function(){this.tableHeight=window.innerHeight-220},watch:{createOrg:function(){this.param.createOrg=this.createOrg,this.currentPage=1,this.getTable(1,this.currentNum)}},mounted:function(){this.getItemLabelSearch(),this.getTable(1,20),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},methods:{getValue:function(e){this.createOrg=e},tableLoad:function(e,t,a){var l=this;if(console.log(e.batchGroupId),""!=e.batchGroupId&&void 0!=e.batchGroupId){var s={batchGroupId:e.batchGroupId};Object(o["cb"])(s).then((function(e){if(e.data.successful){var t=e.data.resultValue,s=l.getShowDateTable(t,l.dictMap,l.columnTypeMap);s.forEach((function(e){e.isEdit=!1})),a(s)}}))}else if(e.children&&0!=e.children.length){console.log(e.children);var r=this.getShowDateTable(e.children,this.dictMap,this.columnTypeMap);r.forEach((function(e){e.isEdit=!1})),a(r)}else{var i={parentItemId:e.itemId};Object(o["nb"])(i).then((function(e){if(e.data.successful){var t=e.data.resultValue,s=l.getShowDateTable(t,l.dictMap,l.columnTypeMap);s.forEach((function(e){e.isEdit=!1})),l.$forceUpdate(),a(s)}}))}},showHasSelectedExpertDialog:function(e){var t=this;t.showHasSelectedExpert=!0,Object(o["yb"])({itemId:e.itemId}).then((function(e){e.data.successful&&(console.log(e),t.hasSelectedExpertInfoShow=e.data.resultValue)}))},getItemLabelSearch:function(){var e=this;Object(o["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){var a=t.data.resultValue;e.selectParamDict.set("speciality",a.specialityList),e.$forceUpdate()}}))},getTreeDeptCode:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;getUserDept().then((function(t){var a=t.data.resultValue;getTreeDeptCode().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))})),selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showItemInfo:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.tableDataLoding=!0,a.param.index=e,a.param.pageSize=t,a.param.itemPhaseDet="13",Object(o["P"])().then((function(e){if(e.data.successful){a.totalNum=e.data.resultValue.totalNum,a.tableLabel=e.data.resultValue;var t=e.data.resultValue;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),Object(o["Lb"])(a.param).then((function(e){console.log("response",e),e.data.successful&&(a.totalNum=e.data.resultValue.totalNum,a.tableData=e.data.resultValue.tableData,a.tableShowData=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)),a.tableDataLoding=!1})).catch((function(e){console.log(e),a.tableDataLoding=!1}))}}))},getShowDateTable:function(e,t,a){for(var l=this,s=[],i=0;i<e.length;i++){for(var o=e[i],n=new Object,c=0,u=Object.entries(o);c<u.length;c++){var d=Object(r["a"])(u[c],2),h=d[0],p=d[1];if(console.log(h+":"+p),"itemPhaseDet"==h&&(n["itemPhaseDetT"]=p),"speciality"==h&&(n["specialityT"]=p),t.has(h))for(var m=t.get(h),b=0;b<m.length;b++){var g=m[b];g.codeValue==p&&(n[h]=g.codeName)}else if("date"==a.get(h)&&p){n[h+"Rel"]=p;var f=l.formartDate(p);n[h]=f}else n[h]=p}s.push(n)}return s},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e}}},d=u,h=(a("891b"),a("2877")),p=Object(h["a"])(d,l,s,!1,null,"61b0feee",null);t["default"]=p.exports},"891b":function(e,t,a){"use strict";var l=a("68bb"),s=a.n(l);s.a}}]);
//# sourceMappingURL=chunk-6b48098c.1593e3f3.js.map