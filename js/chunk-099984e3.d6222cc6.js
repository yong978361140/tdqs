(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-099984e3"],{"46ee":function(e,t,a){},"7c08":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemTable",staticClass:"project",attrs:{data:e.tableDataShow,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":e.tableRowClassName,"cell-class-name":"column","highlight-current-row":!0,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,i){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:i,attrs:{prop:t.colDname,label:t.dispName,"show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:t.dispName},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showDetailDialog(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()}))],2),a("div",{staticClass:"table-item-box",staticStyle:{height:"50% !important"}},[a("div",{staticClass:"table-box",class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-form",{staticClass:"demo-form-inline reason-form",attrs:{model:e.form,"label-width":"10%"}},[a("el-form-item",{attrs:{label:"意见:"}},[a("el-input",{staticClass:"elinput reason",attrs:{type:"textarea",placeholder:""},model:{value:e.auditItemParam.auditAdvice,callback:function(t){e.$set(e.auditItemParam,"auditAdvice",t)},expression:"auditItemParam.auditAdvice"}})],1)],1),a("div",{staticClass:"dialog-footer option",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"div"},[a("el-button",{on:{click:e.backWorkFlow}},[e._v("退回")]),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn1},on:{click:e.saveAudtiInfo}},[e._v("同意")])],1)])],1)])],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])])},s=[],r=(a("4ec9"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("5530")),o=a("2f62"),l=a("a960"),n=(a("2bb5"),a("c2b4")),c=a("7e1e"),u=a("73fc"),d=a("f36f"),m={name:"questions",data:function(){var e=this;return{showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],loadingBtn1:!1,auditItemParam:{audited:"1",auditAdvice:"",itemIds:"",itemPhaseDet:""},isShowQuery:!1,dialogVisibleL:!1,dialogLoading:!1,loading:!1,delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:10,year:"",dialogFormVisible:!1,form:{},options:[],value:"",formLabelWidth:"140px",input:"",tableData:[],tableLabel:[],param:{createOrg:"",itemName:"",itemType:"",pageSize:10,speciality:"",voltLevel:"",ghYear:"",itemSource:""},dictMap:new Map,tableDataShow:[],saveData:{kssj:""},pleanTableLabel:[],planLabel:{},tempItemId:"",tempItemName:"",itemShow:!1,saveLabel:{},reportFileName:"",columnTypeMap:new Map,isShowFilter:!1,tableHeight:"65vh",minDate:"",maxDate:"",pickerOptionsStart:{disabledDate:function(t){var a=new Date(e.maxDate),i=Date.now()-864e5;return t.getTime()<=i||t.getTime()>a}},pickerOptionsEnd:{disabledDate:function(t){var a=new Date(e.minDate),i=Date.now()-864e5;return t.getTime()<=i||t.getTime()<=a}},auditPlanId:"",saveParams:[],userSpecialityArr:[]}},components:{querys:u["a"],SelectTree:l["a"],ItemAddCom:n["default"]},watch:{deptCode:function(){this.param.createOrg=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},created:function(){this.tableHeight=window.innerHeight-220},mounted:function(){this.getSpecialityIds(),this.getTableWithTitle(1,10)},computed:Object(r["a"])({},Object(o["b"])([])),methods:{cancel:function(){top.opener=null,top.close()},getValue:function(e){this.deptCode=e},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showDetailDialog:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},saveAudtiInfo:function(){var e=this,t={user:this.$route.query.iscUserId,workItemID:this.$route.query.workItemID};this.loadingBtn1=!0,Object(d["e"])(t).then((function(t){if("0"==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:1,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:3},i=!1;"已提交立项申请"==e.auditItemParam.itemPhaseDet?(a.itemPhaseDet=3,i=!0):"可研编制已提交审批"==e.auditItemParam.itemPhaseDet&&(a.itemPhaseDet=26,i=!0),i&&Object(c["sd"])(a).then((function(t){if(e.loadingBtn1=!1,t.data.successful)e.$message.success("提交审核成功"),parent.GetChildValue("true");else{var a=t.data.resultHint;e.$message.error(a)}}))}else e.$message.error(item.itemName+t.data.message)}))},backWorkFlow:function(){var e=this;this.dialogFormVisible=!1;var t={user:this.$route.query.iscUserId,currentActInstID:this.$route.query.activityInstID,destActDefID:"submit",rollBackStrategy:"path"};Object(d["b"])(t).then((function(t){if(0==t.data.status){var a={processInstID:e.$route.query.processInstID,itemId:e.auditItemParam.itemIds,userId:e.$route.query.iscUserId,isAudit:2,workItemId:e.$route.query.workItemID,auditDesc:e.auditItemParam.auditAdvice,itemPhaseDet:0},i=!1;"已提交立项申请"==e.auditItemParam.itemPhaseDet?(a.itemPhaseDet=0,i=!0):"可研编制已提交审批"==e.auditItemParam.itemPhaseDet&&(a.itemPhaseDet=27,i=!0),i&&Object(c["sd"])(a).then((function(t){if(t.data.successful)e.$message.success("退回成功"),parent.GetChildValue("true");else{var a=t.data.resultHint;e.$message.error(a)}}))}else e.$message.error(item.itemName+t.data.message)}))},getSpecialityIds:function(){var e=this;Object(c["dc"])().then((function(t){if(t.data.successful){var a=t.data.resultValue;""!=a&&(e.userSpecialityArr=a.split(",")),console.log(t)}}))},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,s=t.getDate();return a+"-"+this.add0(i)+"-"+this.add0(s)},add0:function(e){return e<10?"0"+e:e},switchFilter:function(){this.isShowFilter=!this.isShowFilter},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var i=e[a];t.set(i.colDname,i.colType)}return t},getTableWithTitle:function(e){var t=this,a=this;a.loading=!0,Object(c["queryTitleHookUp"])().then((function(e){if(a.loading=!1,e.data.successful){a.tableLabel=e.data.resultValue,a.dictMap=a.getDictArr(a.tableLabel),a.columnTypeMapDict=a.getColumnTypeArr(a.tableLabel);var i=a.$route.query.processInstID;Object(c["Ib"])({processInstID:i}).then((function(e){if(e.data.successful){console.log(e);var t=e.data.resultValue;a.auditItemParam.itemIds=t.itemId,a.auditItemParam.itemPhaseDet=t.itemPhaseDet,Object(c["queryTitleHookUp"])({itemId:t.itemId}).then((function(e){e.data.successful&&(a.tableDataShow=e.data.resultValue,a.totalNum=1)}))}}))}else t.$message.error("查询表头信息出错")}))},getDictArr:function(e){for(var t=this,a=new Map,i=0;i<e.length;i++){var s=e[i];if(null!=s.codeList){if("speciality"==s.colDname){for(var r=[],o=0;o<s.codeList.length;o++)for(var l=0;l<t.userSpecialityArr.length;l++)s.codeList[o].codeValue==t.userSpecialityArr[l]&&r.push(s.codeList[o]);s.codeList=r}a.set(s.colDname,s.codeList)}}return a}}},h=m,p=(a("a74c"),a("9305"),a("2877")),b=Object(p["a"])(h,i,s,!1,null,"f37b4812",null);t["default"]=b.exports},9305:function(e,t,a){"use strict";var i=a("46ee"),s=a.n(i);s.a},a74c:function(e,t,a){"use strict";var i=a("e7be"),s=a.n(i);s.a},e7be:function(e,t,a){}}]);
//# sourceMappingURL=chunk-099984e3.d6222cc6.js.map