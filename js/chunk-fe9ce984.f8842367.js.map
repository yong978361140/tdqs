{"version":3,"sources":["webpack:///./src/views/feasible/planReview815.vue?383b","webpack:///src/views/feasible/planReview815.vue","webpack:///./src/views/feasible/planReview815.vue?b5d0","webpack:///./src/views/feasible/planReview815.vue","webpack:///./src/views/feasible/planReview815.vue?a25d","webpack:///./src/views/feasible/planReview815.vue?05e7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","$store","state","app","isCollapse","attrs","slot","_v","on","$event","selectItem","model","value","param","callback","$$v","$set","expression","getValue","_l","selectParamDict","get","item","key","codeValue","codeName","class","showDrawer","directives","name","rawName","tableDataShow","tableHeight","background","color","tableLoad","children","hasChildren","handleSelectionChange","index","colDname","showType","dispName","scopedSlots","_u","fn","scope","row","isBatchPackage","_s","itemName","showDetailDialog","_e","currentPage","totalNum","handleSizeChange","handleCurrentChange","timer","showData","showQuery","changeStatus","itemShow","tempItemId","staticRenderFns","data","queryBatch","queryBatchMode","Map","radio","planAdvice","isShowQuery","tableHeightTab","dialogReviewVisible","dialogLoading","loading","delData","lableList","currentNum","year","dialogFormVisible","dialogFormVisible2","form","time1","time2","options","formLabelWidth","input","colTimeList","tableLabel","selectPlanId","columnTypeMap","currentColTime","curItemName","showUpdatePlaneTime","updateForm","auditPlanId","timeListloading","tableDataLoading","advice","fileList","userId","token","createOrg","components","SelectTree","created","mounted","getTable","getItemLabelSearch","sessionStorage","getItem","computed","methods","console","log","batchGroupId","resolve","childrenData","showReviewDia","_this","set","labelList","specialityList","$forceUpdate","submitPlanReview","selectPlanArr","forEach","itemId","checkType","checkAdvice","hasPackage","paramArr","push","formartDate","time","Date","y","getFullYear","m","getMonth","d","getDate","add0","showItemInfo","val","getDictArr","map","temp","getColumnTypeArr","getLabelList","common_table_info","i","getShowDateTable","copyObj","tempObj2","arr","component"],"mappings":"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","file":"js/chunk-fe9ce984.f8842367.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"main clearfix\",style:({'margin-left':_vm.$store.state.app.isCollapse ? '84px':'240px'})},[_c('div',{staticClass:\"main_container\"},[_c('querys',{attrs:{\"showSwitch\":false}},[_c('div',{attrs:{\"slot\":\"queryTabs\"},slot:\"queryTabs\"},[_c('div',{staticClass:\"query_tab\"},[_c('div',{staticClass:\"query_label\"},[_vm._v(\"项目名称\")]),_c('div',{staticClass:\"query_select\"},[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"请输入关键词\"},on:{\"change\":function($event){return _vm.selectItem()}},model:{value:(_vm.param.itemName),callback:function ($$v) {_vm.$set(_vm.param, \"itemName\", $$v)},expression:\"param.itemName\"}})],1)]),_c('div',{staticClass:\"query_tab\"},[_c('div',{staticClass:\"query_label\"},[_vm._v(\"所属单位\")]),_c('div',{staticClass:\"query_select\"},[_c('select-tree',{on:{\"getValue\":_vm.getValue}})],1)]),_c('div',{staticClass:\"query_tab\"},[_c('div',{staticClass:\"query_label\"},[_vm._v(\"批次名称\")]),_c('div',{staticClass:\"query_select\"},[_c('el-input',{attrs:{\"type\":\"text\",\"clearable\":\"\",\"size\":\"small\",\"placeholder\":\"请输入\"},on:{\"change\":function($event){return _vm.selectItem()}},model:{value:(_vm.param.batchName),callback:function ($$v) {_vm.$set(_vm.param, \"batchName\", $$v)},expression:\"param.batchName\"}})],1)]),_c('div',{staticClass:\"query_tab\"},[_c('div',{staticClass:\"query_label\"},[_vm._v(\"专业类别\")]),_c('div',{staticClass:\"query_select\"},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\",\"size\":\"small\"},on:{\"change\":function($event){return _vm.selectItem()}},model:{value:(_vm.param.speciality),callback:function ($$v) {_vm.$set(_vm.param, \"speciality\", $$v)},expression:\"param.speciality\"}},_vm._l((_vm.selectParamDict.get('speciality')),function(item){return _c('el-option',{key:item.codeValue,attrs:{\"label\":item.codeName,\"value\":item.codeValue}})}),1)],1)])])]),_c('div',{staticClass:\"template_main\"},[_c('div',{staticClass:\"table-item-box\"},[_c('div',{class:_vm.showDrawer?'table-wrapper-run':'table-wrapper-init'},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.tableDataLoading),expression:\"tableDataLoading\"}],attrs:{\"data\":_vm.tableDataShow,\"height\":_vm.tableHeight,\"border\":\"\",\"header-cell-style\":{background:'#359691',color:'#fff'},\"row-class-name\":\"row\",\"cell-class-name\":\"column\",\"lazy\":\"\",\"load\":_vm.tableLoad,\"row-key\":\"itemId\",\"tree-props\":{children: 'children', hasChildren: 'hasChildren'}},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\",\"label\":\"序号\"}}),_vm._l((_vm.tableLabel),function(item,index){return (item.colDname != 'itemName'&&item.showType==1)?_c('el-table-column',{key:index,attrs:{\"prop\":item.colDname,\"label\":item.dispName,\"min-width\":\"220\",\"show-overflow-tooltip\":true}}):(item.colDname == 'itemName')?_c('el-table-column',{attrs:{\"label\":item.dispName,\"width\":\"200\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.isBatchPackage ==1)?_c('span',[_vm._v(_vm._s(scope.row.itemName))]):_c('span',{staticClass:\"blue\",on:{\"click\":function($event){return _vm.showDetailDialog(scope.row)}}},[_vm._v(_vm._s(scope.row.itemName))])]}}])}):_vm._e()})],2),_c('div',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-size\":20,\"page-sizes\":[10,20,30,50],\"layout\":\"sizes, total, prev, pager, next, jumper\",\"total\":_vm.totalNum},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('div',{staticClass:\"planDrawer\",class:_vm.showDrawer?'item-add-wrapper-run':'item-wrapper-init'},[(_vm.showDrawer)?_c('item-add-com',{key:_vm.timer,attrs:{\"showData\":_vm.showData,\"showAddDialog\":_vm.showDrawer,\"isShowQuery\":_vm.showQuery,\"tableHeightTab\":_vm.tableHeight},on:{\"changeStatus\":_vm.changeStatus}}):_vm._e()],1)])])],1)]),_c('el-dialog',{attrs:{\"visible\":_vm.itemShow,\"close-on-click-modal\":false,\"modal-append-to-body\":false},on:{\"update:visible\":function($event){_vm.itemShow=$event}}},[_c('item-dialog',{attrs:{\"itemId\":_vm.tempItemId}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    \n    <div class=\"main clearfix\" :style=\"{'margin-left':$store.state.app.isCollapse ? '84px':'240px'}\">\n      \n      <div class=\"main_container\">\n      <querys :showSwitch= \"false\">\n        <div slot=\"queryTabs\">\n          <div class=\"query_tab\">\n            <div class=\"query_label\">项目名称</div>\n            <div class=\"query_select\">\n              <el-input size=\"small\" @change=\"selectItem()\" v-model=\"param.itemName\" placeholder=\"请输入关键词\"></el-input>\n            </div>\n          </div>\n          <div class=\"query_tab\">\n              <div class=\"query_label\">所属单位</div>\n              <div class=\"query_select\">\n                  <select-tree @getValue=\"getValue\"></select-tree>\n              </div>\n            </div>\n\n            <div class=\"query_tab\">\n              <div class=\"query_label\">批次名称</div>\n              <div class=\"query_select\">\n                <!-- <el-select clearable  placeholder=\"请选择\" size=\"small\" @change=\"selectItem()\" v-model=\"param.batchId\">\n                  <el-option v-for=\"item in colTimeList\" :key=\"item.batchId\" :label=\"item.batchName\"\n                                               :value=\"item.batchId\"></el-option>\n                </el-select> -->\n                <el-input type=\"text\" v-model=\"param.batchName\" @change=\"selectItem()\" clearable size=\"small\" placeholder=\"请输入\"></el-input>\n              </div>\n            </div>\n            <div class=\"query_tab\">\n              <div class=\"query_label\">专业类别</div>\n              <div class=\"query_select\">\n                <el-select  clearable  placeholder=\"请选择\" size=\"small\" @change=\"selectItem()\" v-model=\"param.speciality\">\n                   <el-option v-for=\"item in selectParamDict.get('speciality')\" :key=\"item.codeValue\" :label=\"item.codeName\"\n                                               :value=\"item.codeValue\"></el-option>\n                </el-select>\n              </div>\n            </div>\n            \n          </div>\n          <!-- <div slot=\"queryBtns\">\n             <el-button type=\"primary\" size=\"small\" @click=\"showReviewDia\">评审</el-button>\n             <el-button type=\"primary\" size=\"small\" >导出</el-button>\n          </div> -->\n         \n        </querys>\n        \n\n        <div class=\"template_main\">\n            <div class=\"table-item-box\">\n\t\t\t\t\t    <div :class=\"showDrawer?'table-wrapper-run':'table-wrapper-init'\">\n                <el-table \n                  :data=\"tableDataShow\"\n                  :height=\"tableHeight\"\n                  border\n                  :header-cell-style=\"{background:'#359691',color:'#fff'}\"\n                  @selection-change=\"handleSelectionChange\"\n                  row-class-name=\"row\"\n                  cell-class-name=\"column\"\n                  v-loading=\"tableDataLoading\"\n                  lazy\n                  :load=\"tableLoad\"\n                  row-key=\"itemId\"\n                  :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\n                  >\n                  <el-table-column\n                          type=\"index\"\n                          width=\"50\"\n                          label=\"序号\" >\n                  </el-table-column>\n                  <el-table-column\n                          v-for=\"(item, index) in tableLabel\"\n                          v-if =\"item.colDname != 'itemName'&&item.showType==1\"\n                          :key=\"index\"\n                          :prop=\"item.colDname\"\n                          :label=\"item.dispName\" min-width=\"220\"\n                          :show-overflow-tooltip=\"true\">\n                  </el-table-column>\n                  <el-table-column v-else-if=\"item.colDname == 'itemName'\"\n                                  :label=\"item.dispName\" width=\"200\" \n                                  :show-overflow-tooltip=\"true\">\n                    <template slot-scope=\"scope\" >\n                      <span v-if=\"scope.row.isBatchPackage ==1\" >{{ scope.row.itemName }}</span>\n                      <span v-else class=\"blue\" @click=\"showDetailDialog(scope.row)\">{{scope.row.itemName}}</span>\n                    </template>\n                  </el-table-column>\n                </el-table>\n                <div class=\"page\">\n                  <el-pagination\n                    background\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    :current-page=\"currentPage\"\n                    :page-size=\"20\"\n                    :page-sizes=\"[10,20,30,50]\"\n                    layout=\"sizes, total, prev, pager, next, jumper\"\n                    :total=\"totalNum\">\n                  </el-pagination>\n                </div>\n              </div>\n              <div class=\"planDrawer\" :class=\"showDrawer?'item-add-wrapper-run':'item-wrapper-init'\">\n                <!-- 新增 修改 浏览 引itemaddcom -->\n                <item-add-com \n                v-if=\"showDrawer\" \n                :key=\"timer\" \n                :showData=\"showData\" \n                :showAddDialog=\"showDrawer\" \n                :isShowQuery=\"showQuery\"\n                :tableHeightTab=\"tableHeight\"\n                @changeStatus=\"changeStatus\">\n                </item-add-com>\n              </div>\n            </div>  \n        </div>  \n      </div>\n    </div>\n    <!--项目详细信息-->\n    <el-dialog :visible.sync=\"itemShow\" :close-on-click-modal = \"false\" :modal-append-to-body='false'>\n        <item-dialog :itemId=\"tempItemId\"></item-dialog>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport querys from '@/components/querys'\nimport SelectTree from \"@/components/treeSelect.vue\";\nimport itemDialog from '@/views/project/item.vue'\nimport ItemAddCom from \"@/views/project/itemAddCom\"\nimport {getPlan,submitCheckAdvice,\ngetChildrenItem,queryTitle,planHookUp,checkPlan,queryFilterParam,getBatchNameList,getBatchGroupChild} from '@/api/data'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'planSummary',\n  data() {\n  \treturn {\n      //查询批次\n      queryBatch:'',\n      //查询批次mode\n      queryBatchMode:'',\n      selectParamDict: new Map(),\n      radio:1,\n      planAdvice:\"\",\n      isShowQuery:false,\n      showQuery:false,\n      tableHeightTab:\"\",\n      timer:\"\",\n\t\t\tshowAddDialog:false,   //弹窗是否展示-新增 修改 浏览\n\t\t\tshowData:{\n\t\t\t\titemId:null, //项目id\n\t\t\t\tspecClass: \"\",//专项类型\n\t\t\t\tspecClassName:\"\",//专项类型名称\n\t\t\t\toldPath:\"\",//原来路由\n\t\t\t\ttableLabelArr:\"\",//表头\n\t\t\t\tphash:\"1\",//阶段1=立项 2=可研 3=储备 0=浏览\n\t\t\t\tparentItemId:null //父项id-新增下级时用\n\t\t\t},\n\t\t\tshowDrawer:false,\n      dialogReviewVisible:false,\n      dialogLoading:false,\n      loading:false,\n      delData:{\n        \"ids\": [],\n      },\n      lableList:[{value: ''}],\n      totalNum:0,\n      currentPage:1,\n      currentNum:20,\n      year: '',\n      dialogFormVisible:false,\n      dialogFormVisible2:false,\n      form: {\n        time1:'',\n        time2:''\n      },\n      options: [],\n      value:'',\n      formLabelWidth: '120px',\n      input: '',\n      colTimeList:[],\n  \t\t// 子组件的表格数据\n  \t\ttableData: [],\n  \t\t// 子组件的表头数据\n      tableLabel: [],\n      //表格展示数据列表\n      tableDataShow:[],\n      //选中的计划id\n      selectPlanId:{},\n      //获取字段类型字典，用于日期类型的展示\n      columnTypeMap: new Map,\n      //查询条件\n      param:{\n          'itemPhaseDet':'7',\n          'queryType':1,\n          'batchName':\"\",\n          'itemName':\"\",\n          'speciality':\"\",\n          'pageIndex':1,\n          'pageSize':20,\n          'createOrg':\"\"\n      },\n      //当前选中的项目id\n      tempItemId:\"\",\n      //是否展示项目信息\n      itemShow:false,\n      //当前选中日期\n      currentColTime:\"\",\n      //当前项目名称\n      curItemName:\"\",\n      //是否展示编辑弹框\n      showUpdatePlaneTime:false,\n      //编辑框中的数据\n      updateForm:{\n        \"planStartDate\":\"\",\n        \"planEndDate\":\"\"\n      },\n      //评审计划id\n      auditPlanId:\"\",\n      timeListloading: false,\n      tableDataLoading: false,\n      //评审意见\n      advice:{\n          \"agreeType\":\"2\",\n          \"checkAdvice\":\"\"\n      },\n      fileList:[],\n      tableHeight:'',\n      userId:\"\",\n      token:'',\n      createOrg:\"\"\n  \t}\n  },\n  components: {\n     \"item-dialog\":itemDialog,\n     ItemAddCom,\n     querys,\n    SelectTree\n  },\n  created(){\n\t\t//表格自动高度\n    this.tableHeight=window.innerHeight-190;\n\t\t\n\t},\n  mounted(){\n    this.getTable(1,20)\n    this.getItemLabelSearch()\n    this.userId = sessionStorage.getItem('userId');\n    this.token = sessionStorage.getItem('token');\n  },\n  computed: {\n\t\t...mapGetters([\n\t\t\t// 'token',\n\t\t])\n  },\n   watch:{\n\t\tcreateOrg(){\n      this.param.createOrg = this.createOrg\n      this.currentPage = 1\n\t\t\tthis.getTable(1,this.currentNum)\n\t\t}\n\t},\n  methods: {\n    getValue(value){\n      this.createOrg = value\n      console.log('createOrg' + value)\n    },\n    selectItem() {\n      this.currentPage = 1\n      this.getTable(1,this.currentNum)\n    },\n    // 子组件向父组件传递参数\n\t\tchangeStatus(status) {\n\t\t\tthis.showDrawer = status\n\t\t\tconsole.log('status'+status)\n    },\n    // 懒加载table树形子数据\n    tableLoad(row, treeNode, resolve) {\n      console.log(row.batchGroupId)\n      if(row.batchGroupId != \"\" && row.batchGroupId != undefined){\n        let _params = {\n          'batchGroupId':row.batchGroupId\n        }\n        getBatchGroupChild(_params).then(res => {\n          if(res.data.successful){\n            let childrenTable = res.data.resultValue\n\n            let childrenData = this.getShowDateTable(childrenTable, this.dictMap, this.columnTypeMap)\n          \n            resolve(childrenData)\n          }\n        })\n      }else{\n        if(!row.children || row.children.length ==0){\n          let params = {\n            'parentItemId':row.itemId\n          }\n          getChildrenItem(params).then(res => {\n            if(res.data.successful){\n              let childrenTable = res.data.resultValue\n              let childrenData = this.getShowDateTable(childrenTable, this.dictMap, this.columnTypeMap)\n              \n              resolve(childrenData)\n            }\n          })\n        }else{\n          console.log(row.children)\n          let childrenData = this.getShowDateTable(row.children, this.dictMap, this.columnTypeMap)\n          resolve(childrenData)\n          // row.children = row.children\n        }\n        \n      }\n      \n    },\n\t\t//展示项目详细信息\n\t\tshowDetailDialog(row) {\n\t\t\tthis.showData.itemId = row.itemId\n\t\t\tthis.showData.phash = 0\n\t\t\tthis.showDrawer = true;\n\t\t\tthis.timer = new Date().getTime()\n    },\n    // 展示评审意见审查弹窗\n    showReviewDia(){\n      this.planAdvice = \"\"\n      this.radio = 1\n      this.dialogReviewVisible = true  \n    },\n    \n    //获取查询条件下拉框\n\t\tgetItemLabelSearch() {\n\t\t\tlet _this = this\n\t\t\tqueryFilterParam().then(response => {\n\t\t\t\tconsole.log('response', response)//后端返回数据\n\t\t\t\tif (response.data.successful) {\n\t\t\t\t\tlet labelList = response.data.resultValue\n          // 专业类别\n          _this.selectParamDict.set('speciality', labelList.specialityList)\n          _this.$forceUpdate()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n    // 评审意见审查弹窗点击确定\n    submitPlanReview(){\n      let paramArr = []\n      this.selectPlanArr.forEach(function(item){\n        let isHasPackage = item.hasPackage\n        let param ={\n          itemId:item.itemId,\n          checkType:this.radio,\n          checkAdvice:this.planAdvice,\n          hasPackage:isHasPackage\n        }\n        paramArr.push(param)\n      })\n      checkPlan(paramArr).then(res => {\n        if(res.data.successful){\n          this.$message.success(\"审查成功\")\n        }else{\n          this.$message.error(\"审查失败\")\n        } \n      })\n    },\n    \n    //时间戳字符串的转化\n    formartDate(param) {\n      var time = new Date(param);\n      var y = time.getFullYear();\n      var m = time.getMonth()+1;\n      var d = time.getDate();\n      // var h = time.getHours();\n      // var mm = time.getMinutes();\n      // var s = time.getSeconds();\n      // return y+'-'+this.add0(m)+'-'+this.add0(d)+' '+this.add0(h)+':'+this.add0(mm)+':'+this.add0(s);\n      return y+'-'+this.add0(m)+'-'+this.add0(d);\n    },\n    add0(m){\n      return m<10?'0'+m:m;\n    },\n    //展示项目详细信息\n    showItemInfo(data){\n     let _this = this;\n\t\t\t_this.tempItemId = data.itemId;\n\t\t\tthis.$router.push({path:'/itemInfo',query:{itemId:_this.tempItemId ,oldPath:_this.$route.path}});\n    },\n    //监听表单选中事件\n    handleSelectionChange(val){\n      let _this = this\n      _this.selectPlanArr = []\n      val.forEach(function(item){\n        _this.selectPlanArr.push(item)\n      })\n    },\n    //获取当前每页条数\n    handleSizeChange(val) {\n      this.currentNum = val;\n      this.getTable(this.currentPage,val)\n    },\n    //分页查询\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.currentPage = val;\n      this.getTable(val,this.currentNum)\n    },\n    //获取数据列表\n    //获取数据列表\n    getTable(page,size){\n        let _this = this\n        _this.tableDataLoading = true\n        _this.loading = true\n        _this.param.pageIndex = page\n        _this.param.pageSize = size\n        queryTitle().then(response => {//{}写需要的参数\n          _this.tableDataLoading = false\n          console.log('response',response)//后端返回数据\n          if(response.data.successful){\n            _this.tableLabel = response.data.resultValue\n            _this.dictMap = _this.getDictArr(_this.tableLabel)\n            _this.columnTypeMap = _this.getColumnTypeArr(_this.tableLabel)\n            planHookUp(_this.param).then(response => {\n              console.log('planHookUp',response)\n              _this.loading = false;\n              if(response.data.successful){\n                _this.totalNum = response.data.resultValue.totalNum;\n                _this.tableData = response.data.resultValue.tableData;\n                _this.tableDataShow = _this.getShowDateTable(_this.tableData, _this.dictMap, _this.columnTypeMap)\n              }\n\n            })\n          }\n        }).catch(error => {\n          console.log(error)//error\n        })   \n    },\n     //获取字典\n    getDictArr(labelList){ \n      let map = new Map();\n      for(let i=0;i<labelList.length;i++){\n        let temp = labelList[i];\n        if(temp.codeList!=null){\n          map.set(temp.colDname,temp.codeList);\n        }\n      }\n      return map\n    },\n    //获取字段类型字典\n    getColumnTypeArr(labelList){\n      let map = new Map();\n      for(let i=0;i<labelList.length;i++){\n        let temp = labelList[i];\n        map.set(temp.colDname,temp.colType);\n      }\n      return map\n    },\n    //获取插入和修改的表头\n    getLabelList(labelList){ \n      let _this =this\n      labelList.forEach(function (item) {\n        _this.$set(item,'value','');\n      })\n      let common_table_info = {};//数组转对象，避免类型报错\n      for(let i in labelList){\n        common_table_info[i] = labelList[i];\n      }\n      return common_table_info\n    },\n    //获取展示数据\n    getShowDateTable(tableData,dictMap,columnTypeMap){\n      let _this = this\n      let arr = [];\n      for(let i=0;i<tableData.length;i++){\n        let tempObj = tableData[i];\n        //拷贝对象\n        let copyObj = new Object();\n        //遍历获取的数据中的属性，如果属性名有和数据字典中的key相对应的，取出数据字典对应的值赋值过去\n        for (let [key, value] of Object.entries(tempObj)) {\n          console.log(key + ':' + value);\n          if(dictMap.has(key)){\n            let dictValueList = dictMap.get(key);\n            for(let j=0;j<dictValueList.length;j++){\n              let tempObj2 = dictValueList[j];\n              if(tempObj2.codeValue==value){\n                copyObj[key] = tempObj2.codeName;\n              }\n            }\n          }else if(columnTypeMap.get(key)==\"date\" && value){\n               copyObj[key+\"Rel\"] = value\n               let timeStr = _this.formartDate(value)\n               copyObj[key] = timeStr;\n          }else{\n              copyObj[key] = value;\n          }\n        }\n        arr.push(copyObj);\n      }\n      return arr;\n    }\n  }\n}\n</script>\n<style type=\"text/css\">\n  .review .el-upload-list{\n    display: inline-block;\n    vertical-align: -8px;\n    \n  }\n  /* .plan-review .el-table .el-table__body-wrapper {\n    height: 89% !important;\n  } */\n\n  .review-dialog .el-dialog .el-textarea__inner {\n    width: 100% !important;\n  }\n  \n  .review_dialog .el-textarea__inner{\n    width: 100%!important\n  }\n</style>\n<style scoped lang=\"stylus\">\n\n  .template_main{\n    margin-top:20px;\n    display: -webkit-flex; \n    display: flex;\n    \n  }\n  .template_left{ \n    width:20%;\n    text-align:center;\n    margin-right:10px;\n    height: calc(100vh - 40px);\n  }\n  .template_right{\n   flex-grow:9;\n   width:80%;\n   position:relative\n   height: calc(100vh - 40px);\n  }\n\n  \n  .color{\n    color:#5892e5;\n    cursor: pointer;\n  }\n  \n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planReview815.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planReview815.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./planReview815.vue?vue&type=template&id=5635d465&scoped=true&\"\nimport script from \"./planReview815.vue?vue&type=script&lang=js&\"\nexport * from \"./planReview815.vue?vue&type=script&lang=js&\"\nimport style0 from \"./planReview815.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./planReview815.vue?vue&type=style&index=1&id=5635d465&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5635d465\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planReview815.vue?vue&type=style&index=1&id=5635d465&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planReview815.vue?vue&type=style&index=1&id=5635d465&scoped=true&lang=stylus&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planReview815.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planReview815.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}