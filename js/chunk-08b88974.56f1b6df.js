(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08b88974"],{"5e2e":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"main clearfix",style:{"margin-left":e.$store.state.app.isCollapse?"84px":"240px"}},[a("div",{staticClass:"main_container "},[a("div",{staticClass:"tab_box"},[a("el-radio-group",{on:{change:e.selectItem},model:{value:e.param.isPassed,callback:function(t){e.$set(e.param,"isPassed",t)},expression:"param.isPassed"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("待办")]),a("el-radio-button",{attrs:{label:"1"}},[e._v("待评审列表")])],1)],1),a("querys",{attrs:{showSwitch:!1}},[a("div",{attrs:{slot:"queryTabs"},slot:"queryTabs"},[a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目名称")]),a("div",{staticClass:"query_select"},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入内容"},on:{change:e.selectItem},model:{value:e.param.itemName,callback:function(t){e.$set(e.param,"itemName",t)},expression:"param.itemName"}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("所属单位")]),a("div",{staticClass:"query_select"},[a("select-tree",{on:{getValue:e.getValue}})],1)]),a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("项目层级")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemLevel,callback:function(t){e.$set(e.param,"itemLevel",t)},expression:"param.itemLevel"}},e._l(e.selectParamDict.get("itemLevel"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]),0!=e.param.isPassed?a("div",{staticClass:"query_tab"},[a("div",{staticClass:"query_label"},[e._v("可研状态")]),a("div",{staticClass:"query_select"},[void 0!=e.selectParamDict?a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.selectItem},model:{value:e.param.itemPhaseDet,callback:function(t){e.$set(e.param,"itemPhaseDet",t)},expression:"param.itemPhaseDet"}},e._l(e.selectParamDict.get("itemPhaseDet"),(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1):e._e()],1)]):e._e()]),a("div",{attrs:{slot:"queryBtns"},slot:"queryBtns"})]),a("div",{staticClass:"table-item-box"},[a("div",{class:e.showDrawer?"table-wrapper-run":"table-wrapper-init"},[a("el-table",{attrs:{data:e.tableShowData,height:e.tableHeight,border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"v-loding":e.loading,lazy:"",load:e.tableLoad,"row-key":"itemId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{type:"selection",selectable:e.isChildren,width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableLabel,(function(t,l){return"itemName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):3==t.showType?a("el-table-column",{attrs:{prop:t.colDname,label:t.dispName,"min-width":"220","show-overflow-tooltip":!0}}):"itemName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showItemInfo(t.row)}}},[e._v(e._s(t.row.itemName))])]}}])}):e._e()})),0==e.param.isPassed?a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.isChild?void 0:["9"==t.row.itemPhaseDetT?a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v("选择评审专家")]):e._e(),"18"==t.row.itemPhaseDetT?a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v("提交现场评审意见")]):e._e(),"15"==t.row.itemPhaseDetT||"20"==t.row.itemPhaseDetT?a("span",{staticClass:"blue",on:{click:function(a){return e.showDialog(t.row)}}},[e._v("上传正式评审文件")]):e._e()]}}],null,!0)}):e._e(),1==e.param.isPassed?a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"blue",on:{click:function(a){return e.showHasSelectedExpertDialog(t.row)}}},[e._v("查看所选专家")])]}}],null,!1,136787018)}):e._e()],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,50],"page-size":20,layout:"sizes, total, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{class:e.showDrawer?"item-add-wrapper-run":"item-wrapper-init"},[e.showDrawer?a("item-add-com",{key:e.timer,attrs:{showData:e.showData,showAddDialog:e.showDrawer,isShowQuery:e.showQuery,tableHeightTab:e.tableHeight},on:{changeStatus:e.changeStatus}}):e._e()],1)])],1)]),a("el-dialog",{staticClass:"diy_dialog",attrs:{visible:e.showHasSelectedExpert,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showHasSelectedExpert=t}}},[a("el-table",{staticClass:"dialog_table",attrs:{data:e.hasSelectedExpertInfoShow,"max-height":"480px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0}},[a("el-table-column",{attrs:{label:"专家姓名",prop:"expertName"}}),a("el-table-column",{attrs:{label:"专家性别",prop:"expertSex"}}),a("el-table-column",{attrs:{label:"专业",prop:"professional"}}),a("el-table-column",{attrs:{label:"评审职位",prop:"isLeader"}}),a("el-table-column",{attrs:{label:"是否参加",prop:"isJoin"}}),a("el-table-column",{attrs:{label:"参加意见",prop:"auditJoinOpinion"}}),a("el-table-column",{attrs:{label:"参加意见",prop:"auditJoinOpinion"}}),a("el-table-column",{attrs:{label:"审核意见",prop:"isAudit"}}),a("el-table-column",{attrs:{label:"审核意见内容",prop:"auditAdvice","min-width":"150"}}),a("el-table-column",{attrs:{label:"汇总意见",prop:"isPassed"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showHasSelectedExpert=!1}}},[e._v("关 闭")])],1)],1),a("el-dialog",{staticClass:"online diy_dialog",attrs:{width:"80%",title:"选择评审专家",visible:e.showExpectDialog,"close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.showExpectDialog=t}}},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"指定选择",name:"first"}},[a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审组长")]),a("el-input",{staticStyle:{width:"270px",display:"inline-block"},attrs:{size:"small",placeholder:"请输入专家名称"},model:{value:e.leaderExpertName,callback:function(t){e.leaderExpertName=t},expression:"leaderExpertName"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getGroupLeader(1,e.expertCurrentNum)}}},[e._v("检索")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectExpert1",staticStyle:{"margin-top":"10px"},attrs:{data:this.expertShowTable,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleCurrentExpert1}},[a("el-table-column",{attrs:{label:"选择",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.expertId},nativeOn:{change:function(a){return e.getCurrentRow(t.row)}},model:{value:e.selectProfessorArr.groupLeader,callback:function(t){e.$set(e.selectProfessorArr,"groupLeader",t)},expression:"selectProfessorArr.groupLeader"}})]}}])}),e._l(e.expertLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.expertCurrentPage,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.totalExpertNum2},on:{"size-change":e.handleSizeExpert1,"current-change":e.handleCurrentExpert1}})],1),a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审技术专家 ")]),a("el-input",{staticStyle:{width:"270px",display:"inline-block"},attrs:{size:"small",placeholder:"请输入专家名称"},model:{value:e.normalExpertName,callback:function(t){e.normalExpertName=t},expression:"normalExpertName"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getGroupLeader2(1,e.expertCurrentNum2)}}},[e._v("检索")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectExpert2",staticStyle:{"margin-top":"10px"},attrs:{data:this.expertShowTable2,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChangeReview}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.expertLabel2,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.expertCurrentPage2,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.totalExpertNum2},on:{"size-change":e.handleSizeExpert2,"current-change":e.handleCurrentExpert2}})],1),a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审技经专家 ")]),a("el-input",{staticStyle:{width:"270px",display:"inline-block"},attrs:{size:"small",placeholder:"请输入专家名称"},model:{value:e.goodExpertName,callback:function(t){e.goodExpertName=t},expression:"goodExpertName"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getGroupLeader3(1,e.expertCurrentNum3)}}},[e._v("检索")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectExpert3",staticStyle:{"margin-top":"10px"},attrs:{data:this.expertShowTable3,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChangeExpect}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"45"}}),a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.expertLabel3,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150","show-overflow-tooltip":!0}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.expertCurrentPage3,"page-sizes":[5,10,15,20],"page-size":5,layout:"sizes, total, prev, pager, next, jumper",total:e.totalExpertNum3},on:{"size-change":e.handleSizeExpert3,"current-change":e.handleCurrentExpert3}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.selectExpect}},[e._v("提 交")]),a("el-button",{on:{click:e.cancleSelectExpert}},[e._v("取 消")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"自动选择",name:"second"}},[a("div",{staticClass:"form_border"},[a("h3",{staticClass:"dialog_tit"},[e._v("选取评审组长")]),e._v(" 专业 "),a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.autoSelectExpertParam.leaderMajor,callback:function(t){e.$set(e.autoSelectExpertParam,"leaderMajor",t)},expression:"autoSelectExpertParam.leaderMajor"}},e._l(e.expertMajorDict,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1),a("div",{staticClass:"form_border"},[a("h3",{staticClass:"dialog_tit"},[e._v("选取评审技术专家")]),e._l(e.autoSelectExpertParam.expertMajor,(function(t,l){return a("div",{key:l,staticStyle:{"margin-bottom":"10px"}},[e._v(" 专业 "),a("el-select",{attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.major,callback:function(a){e.$set(t,"major",a)},expression:"domain.major"}},e._l(e.expertMajorDict,(function(e){return a("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1),e._v(" 人数 "),a("el-input",{staticClass:"input_num",attrs:{size:"small",type:"number",placeholder:"请输入内容",onchange:e.replaceNum(t.num,l)},model:{value:t.num,callback:function(a){e.$set(t,"num",a)},expression:"domain.num"}}),e._v(" 人 "),0!=l?a("span",{staticClass:"iconfont add",on:{click:function(a){return e.removeDomain(t)}}},[e._v("")]):e._e()],1)})),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:e.addDomain}},[e._v("添 加")])],1)],2),a("div",{staticClass:"form_border"},[a("h3",{staticClass:"dialog_tit"},[e._v("选取评审技经专家")]),e._v(" 人数 "),a("el-input",{staticClass:"input_num",attrs:{size:"small",type:"number",placeholder:"请输入内容",onchange:e.replaceNum1(e.autoSelectExpertParam.goodExpertNum)},model:{value:e.autoSelectExpertParam.goodExpertNum,callback:function(t){e.$set(e.autoSelectExpertParam,"goodExpertNum",t)},expression:"autoSelectExpertParam.goodExpertNum"}}),e._v(" 人 ")],1),a("div",{staticClass:"form_footer"},[a("el-button",{on:{click:function(t){e.showExpectDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.autoLoading},on:{click:e.autoSelectExpert}},[e._v("确 定")])],1)])],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},["3"==e.dialogShowType?a("div",[a("el-form",{ref:"fileForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form,"label-position":"right"}},[a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"项目可研评审文号"}},[a("el-input",{attrs:{placeholder:"项目可研评审文号"},model:{value:e.auditFileNo,callback:function(t){e.auditFileNo=t},expression:"auditFileNo"}})],1),a("el-form-item",[a("el-upload",{ref:"uploadFile",staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjCmStItem/uploadNormalFile",headers:{userId:e.userId,token:e.token},data:e.finalFileData,"auto-upload":!1,"on-success":e.uploadSuccess,"on-change":e.changeFile,"on-remove":e.handleRemove,multiple:!1,"show-file-list":!0,"file-list":e.fileList3,accept:".CEB,.PDF"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1)],1):e._e(),"2"==e.dialogShowType?a("div",[a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("现场评审意见")]),a("el-radio-group",{model:{value:e.submitAdvice.agreeType,callback:function(t){e.$set(e.submitAdvice,"agreeType",t)},expression:"submitAdvice.agreeType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("通过")]),a("el-radio",{attrs:{label:"0"}},[e._v("不通过")])],1),a("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.submitAdvice.checkAdvice,callback:function(t){e.$set(e.submitAdvice,"checkAdvice",t)},expression:"submitAdvice.checkAdvice"}}),a("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.GLOBALURL+"/prjStTmpl/downloadTmpl?templateType=9&codeValue="+e.itemSpeciality+"&token="+e.token}},[e._v("下载评审意见模版")]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",[a("el-upload",{staticClass:"upload",attrs:{action:e.GLOBALURL+"/prjStFeaAudit/uploadFile",headers:{userId:e.userId,token:e.token},"on-success":e.uploadAdviceSuccess,multiple:!1,"show-file-list":!0,accpect:".doc,.docx","file-list":e.fileList2,limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1)],1)],1)],1):e._e(),"1"==e.dialogShowType?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.selectExpect}},[e._v("确 定")])],1):"2"==e.dialogShowType?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitXCLoading},on:{click:e.submitAdviceXC}},[e._v("确 定")])],1):e._e(),"3"==e.dialogShowType?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.fileLoading},on:{click:e.confirmSubmitFinalFile}},[e._v("确 定")])],1):e._e()]),a("el-dialog",{staticClass:"diy_dialog",attrs:{title:"选择专家结果",width:"80%","close-on-click-modal":!1,visible:e.showSelectExpertResult},on:{"update:visible":function(t){e.showSelectExpertResult=t}}},[a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审组长 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{data:this.selectedExpertLeader,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleCurrentExpert1}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.selectedExpertLable,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审技术专家 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.selectedExpert,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChangeReview}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.selectedExpertLable,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审技经专家 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.selectedGootExpert,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChangeExpect}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.selectedExpertLable,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sureBtn2,expression:"sureBtn2"}],attrs:{type:"primary"},on:{click:e.submitAutoSelectExpert}},[e._v("确 认")]),a("el-button",{on:{click:function(t){e.showSelectExpertResult=!1}}},[e._v("取 消")])],1)])],1),a("el-dialog",{staticClass:"diy_dialog",attrs:{title:"选择专家结果",width:"80%","close-on-click-modal":!1,visible:e.showSelectExpertResult2},on:{"update:visible":function(t){e.showSelectExpertResult2=t}}},[a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审组长 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{data:this.selectProfessorArrShow.groupLeader,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleCurrentExpert1}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.expertLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审技术专家 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.selectProfessorArrShow.reviewUsers,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChangeReview}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.expertLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("h3",{staticClass:"dialog_tit",staticStyle:{float:"left","margin-right":"10px"}},[e._v("选取评审技经专家 ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:this.selectProfessorArrShow.expectUsers,"max-height":"400px",border:"","header-cell-style":{background:"#359691",color:"#fff"},"row-class-name":"row","cell-class-name":"column","highlight-current-row":!0,"row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChangeExpect}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.expertLabel,(function(t,l){return"expertName"!=t.colDname&&1==t.showType?a("el-table-column",{key:l,attrs:{prop:t.colDname,label:t.dispName,"min-width":"150"}}):"expertName"==t.colDname?a("el-table-column",{attrs:{label:t.dispName,"min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{on:{click:function(a){return e.showDialog(t.row)}}},[e._v(e._s(t.row.expertName))])]}}])}):e._e()}))],2),a("div",{staticClass:"page"},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.sureBtn1,expression:"sureBtn1"}],attrs:{type:"primary"},on:{click:e.submitSelectExpert}},[e._v("确 认")]),a("el-button",{on:{click:e.cancleShowSelectExpertResult}},[e._v("取 消")])],1)])],1)],1)},r=[],o=(a("99af"),a("4160"),a("c975"),a("a434"),a("b0c0"),a("4ec9"),a("4fad"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("2b3d"),a("3835")),s=a("5530"),i=a("2f62"),n=(a("2bb5"),a("a960")),c=a("7e1e"),u=a("73fc"),p=a("c2b4"),d=a("eb5a"),m=a("f36f"),h={name:"questions",data:function(){return{fileTypeList:[],fileType:"",fileLoading:!1,submitXCLoading:!1,autoLoading:!1,isShowQuery:!1,showQuery:!1,tableHeightTab:"",timer:"",showAddDialog:!1,showData:{itemId:null,specClass:"",specClassName:"",oldPath:"",tableLabelArr:"",phash:"1",parentItemId:null},showDrawer:!1,sureBtn1:!1,sureBtn2:!1,deptCode:"",isClearable:!0,isAccordion:!0,valueId:"",props:{value:"id",label:"name",children:"children",code:"deptCode"},deptArr:[],param:{pageIndex:1,pageSize:10,isPassed:0,deptCode:"",itemType:"",speciality:"",itemPhaseDet:""},tableHeight:"",tHeight:"",dialogVisibleL:!1,textarea:"",nolabel:"",radio:"",dialogLoading:!1,loading:!1,dialogTitle:"",tableTest:[],delData:{ids:[]},lableList:[{value:""}],totalNum:0,currentPage:1,currentNum:20,year:"",dialogFormVisible:!1,form:{},auditFileNo:"",resource:"",options:[],value:"",formLabelWidth:"120px",input:"",tableData:[],tableLabel:[],tableShowData:[],dictMap:new Map,selectParamDict:new Map,columnTypeMap:new Map,tempItemId:"",tempFeaAuditid:"",itemShow:!1,dialogShowType:"",professorArr:[],selectProfessorArr:{groupLeader:"",reviewUsers:[],expectUsers:[]},selectProfessorArrShow:{groupLeader:[],reviewUsers:[],expectUsers:[]},submitAdvice:{checkAdvice:"",auditFileId:"",itemId:"",id:"",agreeType:"",auditType:"0"},expertLabel:{},expertShowTable:[],totalExpertNum:0,expertDictMap:new Map,expertColumnMap:new Map,expertTableData:[],expertCurrentPage:1,expertCurrentNum:5,leaderExpertName:"",expertLabel2:{},expertShowTable2:[],totalExpertNum2:0,expertDictMap2:new Map,expertColumnMap2:new Map,expertTableData2:[],expertCurrentPage2:1,expertCurrentNum2:5,normalExpertName:"",expertLabel3:{},expertShowTable3:[],totalExpertNum3:0,expertDictMap3:new Map,expertColumnMap3:new Map,expertTableData3:[],expertCurrentPage3:1,expertCurrentNum3:5,goodExpertName:"",isShowFilter:!1,expertGood:[],normalExpert:[],finalFileData:{},expert:{expertType1:"",expertType2:"",expertType3:""},itemMap:new Map,showExpectDialog:!1,activeName:"first",autoSelectExpertParam:{leaderMajor:"",expertMajor:[{major:"",num:1}],goodExpertNum:1},expertMajorDict:[],selectedExpertLeader:[],selectedExpert:[],selectedGootExpert:[],selectedExpertLable:{},selectedExpertDictMap:new Map,selectedExpertColumnMap:new Map,showSelectExpertResult:!1,totalArr:[],itemSpeciality:"",fileList3:[],fileList2:[],showSelectExpertResult2:!1,showHasSelectedExpert:!1,hasSelectedExpertInfoShow:[],userId:"",token:""}},components:{querys:u["a"],SelectTree:n["a"],ItemAddCom:p["default"]},created:function(){this.tableHeight=window.innerHeight-235},mounted:function(){this.getItemLabelSearch(),this.getItemLabel(),this.getTable(1,20),this.getExpertMajorDict(),this.userId=sessionStorage.getItem("userId"),this.token=sessionStorage.getItem("token")},watch:{deptCode:function(){this.param.deptCode=this.deptCode,this.getTable(this.currentPage,this.currentNum)}},computed:Object(s["a"])({},Object(i["b"])([])),methods:{changeFile:function(e){this.fileType=e.name.split(".")[1],this.fileTypeList.push(this.fileType),console.log(this.fileTypeList)},handleRemove:function(e,t){this.fileTypeList=[];for(var a=0;a<t.length;a++){var l="";l=t[a].name.split(".")[1],this.fileTypeList.push(l)}console.log(this.fileTypeList)},getValue:function(e){this.deptCode=e},tableLoad:function(e,t,a){var l=this,r={parentItemId:e.itemId};Object(c["nb"])(r).then((function(e){if(e.data.successful){var t=e.data.resultValue;t.forEach((function(e){e.isChild=!0})),console.log(t);var r=l.getShowDateTable(t,l.dictMap,l.columnTypeMap);a(r)}}))},isChildren:function(e){return!e.isChild},getItemLabelSearch:function(){var e=this;Object(c["Vc"])().then((function(t){if(console.log("response",t),t.data.successful){t.data.resultValue.tableLable;e.selectParamDict.set("voltLevel",t.data.resultValue.voltCodeList),e.selectParamDict.set("itemLevel",t.data.resultValue.itemLevelList),e.selectParamDict.set("itemSource",t.data.resultValue.itemSourceList),e.selectParamDict.set("itemPhaseDet",t.data.resultValue.itemPhaseDet),e.$forceUpdate()}}))},getTreeDeptCode:function(){var e=this;Object(c["jc"])().then((function(t){var a=t.data.resultValue;Object(c["hc"])().then((function(t){console.log(t),t.data.successful&&(e.valueId=a,e.deptArr=t.data.resultValue)}))}))},showHasSelectedExpertDialog:function(e){var t=this;t.showHasSelectedExpert=!0,Object(c["yb"])({itemId:e.itemId}).then((function(e){e.data.successful&&(console.log(e),t.hasSelectedExpertInfoShow=e.data.resultValue)}))},submitSelectExpert:function(){var e=this,t=[],a={};a.expertId=e.selectProfessorArr.groupLeader,a.isLeader=1,a.feaAuditid=e.tempFeaAuditid,a.itemId=e.tempItemId,t.push(a),e.selectProfessorArr.reviewUsers.forEach((function(a){var l={};l.expertId=a,l.isLeader=2,l.feaAuditid=e.tempFeaAuditid,l.itemId=e.tempItemId,t.push(l)})),"undefined"!=typeof e.selectProfessorArr.expectUsers&&e.selectProfessorArr.expectUsers.forEach((function(a){var l={};l.expertId=a,l.isLeader=3,l.feaAuditid=e.tempFeaAuditid,l.itemId=e.tempItemId,t.push(l)})),e.sureBtn1=!0,Object(c["vd"])(t).then((function(t){e.sureBtn1=!1,t.data.successful?(e.$message({showClose:!0,message:"选择专家成功",type:"success"}),e.getTable(e.currentPage,e.currentNum),e.selectProfessorArrShow={groupLeader:[],reviewUsers:[],expectUsers:[]},e.$refs.selectExpert2.clearSelection(),e.$refs.selectExpert3.clearSelection(),e.selectProfessorArr={groupLeader:"",reviewUsers:[],expectUsers:[]},e.showSelectExpertResult2=!1,e.showExpectDialog=!1):e.$message({showClose:!0,message:"选择专家失败",type:"error"})}))},cancleSelectExpert:function(){var e=this;e.$refs.selectExpert2.clearSelection(),e.$refs.selectExpert3.clearSelection(),e.selectProfessorArr={groupLeader:"",reviewUsers:[],expectUsers:[]},e.showExpectDialog=!1},cancleShowSelectExpertResult:function(){var e=this;e.selectProfessorArrShow={groupLeader:[],reviewUsers:[],expectUsers:[]},e.$refs.selectExpert2.clearSelection(),e.$refs.selectExpert3.clearSelection(),e.selectProfessorArr={groupLeader:"",reviewUsers:[],expectUsers:[]},e.showSelectExpertResult2=!1},replaceNum:function(e,t){var a=this;e+="",(e<0||e.indexOf(".")>0)&&(a.autoSelectExpertParam.expertMajor[t].num=1)},replaceNum1:function(e){var t=this;e+="",(e<0||e.indexOf(".")>0)&&(t.autoSelectExpertParam.goodExpertNum=1)},getExpertMajorDict:function(){var e=this,t=this;Object(c["sb"])({codeValue:"professional"}).then((function(a){if(a.data.successful)for(var l=a.data.resultValue,r=0;r<l.length;r++){var o=l[r];"professional"!=o.codeValue&&"0007"!=o.codeValue&&"0008"!=o.codeValue&&"0006"!=o.codeValue&&t.expertMajorDict.push(o)}else e.$message.error("查询专家专业失败")}))},getProfessionalStr:function(e){for(var t=this,a=0;a<t.expertMajorDict.length;a++){var l=t.expertMajorDict[a];if(l.codeValue==e)return l.codeName}},submitAutoSelectExpert:function(){var e=this,t=this;t.sureBtn2=!0,Object(c["fd"])(t.totalArr).then((function(a){t.sureBtn2=!1,a.data.successful?(e.$message.success("保存成功"),t.showSelectExpertResult=!1,t.getTable(t.currentPage,t.currentNum)):e.$message.error("保存失败")}))},autoSelectExpert:function(){var e=this;console.log(e.autoSelectExpertParam);var t=[],a={type:1};if(a.professional=e.autoSelectExpertParam.leaderMajor,""==e.autoSelectExpertParam.leaderMajor)return e.$message({showClose:!0,message:"请选择组长专业",type:"warning"}),!1;a.professionalStr=e.getProfessionalStr(e.autoSelectExpertParam.leaderMajor),a.itemId=e.tempItemId,a.feaAuditId=e.tempFeaAuditid,t.push(a);var l={type:3};l.count=e.autoSelectExpertParam.goodExpertNum,l.itemId=e.tempItemId,l.feaAuditId=e.tempFeaAuditid,t.push(l);for(var r=0;r<e.autoSelectExpertParam.expertMajor.length;r++){var o=e.autoSelectExpertParam.expertMajor[r],s={type:2};if(s.professional=o.major,""==s.professional)return e.$message({showClose:!0,message:"请选择专家专业",type:"warning"}),!1;if(s.professionalStr=e.getProfessionalStr(o.major),s.count=o.num,s.count<1)return e.$message({showClose:!0,message:"专家人数要大于0",type:"warning"}),!1;s.itemId=e.tempItemId,s.feaAuditId=e.tempFeaAuditid,t.push(s)}e.autoLoading=!0,Object(c["k"])(t).then((function(t){if(e.autoLoading=!1,t.data.successful){e.showExpectDialog=!1,e.showSelectExpertResult=!0;var a=t.data.resultValue.tableLable.items;e.selectedExpertLable=e.getLabelList(a),e.selectedExpertDictMap=e.getDictArr(a),e.selectedExpertColumnMap=e.getColumnTypeArr(a);var l=t.data.resultValue.tableData;e.totalArr=[];for(var r=0;r<l.length;r++)for(var o=l[r],s=0;s<o.expertsList.length;s++)e.totalArr=e.totalArr.concat(o.expertsList[s]);for(var i=[],n=[],c=[],u=0;u<e.totalArr.length;u++){var p=e.totalArr[u];1==p.isLeader?i.push(p):3==p.isLeader?c.push(p):2==p.isLeader&&n.push(p)}e.selectedExpertLeader=e.getShowDateTable(i,e.selectedExpertDictMap,e.selectedExpertColumnMap),e.selectedExpert=e.getShowDateTable(n,e.selectedExpertDictMap,e.selectedExpertColumnMap),e.selectedGootExpert=e.getShowDateTable(c,e.selectedExpertDictMap,e.selectedExpertColumnMap)}else{var d=t.data.resultHint;e.$message({showClose:!0,message:"选择专家失败 "+d,dangerouslyUseHTMLString:!0,type:"error"})}}))},removeDomain:function(e){var t=this.autoSelectExpertParam.expertMajor.indexOf(e);-1!==t&&this.autoSelectExpertParam.expertMajor.splice(t,1)},addDomain:function(){var e=this;e.autoSelectExpertParam.expertMajor.push({major:"",num:1})},getRowKeys:function(e){return e.expertId},handleSizeExpert1:function(e){this.expertCurrentNum=e,this.getGroupLeader(this.expertCurrentPage,e)},handleCurrentExpert1:function(e){console.log("当前页: ".concat(e)),this.expertCurrentPage=e,this.getGroupLeader(e,this.expertCurrentNum)},handleSizeExpert2:function(e){this.expertCurrentNum2=e,this.getGroupLeader(this.expertCurrentPage,e)},handleCurrentExpert2:function(e){console.log("当前页: ".concat(e)),this.expertCurrentPage2=e,this.getGroupLeader2(e,this.expertCurrentNum2)},handleSizeExpert3:function(e){this.expertCurrentNum3=e,this.getGroupLeader(this.expertCurrentPage,e)},handleCurrentExpert3:function(e){console.log("当前页: ".concat(e)),this.expertCurrentPage3=e,this.getGroupLeader3(e,this.expertCurrentNum3)},selectItem:function(){this.currentPage=1,this.getTable(1,this.currentNum)},resetItem:function(){var e=this;e.param={pageIndex:1,pageSize:20,deptCode:"",itemType:"",isPassed:0,speciality:"",itemPhaseDet:""},this.getTable(this.currentPage,20)},getItemLabel:function(){var e=this;Object(c["Kb"])().then((function(t){if(console.log("response",t),t.data.successful){var a=t.data.resultValue.tableLable;e.itemMap=e.getDictArr(a)}}))},confirmSubmitFinalFile:function(){if(!this.auditFileNo)return this.$message({showClose:!0,message:"请输入项目可研评审文号",type:"warning"}),!1;if(""==this.fileTypeList||void 0==this.fileTypeList)return this.$message({showClose:!0,message:"请上传格式为ceb或者pdf的文件",type:"warning"}),!1;for(var e=0;e<this.fileTypeList.length;e++)if("ceb"!=this.fileTypeList[e]&&"pdf"!=this.fileTypeList[e]&&"CEB"!=this.fileTypeList[e]&&"PDF"!=this.fileTypeList[e])return this.$message({showClose:!0,message:"只能上传格式为ceb或者pdf的文件",type:"warning"}),!1;this.finalFileData.auditFileNo=this.auditFileNo,this.$refs.uploadFile.submit()},uploadSuccess:function(e){var t=this;if(t.fileLoading=!1,e.successful){t.$message({showClose:!0,message:"上传正式评审文件成功",type:"success"}),t.dialogFormVisible=!1,t.getTable(t.currentPage,t.currentNum);var a=[],l={};l.content=e.resultValue.itemName+"项目，已经上传正式评审文件，评审文号 "+e.resultValue.auditFileNo,l.noticeUser=e.resultValue.createor,a.push(l),Object(m["g"])(a).then((function(e){console.log(e)}));var r=t.finalFileData.itemId;if("01"==t.finalFileData.itemLevel)console.log("调用国电通编码器"),Object(c["H"])({itemId:r}).then((function(e){if(e.data.successful){var a=e.data.resultValue;console.log(a),Object(d["a"])(a).then((function(e){console.log(e);var a=e.data.status;if(-1!=a.indexOf("200"))t.$message.error("调用编码器失败,权限校验失败");else if(-1!=a.indexOf("100")){var l=e.data.applyResult,o=l[0];if(-1!=o.status.indexOf("100")){var s=o.baseCode;Object(c["Vd"])({itemId:r,code:s}).then((function(e){e.data.successful&&t.$message.success("编码成功")}))}else if(-1!=o.status.indexOf("200")){var i="";for(var n in o.applyResult)i=o.applyResult[n];t.$message.error(i)}}}))}}));else if("02"==t.finalFileData.itemLevel){var o={parentItemId:r};Object(c["nb"])(o).then((function(e){if(e.data.successful)for(var a=e.data.resultValue,l=function(e){var l=a[e];console.log("调用国电通编码器"),Object(c["H"])({itemId:l.itemId}).then((function(e){if(e.data.successful){var a=e.data.resultValue;console.log(a),Object(d["a"])(a).then((function(e){console.log(e);var a=e.data.status;if(-1!=a.indexOf("200"))console.log("调用编码器失败,权限校验失败");else if(-1!=a.indexOf("100")){var r=e.data.applyResult,o=r[0];if(-1!=o.status.indexOf("100")){var s=o.baseCode;Object(c["Vd"])({itemId:l.itemId,code:s}).then((function(e){e.data.successful&&t.$message.success("编码成功")}))}else if(-1!=o.status.indexOf("200")){var i="";for(var n in o.applyResult)i=o.applyResult[n];console.log(i)}}}))}}))},r=0;r<a.length;r++)l(r)}))}}else t.$message({showClose:!0,message:"提交评审上传正式评审文件失败",type:"error"})},switchFilter:function(){this.isShowFilter=!this.isShowFilter},submitAdviceXC:function(){var e=this;e.submitXCLoading=!0,Object(c["Sd"])(e.submitAdvice).then((function(t){e.submitXCLoading=!1,t.data.successful?(e.$message({showClose:!0,message:"提交评审意见成功",type:"warning"}),e.dialogFormVisible=!1,e.getTable(e.currentPage,e.currentNum)):e.$message({showClose:!0,message:"提交评审意见失败",type:"warning"})}))},downloadAdviceFile:function(){var e=this;Object(c["R"])().then((function(t){var a="评审意见信息模版";e.loading=!1,console.log("download res",t);var l=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),r=document.createElement("a"),o=window.URL.createObjectURL(l);r.href=o,r.download=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)}))},uploadAdviceSuccess:function(e){var t=this;if(e.successful)t.submitAdvice.auditFileId=e.resultValue.auditFileId,this.$message({showClose:!0,message:"上传成功",type:"success"});else{var a=e.resultHint;this.$message({showClose:!0,message:"上传失败 "+a,dangerouslyUseHTMLString:!0,type:"error"})}},selectExpect:function(){var e=this;return console.log(e.selectProfessorArr),""==e.selectProfessorArr.groupLeader||void 0==e.selectProfessorArr.groupLeader?(e.$message({showClose:!0,message:"请选择组长",type:"warning"}),!1):""==e.selectProfessorArr.reviewUsers||void 0==e.selectProfessorArr.reviewUsers?(e.$message({showClose:!0,message:"请选择评审技术专家",type:"warning"}),!1):(console.log(e.selectProfessorArr.expectUsers),""==e.selectProfessorArr.expectUsers||void 0==e.selectProfessorArr.expectUsers?(e.$message({showClose:!0,message:"请选择评审技经专家",type:"warning"}),!1):void(e.showSelectExpertResult2=!0))},getCurrentRow:function(e){var t=this;t.selectProfessorArr.groupLeader=e.expertId,t.selectProfessorArrShow.groupLeader=[],t.selectProfessorArrShow.groupLeader=t.selectProfessorArrShow.groupLeader.concat(e)},handleSelectionChangeReview:function(e){for(var t=this,a=[],l=0;l<e.length;l++)a.push(e[l].expertId);t.selectProfessorArr.reviewUsers=a,t.selectProfessorArrShow.reviewUsers=[],t.selectProfessorArrShow.reviewUsers=t.selectProfessorArrShow.reviewUsers.concat(e)},handleSelectionChangeExpect:function(e){for(var t=this,a=[],l=0;l<e.length;l++)a.push(e[l].expertId);t.selectProfessorArr.expectUsers=a,t.selectProfessorArrShow.expectUsers=[],t.selectProfessorArrShow.expectUsers=t.selectProfessorArrShow.expectUsers.concat(e)},changeStatus:function(e){this.showDrawer=e,console.log("status"+e)},showItemInfo:function(e){this.showData.itemId=e.itemId,this.showData.phash=0,this.showDrawer=!0,this.timer=(new Date).getTime()},showOperation:function(e){console.log(e),this.dialogFormVisible=!0,this.dialogTitle=e},handleSelectionChange:function(e){var t=this;t.delData={ids:[]},e.forEach((function(e,a){t.delData.ids.push(e.dmdId)}))},submitForm:function(e){var t=this,a=this;a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var l={items:[]};console.log(a.lableList);var r={};a.lableList.forEach((function(e,t){r[e.colDname]=e.value})),l.items.push(r),a.dialogFormVisible=!1,a.loading=!0,Object(c["pd"])(l).then((function(e){console.log(e),e.data.successful?(t.$message({showClose:!0,message:"添加成功",type:"success"}),a.getTable(a.currentPage,a.currentNum)):t.$message({showClose:!0,message:"添加失败",type:"error"}),a.loading=!1}))}))},getGroupLeader:function(e,t){var a=this,l={};l.pageIndex=e,l.pageSize=t,""!=a.leaderExpertName&&(l.filter="expertName="+a.leaderExpertName),Object(c["vb"])(l).then((function(e){a.totalExpertNum=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.expertLabel=a.getLabelList(t),a.expertDictMap=a.getDictArr(t),a.expertColumnMap=a.getColumnTypeArr(t),a.expertTableData=e.data.resultValue.tableData,a.expertShowTable=a.getShowDateTable(a.expertTableData,a.expertDictMap,a.expertColumnMap)}))},getGroupLeader2:function(e,t){var a=this,l={};l.pageIndex=e,l.pageSize=t,""!=a.normalExpertName&&(l.filter="expertName="+a.normalExpertName),Object(c["wb"])(l).then((function(e){a.totalExpertNum2=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.expertLabel2=a.getLabelList(t),a.expertDictMap2=a.getDictArr(t),a.expertColumnMap2=a.getColumnTypeArr(t),a.expertTableData2=e.data.resultValue.tableData,a.expertShowTable2=a.getShowDateTable(a.expertTableData2,a.expertDictMap2,a.expertColumnMap2)}))},getGroupLeader3:function(e,t){var a=this,l={};l.pageIndex=e,l.pageSize=t,""!=a.goodExpertName&&(l.filter="expertName="+a.goodExpertName),Object(c["xb"])(l).then((function(e){a.totalExpertNum3=e.data.resultValue.totalNum;var t=e.data.resultValue.tableLable;a.expertLabel3=a.getLabelList(t),a.expertDictMap3=a.getDictArr(t),a.expertColumnMap3=a.getColumnTypeArr(t),a.expertTableData3=e.data.resultValue.tableData,a.expertShowTable3=a.getShowDateTable(a.expertTableData3,a.expertDictMap3,a.expertColumnMap3)}))},showDialog:function(e){var t=this;t.dialogLoading=!0,"9"==e.itemPhaseDetT?(t.showExpectDialog=!0,t.tempItemId=e.itemId,t.tempFeaAuditid=e.feaAuditid,t.getGroupLeader(1,5),t.getGroupLeader2(1,5),t.getGroupLeader3(1,5),t.autoSelectExpertParam={leaderMajor:"",expertMajor:[{major:"",num:1}],goodExpertNum:1},t.selectProfessorArr={}):"18"==e.itemPhaseDetT?(t.itemSpeciality=e.specialityT,t.dialogFormVisible=!0,t.dialogTitle="提交现场评审意见",t.fileList2=[],t.dialogShowType="2",t.submitAdvice={checkAdvice:"",auditFileId:"",id:"",agreeType:"",auditType:"0",itemId:""},t.submitAdvice.itemId=e.itemId,t.submitAdvice.id=e.feaAuditid):"15"!=e.itemPhaseDetT&&"20"!=e.itemPhaseDetT||(t.dialogFormVisible=!0,t.dialogTitle="上传正式评审文件",t.dialogShowType="3",t.fileList3=[],t.auditFileNo="",t.fileTypeList=[],t.fileType="",console.log(t.auditFileNo),t.finalFileData={itemId:e.itemId,itemPhaseDet:e.itemPhaseDetT,auditFileNo:t.auditFileNo,itemLevel:e.itemLevel})},handleSizeChange:function(e){this.currentNum=e,this.getTable(this.currentPage,e)},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.getTable(e,this.currentNum)},getTable:function(e,t){var a=this;a.loading=!0;var l={};l.index=e,l.pageSize=t,0==a.param.isPassed?l.itemPhaseDet="9,15,18,20":l.itemPhaseDet=a.param.itemPhaseDet,l.itemName=a.param.itemName,l.createOrg=a.param.deptCode,l.itemLevel=a.param.itemLevel,l.speciality=a.param.speciality,Object(c["Mc"])(l).then((function(e){if(console.log("response",e),e.data.successful){a.totalNum=e.data.resultValue.totalNum,a.tableLabel=e.data.resultValue.tableLable;var t=e.data.resultValue.tableLable;a.tableLabel=a.getLabelList(t),a.dictMap=a.getDictArr(t),a.columnTypeMap=a.getColumnTypeArr(t),a.tableData=e.data.resultValue.tableData,a.tableShowData=a.getShowDateTable(a.tableData,a.dictMap,a.columnTypeMap)}a.loading=!1})).catch((function(e){console.log(e)}))},getShowDateTable:function(e,t,a){for(var l=this,r=[],s=0;s<e.length;s++){for(var i=e[s],n=new Object,c=0,u=Object.entries(i);c<u.length;c++){var p=Object(o["a"])(u[c],2),d=p[0],m=p[1];if("itemPhaseDet"==d&&(n["itemPhaseDetT"]=m),"speciality"==d&&(n["specialityT"]=m),t.has(d))for(var h=t.get(d),g=0;g<h.length;g++){var f=h[g];f.codeValue==m&&(n[d]=f.codeName)}else if("DATE"==a.get(d)){n[d+"Rel"]=m;var b=l.formartDate(m);n[d]=b}else n[d]=m}r.push(n)}return r},getDictArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];null!=l.codeList&&t.set(l.colDname,l.codeList)}return t},getColumnTypeArr:function(e){for(var t=new Map,a=0;a<e.length;a++){var l=e[a];t.set(l.colDname,l.colType)}return t},getLabelList:function(e){var t=this;e.forEach((function(e){t.$set(e,"value","")}));var a={};for(var l in e)a[l]=e[l];return a},formartDate:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,r=t.getDate();return a+"-"+this.add0(l)+"-"+this.add0(r)},add0:function(e){return e<10?"0"+e:e}}},g=h,f=(a("61d1"),a("684a"),a("2877")),b=Object(f["a"])(g,l,r,!1,null,"4a4885d6",null);t["default"]=b.exports},"61d1":function(e,t,a){"use strict";var l=a("d159"),r=a.n(l);r.a},"684a":function(e,t,a){"use strict";var l=a("b298"),r=a.n(l);r.a},b298:function(e,t,a){},d159:function(e,t,a){}}]);
//# sourceMappingURL=chunk-08b88974.56f1b6df.js.map